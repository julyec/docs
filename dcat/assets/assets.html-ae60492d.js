import{_ as n}from"./plugin-vue_export-helper-c27b6911.js";import{o as s,c as a,e as t}from"./app-c17653d8.js";const e={},p=t(`<h1 id="静态资源加载" tabindex="-1"><a class="header-anchor" href="#静态资源加载" aria-hidden="true">#</a> 静态资源加载</h1><p><code>Dcat Admin</code>支持了<code>js</code>脚本按需加载的功能，开发者只需在控制器中或其他任意位置（包括<code>view</code>）中引入需要用到的<code>js</code>组件即可，而无需在项目初始化时引入所有的<code>js</code>组件。</p><h3 id="更改静态资源域名" tabindex="-1"><a class="header-anchor" href="#更改静态资源域名" aria-hidden="true">#</a> 更改静态资源域名</h3><p>打开配置文件<code>config/admin.php</code>，找到<code>assets_server</code>参数进行更改即可；也可以在<code>.env</code>中加上</p><div class="language-dotenv line-numbers-mode" data-ext="dotenv"><pre class="language-dotenv"><code>ADMIN_ASSETS_SERVER=http://xxx.com
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="注册路径别名" tabindex="-1"><a class="header-anchor" href="#注册路径别名" aria-hidden="true">#</a> 注册路径别名</h3><p>打开<code>app/Admin/bootstrap.php</code>，然后加入以下代码</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token class-name static-context">Admin</span><span class="token operator">::</span><span class="token function">asset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">alias</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;@my-name1&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;assets/admin1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name static-context">Admin</span><span class="token operator">::</span><span class="token function">asset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">alias</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;@my-name2&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;assets/admin2&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 也可以批量注册</span>
<span class="token class-name static-context">Admin</span><span class="token operator">::</span><span class="token function">asset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">alias</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
	<span class="token string single-quoted-string">&#39;@my-name1&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;assets/admin1&#39;</span><span class="token punctuation">,</span>
	<span class="token string single-quoted-string">&#39;@my-name2&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;assets/admin2&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用别名</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token class-name static-context">Admin</span><span class="token operator">::</span><span class="token function">js</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;@my-name1/index.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name static-context">Admin</span><span class="token operator">::</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;@my-name1/index.css&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="注册组件" tabindex="-1"><a class="header-anchor" href="#注册组件" aria-hidden="true">#</a> 注册组件</h3><p>当某个组件的<code>js</code>和<code>css</code>文件比较多的话，我们可以把这些静态资源文件统一注册成一个组件，这样使用的时候会更方便。打开<code>app/Admin/bootstrap.php</code>，然后加入以下代码</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token class-name static-context">Admin</span><span class="token operator">::</span><span class="token function">asset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">alias</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;@editor-md&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
	<span class="token string single-quoted-string">&#39;js&#39;</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>
		<span class="token comment">// 支持使用路径别名</span>
		<span class="token string single-quoted-string">&#39;@admin/dcat/plugins/editor-md/lib/raphael.min.js&#39;</span><span class="token punctuation">,</span>
		<span class="token string single-quoted-string">&#39;@admin/dcat/plugins/editor-md/lib/marked.min.js&#39;</span><span class="token punctuation">,</span>
		<span class="token string single-quoted-string">&#39;@admin/dcat/plugins/editor-md/lib/prettify.min.js&#39;</span><span class="token punctuation">,</span>
		<span class="token string single-quoted-string">&#39;@admin/dcat/plugins/editor-md/lib/jquery.flowchart.min.js&#39;</span><span class="token punctuation">,</span>
		<span class="token string single-quoted-string">&#39;@admin/dcat/plugins/editor-md/editormd.min.js&#39;</span><span class="token punctuation">,</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token string single-quoted-string">&#39;css&#39;</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>
		<span class="token string single-quoted-string">&#39;@admin/dcat/plugins/editor-md/css/editormd.preview.min.css&#39;</span><span class="token punctuation">,</span>
		<span class="token string single-quoted-string">&#39;@admin/dcat/extra/markdown.css&#39;</span><span class="token punctuation">,</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token class-name static-context">Admin</span><span class="token operator">::</span><span class="token function">requireAssets</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;@editor-md&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>如果你只需要加载这个组件的<code>js</code>或<code>css</code>，并不想加载所有文件，那么可以用以下方法</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token comment">// 只加载js文件</span>
<span class="token class-name static-context">Admin</span><span class="token operator">::</span><span class="token function">js</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;@editor-md&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 只加载css文件</span>
<span class="token class-name static-context">Admin</span><span class="token operator">::</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;@editor-md&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用动态参数</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Dcat<span class="token punctuation">\\</span>Admin<span class="token punctuation">\\</span>Admin</span><span class="token punctuation">;</span>

<span class="token comment">// 注册前端组件别名</span>
<span class="token comment">// {lang} 为动态参数</span>
<span class="token class-name static-context">Admin</span><span class="token operator">::</span><span class="token function">asset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">alias</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;@test&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token string single-quoted-string">&#39;js&#39;</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;/vendor/test/js/{lang}.min.js&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// {lang} 会被替换为 zh_CN</span>
<span class="token class-name static-context">Admin</span><span class="token operator">::</span><span class="token function">requireAssets</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;@test&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;lang&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;zh_CN&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 也可以这样使用</span>
<span class="token class-name static-context">Admin</span><span class="token operator">::</span><span class="token function">requireAssets</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;@test?lang=zh_CN&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="加载js脚本" tabindex="-1"><a class="header-anchor" href="#加载js脚本" aria-hidden="true">#</a> 加载js脚本</h3><p><code>Admin::js</code>方法可以引入<code>js</code>脚本，使用如下：</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token keyword">class</span> <span class="token class-name-definition class-name">UserController</span> extend Controller
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">index</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name static-context">Admin</span><span class="token operator">::</span><span class="token function">js</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;/assets/js/index.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token class-name static-context">Admin</span><span class="token operator">::</span><span class="token function">js</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
            <span class="token string single-quoted-string">&#39;/assets/js/index2.js&#39;</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="加载css脚本" tabindex="-1"><a class="header-anchor" href="#加载css脚本" aria-hidden="true">#</a> 加载css脚本</h3><p><code>Admin::css</code>方法可以引入<code>css</code>脚本，使用如下：</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token keyword">class</span> <span class="token class-name-definition class-name">UserController</span> extend Controller
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">index</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name static-context">Admin</span><span class="token operator">::</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;/assets/css/index.css&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token class-name static-context">Admin</span><span class="token operator">::</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
            <span class="token string single-quoted-string">&#39;/assets/css/index2.css&#39;</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="动态添加js代码" tabindex="-1"><a class="header-anchor" href="#动态添加js代码" aria-hidden="true">#</a> 动态添加js代码</h3><p><code>Admin::script</code>方法可以动态添加<code>js</code>代码，使用如下：</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code>    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">index</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name static-context">Admin</span><span class="token operator">::</span><span class="token function">script</span><span class="token punctuation">(</span>
            <span class="token operator">&lt;&lt;</span><span class="token operator">&lt;</span><span class="token constant">JS</span>
    console<span class="token operator">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;Hello world!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">JS</span>            
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="动态添加css代码" tabindex="-1"><a class="header-anchor" href="#动态添加css代码" aria-hidden="true">#</a> 动态添加css代码</h3><p><code>Admin::style</code>方法可以动态添加<code>css</code>代码，使用如下：</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code>    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">index</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name static-context">Admin</span><span class="token operator">::</span><span class="token function">style</span><span class="token punctuation">(</span>
            <span class="token operator">&lt;&lt;</span><span class="token operator">&lt;</span><span class="token constant">CSS</span>
    body <span class="token punctuation">{</span>
        color<span class="token punctuation">:</span> <span class="token comment">#333;</span>
    <span class="token punctuation">}</span>
<span class="token constant">CSS</span>            
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="在模板中引入静态资源" tabindex="-1"><a class="header-anchor" href="#在模板中引入静态资源" aria-hidden="true">#</a> 在模板中引入静态资源</h3><p>在模板中手动引入静态资源需要使用<code>admin_asset</code>函数：</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code>// 引入css
&lt;link rel=&quot;stylesheet&quot; href=&quot;{{ admin_asset(&quot;vendor/dcat-admin/dcat-admin/main.min.css&quot;) }}&quot;&gt;

// 引入js
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{ admin_asset(&#39;vendor/dcat-admin/dcat-admin/main.min.js&#39;)}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="在模板中添加js代码" tabindex="-1"><a class="header-anchor" href="#在模板中添加js代码" aria-hidden="true">#</a> 在模板中添加js代码</h3><p>要在模板中添加的<code>js</code>代码需要放在<code>Dcat.ready</code>方法内执行，这样才能保证你的<code>js</code>代码在所有<code>js</code>脚本加载完成之后执行。</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
Dcat<span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;所有js都加载完成了&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,37),c=[p];function i(o,l){return s(),a("div",null,c)}const r=n(e,[["render",i],["__file","assets.html.vue"]]);export{r as default};
