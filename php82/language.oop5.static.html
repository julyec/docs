<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=UTF-8">
  <title>静态（static）关键字</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="language.oop5.paamayim-nekudotayim.html">? 范围解析操作符 （::）</a></li>
      <li style="float: right;"><a href="language.oop5.abstract.html">抽象类 ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="language.oop5.html">类与对象</a></li>
    <li>静态（static）关键字</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="language.oop5.static" class="sect1">
  <h2 class="title">静态（static）关键字</h2>

  <div class="tip"><strong class="tip">Tip</strong>
   <p class="simpara">
    本页说明了用 <code class="literal">static</code> 关键字来定义静态方法和属性。<code class="literal">static</code>
    也可用于<a href="language.variables.scope.html#language.variables.scope.static" class="link">定义静态变量</a>，
    <a href="functions.anonymous.html#functions.anonymous-functions.static" class="link">静态匿名函数</a>
    以及<a href="language.oop5.late-static-bindings.html" class="link">后期静态绑定</a>。参见上述页面了解
    <code class="literal">static</code> 在其中的用法。
   </p>
  </div>

  <p class="para">   
   声明类属性或方法为静态，就可以不实例化类而直接访问。可以在实例化的类对象中通过静态访问。
  </p>

  <div class="sect2" id="language.oop5.static.methods">
   <h3 class="title">静态方法</h3>

   <p class="para">
   由于静态方法不需要通过对象即可调用，所以伪变量 <var class="varname">$this</var> 在静态方法中不可用。
  </p>

   <div class="warning"><strong class="warning">Warning</strong>
    <p class="para">
      用静态方式调用一个非静态方法会抛出 <span class="classname"><a href="class.error.html" class="classname">Error</a></span>。
    </p>
    <p class="para">
     在 PHP 8.0.0 之前，通过静态方式调用一个非静态方法这种用法已经被废弃，并且会导致一个
     <strong><code>E_DEPRECATED</code></strong> 级别的警告。
    </p>
   </div>

  <div class="example" id="example-490">
   <p><strong>Example #1 静态方法示例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">class </span><span style="color: #0000BB">Foo </span><span style="color: #007700">{<br />    public static function </span><span style="color: #0000BB">aStaticMethod</span><span style="color: #007700">() {<br />        </span><span style="color: #FF8000">// ...<br />    </span><span style="color: #007700">}<br />}<br /><br /></span><span style="color: #0000BB">Foo</span><span style="color: #007700">::</span><span style="color: #0000BB">aStaticMethod</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$classname </span><span style="color: #007700">= </span><span style="color: #DD0000">'Foo'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$classname</span><span style="color: #007700">::</span><span style="color: #0000BB">aStaticMethod</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

   </div>
  </div>

  <div class="sect2" id="language.oop5.static.properties">
   <h3 class="title">静态属性</h3>

   <p class="para">
    静态属性使用 <a href="language.oop5.paamayim-nekudotayim.html" class="link">范围解析操作符</a>
    （ <code class="literal">::</code> ）访问，不能通过对象操作符（ <code class="literal">-&gt;</code> ）访问。
   </p>

   <p class="para">
    通过变量来引用一个类是可行的，但这个变量的值不能是一个保留字
    （例如<code class="literal">self</code>，<code class="literal">parent</code>和
    <code class="literal">static</code>）
   </p>

   <div class="example" id="example-492">
    <p><strong>Example #2 静态属性示例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">class </span><span style="color: #0000BB">Foo<br /></span><span style="color: #007700">{<br />    public static </span><span style="color: #0000BB">$my_static </span><span style="color: #007700">= </span><span style="color: #DD0000">'foo'</span><span style="color: #007700">;<br /><br />    public function </span><span style="color: #0000BB">staticValue</span><span style="color: #007700">() {<br />        return </span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">$my_static</span><span style="color: #007700">;<br />    }<br />}<br /><br />class </span><span style="color: #0000BB">Bar </span><span style="color: #007700">extends </span><span style="color: #0000BB">Foo<br /></span><span style="color: #007700">{<br />    public function </span><span style="color: #0000BB">fooStatic</span><span style="color: #007700">() {<br />        return </span><span style="color: #0000BB">parent</span><span style="color: #007700">::</span><span style="color: #0000BB">$my_static</span><span style="color: #007700">;<br />    }<br />}<br /><br /><br />print </span><span style="color: #0000BB">Foo</span><span style="color: #007700">::</span><span style="color: #0000BB">$my_static </span><span style="color: #007700">. </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$foo </span><span style="color: #007700">= new </span><span style="color: #0000BB">Foo</span><span style="color: #007700">();<br />print </span><span style="color: #0000BB">$foo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">staticValue</span><span style="color: #007700">() . </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />print </span><span style="color: #0000BB">$foo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">my_static </span><span style="color: #007700">. </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;      </span><span style="color: #FF8000">// 未定义的 "属性" my_static<br /><br /></span><span style="color: #007700">print </span><span style="color: #0000BB">$foo</span><span style="color: #007700">::</span><span style="color: #0000BB">$my_static </span><span style="color: #007700">. </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$classname </span><span style="color: #007700">= </span><span style="color: #DD0000">'Foo'</span><span style="color: #007700">;<br />print </span><span style="color: #0000BB">$classname</span><span style="color: #007700">::</span><span style="color: #0000BB">$my_static </span><span style="color: #007700">. </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br />print </span><span style="color: #0000BB">Bar</span><span style="color: #007700">::</span><span style="color: #0000BB">$my_static </span><span style="color: #007700">. </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$bar </span><span style="color: #007700">= new </span><span style="color: #0000BB">Bar</span><span style="color: #007700">();<br />print </span><span style="color: #0000BB">$bar</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fooStatic</span><span style="color: #007700">() . </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上示例在 PHP 8 中的输出类似于：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
foo
foo

Notice: Accessing static property Foo::$my_static as non static in /in/V0Rvv on line 23

Warning: Undefined property: Foo::$my_static in /in/V0Rvv on line 23

foo
foo
foo
foo
</pre></div>
    </div>
   </div>
  </div>
 </div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="125286""></a>
  <div class="note">
   <strong class="user">admin at shopinson dot com</strong>
   <a href="#125286" class="date">19-Aug-2020 01:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I used instantiation to access the access the a static property directly.<br />
<br />
A Simple ticky art, you may apply (using object to access static property in a class) with the scope resolution operator<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">Shopinson </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; const </span><span class="default">MY_CONSTANT </span><span class="keyword">= </span><span class="string">'the value of MY_CONSTANT '</span><span class="keyword">;<br />
}<br />
<br />
class </span><span class="default">Godwin </span><span class="keyword">extends </span><span class="default">Shopinson<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public static </span><span class="default">$myconstant </span><span class="keyword">= </span><span class="string">' The Paamayim Nekudotayim or double-colon.'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">SaySomething</span><span class="keyword">(){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="default">parent</span><span class="keyword">::</span><span class="default">MY_CONSTANT </span><span class="keyword">.</span><span class="default">PHP_EOL</span><span class="keyword">; </span><span class="comment">// outputs: the value of MY_CONSTANT<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">echo </span><span class="default">self</span><span class="keyword">::</span><span class="default">$myconstant</span><span class="keyword">; </span><span class="comment">// outputs: The Paamayim Nekudotayim or double-colon.<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">}<br />
}<br />
<br />
</span><span class="default">$my_class </span><span class="keyword">= new </span><span class="default">Godwin</span><span class="keyword">();<br />
print </span><span class="default">$my_class</span><span class="keyword">::</span><span class="default">$myconstant</span><span class="keyword">;<br />
</span><span class="default">$my_class</span><span class="keyword">::</span><span class="default">SaySomething</span><span class="keyword">();<br />
echo </span><span class="default">Godwin</span><span class="keyword">::</span><span class="default">$myconstant</span><span class="keyword">;<br />
</span><span class="default">Godwin</span><span class="keyword">::</span><span class="default">SaySomething</span><span class="keyword">();<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
print $my_class::$myconstant;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="124947""></a>
  <div class="note">
   <strong class="user">fakhar_anwar123 at hotmail dot com</strong>
   <a href="#124947" class="date">26-Apr-2020 11:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Asnwer selcted as correct solves problem. There is a valid use case (Design Pattern) where class with static member function needs to call non-static member function and before that this static members should also instantiate singleton using constructor a constructor.<br />
<br />
**Case:**<br />
For example, I am implementing Swoole HTTP Request event providing it a call-back as a Class with static member. Static Member does two things; it creates Singleton Object of the class by doing initialization in class constructor, and second this static members does is to call a non-static method 'run()' to handle Request (by bridging with Phalcon). Hence, static class without constructor and non-static call will not work for me.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="123105""></a>
  <div class="note">
   <strong class="user">ASchmidt at Anamera dot net</strong>
   <a href="#123105" class="date">04-Sep-2018 07:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It is important to understand the behavior of static properties in the context of class inheritance:<br />
<br />
- Static properties defined in both parent and child classes will hold DISTINCT values for each class. Proper use of self:: vs. static:: are crucial inside of child methods to reference the intended static property.<br />
<br />
- Static properties defined ONLY in the parent class will share a COMMON value.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">declare(</span><span class="default">strict_types</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">);<br />
<br />
class </span><span class="default">staticparent </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; static&nbsp; &nbsp; </span><span class="default">$parent_only</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; static&nbsp; &nbsp; </span><span class="default">$both_distinct</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">__construct</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; static::</span><span class="default">$parent_only </span><span class="keyword">= </span><span class="string">'fromparent'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; static::</span><span class="default">$both_distinct </span><span class="keyword">= </span><span class="string">'fromparent'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
class </span><span class="default">staticchild </span><span class="keyword">extends </span><span class="default">staticparent </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; static&nbsp; &nbsp; </span><span class="default">$child_only</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; static&nbsp; &nbsp; </span><span class="default">$both_distinct</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">__construct</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; static::</span><span class="default">$parent_only </span><span class="keyword">= </span><span class="string">'fromchild'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; static::</span><span class="default">$both_distinct </span><span class="keyword">= </span><span class="string">'fromchild'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; static::</span><span class="default">$child_only </span><span class="keyword">= </span><span class="string">'fromchild'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">$a </span><span class="keyword">= new </span><span class="default">staticparent</span><span class="keyword">;<br />
</span><span class="default">$a </span><span class="keyword">= new </span><span class="default">staticchild</span><span class="keyword">;<br />
<br />
echo </span><span class="string">'Parent: parent_only='</span><span class="keyword">, </span><span class="default">staticparent</span><span class="keyword">::</span><span class="default">$parent_only</span><span class="keyword">, </span><span class="string">', both_distinct='</span><span class="keyword">, </span><span class="default">staticparent</span><span class="keyword">::</span><span class="default">$both_distinct</span><span class="keyword">, </span><span class="string">"&lt;br/&gt;\r\n"</span><span class="keyword">;<br />
echo </span><span class="string">'Child:&nbsp; parent_only='</span><span class="keyword">, </span><span class="default">staticchild</span><span class="keyword">::</span><span class="default">$parent_only</span><span class="keyword">, </span><span class="string">', both_distinct='</span><span class="keyword">, </span><span class="default">staticchild</span><span class="keyword">::</span><span class="default">$both_distinct</span><span class="keyword">, </span><span class="string">', child_only='</span><span class="keyword">, </span><span class="default">staticchild</span><span class="keyword">::</span><span class="default">$child_only</span><span class="keyword">, </span><span class="string">"&lt;br/&gt;\r\n"</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
will output:<br />
Parent: parent_only=fromchild, both_distinct=fromparent<br />
Child: parent_only=fromchild, both_distinct=fromchild, child_only=fromchild</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="122570""></a>
  <div class="note">
   <strong class="user">vinayak dot anivase at gmail dot com</strong>
   <a href="#122570" class="date">30-Mar-2018 06:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is also possible:<br />
<br />
class Foo {<br />
&nbsp; public static $bar = 'a static property';<br />
}<br />
<br />
$baz = (new Foo)::$bar;<br />
echo $baz;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="122525""></a>
  <div class="note">
   <strong class="user">artekpuck at gmail dot com</strong>
   <a href="#122525" class="date">19-Mar-2018 05:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It is worth mentioning that there is only one value for each static variable that is the same for all instances</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="118918""></a>
  <div class="note">
   <strong class="user">b1tchcakes</strong>
   <a href="#118918" class="date">27-Feb-2016 09:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">trait </span><span class="default">t </span><span class="keyword">{<br />
&nbsp; protected </span><span class="default">$p</span><span class="keyword">;<br />
&nbsp; public function </span><span class="default">testMe</span><span class="keyword">() {echo </span><span class="string">'static:'</span><span class="keyword">.static::class. </span><span class="string">' // self:'</span><span class="keyword">.</span><span class="default">self</span><span class="keyword">::class .</span><span class="string">"\n"</span><span class="keyword">;}<br />
}<br />
<br />
class </span><span class="default">a </span><span class="keyword">{ use </span><span class="default">t</span><span class="keyword">; }<br />
class </span><span class="default">b </span><span class="keyword">extends </span><span class="default">a </span><span class="keyword">{}<br />
<br />
echo (new </span><span class="default">a</span><span class="keyword">)-&gt;</span><span class="default">testMe</span><span class="keyword">();<br />
echo (new </span><span class="default">b</span><span class="keyword">)-&gt;</span><span class="default">testMe</span><span class="keyword">();<br />
<br />
</span><span class="default">outputs<br />
</span><span class="keyword">static:</span><span class="default">a </span><span class="comment">// self:t<br />
</span><span class="keyword">static:</span><span class="default">b </span><span class="comment">// self:t</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="118306""></a>
  <div class="note">
   <strong class="user">rahul dot anand77 at gmail dot com</strong>
   <a href="#118306" class="date">13-Nov-2015 10:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To check if a method declared in a class is static or not, you can us following code. PHP5 has a Reflection Class, which is very helpful. <br />
<br />
try {<br />
&nbsp;&nbsp;&nbsp; $method = new ReflectionMethod( 'className::methodName );<br />
&nbsp;&nbsp;&nbsp; if ( $method-&gt;isStatic() )<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // Method is static.<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
catch ( ReflectionException $e )<br />
{<br />
&nbsp;&nbsp;&nbsp; //&nbsp; &nbsp; method does not exist<br />
&nbsp;&nbsp;&nbsp; echo $e-&gt;getMessage();<br />
}<br />
<br />
*You can read more about Reflection class on <a href="http://php.net/manual/en/class.reflectionclass.php" rel="nofollow" target="_blank">http://php.net/manual/en/class.reflectionclass.php</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="118097""></a>
  <div class="note">
   <strong class="user">sideshowAnthony at googlemail dot com</strong>
   <a href="#118097" class="date">02-Oct-2015 07:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The static keyword can still be used (in a non-oop way) inside a function. So if you need a value stored with your class, but it is very function specific, you can use this:<br />
<br />
class aclass {<br />
&nbsp;&nbsp;&nbsp; public static function b(){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; static $d=12; // Set to 12 on first function call only<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $d+=12;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return "$d\n";<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
echo aclass::b(); //24<br />
echo aclass::b(); //36<br />
echo aclass::b(); //48<br />
echo aclass::$d; //fatal error</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113954""></a>
  <div class="note">
   <strong class="user">jkenigso at utk dot edu</strong>
   <a href="#113954" class="date">22-Dec-2013 12:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It bears mention that static variables (in the following sense) persist:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">StaticVars<br />
</span><span class="keyword">{<br />
&nbsp; public static </span><span class="default">$a</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">;<br />
}<br />
</span><span class="default">$b</span><span class="keyword">=new </span><span class="default">StaticVars</span><span class="keyword">;<br />
</span><span class="default">$c</span><span class="keyword">=new </span><span class="default">StaticVars</span><span class="keyword">;<br />
<br />
echo </span><span class="default">$b</span><span class="keyword">::</span><span class="default">$a</span><span class="keyword">; </span><span class="comment">//outputs 1<br />
</span><span class="default">$c</span><span class="keyword">::</span><span class="default">$a</span><span class="keyword">=</span><span class="default">2</span><span class="keyword">;<br />
echo </span><span class="default">$b</span><span class="keyword">::</span><span class="default">$a</span><span class="keyword">; </span><span class="comment">//outputs 2!<br />
</span><span class="default">?&gt;<br />
</span><br />
Note that $c::$a=2 changed the value of $b::$a even though $b and $c are totally different objects.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113708""></a>
  <div class="note">
   <strong class="user">manishpatel2280 at gmail dot com</strong>
   <a href="#113708" class="date">19-Nov-2013 02:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In real world, we can say will use static method when we dont want to create object instance. <br />
<br />
e.g ... <br />
<br />
validateEmail($email) {<br />
&nbsp;if(T) return true;<br />
return false;<br />
}<br />
<br />
//This makes not much sense<br />
$obj = new Validate();<br />
$result = $obj-&gt;validateEmail($email);<br />
<br />
//This makes more sense<br />
$result = Validate::validateEmail($email);</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113519""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#113519" class="date">24-Oct-2013 01:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It should be noted that in 'Example #2', you can also call a variably defined static method as follows:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">Foo </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public static function </span><span class="default">aStaticMethod</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// ...<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">}<br />
}<br />
<br />
</span><span class="default">$classname </span><span class="keyword">= </span><span class="string">'Foo'</span><span class="keyword">;<br />
</span><span class="default">$methodname </span><span class="keyword">= </span><span class="string">'aStaticMethod'</span><span class="keyword">;<br />
</span><span class="default">$classname</span><span class="keyword">::{</span><span class="default">$methodname</span><span class="keyword">}(); </span><span class="comment">// As of PHP 5.3.0 I believe<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="104823""></a>
  <div class="note">
   <strong class="user">payal001 at gmail dot com</strong>
   <a href="#104823" class="date">09-Jul-2011 03:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here statically accessed property prefer property of the class for which it is called. Where as self keyword enforces use of current class only. Refer the below example:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">a</span><span class="keyword">{<br />
<br />
static protected </span><span class="default">$test</span><span class="keyword">=</span><span class="string">"class a"</span><span class="keyword">;<br />
<br />
public function </span><span class="default">static_test</span><span class="keyword">(){<br />
<br />
echo static::</span><span class="default">$test</span><span class="keyword">; </span><span class="comment">// Results class b<br />
</span><span class="keyword">echo </span><span class="default">self</span><span class="keyword">::</span><span class="default">$test</span><span class="keyword">; </span><span class="comment">// Results class a<br />
<br />
</span><span class="keyword">}<br />
<br />
}<br />
<br />
class </span><span class="default">b </span><span class="keyword">extends </span><span class="default">a</span><span class="keyword">{<br />
<br />
static protected </span><span class="default">$test</span><span class="keyword">=</span><span class="string">"class b"</span><span class="keyword">;<br />
<br />
}<br />
<br />
</span><span class="default">$obj </span><span class="keyword">= new </span><span class="default">b</span><span class="keyword">();<br />
</span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">static_test</span><span class="keyword">();<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="103530""></a>
  <div class="note">
   <strong class="user">gratcypalma at gmail dot om</strong>
   <a href="#103530" class="date">18-Apr-2011 11:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">foo </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; private static </span><span class="default">$getInitial</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; public static function </span><span class="default">getInitial</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">self</span><span class="keyword">::</span><span class="default">$getInitial </span><span class="keyword">== </span><span class="default">null</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">$getInitial </span><span class="keyword">= new </span><span class="default">foo</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">self</span><span class="keyword">::</span><span class="default">$getInitial</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">foo</span><span class="keyword">::</span><span class="default">getInitial</span><span class="keyword">();<br />
<br />
</span><span class="comment">/*<br />
this is the example to use new class with static method..<br />
i hope it help<br />
*/<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101350""></a>
  <div class="note">
   <strong class="user">tolean_dj at yahoo dot com</strong>
   <a href="#101350" class="date">11-Dec-2010 05:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Starting with php 5.3 you can get use of new features of static keyword. Here's an example of abstract singleton class:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">abstract class </span><span class="default">Singleton </span><span class="keyword">{<br />
<br />
&nbsp;&nbsp;&nbsp; protected static </span><span class="default">$_instance </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * Prevent direct object creation<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">final private function&nbsp; </span><span class="default">__construct</span><span class="keyword">() { }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * Prevent object cloning<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">final private function&nbsp; </span><span class="default">__clone</span><span class="keyword">() { }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * Returns new or existing Singleton instance<br />
&nbsp;&nbsp; &nbsp; * @return Singleton<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">final public static function </span><span class="default">getInstance</span><span class="keyword">(){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">null </span><span class="keyword">!== static::</span><span class="default">$_instance</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return static::</span><span class="default">$_instance</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; static::</span><span class="default">$_instance </span><span class="keyword">= new static();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return static::</span><span class="default">$_instance</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99542""></a>
  <div class="note">
   <strong class="user">Mirco</strong>
   <a href="#99542" class="date">23-Aug-2010 10:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The simplest static constructor.<br />
<br />
Because php does not have a static constructor and you may want to initialize static class vars, there is one easy way, just call your own function directly after the class definition.<br />
<br />
for example.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">Demonstration</span><span class="keyword">()<br />
{<br />
&nbsp;&nbsp;&nbsp; return </span><span class="string">'This is the result of demonstration()'</span><span class="keyword">;<br />
}<br />
<br />
class </span><span class="default">MyStaticClass<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//public static $MyStaticVar = Demonstration(); //!!! FAILS: syntax error<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public static </span><span class="default">$MyStaticVar </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; public static function </span><span class="default">MyStaticInit</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//this is the static constructor<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //because in a function, everything is allowed, including initializing using other functions<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">$MyStaticVar </span><span class="keyword">= </span><span class="default">Demonstration</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; }<br />
} </span><span class="default">MyStaticClass</span><span class="keyword">::</span><span class="default">MyStaticInit</span><span class="keyword">(); </span><span class="comment">//Call the static constructor<br />
<br />
</span><span class="keyword">echo </span><span class="default">MyStaticClass</span><span class="keyword">::</span><span class="default">$MyStaticVar</span><span class="keyword">;<br />
</span><span class="comment">//This is the result of demonstration()<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96402""></a>
  <div class="note">
   <strong class="user">webmaster at removethis dot weird-webdesign dot de</strong>
   <a href="#96402" class="date">25-Feb-2010 01:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
On PHP 5.2.x or previous you might run into problems initializing static variables in subclasses due to the lack of late static binding:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">A </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; protected static </span><span class="default">$a</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; public static function </span><span class="default">init</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) { </span><span class="default">self</span><span class="keyword">::</span><span class="default">$a </span><span class="keyword">= </span><span class="default">$value</span><span class="keyword">; }<br />
&nbsp;&nbsp;&nbsp; public static function </span><span class="default">getA</span><span class="keyword">() { return </span><span class="default">self</span><span class="keyword">::</span><span class="default">$a</span><span class="keyword">; }<br />
}<br />
<br />
class </span><span class="default">B </span><span class="keyword">extends </span><span class="default">A </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; protected static </span><span class="default">$a</span><span class="keyword">; </span><span class="comment">// redefine $a for own use<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; // inherit the init() method<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public static function </span><span class="default">getA</span><span class="keyword">() { return </span><span class="default">self</span><span class="keyword">::</span><span class="default">$a</span><span class="keyword">; }<br />
}<br />
<br />
</span><span class="default">B</span><span class="keyword">::</span><span class="default">init</span><span class="keyword">(</span><span class="string">'lala'</span><span class="keyword">);<br />
echo </span><span class="string">'A::$a = '</span><span class="keyword">.</span><span class="default">A</span><span class="keyword">::</span><span class="default">getA</span><span class="keyword">().</span><span class="string">'; B::$a = '</span><span class="keyword">.</span><span class="default">B</span><span class="keyword">::</span><span class="default">getA</span><span class="keyword">();<br />
</span><span class="default">?&gt;<br />
</span><br />
This will output:<br />
A::$a = lala; B::$a = <br />
<br />
If the init() method looks the same for (almost) all subclasses there should be no need to implement init() in every subclass and by that producing redundant code.<br />
<br />
Solution 1:<br />
Turn everything into non-static. BUT: This would produce redundant data on every object of the class.<br />
<br />
Solution 2:<br />
Turn static $a on class A into an array, use classnames of subclasses as indeces. By doing so you also don't have to redefine $a for the subclasses and the superclass' $a can be private.<br />
<br />
Short example on a DataRecord class without error checking:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">abstract class </span><span class="default">DataRecord </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; private static </span><span class="default">$db</span><span class="keyword">; </span><span class="comment">// MySQLi-Connection, same for all subclasses<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">private static </span><span class="default">$table </span><span class="keyword">= array(); </span><span class="comment">// Array of tables for subclasses<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public static function </span><span class="default">init</span><span class="keyword">(</span><span class="default">$classname</span><span class="keyword">, </span><span class="default">$table</span><span class="keyword">, </span><span class="default">$db </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!(</span><span class="default">$db </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">)) </span><span class="default">self</span><span class="keyword">::</span><span class="default">$db </span><span class="keyword">= </span><span class="default">$db</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">$table</span><span class="keyword">[</span><span class="default">$classname</span><span class="keyword">] = </span><span class="default">$table</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; public static function </span><span class="default">getDB</span><span class="keyword">() { return </span><span class="default">self</span><span class="keyword">::</span><span class="default">$db</span><span class="keyword">; }<br />
&nbsp;&nbsp;&nbsp; public static function </span><span class="default">getTable</span><span class="keyword">(</span><span class="default">$classname</span><span class="keyword">) { return </span><span class="default">self</span><span class="keyword">::</span><span class="default">$table</span><span class="keyword">[</span><span class="default">$classname</span><span class="keyword">]; }<br />
}<br />
<br />
class </span><span class="default">UserDataRecord </span><span class="keyword">extends </span><span class="default">DataRecord </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public static function </span><span class="default">fetchFromDB</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">parent</span><span class="keyword">::</span><span class="default">getDB</span><span class="keyword">()-&gt;</span><span class="default">query</span><span class="keyword">(</span><span class="string">'select * from '</span><span class="keyword">.</span><span class="default">parent</span><span class="keyword">::</span><span class="default">getTable</span><span class="keyword">(</span><span class="string">'UserDataRecord'</span><span class="keyword">).</span><span class="string">';'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// and so on ...<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$result</span><span class="keyword">; </span><span class="comment">// An array of UserDataRecord objects<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">}<br />
}<br />
<br />
</span><span class="default">$db </span><span class="keyword">= new </span><span class="default">MySQLi</span><span class="keyword">(...);<br />
</span><span class="default">UserDataRecord</span><span class="keyword">::</span><span class="default">init</span><span class="keyword">(</span><span class="string">'UserDataRecord'</span><span class="keyword">, </span><span class="string">'users'</span><span class="keyword">, </span><span class="default">$db</span><span class="keyword">);<br />
</span><span class="default">$users </span><span class="keyword">= </span><span class="default">UserDataRecord</span><span class="keyword">::</span><span class="default">fetchFromDB</span><span class="keyword">();<br />
</span><span class="default">?&gt;<br />
</span><br />
I hope this helps some people who need to operate on PHP 5.2.x servers for some reason. Late static binding, of course, makes this workaround obsolete.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="95860""></a>
  <div class="note">
   <strong class="user">valentin at balt dot name</strong>
   <a href="#95860" class="date">26-Jan-2010 07:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
How to implement a one storage place based on static properties.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">a </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">get </span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">connect</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
class </span><span class="default">b </span><span class="keyword">extends </span><span class="default">a </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; private static </span><span class="default">$a</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">connect</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">self</span><span class="keyword">::</span><span class="default">$a </span><span class="keyword">= </span><span class="string">'b'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
class </span><span class="default">c </span><span class="keyword">extends </span><span class="default">a </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; private static </span><span class="default">$a</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">connect</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">self</span><span class="keyword">::</span><span class="default">$a </span><span class="keyword">= </span><span class="string">'c'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">$b </span><span class="keyword">= new </span><span class="default">b </span><span class="keyword">();<br />
</span><span class="default">$c </span><span class="keyword">= new </span><span class="default">c </span><span class="keyword">();<br />
<br />
</span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">get</span><span class="keyword">();<br />
</span><span class="default">$c</span><span class="keyword">-&gt;</span><span class="default">get</span><span class="keyword">();<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="95217""></a>
  <div class="note">
   <strong class="user">Jay Cain</strong>
   <a href="#95217" class="date">18-Dec-2009 02:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Regarding the initialization of complex static variables in a class, you can emulate a static constructor by creating a static function named something like init() and calling it immediately after the class definition.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">Example </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; private static </span><span class="default">$a </span><span class="keyword">= </span><span class="string">"Hello"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; private static </span><span class="default">$b</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; public static function </span><span class="default">init</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">$b </span><span class="keyword">= </span><span class="default">self</span><span class="keyword">::</span><span class="default">$a </span><span class="keyword">. </span><span class="string">" World!"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">Example</span><span class="keyword">::</span><span class="default">init</span><span class="keyword">();<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89650""></a>
  <div class="note">
   <strong class="user">davidn at xnet dot co dot nz</strong>
   <a href="#89650" class="date">17-Mar-2009 04:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Static variables are shared between sub classes<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">MyParent </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; protected static </span><span class="default">$variable</span><span class="keyword">;<br />
}<br />
<br />
class </span><span class="default">Child1 </span><span class="keyword">extends </span><span class="default">MyParent </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">set</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">$variable </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
class </span><span class="default">Child2 </span><span class="keyword">extends </span><span class="default">MyParent </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">show</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo(</span><span class="default">self</span><span class="keyword">::</span><span class="default">$variable</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">$c1 </span><span class="keyword">= new </span><span class="default">Child1</span><span class="keyword">();<br />
</span><span class="default">$c1</span><span class="keyword">-&gt;</span><span class="default">set</span><span class="keyword">();<br />
</span><span class="default">$c2 </span><span class="keyword">= new </span><span class="default">Child2</span><span class="keyword">();<br />
</span><span class="default">$c2</span><span class="keyword">-&gt;</span><span class="default">show</span><span class="keyword">(); </span><span class="comment">// prints 2<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86452""></a>
  <div class="note">
   <strong class="user">zerocool at gameinsde dot ru</strong>
   <a href="#86452" class="date">20-Oct-2008 01:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hi, here's my simple Singleton example, i think it can be useful for someone. You can use this pattern to connect to the database for example.<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp; </span><span class="keyword">class </span><span class="default">MySingleton<br />
&nbsp; </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; private static </span><span class="default">$instance </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; private function </span><span class="default">__construct</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt; </span><span class="default">name </span><span class="keyword">= </span><span class="string">'Freddy'</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; public static function </span><span class="default">getInstance</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; if(</span><span class="default">self</span><span class="keyword">::</span><span class="default">$instance </span><span class="keyword">== </span><span class="default">null</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; print </span><span class="string">"Object created!&lt;br&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">$instance </span><span class="keyword">= new </span><span class="default">self</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; return </span><span class="default">self</span><span class="keyword">::</span><span class="default">$instance</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">sayHello</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; print </span><span class="string">"Hello my name is </span><span class="keyword">{</span><span class="default">$this</span><span class="keyword">-&gt; </span><span class="default">name</span><span class="keyword">}</span><span class="string">!&lt;br&gt;"</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">setName</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt; </span><span class="default">name </span><span class="keyword">= </span><span class="default">$name</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp; }<br />
<br />
&nbsp; </span><span class="comment">//<br />
<br />
&nbsp; </span><span class="default">$objA </span><span class="keyword">= </span><span class="default">MySingleton</span><span class="keyword">::</span><span class="default">getInstance</span><span class="keyword">(); </span><span class="comment">// Object created!<br />
<br />
&nbsp; </span><span class="default">$objA</span><span class="keyword">-&gt; </span><span class="default">sayHello</span><span class="keyword">(); </span><span class="comment">// Hello my name is Freddy!<br />
<br />
&nbsp; </span><span class="default">$objA</span><span class="keyword">-&gt; </span><span class="default">setName</span><span class="keyword">(</span><span class="string">"Alex"</span><span class="keyword">);<br />
<br />
&nbsp; </span><span class="default">$objA</span><span class="keyword">-&gt; </span><span class="default">sayHello</span><span class="keyword">(); </span><span class="comment">// Hello my name is Alex!<br />
<br />
&nbsp; </span><span class="default">$objB </span><span class="keyword">= </span><span class="default">MySingleton</span><span class="keyword">::</span><span class="default">getInstance</span><span class="keyword">();<br />
<br />
&nbsp; </span><span class="default">$objB</span><span class="keyword">-&gt; </span><span class="default">sayHello</span><span class="keyword">(); </span><span class="comment">// Hello my name is Alex!<br />
<br />
&nbsp; </span><span class="default">$objB</span><span class="keyword">-&gt; </span><span class="default">setName</span><span class="keyword">(</span><span class="string">"Bob"</span><span class="keyword">);<br />
<br />
&nbsp; </span><span class="default">$objA</span><span class="keyword">-&gt; </span><span class="default">sayHello</span><span class="keyword">(); </span><span class="comment">// Hello my name is Bob!<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85900""></a>
  <div class="note">
   <strong class="user">vvikramraj at yahoo dot com</strong>
   <a href="#85900" class="date">23-Sep-2008 03:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
when attempting to implement a singleton class, one might also want to either<br />
a) disable __clone by making it private<br />
b) bash the user who attempts to clone by defining __clone to throw an exception</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85277""></a>
  <div class="note">
   <strong class="user">Mathijs Vos</strong>
   <a href="#85277" class="date">23-Aug-2008 03:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">foo<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public static </span><span class="default">$myStaticClass</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">__construct</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">myStaticClass </span><span class="keyword">= new </span><span class="default">bar</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
class </span><span class="default">bar<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public function </span><span class="default">__construct</span><span class="keyword">(){}<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Please note, this won't work.<br />
Use self::$myStaticClass = new bar(); instead of self::myStaticClass = new bar(); (note the $ sign).<br />
Took me an hour to figure this out.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80661""></a>
  <div class="note">
   <strong class="user">inkredibl</strong>
   <a href="#80661" class="date">28-Jan-2008 12:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that you should read "Variables/Variable scope" if you are looking for static keyword use for declaring static variables inside functions (or methods). I myself had this gap in my PHP knowledge until recently and had to google to find this out. I think this page should have a "See also" link to static function variables.<br />
<a href="http://www.php.net/manual/en/language.variables.scope.php" rel="nofollow" target="_blank">http://www.php.net/manual/en/language.variables.scope.php</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80162""></a>
  <div class="note">
   <strong class="user">ssj dot narutovash at gmail dot com</strong>
   <a href="#80162" class="date">01-Jan-2008 08:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It's come to my attention that you cannot use a static member in an HEREDOC string.&nbsp; The following code<br />
<br />
class A<br />
{<br />
&nbsp; public static $BLAH = "user";<br />
<br />
&nbsp; function __construct()<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; echo &lt;&lt;&lt;EOD<br />
&lt;h1&gt;Hello {self::$BLAH}&lt;/h1&gt;<br />
EOD;<br />
&nbsp; }<br />
}<br />
<br />
$blah = new A();<br />
<br />
produces this in the source code:<br />
<br />
&lt;h1&gt;Hello {self::}&lt;/h1&gt;<br />
<br />
Solution:<br />
<br />
before using a static member, store it in a local variable, like so:<br />
<br />
class B<br />
{<br />
&nbsp; public static $BLAH = "user";<br />
<br />
&nbsp; function __construct()<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; $blah = self::$BLAH;<br />
&nbsp;&nbsp;&nbsp; echo &lt;&lt;&lt;EOD<br />
&lt;h1&gt;Hello {$blah}&lt;/h1&gt;<br />
EOD;<br />
&nbsp; }<br />
}<br />
<br />
and the output's source code will be:<br />
<br />
&lt;h1&gt;Hello user&lt;/h1&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="52519""></a>
  <div class="note">
   <strong class="user">aidan at php dot net</strong>
   <a href="#52519" class="date">04-May-2005 07:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To check if a function was called statically or not, you'll need to do:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">foo </span><span class="keyword">() {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$isStatic </span><span class="keyword">= !(isset(</span><span class="default">$this</span><span class="keyword">) &amp;&amp; </span><span class="default">get_class</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">) == </span><span class="default">__CLASS__</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
More at (<a href="http://blog.phpdoc.info/archives/4-Schizophrenic-Methods.html" rel="nofollow" target="_blank">http://blog.phpdoc.info/archives/4-Schizophrenic-Methods.html</a>). <br />
<br />
(I'll add this to the manual soon).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="51640""></a>
  <div class="note">
   
   <a href="#51640" class="date">06-Apr-2005 03:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You misunderstand the meaning of inheritance : there is no duplication of members when you inherit from a base class. Members are shared through inheritance, and can be accessed by derived classes according to visibility (public, protected, private).<br />
<br />
The difference between static and non static members is only that a non static member is tied to an instance of a class although a static member is tied to the class, and not to a particular instance.<br />
That is, a static member is shared by all instances of a class although a non static member exists for each instance of&nbsp; class.<br />
<br />
Thus, in your example, the static property has the correct value, according to principles of object oriented conception.<br />
class Base<br />
{<br />
&nbsp; public $a;<br />
&nbsp; public static $b;<br />
}<br />
<br />
class Derived extends Base<br />
{<br />
&nbsp; public function __construct()<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; $this-&gt;a = 0;<br />
&nbsp;&nbsp;&nbsp; parent::$b = 0;<br />
&nbsp; }<br />
&nbsp; public function f()<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; $this-&gt;a++;<br />
&nbsp;&nbsp;&nbsp; parent::$b++;<br />
&nbsp; }<br />
}<br />
<br />
$i1 = new Derived;<br />
$i2 = new Derived;<br />
<br />
$i1-&gt;f();<br />
echo $i1-&gt;a, ' ', Derived::$b, "\n";<br />
$i2-&gt;f();<br />
echo $i2-&gt;a, ' ', Derived::$b, "\n";<br />
<br />
outputs<br />
1 1<br />
1 2</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="51484""></a>
  <div class="note">
   <strong class="user">michalf at ncac dot torun dot pl</strong>
   <a href="#51484" class="date">31-Mar-2005 02:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Inheritance with the static elements is a nightmare in php. Consider the following code:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">BaseClass</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public static </span><span class="default">$property</span><span class="keyword">;<br />
}<br />
<br />
class </span><span class="default">DerivedClassOne </span><span class="keyword">extends </span><span class="default">BaseClass</span><span class="keyword">{<br />
}<br />
<br />
class </span><span class="default">DerivedClassTwo </span><span class="keyword">extends </span><span class="default">BaseClass</span><span class="keyword">{<br />
}<br />
<br />
</span><span class="default">DerivedClassOne</span><span class="keyword">::</span><span class="default">$property </span><span class="keyword">= </span><span class="string">"foo"</span><span class="keyword">;<br />
</span><span class="default">DerivedClassTwo</span><span class="keyword">::</span><span class="default">$property </span><span class="keyword">= </span><span class="string">"bar"</span><span class="keyword">;<br />
<br />
echo </span><span class="default">DerivedClassOne</span><span class="keyword">::</span><span class="default">$property</span><span class="keyword">; </span><span class="comment">//one would naively expect "foo"...<br />
</span><span class="default">?&gt;<br />
</span><br />
What would you expect as an output? "foo"? wrong. It is "bar"!!! Static variables are not inherited, they point to the BaseClass::$property.<br />
<br />
At this point I think it is a big pity inheritance does not work in case of static variables/methods. Keep this in mind and save your time when debugging.<br />
<br />
best regards - michal</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="48233""></a>
  <div class="note">
   <strong class="user">michael at digitalgnosis dot removethis dot com</strong>
   <a href="#48233" class="date">15-Dec-2004 11:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you are trying to write classes that do this:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">class </span><span class="default">Base<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; static function </span><span class="default">Foo </span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">Bar</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
class </span><span class="default">Derived </span><span class="keyword">extends </span><span class="default">Base<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">Bar </span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"Derived::Bar()"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">Derived</span><span class="keyword">::</span><span class="default">Foo</span><span class="keyword">(); </span><span class="comment">// we want this to print "Derived::Bar()"<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Then you'll find that PHP can't (unless somebody knows the Right Way?) since 'self::' refers to the class which owns the /code/, not the actual class which is called at runtime. (__CLASS__ doesn't work either, because: A. it cannot appear before ::, and B. it behaves like 'self')<br />
<br />
But if you must, then here's a (only slightly nasty) workaround:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">class </span><span class="default">Base<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">Foo </span><span class="keyword">( </span><span class="default">$class </span><span class="keyword">= </span><span class="default">__CLASS__ </span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">call_user_func</span><span class="keyword">(array(</span><span class="default">$class</span><span class="keyword">,</span><span class="string">'Bar'</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
class </span><span class="default">Derived </span><span class="keyword">extends </span><span class="default">Base<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">Foo </span><span class="keyword">( </span><span class="default">$class </span><span class="keyword">= </span><span class="default">__CLASS__ </span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">parent</span><span class="keyword">::</span><span class="default">Foo</span><span class="keyword">(</span><span class="default">$class</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">Bar </span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"Derived::Bar()"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">Derived</span><span class="keyword">::</span><span class="default">Foo</span><span class="keyword">(); </span><span class="comment">// This time it works.&nbsp; <br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Note that Base::Foo() may no longer be declared 'static' since static methods cannot be overridden (this means it will trigger errors if error level includes E_STRICT.)<br />
<br />
If Foo() takes parameters then list them before $class=__CLASS__ and in most cases, you can just forget about that parameter throughout your code.<br />
<br />
The major caveat is, of course, that you must override Foo() in every subclass and must always include the $class parameter when calling parent::Foo().</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
