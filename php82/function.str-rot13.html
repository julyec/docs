<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=UTF-8">
  <title>对字符串执行 ROT13 转换</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.str-replace.html">? str_replace</a></li>
      <li style="float: right;"><a href="function.str-shuffle.html">str_shuffle ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.strings.html">字符串 函数</a></li>
    <li>对字符串执行 ROT13 转换</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.str-rot13" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">str_rot13</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.2.0, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">str_rot13</span> &mdash; <span class="dc-title">对字符串执行 ROT13 转换</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.str-rot13-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>str_rot13</strong></span>(<span class="methodparam"><span class="type">string</span> <code class="parameter">$string</code></span>): <span class="type">string</span></div>

  <p class="para rdfs-comment">
   对 <code class="parameter">string</code> 参数执行 ROT13 编码并将结果字符串返回。
  </p>
  <p class="para">
   ROT13 编码简单地使用字母表中后面第 13 个字母替换当前字母，同时忽略非字母表中的字符。编码和解码都使用相同的函数，传递一个编码过的字符串作为参数，将得到原始字符串。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.str-rot13-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">string</code></dt>

     <dd>

      <p class="para">
       输入字符串。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.str-rot13-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   返回给定字符串的 ROT13 版本。
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.str-rot13-examples">
  <h3 class="title">示例</h3>
  <p class="para">
   <div class="example" id="">
    <p><strong>Example #1 <span class="function"><strong>str_rot13()</strong></span> 示例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">echo </span><span style="color: #0000BB">str_rot13</span><span style="color: #007700">(</span><span style="color: #DD0000">'PHP 4.3.0'</span><span style="color: #007700">); </span><span style="color: #FF8000">// CUC 4.3.0<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="123244""></a>
  <div class="note">
   <strong class="user">devcoder at gmail dot com</strong>
   <a href="#123244" class="date">20-Oct-2018 11:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
My own generic rotN function<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">rotN</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$n </span><span class="keyword">= </span><span class="default">13</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$alphabet </span><span class="keyword">= </span><span class="default">join</span><span class="keyword">(</span><span class="default">range</span><span class="keyword">(</span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'z'</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$alen </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$alphabet</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$n </span><span class="keyword">%= </span><span class="default">$alen</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$n </span><span class="keyword">&lt; </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$n </span><span class="keyword">+= </span><span class="default">$alen</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$n </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$string</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$cycled </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$alphabet </span><span class="keyword">. </span><span class="default">$alphabet</span><span class="keyword">, </span><span class="default">$n</span><span class="keyword">, </span><span class="default">$alen</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$alphabet </span><span class="keyword">= </span><span class="default">$alphabet </span><span class="keyword">. </span><span class="default">strtoupper</span><span class="keyword">(</span><span class="default">$alphabet</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$cycled </span><span class="keyword">= </span><span class="default">$cycled </span><span class="keyword">. </span><span class="default">strtoupper</span><span class="keyword">(</span><span class="default">$cycled</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">strtr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$alphabet</span><span class="keyword">, </span><span class="default">$cycled</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="123139""></a>
  <div class="note">
   <strong class="user">Chris</strong>
   <a href="#123139" class="date">18-Sep-2018 11:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A nice, simple way of using rot-n. Allows for a lot of easy customisation, and works quickly. This function uses ASCII characters and values.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">rotn</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">, </span><span class="default">$n</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$min </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$max </span><span class="keyword">= </span><span class="default">127</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$final </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$new_string </span><span class="keyword">= </span><span class="default">str_split</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$new_string </span><span class="keyword">as </span><span class="default">$letter</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$current </span><span class="keyword">= </span><span class="default">ord</span><span class="keyword">(</span><span class="default">$letter</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$val </span><span class="keyword">= </span><span class="default">$current</span><span class="keyword">+</span><span class="default">$n</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$val </span><span class="keyword">&gt;= </span><span class="default">$max</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$val </span><span class="keyword">= </span><span class="default">$val </span><span class="keyword">- </span><span class="default">$max</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$val </span><span class="keyword">&lt;= </span><span class="default">$min</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$val </span><span class="keyword">= </span><span class="default">$val </span><span class="keyword">+ </span><span class="default">$min</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$current </span><span class="keyword">= </span><span class="default">$val</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$final </span><span class="keyword">.= </span><span class="default">chr</span><span class="keyword">(</span><span class="default">$current</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$final</span><span class="keyword">;<br />
}<br />
<br />
echo </span><span class="string">'Test 123 (4) -&gt; '</span><span class="keyword">.</span><span class="default">rotn</span><span class="keyword">(</span><span class="string">"Test 123"</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">).</span><span class="string">'&lt;br&gt;'</span><span class="keyword">; </span><span class="comment">// Xiwx$567<br />
</span><span class="keyword">echo </span><span class="string">'Test 123 (8) -&gt; '</span><span class="keyword">.</span><span class="default">rotn</span><span class="keyword">(</span><span class="string">"Test 123"</span><span class="keyword">, </span><span class="default">8</span><span class="keyword">).</span><span class="string">'&lt;br&gt;'</span><span class="keyword">; </span><span class="comment">// \m{|(9:;<br />
</span><span class="keyword">echo </span><span class="string">'Test 123 (-4) -&gt; '</span><span class="keyword">.</span><span class="default">rotn</span><span class="keyword">(</span><span class="string">"Test 123"</span><span class="keyword">, -</span><span class="default">4</span><span class="keyword">).</span><span class="string">'&lt;br&gt;'</span><span class="keyword">; </span><span class="comment">// Paop-./<br />
<br />
</span><span class="default">$value </span><span class="keyword">= </span><span class="default">rotn</span><span class="keyword">(</span><span class="string">"Test 123"</span><span class="keyword">, </span><span class="default">8</span><span class="keyword">);<br />
echo </span><span class="string">'Test 123 (Reverse [8 then -8]) -&gt; '</span><span class="keyword">.</span><span class="default">rotn</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, -</span><span class="default">8</span><span class="keyword">).</span><span class="string">'&lt;br&gt;'</span><span class="keyword">; </span><span class="comment">// Test 123<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="117555""></a>
  <div class="note">
   <strong class="user">arthur at kuhrmeier dot com</strong>
   <a href="#117555" class="date">29-Jun-2015 05:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was writing a function for my website to also rotate numbers, and kept expanding it. I added extra characters, the ability to define the shift in percent, and which type of characters to affect.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">//================================================== STRING ROTATE EXPANDED<br />
</span><span class="keyword">function </span><span class="default">str_shift </span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$perc</span><span class="keyword">=</span><span class="default">50</span><span class="keyword">, </span><span class="default">$useextra</span><span class="keyword">=</span><span class="default">FALSE</span><span class="keyword">, </span><span class="default">$usedigits</span><span class="keyword">=</span><span class="default">TRUE</span><span class="keyword">, </span><span class="default">$useupper</span><span class="keyword">=</span><span class="default">TRUE</span><span class="keyword">, </span><span class="default">$uselower</span><span class="keyword">=</span><span class="default">TRUE</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; static </span><span class="default">$chars </span><span class="keyword">= array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'lower' </span><span class="keyword">=&gt; </span><span class="string">'abcdefghijklmnopqrstuvwxyz'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'upper' </span><span class="keyword">=&gt; </span><span class="string">'ABCDEFGHIJKLMNOPQRSTUVWXYZ'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'digits' </span><span class="keyword">=&gt; </span><span class="string">'0123456789'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'extra' </span><span class="keyword">=&gt; </span><span class="string">',.-()&lt;&gt;%/!"&amp;=;:_[]{}#\\?\'+*'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; );<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">settype</span><span class="keyword">(</span><span class="default">$perc</span><span class="keyword">, </span><span class="string">'float'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if&nbsp; (!</span><span class="default">$perc</span><span class="keyword">)&nbsp; return </span><span class="default">$string</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$perc </span><span class="keyword">= </span><span class="default">fmod</span><span class="keyword">((</span><span class="default">abs</span><span class="keyword">(</span><span class="default">$perc</span><span class="keyword">) &lt; </span><span class="default">1 </span><span class="keyword">? </span><span class="default">100</span><span class="keyword">*</span><span class="default">$perc </span><span class="keyword">: </span><span class="default">$perc</span><span class="keyword">), </span><span class="default">100</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if&nbsp; (</span><span class="default">$perc </span><span class="keyword">&lt; </span><span class="default">0</span><span class="keyword">)&nbsp; </span><span class="default">$perc </span><span class="keyword">+= </span><span class="default">100</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$use </span><span class="keyword">= (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$useextra</span><span class="keyword">) ? </span><span class="default">$useextra </span><span class="keyword">: array(</span><span class="string">'lower'</span><span class="keyword">=&gt;</span><span class="default">$uselower</span><span class="keyword">, </span><span class="string">'upper'</span><span class="keyword">=&gt;</span><span class="default">$useupper</span><span class="keyword">, </span><span class="string">'digits'</span><span class="keyword">=&gt;</span><span class="default">$usedigits</span><span class="keyword">, </span><span class="string">'extra'</span><span class="keyword">=&gt;</span><span class="default">$useextra</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$chars </span><span class="keyword">as </span><span class="default">$type </span><span class="keyword">=&gt; </span><span class="default">$letters</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if&nbsp; (!</span><span class="default">$use</span><span class="keyword">[</span><span class="default">$type</span><span class="keyword">])&nbsp; continue;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$shift </span><span class="keyword">= </span><span class="default">round</span><span class="keyword">(</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$letters</span><span class="keyword">) * </span><span class="default">$perc </span><span class="keyword">/ </span><span class="default">100</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$repl </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$letters</span><span class="keyword">, </span><span class="default">$shift</span><span class="keyword">).</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$letters</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$shift</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$string </span><span class="keyword">= </span><span class="default">strtr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$letters</span><span class="keyword">, </span><span class="default">$repl</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$string</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">//===== USAGE =====<br />
<br />
</span><span class="default">string str_shift </span><span class="keyword">( </span><span class="default">string $str </span><span class="keyword">[, </span><span class="default">float $percent </span><span class="keyword">[, </span><span class="default">bool $useextra </span><span class="keyword">[, </span><span class="default">bool $usedigits </span><span class="keyword">[, </span><span class="default">bool $uselower </span><span class="keyword">[, </span><span class="default">bool $useupper</span><span class="keyword">] ] ] ] ] )<br />
<br />
</span><span class="default">string str_shift </span><span class="keyword">( </span><span class="default">string $str </span><span class="keyword">[, </span><span class="default">float $percent </span><span class="keyword">[, array </span><span class="default">$usetypes </span><span class="keyword">] ] )<br />
<br />
</span><span class="default">$usetypes </span><span class="keyword">= array(</span><span class="string">'lower'</span><span class="keyword">=&gt;</span><span class="default">bool $uselower</span><span class="keyword">, </span><span class="string">'upper'</span><span class="keyword">=&gt;</span><span class="default">bool $useupper</span><span class="keyword">, </span><span class="string">'digits'</span><span class="keyword">=&gt;</span><span class="default">bool $usedigits</span><span class="keyword">, </span><span class="string">'extra'</span><span class="keyword">=&gt;</span><span class="default">bool $useextra</span><span class="keyword">);<br />
<br />
</span><span class="comment">//===== EXAMPLES =====<br />
<br />
</span><span class="default">$string </span><span class="keyword">= </span><span class="string">"Peter's 17 pets (incl. 5 hamsters) love Dr Sarah Gibson, DVM!"</span><span class="keyword">;<br />
echo </span><span class="default">str_shift</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">);<br />
echo </span><span class="default">str_shift</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">50</span><span class="keyword">, </span><span class="default">TRUE</span><span class="keyword">);<br />
echo </span><span class="default">str_shift</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, -</span><span class="default">25</span><span class="keyword">, </span><span class="default">FALSE</span><span class="keyword">, </span><span class="default">FALSE</span><span class="keyword">);<br />
echo </span><span class="default">str_shift</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">/</span><span class="default">3</span><span class="keyword">);<br />
echo </span><span class="default">str_shift</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">50</span><span class="keyword">, array(</span><span class="string">'lower'</span><span class="keyword">=&gt;</span><span class="default">TRUE</span><span class="keyword">, </span><span class="string">'digits'</span><span class="keyword">=&gt;</span><span class="default">TRUE</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span><br />
//===== RESULT =====<br />
<br />
Crgre'f 62 crgf (vapy. 0 unzfgref) ybir Qe Fnenu Tvofba, QIZ!<br />
Crgre"f 62 crgf [vapy: 0 unzfgref] ybir Qe Fnenu Tvofba; QIZ?<br />
Jynyl'm 17 jynm (chwf. 5 bugmnylm) fipy Xl Mulub Acvmih, XPG!<br />
Yncna'b 40 yncb (rwlu. 8 qjvbcnab) uxen Ma Bjajq Prkbxw, MEV!<br />
Prgre'f 62 crgf (vapy. 0 unzfgref) ybir De Snenu Gvofba, DVM!<br />
<br />
1. The basic parameters are the string and the percentage, 50 by default. The next four parameters allow to select which type of characters to process. There is a good reason why I put less common types first, and most obvious last. To activate extra characters you need only 1 additional parameter, otherwise you would need 4 enabling also the obvious types.<br />
<br />
2. The definition for the letters and digits is obvious. For the extra characters I chose kind of pairs that make sense when shifted by 50%, e.g. () =&gt; [] or &amp; =&gt; + etc. Of course you can adjust those characters to anything you like.<br />
<br />
3. The first step is to clean the percentage, and also allow "real" floats, e.g. 1/3 for 33.33%. <br />
<br />
4. The next step secures great flexibility when using the function. As described, instead of 4 boolean parameters you can pass 1 array. E.g. the array('upper' =&gt; TRUE) will enable the change of uppercase letters only.<br />
<br />
5. Finally the function goes through every type and shifts the characters according to the given percentage.<br />
<br />
I hope you can use this function and do some fancy stuff with it. Rotating characters doesn't really make sense, but it can be fun.<br />
<br />
Arthur :-)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="117421""></a>
  <div class="note">
   <strong class="user">agente007_1_ at hotmail dot com</strong>
   <a href="#117421" class="date">09-Jun-2015 02:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
/**<br />
SALVAJE COMENTARIO EN ESPA?OL XD<br />
*/<br />
<br />
<span class="default">&lt;?php&nbsp; <br />
<br />
&nbsp;&nbsp;&nbsp; <br />
$cadena </span><span class="keyword">= </span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'entrada'</span><span class="keyword">];<br />
<br />
</span><span class="comment">/**convierte en cadena*/<br />
</span><span class="default">$array </span><span class="keyword">= </span><span class="default">str_split</span><span class="keyword">(</span><span class="default">$cadena</span><span class="keyword">);<br />
<br />
echo </span><span class="default">$cadena </span><span class="keyword">.</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br />
<br />
for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++) { <br />
<br />
if( </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] &gt;= </span><span class="string">"A" </span><span class="keyword">&amp;&amp;&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] &lt;= </span><span class="string">"M" </span><span class="keyword">){<br />
</span><span class="default">$letra </span><span class="keyword">= </span><span class="default">ord</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]);<br />
</span><span class="default">$letra </span><span class="keyword">= </span><span class="default">$letra </span><span class="keyword">+ </span><span class="default">13</span><span class="keyword">;<br />
echo </span><span class="default">chr</span><span class="keyword">(</span><span class="default">$letra</span><span class="keyword">);<br />
}<br />
<br />
if( </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] &gt;= </span><span class="string">"N" </span><span class="keyword">&amp;&amp;&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] &lt;= </span><span class="string">"Z" </span><span class="keyword">){<br />
</span><span class="default">$letra </span><span class="keyword">= </span><span class="default">ord</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]);<br />
</span><span class="default">$letra </span><span class="keyword">= </span><span class="default">$letra </span><span class="keyword">- </span><span class="default">13</span><span class="keyword">;<br />
echo </span><span class="default">chr</span><span class="keyword">(</span><span class="default">$letra</span><span class="keyword">);<br />
}<br />
<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112599""></a>
  <div class="note">
   <strong class="user">steve</strong>
   <a href="#112599" class="date">03-Jul-2013 09:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Below is a short function that allows you to rotate a string which includes non alphabetic characters you choose.<br />
<br />
By running the code without the second argument you can both obfuscate then de-obfuscate.&nbsp; This isn't a safe form of encryption, just a quick way to hide stuff from the casual viewer.<br />
<br />
function str_rot($s, $n = -1) {<br />
&nbsp;&nbsp;&nbsp; //Rotate a string by a number.<br />
&nbsp;&nbsp;&nbsp; static $letters = 'AaBbCcDdEeFfGgHhIiJjKkLlMmNnOoPpQqRrSsTtUuVvWwXxYyZz0123456789.,!$*+-?@#'; //To be able to de-obfuscate your string the length of this needs to be a multiple of 4 AND no duplicate characters<br />
&nbsp;&nbsp;&nbsp; $letterLen=round(strlen($letters)/2);<br />
&nbsp;&nbsp;&nbsp; if($n==-1) $n=(int)($letterLen/2); //Find the "halfway rotate point"<br />
&nbsp;&nbsp;&nbsp; $n = (int)$n % ($letterLen);<br />
&nbsp;&nbsp;&nbsp; if (!$n) return $s;<br />
&nbsp;&nbsp;&nbsp; if ($n &lt; 0) $n += ($letterLen);<br />
&nbsp;&nbsp;&nbsp; //if ($n == 13) return str_rot13($s);<br />
&nbsp;&nbsp;&nbsp; $rep = substr($letters, $n * 2) . substr($letters, 0, $n * 2);<br />
&nbsp;&nbsp;&nbsp; return strtr($s, $letters, $rep);<br />
}<br />
<br />
$input="ABC123";<br />
$output=str_rot($input);<br />
echo $input." = ".$output." = ".str_rot($output)."&lt;br&gt;";</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107475""></a>
  <div class="note">
   <strong class="user">shaun</strong>
   <a href="#107475" class="date">11-Feb-2012 02:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was reminded again of the desire for a generic str_rot function. Character manipulation loops in PHP are slow compared to their C counterparts, so here's a tuned version of the previous function I posted. It's 1.6 times as fast, mainly by avoiding chr() calls.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">str_rot</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">, </span><span class="default">$n </span><span class="keyword">= </span><span class="default">13</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; static </span><span class="default">$letters </span><span class="keyword">= </span><span class="string">'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$n </span><span class="keyword">= (int)</span><span class="default">$n </span><span class="keyword">% </span><span class="default">26</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if (!</span><span class="default">$n</span><span class="keyword">) return </span><span class="default">$s</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$n </span><span class="keyword">== </span><span class="default">13</span><span class="keyword">) return </span><span class="default">str_rot13</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, </span><span class="default">$l </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">); </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$l</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$c </span><span class="keyword">= </span><span class="default">$s</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$c </span><span class="keyword">&gt;= </span><span class="string">'a' </span><span class="keyword">&amp;&amp; </span><span class="default">$c </span><span class="keyword">&lt;= </span><span class="string">'z'</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$s</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">$letters</span><span class="keyword">[(</span><span class="default">ord</span><span class="keyword">(</span><span class="default">$c</span><span class="keyword">) - </span><span class="default">71 </span><span class="keyword">+ </span><span class="default">$n</span><span class="keyword">) % </span><span class="default">26</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else if (</span><span class="default">$c </span><span class="keyword">&gt;= </span><span class="string">'A' </span><span class="keyword">&amp;&amp; </span><span class="default">$c </span><span class="keyword">&lt;= </span><span class="string">'Z'</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$s</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">$letters</span><span class="keyword">[(</span><span class="default">ord</span><span class="keyword">(</span><span class="default">$c</span><span class="keyword">) - </span><span class="default">39 </span><span class="keyword">+ </span><span class="default">$n</span><span class="keyword">) % </span><span class="default">26 </span><span class="keyword">+ </span><span class="default">26</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$s</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
But using strtr() you can get something 10 times as fast as the above :<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">str_rot</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">, </span><span class="default">$n </span><span class="keyword">= </span><span class="default">13</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; static </span><span class="default">$letters </span><span class="keyword">= </span><span class="string">'AaBbCcDdEeFfGgHhIiJjKkLlMmNnOoPpQqRrSsTtUuVvWwXxYyZz'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$n </span><span class="keyword">= (int)</span><span class="default">$n </span><span class="keyword">% </span><span class="default">26</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if (!</span><span class="default">$n</span><span class="keyword">) return </span><span class="default">$s</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$n </span><span class="keyword">&lt; </span><span class="default">0</span><span class="keyword">) </span><span class="default">$n </span><span class="keyword">+= </span><span class="default">26</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$n </span><span class="keyword">== </span><span class="default">13</span><span class="keyword">) return </span><span class="default">str_rot13</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$rep </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$letters</span><span class="keyword">, </span><span class="default">$n </span><span class="keyword">* </span><span class="default">2</span><span class="keyword">) . </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$letters</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$n </span><span class="keyword">* </span><span class="default">2</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">strtr</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">, </span><span class="default">$letters</span><span class="keyword">, </span><span class="default">$rep</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
This technique is faster because PHP's strtr is implemented in C using a byte lookup table (it has O(m + n) complexity). However, PHP 6 will use Unicode, so I guess(?) strtr will then have to be implemented with a search for each character (O(m * n)). Using strtr might still be faster since it offloads the character manipulation to C rather than PHP, but I don't really know. Take your pick.<br />
<br />
Happy coding!<br />
<br />
(Benchmark code):<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">for (</span><span class="default">$k </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$k </span><span class="keyword">&lt; </span><span class="default">10</span><span class="keyword">; </span><span class="default">$k</span><span class="keyword">++) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$s </span><span class="keyword">= </span><span class="string">'The quick brown fox jumps over the lazy dog.'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$t </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">1000</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) </span><span class="default">$s </span><span class="keyword">= </span><span class="default">str_rot</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$t </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">) - </span><span class="default">$t</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">number_format</span><span class="keyword">(</span><span class="default">$t</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93759""></a>
  <div class="note">
   <strong class="user">shaunspiller at spammenotgmail dot com</strong>
   <a href="#93759" class="date">26-Sep-2009 08:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's my implementation of a str_rot that takes a custom offset. It's faster than the others here because it allocates the output string in one go instead of tacking on characters one at a time. It can handle positive or negative offsets of any size, and it fixes everything up to ensure only upper and lower case letters are translated and that they wrap around correctly within the alphabet.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">str_rot</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">, </span><span class="default">$n </span><span class="keyword">= </span><span class="default">13</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$n </span><span class="keyword">= (int)</span><span class="default">$n </span><span class="keyword">% </span><span class="default">26</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; if (!</span><span class="default">$n</span><span class="keyword">) return </span><span class="default">$s</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, </span><span class="default">$l </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">); </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$l</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$c </span><span class="keyword">= </span><span class="default">ord</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$c </span><span class="keyword">&gt;= </span><span class="default">97 </span><span class="keyword">&amp;&amp; </span><span class="default">$c </span><span class="keyword">&lt;= </span><span class="default">122</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$s</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">chr</span><span class="keyword">((</span><span class="default">$c </span><span class="keyword">- </span><span class="default">71 </span><span class="keyword">+ </span><span class="default">$n</span><span class="keyword">) % </span><span class="default">26 </span><span class="keyword">+ </span><span class="default">97</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else if (</span><span class="default">$c </span><span class="keyword">&gt;= </span><span class="default">65 </span><span class="keyword">&amp;&amp; </span><span class="default">$c </span><span class="keyword">&lt;= </span><span class="default">90</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$s</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">chr</span><span class="keyword">((</span><span class="default">$c </span><span class="keyword">- </span><span class="default">39 </span><span class="keyword">+ </span><span class="default">$n</span><span class="keyword">) % </span><span class="default">26 </span><span class="keyword">+ </span><span class="default">65</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$s</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93388""></a>
  <div class="note">
   <strong class="user">peter at NOSPAM jamit dot com</strong>
   <a href="#93388" class="date">07-Sep-2009 07:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This ROT13 variant is different from my earlier version in that it retains 'ethnicity'. For example, a Chinese text when encrypted will remain Chinese, and the string will not be making sense (the real meaning will be encrypted). Just look at the code and you will understand.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">unichar2ords</span><span class="keyword">(</span><span class="default">$char</span><span class="keyword">, </span><span class="default">$encoding </span><span class="keyword">= </span><span class="string">'UTF-8'</span><span class="keyword">) {&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$char </span><span class="keyword">= </span><span class="default">mb_convert_encoding</span><span class="keyword">(</span><span class="default">$char</span><span class="keyword">, </span><span class="string">'UCS-4'</span><span class="keyword">, </span><span class="default">$encoding</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$val </span><span class="keyword">= </span><span class="default">unpack</span><span class="keyword">(</span><span class="string">'N'</span><span class="keyword">, </span><span class="default">$char</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$val</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
function </span><span class="default">ords2unichar</span><span class="keyword">(</span><span class="default">$ords</span><span class="keyword">, </span><span class="default">$encoding </span><span class="keyword">= </span><span class="string">'UTF-8'</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$char </span><span class="keyword">= </span><span class="default">pack</span><span class="keyword">(</span><span class="string">'N'</span><span class="keyword">, </span><span class="default">$ords</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">mb_convert_encoding</span><span class="keyword">(</span><span class="default">$char</span><span class="keyword">, </span><span class="default">$encoding</span><span class="keyword">, </span><span class="string">'UCS-4'</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
function </span><span class="default">mbStringToArray </span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$encoding </span><span class="keyword">= </span><span class="string">'UTF-8'</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if (empty(</span><span class="default">$string</span><span class="keyword">)) return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$strlen </span><span class="keyword">= </span><span class="default">mb_strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$encoding</span><span class="keyword">); </span><span class="default">$strlen </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">; ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array</span><span class="keyword">[] = </span><span class="default">mb_substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">$encoding</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$string&nbsp; </span><span class="keyword">= </span><span class="default">mb_substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">$strlen</span><span class="keyword">, </span><span class="default">$encoding</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$strlen&nbsp; </span><span class="keyword">= </span><span class="default">$strlen </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$array</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
function </span><span class="default">unicodeRotN</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">, </span><span class="default">$encoding </span><span class="keyword">= </span><span class="string">'UTF-8'</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$val </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$array </span><span class="keyword">= </span><span class="default">mbStringToArray </span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$encoding </span><span class="keyword">= </span><span class="string">'UTF-8'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$len </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$len</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$val </span><span class="keyword">.= </span><span class="default">ords2unichar</span><span class="keyword">(</span><span class="default">unichar2ords</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">], </span><span class="default">$encoding</span><span class="keyword">) + </span><span class="default">$offset</span><span class="keyword">, </span><span class="default">$encoding</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$val</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
</span><span class="comment">// example<br />
<br />
</span><span class="default">$original </span><span class="keyword">= </span><span class="string">'中國是我的家'</span><span class="keyword">; </span><span class="comment">// means "China is my home"<br />
<br />
</span><span class="default">$encrypted </span><span class="keyword">= </span><span class="default">unicodeRotN</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">13</span><span class="keyword">); </span><span class="comment">// 为團昼戞皑寃 means "? Ai injustice for the Mission Day" (Google translation)<br />
<br />
</span><span class="default">$decrypted </span><span class="keyword">= </span><span class="default">unicodeRotN</span><span class="keyword">(</span><span class="default">$encrypted</span><span class="keyword">, -</span><span class="default">13</span><span class="keyword">); </span><span class="comment">// 中國是我的家<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93385""></a>
  <div class="note">
   <strong class="user">peter at NOSPAM jamit dot com</strong>
   <a href="#93385" class="date">07-Sep-2009 01:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is my ROT13 function that works for all possible characters and not just ASCII. It can be used on Chinese, Japanese, ....<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">rot13encrypt </span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">str_rot13</span><span class="keyword">(</span><span class="default">base64_encode</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
function </span><span class="default">rot13decrypt </span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">base64_decode</span><span class="keyword">(</span><span class="default">str_rot13</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
</span><span class="comment">// example<br />
<br />
</span><span class="default">$string </span><span class="keyword">= </span><span class="string">'中國是我的家'</span><span class="keyword">;<br />
<br />
</span><span class="default">$encrypted </span><span class="keyword">= </span><span class="default">rot13encrypt </span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">); </span><span class="comment">// produces 5Yvg5MlY5cvi5bvE55dR5n62<br />
<br />
</span><span class="default">$decrypted </span><span class="keyword">= </span><span class="default">rot13decrypt </span><span class="keyword">(</span><span class="default">$encrypted</span><span class="keyword">); </span><span class="comment">// produces 中國是我的家<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76355""></a>
  <div class="note">
   <strong class="user">arwab at surrealwebs dot com</strong>
   <a href="#76355" class="date">11-Jul-2007 01:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
here's my rot function, it works anyway<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;* preforms the rotation algorithm on the passed in string<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">_rot</span><span class="keyword">( </span><span class="default">$str </span><span class="keyword">, </span><span class="default">$dist</span><span class="keyword">=</span><span class="default">13 </span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; if( !</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$dist</span><span class="keyword">) || </span><span class="default">$dist </span><span class="keyword">&lt; </span><span class="default">0</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$dist </span><span class="keyword">= </span><span class="default">13</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$u_lower </span><span class="keyword">=&nbsp; </span><span class="default">65</span><span class="keyword">; </span><span class="default">$u_upper </span><span class="keyword">=&nbsp; </span><span class="default">90</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$l_lower </span><span class="keyword">=&nbsp; </span><span class="default">97</span><span class="keyword">; </span><span class="default">$l_upper </span><span class="keyword">= </span><span class="default">122</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$char_count </span><span class="keyword">= (</span><span class="default">$u_upper </span><span class="keyword">- </span><span class="default">$u_lower</span><span class="keyword">) +</span><span class="default">1</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; while( </span><span class="default">$dist </span><span class="keyword">&gt; </span><span class="default">$char_count </span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$dist </span><span class="keyword">-= </span><span class="default">$char_count</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$newstr </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; for( </span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">); ++</span><span class="default">$i</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$c </span><span class="keyword">= </span><span class="default">ord</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">/*<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; * Check if the character is within the bounds of our function (a-zA-z)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; * if not it gets tacked on to the string as is and we move on to the <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; * next one.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; */<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if( </span><span class="default">$c</span><span class="keyword">&lt;</span><span class="default">$u_lower </span><span class="keyword">|| </span><span class="default">$c</span><span class="keyword">&gt;</span><span class="default">$l_upper </span><span class="keyword">|| ( </span><span class="default">$c</span><span class="keyword">&gt;</span><span class="default">$u_upper </span><span class="keyword">&amp;&amp; </span><span class="default">$c </span><span class="keyword">&lt;</span><span class="default">$l_lower </span><span class="keyword">) ){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$newstr </span><span class="keyword">.= </span><span class="default">chr</span><span class="keyword">(</span><span class="default">$c</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; continue;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$lower </span><span class="keyword">= ( </span><span class="default">$c</span><span class="keyword">&lt;=</span><span class="default">$u_upper</span><span class="keyword">?</span><span class="default">$u_lower</span><span class="keyword">:</span><span class="default">$l_lower</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$upper </span><span class="keyword">= ( </span><span class="default">$c</span><span class="keyword">&lt;=</span><span class="default">$u_upper</span><span class="keyword">?</span><span class="default">$u_upper</span><span class="keyword">:</span><span class="default">$l_upper</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$c </span><span class="keyword">+= </span><span class="default">$dist</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if( </span><span class="default">$c </span><span class="keyword">&gt; </span><span class="default">$upper</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$c </span><span class="keyword">= ((</span><span class="default">$c </span><span class="keyword">- </span><span class="default">$upper</span><span class="keyword">) + (</span><span class="default">$lower</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$newstr </span><span class="keyword">.= </span><span class="default">chr</span><span class="keyword">(</span><span class="default">$c</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$newstr</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75469""></a>
  <div class="note">
   <strong class="user">electro at whatever dot com</strong>
   <a href="#75469" class="date">31-May-2007 12:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">/**<br />
&nbsp;* Rotate each string characters by n positions in ASCII table<br />
&nbsp;* To encode use positive n, to decode - negative.<br />
&nbsp;* With n = 13 (ROT13), encode and decode n can be positive.<br />
&nbsp;* <br />
&nbsp;* @param string $string<br />
&nbsp;* @param integer $n<br />
&nbsp;* @return string<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">rotate</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$n</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$length </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$length</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ascii </span><span class="keyword">= </span><span class="default">ord</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">{</span><span class="default">$i</span><span class="keyword">});<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rotated </span><span class="keyword">= </span><span class="default">$ascii</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$ascii </span><span class="keyword">&gt; </span><span class="default">64 </span><span class="keyword">&amp;&amp; </span><span class="default">$ascii </span><span class="keyword">&lt; </span><span class="default">91</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rotated </span><span class="keyword">+= </span><span class="default">$n</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rotated </span><span class="keyword">&gt; </span><span class="default">90 </span><span class="keyword">&amp;&amp; </span><span class="default">$rotated </span><span class="keyword">+= -</span><span class="default">90 </span><span class="keyword">+ </span><span class="default">64</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rotated </span><span class="keyword">&lt; </span><span class="default">65 </span><span class="keyword">&amp;&amp; </span><span class="default">$rotated </span><span class="keyword">+= -</span><span class="default">64 </span><span class="keyword">+ </span><span class="default">90</span><span class="keyword">; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } elseif (</span><span class="default">$ascii </span><span class="keyword">&gt; </span><span class="default">96 </span><span class="keyword">&amp;&amp; </span><span class="default">$ascii </span><span class="keyword">&lt; </span><span class="default">123</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rotated </span><span class="keyword">+= </span><span class="default">$n</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rotated </span><span class="keyword">&gt; </span><span class="default">122 </span><span class="keyword">&amp;&amp; </span><span class="default">$rotated </span><span class="keyword">+= -</span><span class="default">122 </span><span class="keyword">+ </span><span class="default">96</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rotated </span><span class="keyword">&lt; </span><span class="default">97 </span><span class="keyword">&amp;&amp; </span><span class="default">$rotated </span><span class="keyword">+= -</span><span class="default">96 </span><span class="keyword">+ </span><span class="default">122</span><span class="keyword">; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">.= </span><span class="default">chr</span><span class="keyword">(</span><span class="default">$rotated</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$enc </span><span class="keyword">= </span><span class="default">rotate</span><span class="keyword">(</span><span class="string">'string'</span><span class="keyword">, </span><span class="default">6</span><span class="keyword">);<br />
echo </span><span class="string">"Encoded: </span><span class="default">$enc</span><span class="string">&lt;br/&gt;\n"</span><span class="keyword">;<br />
echo </span><span class="string">'Decoded: ' </span><span class="keyword">. </span><span class="default">rotate</span><span class="keyword">(</span><span class="default">$enc</span><span class="keyword">, -</span><span class="default">6</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75382""></a>
  <div class="note">
   <strong class="user">maximius at gmail dot com</strong>
   <a href="#75382" class="date">25-May-2007 04:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Perhaps someone will find this useful ;)<br />
<br />
&lt;?<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; function rotN($s, $n){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $s2 = "";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for($i = 0; $i &lt; strlen($s); $i++){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $char2 = $char = ord($s{$i});<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $cap = $char &amp; 32;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $char &amp;= ~ $cap;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $char = $char &gt; 64 &amp;&amp; $char &lt; 123 ? (($char - 65 + $n) % 26 + 65) : $char;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $char |= $cap;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if($char &lt; 65 &amp;&amp; $char2 &gt; 64 || ($char &gt; 90 &amp;&amp; $char &lt; 97 &amp;&amp; ($char2 &lt; 91 || $char2 &gt; 96))) $char += 26;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else if($char &gt; 122 &amp;&amp; $char2 &lt; 123) $char -= 52;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(strtoupper(chr($char2)) === chr($char2)) $char = strtoupper(chr($char)); else $char = strtolower(chr($char));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $s2 .= $char;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return $s2;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
?&gt;<br />
It takes any string, $s, and any ROT value, $n. Just like str_rot13, it's both an encoder and decoder. To decode an encoded string, just pass -$n instead of $n.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
