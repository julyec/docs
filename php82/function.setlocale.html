<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=UTF-8">
  <title>设置区域信息</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.rtrim.html">? rtrim</a></li>
      <li style="float: right;"><a href="function.sha1-file.html">sha1_file ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.strings.html">字符串 函数</a></li>
    <li>设置区域信息</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.setlocale" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">setlocale</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">setlocale</span> &mdash; <span class="dc-title">设置区域信息</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.setlocale-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>setlocale</strong></span>(<span class="methodparam"><span class="type">int</span> <code class="parameter">$category</code></span>, <span class="methodparam"><span class="type">string</span> <code class="parameter">$locales</code></span>, <span class="methodparam"><span class="type">string</span> <code class="parameter">...$rest</code></span>): <span class="type"><span class="type">string</span>|<span class="type"><span class="type false">false</span></span></span></div>

  <p class="simpara">替代签名（不支持命名参数）：</p>
  <div class="methodsynopsis dc-description"><span class="methodname"><strong>setlocale</strong></span>(<span class="methodparam"><span class="type">int</span> <code class="parameter">$category</code></span>, <span class="methodparam"><span class="type">array</span> <code class="parameter">$locale_array</code></span>): <span class="type"><span class="type">string</span>|<span class="type"><span class="type false">false</span></span></span></div>

  <p class="para rdfs-comment">
   设置区域信息。
  </p>
  <div class="warning"><strong class="warning">Warning</strong>
   <p class="para">
    区域信息是按进程维护的，而不是线程。如果在多线程服务器 API 上运行 PHP，区域设置可能在脚本运行时突然变化，尽管脚本本身并没有调用
    <span class="function"><strong>setlocale()</strong></span>。这是因为其它脚本在同一时刻的同一进程的不同线程中运行，使用 <span class="function"><strong>setlocale()</strong></span>
    改变了进程级别的区域。在 Windows 上，自 PHP 7.0.5 起，每个线程都维护自己的区域信息。
   </p>
  </div>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.setlocale-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">category</code></dt>

     <dd>

      <p class="para">
       <code class="parameter">category</code> 命名常量指定的受区域设置的功能类别:
       <ul class="itemizedlist">
        <li class="listitem">
         <span class="simpara">
          <strong><code>LC_ALL</code></strong> 所有的设置
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          <strong><code>LC_COLLATE</code></strong> 字符串比较, 详见
          <span class="function"><a href="function.strcoll.html" class="function">strcoll()</a></span>
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          <strong><code>LC_CTYPE</code></strong> 字符串的分类与转换, 参见例子
          <span class="function"><a href="function.ctype-alpha.html" class="function">ctype_alpha()</a></span>
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          <strong><code>LC_MONETARY</code></strong> 等同 <span class="function"><a href="function.localeconv.html" class="function">localeconv()</a></span>
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          <strong><code>LC_NUMERIC</code></strong> 对于小数点的分隔（另请参见
          <span class="function"><a href="function.localeconv.html" class="function">localeconv()</a></span>）
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          <strong><code>LC_TIME</code></strong> 时间与格式
          <span class="function"><a href="function.strftime.html" class="function">strftime()</a></span>
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          <strong><code>LC_MESSAGES</code></strong> 系统响应（如果 PHP 使用 <code class="literal">libintl</code> 编译）
         </span>
        </li>
       </ul>
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">locales</code></dt>

     <dd>

      <p class="para">
       如果 <code class="parameter">locales</code> 是空字符串
       <code class="literal">&quot;&quot;</code>，则区域名将从跟上述类别同名的环境变量的值或"LANG"中设置。
      </p>
      <p class="para">
       如果 <code class="parameter">locales</code> 是 <code class="literal">&quot;0&quot;</code>，则区域设置不受影响，仅返回当前设置。
      </p>
      <p class="para">
       如果 <code class="parameter">locales</code>
       后跟附加参数，则每个参数都会尝试设置为新的区域，直至成功。对于以下情况非常有用：不同的系统已知的区域名称不同；为可能无效的区域提供后备。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">rest</code></dt>

     <dd>

      <p class="para">
       可选的字符串参数，尝试作为区域设置，直至成功。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">locale_array</code></dt>

     <dd>

      <p class="para">
       尝试将数组中的每个元素设置为新的区域，直至成功。对于以下情况非常有用：不同的系统已知的区域名称不同；为可能无效的区域提供后备。
      </p>
     </dd>

    
   </dl>

   <blockquote class="note"><p><strong class="note">Note</strong>: 
    <p class="para">
     在 Windows 中，setlocale(LC_ALL, &#039;&#039;) 从系统中的区域/语言设置（通过控制面板访问）中设置区域设置信息。
    </p>
   </p></blockquote>
  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.setlocale-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   返回新的当前区域，如果区域功能没有在当前平台实现、指定区域不存在或类别名无效时返回 <strong><code>false</code></strong>。
  </p>
  <p class="para">
   无效的类别名也会导致警告消息。类别/区域名可以在 <a href="http://www.faqs.org/rfcs/rfc1766" class="link external" title="Link : http://www.faqs.org/rfcs/rfc1766">&raquo;&nbsp;RFC 1766</a>
   和 <a href="http://www.loc.gov/standards/iso639-2/php/code_list.php" class="link external" title="Link : http://www.loc.gov/standards/iso639-2/php/code_list.php">&raquo;&nbsp;ISO 639</a> 中找到。不同的系统有不同的区域命名方案。
  </p>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <p class="para">
    <span class="function"><strong>setlocale()</strong></span> 的返回值依赖运行 PHP 的系统。它准确返回系统
    <code class="literal">setlocale</code> 函数返回的内容。
   </p>
  </p></blockquote>
 </div>


 <div class="refsect1 examples" id="refsect1-function.setlocale-examples">
  <h3 class="title">示例</h3>
  <p class="para">
   <div class="example" id="">
    <p><strong>Example #1 <span class="function"><strong>setlocale()</strong></span> 示例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/* 设置区域为荷兰 */<br /></span><span style="color: #0000BB">setlocale</span><span style="color: #007700">(</span><span style="color: #0000BB">LC_ALL</span><span style="color: #007700">, </span><span style="color: #DD0000">'nl_NL'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/* 输出：vrijdag 22 december 1978 */<br /></span><span style="color: #007700">echo </span><span style="color: #0000BB">strftime</span><span style="color: #007700">(</span><span style="color: #DD0000">"%A %e %B %Y"</span><span style="color: #007700">, </span><span style="color: #0000BB">mktime</span><span style="color: #007700">(</span><span style="color: #0000BB">0</span><span style="color: #007700">, </span><span style="color: #0000BB">0</span><span style="color: #007700">, </span><span style="color: #0000BB">0</span><span style="color: #007700">, </span><span style="color: #0000BB">12</span><span style="color: #007700">, </span><span style="color: #0000BB">22</span><span style="color: #007700">, </span><span style="color: #0000BB">1978</span><span style="color: #007700">));<br /><br /></span><span style="color: #FF8000">/* 尝试为德语设置不同的可能区域 */<br /></span><span style="color: #0000BB">$loc_de </span><span style="color: #007700">= </span><span style="color: #0000BB">setlocale</span><span style="color: #007700">(</span><span style="color: #0000BB">LC_ALL</span><span style="color: #007700">, </span><span style="color: #DD0000">'de_DE@euro'</span><span style="color: #007700">, </span><span style="color: #DD0000">'de_DE'</span><span style="color: #007700">, </span><span style="color: #DD0000">'de'</span><span style="color: #007700">, </span><span style="color: #DD0000">'ge'</span><span style="color: #007700">);<br />echo </span><span style="color: #DD0000">"Preferred locale for german on this system is '</span><span style="color: #0000BB">$loc_de</span><span style="color: #DD0000">'"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   <div class="example" id="">
    <p><strong>Example #2 Windows 的 <span class="function"><strong>setlocale()</strong></span> 示例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/* 设置区域为荷兰 */<br /></span><span style="color: #0000BB">setlocale</span><span style="color: #007700">(</span><span style="color: #0000BB">LC_ALL</span><span style="color: #007700">, </span><span style="color: #DD0000">'nld_nld'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/* 输出：vrijdag 22 december 1978 */<br /></span><span style="color: #007700">echo </span><span style="color: #0000BB">strftime</span><span style="color: #007700">(</span><span style="color: #DD0000">"%A %d %B %Y"</span><span style="color: #007700">, </span><span style="color: #0000BB">mktime</span><span style="color: #007700">(</span><span style="color: #0000BB">0</span><span style="color: #007700">, </span><span style="color: #0000BB">0</span><span style="color: #007700">, </span><span style="color: #0000BB">0</span><span style="color: #007700">, </span><span style="color: #0000BB">12</span><span style="color: #007700">, </span><span style="color: #0000BB">22</span><span style="color: #007700">, </span><span style="color: #0000BB">1978</span><span style="color: #007700">));<br /><br /></span><span style="color: #FF8000">/* 尝试为德语设置不同的可能区域 */<br /></span><span style="color: #0000BB">$loc_de </span><span style="color: #007700">= </span><span style="color: #0000BB">setlocale</span><span style="color: #007700">(</span><span style="color: #0000BB">LC_ALL</span><span style="color: #007700">, </span><span style="color: #DD0000">'de_DE@euro'</span><span style="color: #007700">, </span><span style="color: #DD0000">'de_DE'</span><span style="color: #007700">, </span><span style="color: #DD0000">'deu_deu'</span><span style="color: #007700">);<br />echo </span><span style="color: #DD0000">"Preferred locale for german on this system is '</span><span style="color: #0000BB">$loc_de</span><span style="color: #DD0000">'"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.setlocale-notes">
  <h3 class="title">注释</h3>
  <div class="tip"><strong class="tip">Tip</strong>
   <p class="para">
    Windows 用户可以在 Microsoft 的 <abbr title="Microsoft Developer Network">MSDN</abbr> 网站上找到有关
    <code class="parameter">locales</code> 字符串的有用信息。支持的语言字符串可在<a href="http://msdn.microsoft.com/en-us/library/39cwe7zf.aspx" class="link external" title="Link : http://msdn.microsoft.com/en-us/library/39cwe7zf.aspx">&raquo;&nbsp;语言字符串文档</a>中找到，支持的国家/区域字符串可在<a href="http://msdn.microsoft.com/en-us/library/cdax410z.aspx" class="link external" title="Link : http://msdn.microsoft.com/en-us/library/cdax410z.aspx">&raquo;&nbsp;国家/区域文档</a>中找到。

   </p>
  </div>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="127181""></a>
  <div class="note">
   <strong class="user">divinity76 at gmail dot com</strong>
   <a href="#127181" class="date">17-Jun-2022 01:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
if someone is looking for a getlocale(), <br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">if(!</span><span class="default">function_exists</span><span class="keyword">(</span><span class="string">"getlocale"</span><span class="keyword">)){<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">getlocale</span><span class="keyword">(</span><span class="default">int $category</span><span class="keyword">)</span><span class="comment">/*:string|false*/</span><span class="keyword">{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">setlocale</span><span class="keyword">(</span><span class="default">$category</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="126828""></a>
  <div class="note">
   <strong class="user">lingureanumanuel at yahoo dot com</strong>
   <a href="#126828" class="date">05-Feb-2022 10:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
for windows<br />
<br />
setlocale(LC_ALL, 'Greenlandic_Greenland.1252');<br />
will return false<br />
<br />
to make it work use<br />
setlocale(LC_ALL, 'Kalaallisut_Greenland.1252');</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="124185""></a>
  <div class="note">
   <strong class="user">epistomai at gmail dot com</strong>
   <a href="#124185" class="date">10-Sep-2019 07:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
setlocale(LC_MONETARY, 'en_US') doesn't work anymore (at least in PHP Version 7.3.8).<br />
<br />
I've used 'en_US.UTF-8' instead</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="123811""></a>
  <div class="note">
   <strong class="user">tim dot peters at live dot com</strong>
   <a href="#123811" class="date">01-May-2019 09:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Maybe obvious, but I would expect that setlocale constantes (LC_*) would be bitwise, but they're not.<br />
<br />
In example, doing this:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; setlocale</span><span class="keyword">(</span><span class="default">LC_TIME </span><span class="keyword">+ </span><span class="default">LC_COLLATE</span><span class="keyword">, </span><span class="string">'nl'</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">setlocale</span><span class="keyword">(</span><span class="default">LC_ALL</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span>would cause the following result:<br />
<br />
LC_CTYPE=C;LC_NUMERIC=C;LC_TIME=C;LC_COLLATE=C;LC_MONETARY=C;LC_MESSAGES=nl;LC_PAPER=C;<br />
LC_NAME=C;LC_ADDRESS=C;LC_TELEPHONE=C;LC_MEASUREMENT=C;LC_IDENTIFICATION=C<br />
<br />
Note that LC_MESSAGES has changed, instead of LC_TIME and LC_COLLATE. (Because LC_TIME + LC_COLLATE = LC_MESSAGES).<br />
<br />
Instead you would need to specify them individually, if you don't wish to use LC_ALL:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; setlocale</span><span class="keyword">(</span><span class="default">LC_TIME</span><span class="keyword">, </span><span class="string">'nl'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">setlocale</span><span class="keyword">(</span><span class="default">LC_COLLATE</span><span class="keyword">, </span><span class="string">'nl'</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">setlocale</span><span class="keyword">(</span><span class="default">LC_ALL</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span> LC_CTYPE=C;LC_NUMERIC=C;LC_TIME=nl;LC_COLLATE=nl;LC_MONETARY=C;LC_MESSAGES=C;LC_PAPER=C;<br />
LC_NAME=C;LC_ADDRESS=C;LC_TELEPHONE=C;LC_MEASUREMENT=C;LC_IDENTIFICATION=C</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="122317""></a>
  <div class="note">
   <strong class="user">stepdate at gmail dot com</strong>
   <a href="#122317" class="date">27-Jan-2018 05:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you have Locales installed and things won't work check the spelling: for German all the comments suggested "setlocale(LC_TIME, "de_DE.utf8")", but it has to be "setlocale(LC_TIME, "de_DE.UTF-8")"-&gt; UTF-8 instead of utf8.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="118200""></a>
  <div class="note">
   <strong class="user">internationalist</strong>
   <a href="#118200" class="date">25-Oct-2015 02:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
My script runs a loop that changes the locale (multilingual application). I've noticed that on some random occasion the locale still hasn't changed despite the setlocale() function being executed a step earlier. I had to add wait time for this condition. Interestingly enough, this was the case only with the 'nl_NL.UTF8' locale.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">//some code<br />
</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">counter </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
</span><span class="comment">// some code<br />
</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">locale </span><span class="keyword">= </span><span class="string">'nl_NL.UTF8'</span><span class="keyword">;<br />
</span><span class="default">setlocale</span><span class="keyword">(</span><span class="default">LC_ALL</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">locale</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">counter</span><span class="keyword">++;<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">locale </span><span class="keyword">!== </span><span class="default">setlocale</span><span class="keyword">(</span><span class="default">LC_CTYPE</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">)) { </span><span class="comment">// Locale not changed yet.<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">counter </span><span class="keyword">&gt; </span><span class="default">10</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">sleep</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="comment">// some code<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="118076""></a>
  <div class="note">
   <strong class="user">Shashakhmetov Talgat</strong>
   <a href="#118076" class="date">29-Sep-2015 04:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
//Fix encoding for russian locale on windows<br />
$locale = setlocale(LC_ALL, 'ru_RU.CP1251', 'rus_RUS.CP1251', 'Russian_Russia.1251');<br />
<br />
function strftime_fix($format, $locale, $timestamp = time()){<br />
&nbsp;&nbsp;&nbsp; // Fix %e for windows<br />
&nbsp;&nbsp;&nbsp; if (strtoupper(substr(PHP_OS, 0, 3)) == 'WIN') {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $format = preg_replace('#(?&lt;!%)((?:%%)*)%e#', '\1%#d', $format);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; // convert<br />
&nbsp;&nbsp;&nbsp; $date_str = strftime($format, $timestamp);<br />
&nbsp;&nbsp;&nbsp; if (stripos($locale, "1251") !== false) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; return iconv("windows-1251","utf-8", $date_str);<br />
&nbsp;&nbsp;&nbsp; } elseif (stripos($locale, "1252") !== false) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; return iconv("windows-1252","utf-8", $date_str);<br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp;&nbsp; return $date_str;<br />
&nbsp;&nbsp;&nbsp; }<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="117529""></a>
  <div class="note">
   <strong class="user">jose dot nobile at gmail dot com</strong>
   <a href="#117529" class="date">25-Jun-2015 01:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For Windows users complaining about setlocale. <br />
<br />
The locale argument to the setlocale function takes the following form:<br />
setlocale( LC_ALL, "&lt;language&gt;_&lt;country&gt;.&lt;code_page&gt;" );<br />
<br />
in short, if you&nbsp; want use for example: es_CO.UTF-8 it must be in Windows: Spanish_Colombia.1252<br />
<br />
The code page 1252 is ISO-8859-1 (windows-1252&nbsp; &nbsp; ANSI Latin 1; Western European (Windows)<br />
<br />
Windows use different languages code from Unix, for example, es_CO becomes es-CO or Spanish_Colombia, also it doesn't support UTF-8 charset as is shown in their website: https://msdn.microsoft.com/en-us/library/x99tb11d(v=vs.140).aspx<br />
<br />
"The set of available locale names, languages, country/region codes, and code pages includes all those supported by the Windows NLS API except code pages that require more than two bytes per character, such as UTF-7 and UTF-8. If you provide a code page value of UTF-7 or UTF-8, setlocale will fail, returning NULL."<br />
<br />
Please check the updated website of language and code pages:<br />
<br />
https://msdn.microsoft.com/en-us/library/39cwe7zf(v=vs.140).aspx<br />
and<br />
https://msdn.microsoft.com/en-us//goglobal/bb895996<br />
<br />
Here a copy paste in case the link is removed:<br />
<br />
Afrikaans<br />
Albanian<br />
Arabic_Saudi_Arabia<br />
Arabic_Iraq<br />
Arabic_Egypt<br />
Arabic_Libya<br />
Arabic_Algeria<br />
Arabic_Morocco<br />
Arabic_Tunisia<br />
Arabic_Oman<br />
Arabic_Yemen<br />
Arabic_Syria<br />
Arabic_Jordan<br />
Arabic_Lebanon<br />
Arabic_Kuwait<br />
Arabic_UAE<br />
Arabic_Bahrain<br />
Arabic_Qatar<br />
Armenian<br />
Azeri_Latin<br />
Azeri_Cyrillic<br />
Basque<br />
Belarusian<br />
Bengali_India<br />
Bosnian_Latin<br />
Bulgarian<br />
Catalan<br />
Chinese_Taiwan<br />
Chinese_PRC<br />
Chinese_Hong_Kong<br />
Chinese_Singapore<br />
Chinese_Macau<br />
Croatian<br />
Croatian_Bosnia_Herzegovina<br />
Czech<br />
Danish<br />
Divehi<br />
Dutch_Standard<br />
Dutch_Belgian<br />
English_United_States<br />
English_United_Kingdom<br />
English_Australian<br />
English_Canadian<br />
English_New_Zealand<br />
English_Ireland<br />
English_South_Africa<br />
English_Jamaica<br />
English_Caribbean<br />
English_Belize<br />
English_Trinidad<br />
English_Zimbabwe<br />
English_Philippines<br />
Estonian<br />
Faeroese<br />
Farsi<br />
Finnish<br />
French_Standard<br />
French_Belgian<br />
French_Canadian<br />
French_Swiss<br />
French_Luxembourg<br />
French_Monaco<br />
Georgian<br />
Galician<br />
German_Standard<br />
German_Swiss<br />
German_Austrian<br />
German_Luxembourg<br />
German_Liechtenstein<br />
Greek<br />
Gujarati<br />
Hebrew<br />
Hindi<br />
Hungarian<br />
Icelandic<br />
Indonesian<br />
Italian_Standard<br />
Italian_Swiss<br />
Japanese<br />
Kannada<br />
Kazakh<br />
Konkani<br />
Korean<br />
Kyrgyz<br />
Latvian<br />
Lithuanian<br />
Macedonian<br />
Malay_Malaysia<br />
Malay_Brunei_Darussalam<br />
Malayalam<br />
Maltese<br />
Maori<br />
Marathi<br />
Mongolian<br />
Norwegian_Bokmal<br />
Norwegian_Nynorsk<br />
Polish<br />
Portuguese_Brazilian<br />
Portuguese_Standard<br />
Punjabi<br />
Quechua_Bolivia<br />
Quechua_Ecuador<br />
Quechua_Peru<br />
Romanian<br />
Russian<br />
Sami_Inari<br />
Sami_Lule_Norway<br />
Sami_Lule_Sweden<br />
Sami_Northern_Finland<br />
Sami_Northern_Norway<br />
Sami_Northern_Sweden<br />
Sami_Skolt<br />
Sami_Southern_Norway<br />
Sami_Southern_Sweden<br />
Sanskrit<br />
Serbian_Latin<br />
Serbian_Latin_Bosnia_Herzegovina<br />
Serbian_Cyrillic<br />
Serbian_Cyrillic_Bosnia_Herzegovina<br />
Slovak<br />
Slovenian<br />
Spanish_Traditional_Sort<br />
Spanish_Mexican<br />
Spanish_Modern_Sort<br />
Spanish_Guatemala<br />
Spanish_Costa_Rica<br />
Spanish_Panama<br />
Spanish_Dominican_Republic<br />
Spanish_Venezuela<br />
Spanish_Colombia<br />
Spanish_Peru<br />
Spanish_Argentina<br />
Spanish_Ecuador<br />
Spanish_Chile<br />
Spanish_Uruguay<br />
Spanish_Paraguay<br />
Spanish_Bolivia<br />
Spanish_El_Salvador<br />
Spanish_Honduras<br />
Spanish_Nicaragua<br />
Spanish_Puerto_Rico<br />
Swahili<br />
Swedish<br />
Swedish_Finland<br />
Syriac<br />
Tamil<br />
Tatar<br />
Telugu<br />
Thai<br />
Tswana<br />
Ukrainian<br />
Turkish<br />
Ukrainian<br />
Urdu<br />
Uzbek_Latin<br />
Uzbek_Cyrillic<br />
Vietnamese<br />
Welsh<br />
Xhosa<br />
Zulu<br />
<br />
The code pages identifiers:<br />
<br />
https://msdn.microsoft.com/en-us/library/windows/desktop/dd317756(v=vs.85).aspx</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="116796""></a>
  <div class="note">
   <strong class="user">aaaaa976 at gmail dot com</strong>
   <a href="#116796" class="date">02-Mar-2015 08:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In Windows some times setlocale don't work, it return a empty array, buts the locale is set. I found that apache start before windows "load" locales, you must restart apache to solve this.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113764""></a>
  <div class="note">
   <strong class="user">RobQuist</strong>
   <a href="#113764" class="date">28-Nov-2013 02:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In addition to russ, about getting / backing up the locale:<br />
I'm using this in unit-tests. I wanted to test something based on locale, and reset the locale after the tests were done.<br />
<br />
Yet there were some errors;<br />
* setlocale doesn't like strings anymore. You need to use constants.<br />
* Some contants don't exist anymore. <br />
<br />
Here's an updated piece of code:<br />
<br />
<span class="default">&lt;?php<br />
$originalLocales </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">";"</span><span class="keyword">, </span><span class="default">setlocale</span><span class="keyword">(</span><span class="default">LC_ALL</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">));<br />
</span><span class="default">setlocale</span><span class="keyword">(</span><span class="default">LC_ALL</span><span class="keyword">, </span><span class="string">'nl_NL.UTF-8'</span><span class="keyword">);<br />
<br />
</span><span class="comment">//Do something here<br />
<br />
//Recover to the default setting<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$skipConstants </span><span class="keyword">= array( </span><span class="comment">//these will be returned by setlocale(LC_ALL, 0), but don't exist anymore.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'LC_PAPER'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'LC_NAME'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'LC_ADDRESS'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'LC_TELEPHONE'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'LC_MEASUREMENT'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'LC_IDENTIFICATION'<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$originalLocales </span><span class="keyword">as </span><span class="default">$localeSetting</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$localeSetting</span><span class="keyword">, </span><span class="string">"="</span><span class="keyword">) !== </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; list (</span><span class="default">$category</span><span class="keyword">, </span><span class="default">$locale</span><span class="keyword">) = </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"="</span><span class="keyword">, </span><span class="default">$localeSetting</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$category </span><span class="keyword">= </span><span class="default">LC_ALL</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$locale&nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">$localeSetting</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$category</span><span class="keyword">, </span><span class="default">$skipConstants</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">setlocale</span><span class="keyword">(</span><span class="default">constant</span><span class="keyword">(</span><span class="default">$category</span><span class="keyword">), </span><span class="default">$locale</span><span class="keyword">); </span><span class="comment">//Using strings is deprecated.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="111150""></a>
  <div class="note">
   <strong class="user">data dot ocean dot italia at gmail dot com</strong>
   <a href="#111150" class="date">20-Jan-2013 07:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Instead, using php with IIS, I had to use this line for Italian language...<br />
<br />
<span class="default">&lt;?php setlocale</span><span class="keyword">(</span><span class="default">LC_ALL</span><span class="keyword">, </span><span class="string">'Italian_Italy.1250'</span><span class="keyword">); </span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106811""></a>
  <div class="note">
   <strong class="user">russ at eatmymonkeydust dot com</strong>
   <a href="#106811" class="date">08-Dec-2011 03:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you are looking for a getlocale() function simply pass 0 (zero) as the second parameter to setlocale().<br />
<br />
Beware though if you use the category LC_ALL and some of the locales differ as a string containing all the locales is returned:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">echo </span><span class="default">setlocale</span><span class="keyword">(</span><span class="default">LC_ALL</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);<br />
<br />
</span><span class="comment">// LC_CTYPE=en_US.UTF-8;LC_NUMERIC=C;LC_TIME=C;LC_COLLATE=C;LC_MONETARY=C;LC_MESSAGES=C;LC_PAPER=C;LC_NAME=C;<br />
// LC_ADDRESS=C;LC_TELEPHONE=C;LC_MEASUREMENT=C;LC_IDENTIFICATION=C<br />
<br />
</span><span class="keyword">echo </span><span class="default">setlocale</span><span class="keyword">(</span><span class="default">LC_CTYPE</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);<br />
<br />
</span><span class="comment">// en_US.UTF-8<br />
<br />
</span><span class="default">setlocale</span><span class="keyword">(</span><span class="default">LC_ALL</span><span class="keyword">, </span><span class="string">"en_US.UTF-8"</span><span class="keyword">);<br />
echo </span><span class="default">setlocale</span><span class="keyword">(</span><span class="default">LC_ALL</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);<br />
<br />
</span><span class="comment">// en_US.UTF-8<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
If you are looking to store and reset the locales you could do something like this:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$originalLocales </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">";"</span><span class="keyword">, </span><span class="default">setlocale</span><span class="keyword">(</span><span class="default">LC_ALL</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">));<br />
</span><span class="default">setlocale</span><span class="keyword">(</span><span class="default">LC_ALL</span><span class="keyword">, </span><span class="string">"nb_NO.utf8"</span><span class="keyword">);<br />
<br />
</span><span class="comment">// Do something<br />
<br />
</span><span class="keyword">foreach (</span><span class="default">$originalLocales </span><span class="keyword">as </span><span class="default">$localeSetting</span><span class="keyword">) {<br />
&nbsp; if (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$localeSetting</span><span class="keyword">, </span><span class="string">"="</span><span class="keyword">) !== </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; list (</span><span class="default">$category</span><span class="keyword">, </span><span class="default">$locale</span><span class="keyword">) = </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"="</span><span class="keyword">, </span><span class="default">$localeSetting</span><span class="keyword">);<br />
&nbsp; }<br />
&nbsp; else {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$category </span><span class="keyword">= </span><span class="default">LC_ALL</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$locale&nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">$localeSetting</span><span class="keyword">;<br />
&nbsp; }<br />
&nbsp; </span><span class="default">setlocale</span><span class="keyword">(</span><span class="default">$category</span><span class="keyword">, </span><span class="default">$locale</span><span class="keyword">); <br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
The above works here (Ubuntu Linux) but as the setlocale() function is just wrapping the equivalent system calls, your mileage may vary on the result.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105074""></a>
  <div class="note">
   <strong class="user">phcorp</strong>
   <a href="#105074" class="date">26-Jul-2011 06:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To find the locale of a Unix system:<br />
<span class="default">&lt;?php system</span><span class="keyword">(</span><span class="string">'locale -a'</span><span class="keyword">) </span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="104441""></a>
  <div class="note">
   <strong class="user">flavioacvalverde at gmail dot com</strong>
   <a href="#104441" class="date">15-Jun-2011 09:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For Portugal I had to use
<br />

<br />
<span class="default">&lt;?php setlocale</span><span class="keyword">(</span><span class="default">LC_ALL</span><span class="keyword">, </span><span class="string">'Portuguese_Portugal.1252'</span><span class="keyword">); </span><span class="default">?&gt;
<br />
</span>
<br />
using php with IIS on Windows server.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="103627""></a>
  <div class="note">
   <strong class="user">tomas dot hampl at gmail dot com</strong>
   <a href="#103627" class="date">23-Apr-2011 01:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
On Linux, setlocale() depends on the installed locales. To see which locales are available to PHP, run this from the terminal:<br />
<br />
"locale -a"<br />
<br />
Provided list are all locales that are available on your server for PHP to use. To add a new one, run<br />
<br />
locale-gen &lt;locale name&gt; (this may need sudo / root permissions), for example to add a Czech locale, run something like this:<br />
<br />
"sudo locale-gen cs_CZ.utf8"<br />
<br />
Then you can use this locale declaration:<br />
<br />
setlocale(LC_ALL, 'cs_CZ.utf8');</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99415""></a>
  <div class="note">
   <strong class="user">leif at neland dot dk</strong>
   <a href="#99415" class="date">16-Aug-2010 04:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Regarding dash'es in locale, it appears they should be omitted entirely.<br />
<br />
In /etc/locale.gen I have<br />
<br />
da_DK.ISO-8859-15 ISO-8859-15<br />
<br />
but locale -a gives <br />
<br />
da_DK.iso885915<br />
<br />
which is the format setlocale()&nbsp; wants.<br />
<br />
(Debian)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="98649""></a>
  <div class="note">
   <strong class="user">garygendron at yahoo dot com</strong>
   <a href="#98649" class="date">28-Jun-2010 08:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For a php Mysql query, you could also use, for french canadian, in this example :<br />
<br />
$query = 'SET lc_time_names = "fr_CA"';<br />
$result = mysql_query($query) or die("Query failed");<br />
<br />
$query = 'SELECT @@lc_time_names';<br />
$result = mysql_query($query) or die("Query failed");<br />
<br />
$query = 'SELECT id, created, YEAR(created) as year, MONTH(created) as month,' .<br />
' CONCAT_WS(" ", MONTHNAME(created), YEAR(created)) as archive' .&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
' FROM #__TABLE as e' .<br />
' GROUP BY archive' .<br />
' ORDER BY id DESC'; <br />
<br />
Your data will be displayed in any locale setting you want. You may even $_GET[lc_time_name] from your multilanguage website.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90919""></a>
  <div class="note">
   <strong class="user">Kari Sderholm aka Haprog</strong>
   <a href="#90919" class="date">16-May-2009 04:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It took me a while to figure out how to get a Finnish locale correctly set on Ubuntu Server with Apache2 and PHP5.<br />
<br />
At first the output for "locale -a" was this:<br />
C<br />
en_US.utf8<br />
POSIX<br />
<br />
I had to install a finnish language pack with<br />
"sudo apt-get install language-pack-fi-base"<br />
<br />
Now the output for "locale -a" is:<br />
C<br />
en_US.utf8<br />
fi_FI.utf8<br />
POSIX<br />
<br />
The last thing you need to do after installing the correct language pack is restart Apache with "sudo apache2ctl restart". The locale "fi_FI.utf8" can then be used in PHP5 after restarting Apache.<br />
<br />
For setting Finnish timezone and locale in PHP use:<br />
<span class="default">&lt;?php<br />
date_default_timezone_set</span><span class="keyword">(</span><span class="string">'Europe/Helsinki'</span><span class="keyword">);<br />
</span><span class="default">setlocale</span><span class="keyword">(</span><span class="default">LC_ALL</span><span class="keyword">, array(</span><span class="string">'fi_FI.UTF-8'</span><span class="keyword">,</span><span class="string">'fi_FI@euro'</span><span class="keyword">,</span><span class="string">'fi_FI'</span><span class="keyword">,</span><span class="string">'finnish'</span><span class="keyword">));<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89076""></a>
  <div class="note">
   <strong class="user">brice/axice/be</strong>
   <a href="#89076" class="date">20-Feb-2009 05:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Pay attention to the syntax.
<br />
- UTF8 without dash ('-')
<br />
- locale.codeset and not locale-codeset.
<br />

<br />
Stupid newbie error but worth knowing them when starting with gettext.
<br />

<br />
<span class="default">&lt;?php
<br />
$codeset </span><span class="keyword">= </span><span class="string">"UTF8"</span><span class="keyword">;&nbsp; </span><span class="comment">// warning ! not UTF-8 with dash '-'
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 
<br />
// for windows compatibility (e.g. xampp) : theses 3 lines are useless for linux systems 
<br />

<br />
</span><span class="default">putenv</span><span class="keyword">(</span><span class="string">'LANG='</span><span class="keyword">.</span><span class="default">$lang</span><span class="keyword">.</span><span class="string">'.'</span><span class="keyword">.</span><span class="default">$codeset</span><span class="keyword">);
<br />
</span><span class="default">putenv</span><span class="keyword">(</span><span class="string">'LANGUAGE='</span><span class="keyword">.</span><span class="default">$lang</span><span class="keyword">.</span><span class="string">'.'</span><span class="keyword">.</span><span class="default">$codeset</span><span class="keyword">);
<br />
</span><span class="default">bind_textdomain_codeset</span><span class="keyword">(</span><span class="string">'mydomain'</span><span class="keyword">, </span><span class="default">$codeset</span><span class="keyword">);
<br />

<br />
</span><span class="comment">// set locale
<br />
</span><span class="default">bindtextdomain</span><span class="keyword">(</span><span class="string">'mydomain'</span><span class="keyword">, </span><span class="default">ABSPATH</span><span class="keyword">.</span><span class="string">'/locale/'</span><span class="keyword">);
<br />
</span><span class="default">setlocale</span><span class="keyword">(</span><span class="default">LC_ALL</span><span class="keyword">, </span><span class="default">$lang</span><span class="keyword">.</span><span class="string">'.'</span><span class="keyword">.</span><span class="default">$codeset</span><span class="keyword">);
<br />
</span><span class="default">textdomain</span><span class="keyword">(</span><span class="string">'mydomain'</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
where directory structure of locale is (for example) :
<br />
locale/fr_FR/LC_MESSAGES/mydomain.mo
<br />
locale/en_US/LC_MESSAGES/mydomain.mo
<br />

<br />
and ABSPATH is the absolute path to the locale dir
<br />

<br />
further note, under linux systems, it seems to be necessary to create the locale at os level using 'locale-gen'.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87038""></a>
  <div class="note">
   <strong class="user">Un_passant</strong>
   <a href="#87038" class="date">16-Nov-2008 03:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For debian/ubuntu, don't forget the charset UFT8. <br />
<br />
// Works on Ubuntu 8.04 Server<br />
setlocale(LC_TIME, 'fr_FR.UTF8', 'fr.UTF8', 'fr_FR.UTF-8', 'fr.UTF-8');</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86078""></a>
  <div class="note">
   <strong class="user">Leigh Morresi</strong>
   <a href="#86078" class="date">01-Oct-2008 11:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Setting locale that is not supported by your system will result in some string operations returning a question mark "?" in your strings where it needs to perform transliteration.<br />
<br />
1) Always check the return of setlocale() to ensure it has set to something supported<br />
<br />
2) on Linux you can use the "locale -a" command to find a list of supported locales</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84719""></a>
  <div class="note">
   <strong class="user">michal dot kocarek at brainbox dot cz</strong>
   <a href="#84719" class="date">27-Jul-2008 08:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note about using UTF-8 locale charset on Windows systems:
<br />

<br />
According to MSDN, Windows setlocale()'s implementation does not support UTF-8 encoding.
<br />

<br />
Citation from "MSDN setlocale, _wsetlocale" page (<a href="http://msdn.microsoft.com/en-us/library/x99tb11d.aspx" rel="nofollow" target="_blank">http://msdn.microsoft.com/en-us/library/x99tb11d.aspx</a>):
<br />
The set of available languages, country/region codes, and code pages includes all those supported by the Win32 NLS API except code pages that require more than two bytes per character, such as UTF-7 and UTF-8. If you provide a code page like UTF-7 or UTF-8, setlocale will fail, returning NULL.
<br />

<br />
So basically, code like
<br />
<span class="default">&lt;?php setlocale</span><span class="keyword">(</span><span class="default">LC_ALL</span><span class="keyword">, </span><span class="string">'Czech_Czech Republic.65001'</span><span class="keyword">); </span><span class="comment">// 65001 is UTF-8 codepage </span><span class="default">?&gt;
<br />
</span>does not work on Windows at all.
<br />

<br />
(written in time of PHP 5.2.4)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80540""></a>
  <div class="note">
   <strong class="user">bryn AT lunarvis DOT com</strong>
   <a href="#80540" class="date">21-Jan-2008 05:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Posting this in the hope it might be useful to others, as I could find very little info anywhere. If you want to use a Welsh locale and have the suitable language support installed, you pass 'cym' (abbreviated form of Cymraeg) to setlocale:<br />
<br />
<span class="default">&lt;?php<br />
setlocale</span><span class="keyword">(</span><span class="default">LC_TIME</span><span class="keyword">, </span><span class="string">'cym'</span><span class="keyword">);<br />
</span><span class="default">$welsh</span><span class="keyword">= </span><span class="default">gmstrftime</span><span class="keyword">(</span><span class="string">"%A, %B %Y - %H:%M"</span><span class="keyword">,</span><span class="default">time</span><span class="keyword">());<br />
echo </span><span class="default">$welsh</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
The above certainly applies to Windows systems, but should also apply to Unix if the required support is installed.<br />
<br />
Cheers,<br />
<br />
Bryn.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80054""></a>
  <div class="note">
   <strong class="user">ostapk</strong>
   <a href="#80054" class="date">27-Dec-2007 02:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There is a new PECL extension under development called intl (it will be available in PHP5.3). Meanwhile all who rely on the setlocale() and friends should be aware about the limitations of them as covered in this post on the onPHP5.com blog: <a href="http://www.onphp5.com/article/22" rel="nofollow" target="_blank">http://www.onphp5.com/article/22</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="77795""></a>
  <div class="note">
   <strong class="user">Periklis</strong>
   <a href="#77795" class="date">13-Sep-2007 02:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In *some* Windows systems, setting LC_TIME only will not work, you must either set LC_ALL or both LC_CTYPE and LC_TIME. BUT if you have already set LC_TIME using setlocale earlier in the script, dates will not be affected! For example:<br />
<span class="default">&lt;?php<br />
setlocale</span><span class="keyword">(</span><span class="default">LC_TIME</span><span class="keyword">, </span><span class="string">'greek'</span><span class="keyword">);<br />
</span><span class="default">setlocale</span><span class="keyword">(</span><span class="default">LC_CTYPE</span><span class="keyword">, </span><span class="string">'greek'</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span>will not work, while <br />
<span class="default">&lt;?php<br />
setlocale</span><span class="keyword">(</span><span class="default">LC_CTYPE</span><span class="keyword">, </span><span class="string">'greek'</span><span class="keyword">);<br />
</span><span class="default">setlocale</span><span class="keyword">(</span><span class="default">LC_TIME</span><span class="keyword">, </span><span class="string">'greek'</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span>will do the job.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75032""></a>
  <div class="note">
   <strong class="user">mvanbaak</strong>
   <a href="#75032" class="date">09-May-2007 05:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To complement Sven K's tip about debian:<br />
<br />
You can also install the package locales-all<br />
That one holds all the locales there are in compiled form.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73347""></a>
  <div class="note">
   <strong class="user">szepeshazi at gmail dot com</strong>
   <a href="#73347" class="date">18-Feb-2007 07:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For those of you who are unfortunate enough (like me) to work in Windows environment, and try to set the locale to a language _and_ to UTF-8 charset, and were unable to do it, here is a workaround.<br />
<br />
For example to output the date in hungarian with UTF-8 charset, this will work:<br />
<br />
&nbsp;&nbsp;&nbsp; $dateString = "%B %d., %A";<br />
&nbsp;&nbsp;&nbsp; setlocale(LC_ALL,'hungarian');<br />
&nbsp;&nbsp;&nbsp; $res=strftime($dateString);<br />
&nbsp;&nbsp;&nbsp; echo(iconv('ISO-8859-1', 'UTF-8', $res));<br />
<br />
If anybody knows how to set the locale on Windows to the equivalent of "hu_HU.UTF-8" on unix, please do tell me.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="67436""></a>
  <div class="note">
   <strong class="user">Sven K</strong>
   <a href="#67436" class="date">07-Jun-2006 03:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If your system doesn't show any installed locales by "locale -a", try installing them by "dpkg-reconfigure locales" (on debian).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="62748""></a>
  <div class="note">
   
   <a href="#62748" class="date">08-Mar-2006 12:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The example from bruno dot cenou at revues dot org below shows the possibility, but I want to spell it out: you can add charset info to setlocale.<br />
<br />
Example:<br />
<br />
Into my utf-8-encoded page I want to insert the name of the current month, which happens to be March, in German "M?rz" - with umlaut. If you use<br />
<br />
&nbsp;&nbsp; setlocale(LC_TIME, 'de_DE');<br />
&nbsp;&nbsp; echo strftime("%B");<br />
<br />
this will return "M&amp;auml;rz", but that html-entity will look like this on a utf-8 page: "M?rz". Not what I want.<br />
<br />
But if you use<br />
<br />
&nbsp;&nbsp; setlocale(LC_TIME, 'de_DE.UTF8');&nbsp; // note the charset info !<br />
&nbsp;&nbsp; echo strftime("%B");<br />
<br />
this returns "M√§rz", which, on utf-8, looks like it should: "M?rz".</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="55834""></a>
  <div class="note">
   <strong class="user">birkholz at web dot de</strong>
   <a href="#55834" class="date">14-Aug-2005 08:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When i tried to get the current locale (e.g. after i set the lang to german with setlocale(LC_ALL, 'de_DE'); ), the following did not work on my suse linux 9.0-box:<br />
$currentLocale = setlocale(LC_ALL, NULL);<br />
This code did a reset to the server-setting.<br />
<br />
$currentLocale = setlocale(LC_ALL, 0); works perfectly for me, but the manual says NULL and 0 are equal in this case, but NULL seems to act like "".</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="46640""></a>
  <div class="note">
   <strong class="user">pigmeu at pigmeu dot net</strong>
   <a href="#46640" class="date">18-Oct-2004 01:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
!!WARNING!!<br />
<br />
The "locale" always depend on the server configuration.<br />
<br />
i.e.:<br />
When trying to use "pt_BR" on some servers you will ALWAYS get false. Even with other languages.<br />
<br />
The locale string need to be supported by the server. Sometimes there are diferents charsets for a language, like "pt_BR.utf-8" and "pt_BR.iso-8859-1", but there is no support for a _standard_ "pt_BR".<br />
<br />
This problem occours in Windows platform too. Here you need to call "portuguese" or "spanish" or "german" or...<br />
<br />
Maybe the only way to try to get success calling the function setlocale() is:<br />
setlocale(LC_ALL, "pt_BR", "pt_BR.iso-8859-1", "pt_BR.utf-8", "portuguese", ...);<br />
<br />
But NEVER trust on that when making functions like date conversions or number formating. The best way to make sure you are doing the right thing, is using the default "en_US" or "en_UK", by not calling the setlocale() function. Or, make sure that your server support the lang you want to use, with some tests.<br />
<br />
Remember that: Using the default locale setings is the best way to "talk" with other applications, like dbs or rpc servers, too.<br />
<br />
[]s<br />
<br />
Pigmeu</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="39370""></a>
  <div class="note">
   <strong class="user">mk at totu dot com</strong>
   <a href="#39370" class="date">26-Jan-2004 04:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be carefull - setting a locale which uses commas instead of dots in numbers may cause a mysql db not to understand the query:
<br />
<span class="default">&lt;?php
<br />
setlocale</span><span class="keyword">(</span><span class="default">LC_ALL</span><span class="keyword">,</span><span class="string">"pl"</span><span class="keyword">);
<br />
</span><span class="default">$price </span><span class="keyword">= </span><span class="default">1234 </span><span class="keyword">/ </span><span class="default">100</span><span class="keyword">; </span><span class="comment">// now the price looks like 12,34
<br />
</span><span class="default">$query </span><span class="keyword">= </span><span class="default">mysql_query</span><span class="keyword">(</span><span class="string">"SELECT Id FROM table WHERE price='"</span><span class="keyword">.</span><span class="default">$price</span><span class="keyword">.</span><span class="string">"'"</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>Even if there is a price 12.34 - nothing will be found</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="25041""></a>
  <div class="note">
   <strong class="user">r dot nospam dot velseboer at quicknet dot nospam dot nl</strong>
   <a href="#25041" class="date">08-Sep-2002 07:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
be careful with the LC_ALL setting, as it may introduce some unwanted conversions. For example, I used <br />
<br />
setlocale (LC_ALL, "Dutch");<br />
<br />
to get my weekdays in dutch on the page. From that moment on (as I found out many hours later) my floating point values from MYSQL where interpreted as integers because the Dutch locale wants a comma (,) instead of a point (.) before the decimals. I tried printf, number_format, floatval.... all to no avail. 1.50 was always printed as 1.00 :(<br />
<br />
When I set my locale to :<br />
<br />
&nbsp;setlocale (LC_TIME, "Dutch");<br />
<br />
my weekdays are good now and my floating point values too. <br />
<br />
I hope I can save some people the trouble of figuring this out by themselves.<br />
<br />
Rob</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
