<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=UTF-8">
  <title>Tidy example</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="tidy.examples.html">? 示例</a></li>
      <li style="float: right;"><a href="class.tidy.html">tidy ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="tidy.examples.html">示例</a></li>
    <li>Tidy example</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="tidy.examples.basic" class="section">
  <h2 class="title">Tidy example</h2>
  <p class="para">
   This simple example shows basic Tidy usage.
   <div class="example" id="">
    <p><strong>Example #1 Basic Tidy usage</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />ob_start</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;<br /></span>&lt;html&gt;a html document&lt;/html&gt;<br /><span style="color: #0000BB">&lt;?php<br />$html </span><span style="color: #007700">= </span><span style="color: #0000BB">ob_get_clean</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">// Specify configuration<br /></span><span style="color: #0000BB">$config </span><span style="color: #007700">= array(<br />           </span><span style="color: #DD0000">'indent'         </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">true</span><span style="color: #007700">,<br />           </span><span style="color: #DD0000">'output-xhtml'   </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">true</span><span style="color: #007700">,<br />           </span><span style="color: #DD0000">'wrap'           </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">200</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// Tidy<br /></span><span style="color: #0000BB">$tidy </span><span style="color: #007700">= new </span><span style="color: #0000BB">tidy</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$tidy</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">parseString</span><span style="color: #007700">(</span><span style="color: #0000BB">$html</span><span style="color: #007700">, </span><span style="color: #0000BB">$config</span><span style="color: #007700">, </span><span style="color: #DD0000">'utf8'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$tidy</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">cleanRepair</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">// Output<br /></span><span style="color: #007700">echo </span><span style="color: #0000BB">$tidy</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="125464""></a>
  <div class="note">
   <strong class="user">mmeisam at gmail dot com</strong>
   <a href="#125464" class="date">25-Oct-2020 11:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you're using tidy to clean up your HTML but only want your string formatted and not the whole html and head tag, you can use the following configuration array:<br />
<br />
<span class="default">&lt;?php<br />
$config </span><span class="keyword">= [<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'indent'&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">=&gt; </span><span class="default">true</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'output-xhtml'&nbsp;&nbsp; </span><span class="keyword">=&gt; </span><span class="default">false</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'show-body-only' </span><span class="keyword">=&gt; </span><span class="default">true<br />
</span><span class="keyword">];<br />
<br />
</span><span class="default">$tidy </span><span class="keyword">= new </span><span class="default">tidy</span><span class="keyword">;<br />
</span><span class="default">$tidy</span><span class="keyword">-&gt;</span><span class="default">parseString</span><span class="keyword">(</span><span class="default">$your_html_code</span><span class="keyword">, </span><span class="default">$config</span><span class="keyword">, </span><span class="string">'utf8'</span><span class="keyword">);<br />
</span><span class="default">$tidy</span><span class="keyword">-&gt;</span><span class="default">cleanRepair</span><span class="keyword">();<br />
<br />
echo </span><span class="default">$tidy</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114456""></a>
  <div class="note">
   <strong class="user">gk at anuary dot com</strong>
   <a href="#114456" class="date">22-Feb-2014 10:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you are looking for HTML beautifier (a tool to indent HTML output produced by your script), Tidy extension might not be the right tool for the job.<br />
<br />
First and foremost, you should not be using either Tidy or alternatives (e.g. HTML Purifier) in the production code. HTML post procession is relatively resource demanding task, esp. if the underlying implementation relies on DOM API. However, beyond performance, HTML beautification in production might hide far more serious output issues that will be hard to trace back, because output will not align with the input.<br />
<br />
If you are indenting to use indentation (consistent, readable formatting of the output) for development purposes only then you might consider implementation that relies on regular expression. I have written, https://github.com/gajus/dindent for this purpose. The difference between earlier mentioned implementation and the latter is that regular expression based implementation does not attempt to sanitise, validate or otherwise manipulate your output beyond ensuring proper indentation.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107877""></a>
  <div class="note">
   <strong class="user">i dot c dot lovett at NOSPAM dot gmail dot com</strong>
   <a href="#107877" class="date">12-Mar-2012 08:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Anyone trying to specify "indent: auto" as documented at <a href="http://tidy.sourceforge.net/docs/quickref.html#indent" rel="nofollow" target="_blank">http://tidy.sourceforge.net/docs/quickref.html#indent</a><br />
<br />
<span class="default">&lt;?php<br />
$tidy_options </span><span class="keyword">= array(</span><span class="string">'indent' </span><span class="keyword">=&gt; </span><span class="string">'auto'</span><span class="keyword">); </span><span class="comment">// WILL NOT WORK<br />
</span><span class="default">$tidy_options </span><span class="keyword">= array(</span><span class="string">'indent' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">); </span><span class="comment">// equivalent of auto<br />
<br />
</span><span class="default">$tidy </span><span class="keyword">= new </span><span class="default">Tidy</span><span class="keyword">();<br />
</span><span class="default">$tidy</span><span class="keyword">-&gt;</span><span class="default">parseString</span><span class="keyword">(</span><span class="default">$html</span><span class="keyword">, </span><span class="default">$tidy_options</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
