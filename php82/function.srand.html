<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=UTF-8">
  <title>播下随机数发生器种子</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.random-int.html">? random_int</a></li>
      <li style="float: right;"><a href="class.random-randomizer.html">Random\Randomizer ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.random.html">Random 函数</a></li>
    <li>播下随机数发生器种子</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.srand" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">srand</h1>
   <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">srand</span> &mdash; <span class="dc-title">播下随机数发生器种子</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.srand-description">
  <h3 class="title">说明</h3>
   <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>srand</strong></span>(<span class="methodparam"><span class="type">int</span> <code class="parameter">$seed</code><span class="initializer"> = 0</span></span>, <span class="methodparam"><span class="type">int</span> <code class="parameter">$mode</code><span class="initializer"> = <strong><code>MT_RAND_MT19937</code></strong></span></span>): <span class="type"><span class="type void">void</span></span></div>

  <p class="para rdfs-comment">
   使用 <code class="parameter">seed</code> 播下随机数发生器种子，或者<code class="parameter">seed</code> 是 <code class="literal">0</code> 时，使用随时值。
  </p>

  <blockquote class="note"><p><strong class="note">Note</strong>: <span class="simpara">不再需要用
<span class="function"><strong>srand()</strong></span> 或 <span class="function"><a href="function.mt-srand.html" class="function">mt_srand()</a></span>
给随机数发生器播种，因为现在是由系统自动完成的。</span></p></blockquote>
  <div class="caution"><strong class="caution">Caution</strong>
 <p class="para">
  由于 Mt19937（"梅森旋转算法"）引擎仅接受 32 位整数作为种子，因此尽管 Mt19937 的范围为
  2<sup class="superscript">19937</sup>-1，但可能的随机序列数量仅限于 2<sup class="superscript">32</sup>（即 4,294,967,296）。
 </p>
 <p class="para">
  当依赖隐式或显式随机播种时，重复会出现得更早。根据生日问题，在少于 80,000 个随机生成的种子后，预计重复种子的概率为
  50%。在随机生成大约 30,000 个种子后，重复种子的概率为 10%。
 </p>
 <p class="para">
  This makes Mt19937 unsuitable for applications where duplicated sequences must not happen with
  more than a negligible probability.
  如果需要可重复的种子，<span class="classname"><a href="class.random-engine-xoshiro256starstar.html" class="classname">Random\Engine\Xoshiro256StarStar</a></span> 和
  <span class="classname"><a href="class.random-engine-pcgoneseq128xslrr64.html" class="classname">Random\Engine\PcgOneseq128XslRr64</a></span> 引擎都支持更大的种子，它们不太可能随机碰撞。如果不需要再现性，<span class="classname"><a href="class.random-engine-secure.html" class="classname">Random\Engine\Secure</a></span>
  引擎提供加密安全随机性。
 </p>
</div>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <span class="simpara">
    自 PHP 7.1.0 起，<span class="function"><strong>srand()</strong></span> 成为 <span class="function"><a href="function.mt-srand.html" class="function">mt_srand()</a></span> 的别名。
   </span>
  </p></blockquote>
 </div>

 <div class="refsect1 parameters" id="refsect1-function.srand-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">seed</code></dt>

     <dd>

      <p class="para">
       任意 <span class="type">int</span> 种子值。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.srand-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   没有返回值。
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.srand-changelog">
  <h3 class="title">更新日志</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>版本</th>
       <th>说明</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>7.1.0</td>
       <td>
        <span class="function"><strong>srand()</strong></span> <a href="migration71.incompatible.html#migration71.incompatible.rand-srand-aliases" class="link">成为</a> <span class="function"><a href="function.mt-srand.html" class="function">mt_srand()</a></span> 的别名。
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>

 <div class="refsect1 seealso" id="refsect1-function.srand-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.rand.html" class="function" rel="rdfs-seeAlso">rand()</a> - 产生一个随机整数</span></li>
    <li class="member"><span class="function"><a href="function.getrandmax.html" class="function" rel="rdfs-seeAlso">getrandmax()</a> - 显示随机数最大的可能值</span></li>
    <li class="member"><span class="function"><a href="function.mt-srand.html" class="function" rel="rdfs-seeAlso">mt_srand()</a> - 播下一个更好的随机数发生器种子</span></li>
   </ul>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="117966""></a>
  <div class="note">
   <strong class="user">Glauco Lins</strong>
   <a href="#117966" class="date">09-Sep-2015 11:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
srand and mt_srand are both initialized only once per process ID.<br />
<br />
You cannot re-seed your rand algorithms after the first "srand", "mt_srand", "rand", "mt_rand", "shuffle", or any other rand-like function.<br />
<br />
I have been facing an issue where after forking my process, all childs were generating exactly the same rand values.<br />
This was due a first "shuffle" call on the parent process, so I could not re-seed the childs.<br />
<br />
To solve my issue, I simple called "rand" N times, to offset the child rand generators.<br />
<br />
# Offset the child rand generator by its PID<br />
$n = (getmypid() % 100) * (10 * abs(microtime(true) - time()));<br />
for ($n; $n &gt; 0; $n--) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; rand(0, $n);<br />
}<br />
<br />
Since each pcntl_fork takes a while to be completed, the microtime offers an extra offset, other than one PID increment.<br />
<br />
This small code will make at the WORST hypothesis 1000 iterations.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113981""></a>
  <div class="note">
   <strong class="user">simon at labs dot coop</strong>
   <a href="#113981" class="date">25-Dec-2013 09:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I can't stress how important it is to seed your randomisation process in code! better still something we found in the BBS Days was if we didn't seed from a token from outside our systems abstraction layer we would go in circles and so would our users. Here at chronolabs we offer a feed of randomly changing token on each impression, it also randomly displays a different number of them this is from <a href="http://seed.feeds.labs.coop in the example below I use DOM to load the XML, Extract the randomisation tokens and then with mt_srand and srand seed the random selecting processes! The following function when you call it will seed your random selection process in both the old and new random selection routines all you need to do is call the function! This will work with any version of PHP 5 and any earlier with DOM Objectivity." rel="nofollow" target="_blank">http://seed.feeds.labs.coop in the example below I use DOM to load the XML, Extract the randomisation tokens and then with mt_srand and srand seed the random selecting processes! The following function when you call it will seed your random selection process in both the old and new random selection routines all you need to do is call the function! This will work with any version of PHP 5 and any earlier with DOM Objectivity.</a><br />
<br />
function makeRandomSeeded() {<br />
&nbsp;&nbsp;&nbsp; $file = '<a href="http://seed.feeds.labs.coop/" rel="nofollow" target="_blank">http://seed.feeds.labs.coop/</a>';<br />
&nbsp;&nbsp;&nbsp; $doc = new DOMDocument();<br />
&nbsp;&nbsp;&nbsp; $doc-&gt;loadHTMLFile($file);<br />
&nbsp;&nbsp;&nbsp; $skip = array('This feed can', 'Current mode is');<br />
&nbsp;&nbsp;&nbsp; $elements = $doc-&gt;getElementsByTagName('description');<br />
&nbsp;&nbsp;&nbsp; foreach($elements as $element) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $seed = $element-&gt;nodeValue;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $found = false;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach($skip as $find) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (substr($seed, 0, strlen($find))==$find) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $found = true;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ($found==false)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $seeds[] = $seed;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; shuffle($seeds);<br />
&nbsp;&nbsp;&nbsp; mt_srand($seeds[mt_rand(0, count($seeds)-1)]);<br />
&nbsp;&nbsp;&nbsp; srand($seeds[mt_rand(0, count($seeds)-1)]);<br />
}<br />
<br />
Remember when PHP says an integer this also include any character of the Ascii chart if you would like to see an example of this do the following:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp; $a </span><span class="keyword">= </span><span class="string">"000A"</span><span class="keyword">;<br />
&nbsp;&nbsp; while(</span><span class="default">$a</span><span class="keyword">!=</span><span class="string">"001B"</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; echo </span><span class="default">$a</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$a</span><span class="keyword">++;<br />
&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113394""></a>
  <div class="note">
   <strong class="user">simon at labs dot coop</strong>
   <a href="#113394" class="date">05-Oct-2013 07:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Something we discovered in Sydney running BBS Systems before the net advent was here, if we didn't seed of another BBS we would going in circles in our System Physicality Abstraction Layers.. The important thing is to seed from a remote system and easy way at the Centroidal Plexus of the web (Chronolabs Cooperative) we offer a seed feed and the following code will randomise you out of the number cycle:<br />
<br />
See in PHP both the letters and numbers are seedable as letters are treated as numbers as well. You can always use individual tokens by extracting the Element with DOM.. But below is equally effective!<br />
<br />
<span class="default">&lt;?php<br />
<br />
srand</span><span class="keyword">(</span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="string">'<a href="http://seed.feeds.labs.coop" rel="nofollow" target="_blank">http://seed.feeds.labs.coop</a>'</span><span class="keyword">)); <br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102636""></a>
  <div class="note">
   <strong class="user">Niels Keurentjes</strong>
   <a href="#102636" class="date">25-Feb-2011 05:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Keep in mind that the Suhosin patch which is installed by default on many PHP-installs such as Debian and DirectAdmin completely disables the srand and mt_srand functions for encryption security reasons. To generate reproducible random numbers from a fixed seed on a Suhosin-hardened server you will need to include your own pseudorandom generator code.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90215""></a>
  <div class="note">
   <strong class="user">harmen at no dot spam dot rdzl dot nl</strong>
   <a href="#90215" class="date">10-Apr-2009 10:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To generate a random number which is different every day, I used the number of days after unix epoch as a seed:<br />
<br />
<span class="default">&lt;?php&nbsp; <br />
&nbsp;&nbsp; srand</span><span class="keyword">(</span><span class="default">floor</span><span class="keyword">(</span><span class="default">time</span><span class="keyword">() / (</span><span class="default">60</span><span class="keyword">*</span><span class="default">60</span><span class="keyword">*</span><span class="default">24</span><span class="keyword">)));<br />
&nbsp;&nbsp; echo </span><span class="default">rand</span><span class="keyword">() % </span><span class="default">100</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
My provider upgraded the php server recently, and calling srand(seed) does not seem to set the seed anymore. To let srand set the seed, add the following line to your .htaccess file<br />
<br />
php_value suhosin.srand.ignore 0 <br />
<br />
Kudos to doc_z (<a href="http://www.webmasterworld.com/php/3777515.htm" rel="nofollow" target="_blank">http://www.webmasterworld.com/php/3777515.htm</a>)<br />
<br />
Harmen</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="53577""></a>
  <div class="note">
   <strong class="user">bootc at bootc dot net</strong>
   <a href="#53577" class="date">06-Jun-2005 08:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
OK, to summarize what people have been saying so far:<br />
<br />
1. DO NOT seed the RNG more than once if you can help it!<br />
2. You HAVE TO seed the RNG yourself if you are using PHP &lt; 4.2.0.<br />
3. Using a prime multiplier to microtime() probably does very little. Use the Mersenne Twister instead.<br />
4. You can use the Mersenne Twister PRNG with the mt_rand and mt_srand functions. This is faster and is more random.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="48424""></a>
  <div class="note">
   <strong class="user">edublancoa at gmail dot com</strong>
   <a href="#48424" class="date">23-Dec-2004 01:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Another use of srand is to obtain the same value of rand in a determined time interval. Example: you have an array of 100 elements and you need to obtain a random item every day but not to change in the 24h period (just imagine "Today's Photo" or similar).<br />
<span class="default">&lt;?php<br />
$seed </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">time</span><span class="keyword">()/</span><span class="default">86400</span><span class="keyword">);<br />
</span><span class="default">srand</span><span class="keyword">(</span><span class="default">$seed</span><span class="keyword">);<br />
</span><span class="default">$item </span><span class="keyword">= </span><span class="default">$examplearray</span><span class="keyword">[</span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">99</span><span class="keyword">)];<br />
</span><span class="default">?&gt;<br />
</span>You obtain the same value every time you load the page all the 24h period.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="45320""></a>
  <div class="note">
   <strong class="user">no at spam dot com</strong>
   <a href="#45320" class="date">01-Sep-2004 04:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I simply use this, and it has always worked fine:<br />
<br />
function initRand ()<br />
{<br />
&nbsp;&nbsp;&nbsp; static $randCalled = FALSE;<br />
&nbsp;&nbsp;&nbsp; if (!$randCalled)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; srand((double) microtime() * 1000000);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $randCalled = TRUE;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
function randNum ($low, $high)<br />
{<br />
&nbsp;&nbsp;&nbsp; initRand();<br />
&nbsp;&nbsp;&nbsp; $rNum = rand($low, $high);<br />
&nbsp;&nbsp;&nbsp; return $rNum;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="16513""></a>
  <div class="note">
   <strong class="user">mlwmohawk at mohawksoft dot com</strong>
   <a href="#16513" class="date">02-Nov-2001 07:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
srand() is pretty tricky to get right. You should never seed a random number generator more than once per php process, if you do, your randomness is limited to the source of your seed.
<br />

<br />
The microtime function's micro-seconds portion has a very finite resolution, that is why the make_seed function was added to the document. You should never get the same seed twice.
<br />

<br />
In the later CVS versions, PHP will seed the random generator prior to performing a rand() if srand() was not previously called.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="15891""></a>
  <div class="note">
   <strong class="user">php_public at macfreek dot nl</strong>
   <a href="#15891" class="date">07-Oct-2001 08:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The make_seed() function in the example code is VERY bad, and is in fact responsible for seeding always the same value, so that the output of rand() is the same with every page reload (!)
<br />

<br />
ALWAYS use:
<br />
(double)microtime()*1000000
<br />

<br />
See for more details my note on the mt_srand() page [ function.mt_srand.php ]</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="14790""></a>
  <div class="note">
   
   <a href="#14790" class="date">14-Aug-2001 10:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I have a ramdon circulater that changes a piece of text once a day, and I use the following code to make sure the see is unique enough.
<br />

<br />
$tm = time();
<br />
$today = mktime(0, 0, 0, (int)date("n", $tm), (int)date("j", $tm), (int)date("Y", $tm));&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 
<br />
srand($today / pi());
<br />

<br />
The pi works wonders for the whole thing and it works like a charm. Any other big decimal number will do as well, but pi is the most common "big" number.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="14774""></a>
  <div class="note">
   <strong class="user">akukula at min dot pl</strong>
   <a href="#14774" class="date">14-Aug-2001 07:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Calling srand((double)microtime()*1000000),
<br />
then $a=rand(1000000,9999999), then srand((double)microtime()*$a)
<br />
adds nothing to the entrophy: the execution time of rand and srand is
<br />
constant, so the second microtime() produces nothing really fascinating. You may safely use just the first srand().</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="14350""></a>
  <div class="note">
   <strong class="user">vonStahl at NOPE2SPAM dot ratio dot net</strong>
   <a href="#14350" class="date">27-Jul-2001 05:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
How about&lt;br&gt;
<br />
&lt;?
<br />
srand((double)microtime()*1000000);
<br />
$seed = rand(1000000,9999999);
<br />
srand((double)microtime()*$seed);
<br />
$yadda = rand (1,100);
<br />
?&gt;&lt;br&gt;
<br />
I used this in a test run with 1,000.000 calls for $yadda. Processing time increased by 0.0000061 seconds compared to a simple "srand((double)microtime()*1000000);" 
<br />
$yadda had the value of each number between 1 and 100 for between 0.99999122% and 1.00000872% of all calls. That's random and fast enough for me. :)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="13136""></a>
  <div class="note">
   <strong class="user">rjones at ditzed dot org</strong>
   <a href="#13136" class="date">29-May-2001 12:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As a sidenote on the usage of srand():
<br />

<br />
If you are making use of modular programming, it is probably better to try and call the srand routine from the parent script than from any modules you may be using (using REQUIRE or INCLUDE).
<br />
This way you get around the possibility of calling srand() more than once from different modules.
<br />

<br />
The flaw in this solution, of course, is when using modules produced by another programmer, or when producing modules for another programmer.
<br />
You cannot rely on another programmer calling the srand function before calling the modular function, so you would have to include the srand function inside the module in this case.
<br />

<br />
If you produce modules for use by other programmers then it is good practice to documentise the fact you have already called the srand function.
<br />
Or if you use a modular function produced by someone else, check their documentation, or check their source code.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="13135""></a>
  <div class="note">
   <strong class="user">rjones at ditzed dot org</strong>
   <a href="#13135" class="date">29-May-2001 11:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Use the srand() seed "(double)microtime()*1000000" as mentioned by the richard@zend.com at the top of these user notes.
<br />

<br />
The most notable effect of using any other seed is that your random numbers tend to follow the same, or very similar, sequences each time the script is invoked.
<br />

<br />
Take note of the following script:
<br />

<br />
<span class="default">&lt;?php
<br />
&nbsp; srand</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">);
<br />

<br />
&nbsp; echo </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">20</span><span class="keyword">) . </span><span class="string">", "</span><span class="keyword">;
<br />
&nbsp; echo </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">20</span><span class="keyword">) . </span><span class="string">", "</span><span class="keyword">;
<br />
&nbsp; echo </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">20</span><span class="keyword">) . </span><span class="string">", "</span><span class="keyword">;
<br />
&nbsp; echo </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">20</span><span class="keyword">) . </span><span class="string">", "</span><span class="keyword">;
<br />
&nbsp; echo </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">20</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
If you seed the generator with a constant, say; the number 5 ($val = 5), then the sequence generated is always the same, in this case (0, 18, 7, 15, 17) (for me at least, different processors/processor speeds/operating systems/OS releases/PHP releases/webserver software may generate different sequences).
<br />

<br />
If you seed the generator with time(), then the sequence is more random, but invokations that are very close together will have similar outputs.
<br />

<br />
As richard@zend.com above suggests, the best seed to use is (double) microtime() * 1000000, as this gives the greatest amount of psuedo-randomness. In fact, it is random enough to suit most users.
<br />
In a test program of 100000 random numbers between 1 and 20, the results were fairly balanced, giving an average of 5000 results per number, give or take 100. The deviation in each case varied with each invokation.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="10953""></a>
  <div class="note">
   <strong class="user">MakeMoolah at themail dot com</strong>
   <a href="#10953" class="date">28-Jan-2001 03:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Sorry about that...&nbsp; ok, forget have of what I said up there ^.
<br />

<br />
The code that would prove my example is this:
<br />

<br />
<span class="default">&lt;?php
<br />
srand</span><span class="keyword">(</span><span class="default">5</span><span class="keyword">);
<br />
echo(</span><span class="default">rand</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">));
<br />
</span><span class="default">srand</span><span class="keyword">(</span><span class="default">5</span><span class="keyword">);
<br />
echo(</span><span class="default">rand</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">));
<br />
</span><span class="default">srand</span><span class="keyword">(</span><span class="default">5</span><span class="keyword">);
<br />
echo(</span><span class="default">rand</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">));
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Each time you SHOULD get the same answer, but if you did this:
<br />

<br />
<span class="default">&lt;?php
<br />
srand</span><span class="keyword">(</span><span class="default">5</span><span class="keyword">);
<br />
echo(</span><span class="default">rand</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">));
<br />
echo(</span><span class="default">rand</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">));
<br />
echo(</span><span class="default">rand</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">));
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
then the answers would be different, and you'd be letting the random number formula do it's duty.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="8986""></a>
  <div class="note">
   <strong class="user">hagen at von-eitzen dot de</strong>
   <a href="#8986" class="date">10-Oct-2000 03:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It is REALLY essential to make sure that srand is called only once.
<br />
This is a bit difficult if the call is hidden somewhere in third-party code you include. For example, I used a standard banner script that *seemed* to work well putting
<br />
three random banners in one frame. But in the long run, the choice appeared
<br />
somewhat biased - probably because srand was called once per banner, not
<br />
once per run.
<br />
It would be nice if the random number generator worked like in PERL: If You use the random function without having called srand ever before in a script,
<br />
srand is invoked before (and automatically with a nice seed, hopefully).
<br />
I suggest that one should do something like this:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">if (!</span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">"IHaveCalledSrandBefore"</span><span class="keyword">]++) { 
<br />
&nbsp; </span><span class="default">srand</span><span class="keyword">((double) </span><span class="default">microtime</span><span class="keyword">() * </span><span class="default">1000000</span><span class="keyword">);
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
(Depending on the situation, one might also work with a static variable instead)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
