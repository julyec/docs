<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=UTF-8">
  <title>对比两个「PHP 规范化」的版本数字字符串</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.sys-get-temp-dir.html">? sys_get_temp_dir</a></li>
      <li style="float: right;"><a href="function.zend-thread-id.html">zend_thread_id ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.info.html">PHP 选项/信息 函数</a></li>
    <li>对比两个「PHP 规范化」的版本数字字符串</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.version-compare" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">version_compare</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.1.0, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">version_compare</span> &mdash; <span class="dc-title">对比两个「PHP 规范化」的版本数字字符串</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.version-compare-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>version_compare</strong></span>(<span class="methodparam"><span class="type">string</span> <code class="parameter">$version1</code></span>, <span class="methodparam"><span class="type">string</span> <code class="parameter">$version2</code></span>, <span class="methodparam"><span class="type">?</span><span class="type"><span class="type">string</span><span class="type"></span></span> <code class="parameter">$operator</code><span class="initializer"> = <strong><code>null</code></strong></span></span>): <span class="type"><span class="type">int</span>|<span class="type">bool</span></span></div>

  <p class="para rdfs-comment">
   <span class="function"><strong>version_compare()</strong></span> 用于对比两个「PHP 规范化」的版本数字字符串。
  </p>
  <p class="para">
   此函数首先在版本字符串里用一个点 <code class="literal">.</code> 替换 <code class="literal">_</code>、<code class="literal">-</code> 和 <code class="literal">+</code>，也会在任意非数字前后插入一个点 <code class="literal">.</code>，这样，类似 &#039;4.3.2RC1&#039; 将会变成 &#039;4.3.2.RC.1&#039;。
   接下来它会分割结果，
   然后它会从左往右对比各个部分。
   如果某部分包含了特定的版本字符串，将会用以下顺序处理：
   <code class="literal">列表中未找到的任意字符串</code> &lt; 
   <code class="literal">dev</code> &lt; <code class="literal">alpha</code> =
   <code class="literal">a</code> &lt; <code class="literal">beta</code> =
   <code class="literal">b</code> &lt; <code class="literal">RC</code> =  
   <code class="literal">rc</code> &lt; <code class="literal">#</code> &lt;
   <code class="literal">pl</code> = <code class="literal">p</code>。
   
   这种方式不仅能够对比类似 &#039;4.1&#039; 和 &#039;4.1.2&#039; 那种不同的版本级别，同时也可以指定对比任何包含 PHP 开发状态的版本。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.version-compare-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">version1</code></dt>

     <dd>

      <p class="para">
       第一个版本数。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">version2</code></dt>

     <dd>

      <p class="para">
       第二个版本数。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">operator</code></dt>

     <dd>

      <p class="para">
       可选运算符。可能运算符有：<code class="literal">&lt;</code>、<code class="literal">lt</code>、<code class="literal">&lt;=</code>、<code class="literal">le</code>、
       <code class="literal">&gt;</code>、<code class="literal">gt</code>、<code class="literal">&gt;=</code>、<code class="literal">ge</code>、<code class="literal">==</code>、
       <code class="literal">=</code>、<code class="literal">eq</code>、<code class="literal">!=</code>、<code class="literal">&lt;&gt;</code>、<code class="literal">ne</code>。
      </p>
      <p class="para">
       此参数区分大小写，它的值应该是小写的。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.version-compare-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   
   默认情况下，在第一个版本低于第二个时，<span class="function"><strong>version_compare()</strong></span> 返回 <code class="literal">-1</code>；如果两者相等，返回 <code class="literal">0</code>；第二个版本更低时则返回 <code class="literal">1</code>。
  </p>
  <p class="para">
   当使用了可选参数 <code class="parameter">operator</code> 时，如果关系是操作符所指定的那个，函数将返回 <strong><code>true</code></strong>，否则返回 <strong><code>false</code></strong>。
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.version-compare-examples">
  <h3 class="title">示例</h3>
  <p class="para">
   下例使用了 <strong><code>PHP_VERSION</code></strong> 常量，因为它执行的代码包含了 PHP 版本的值。
  </p>
  <p class="para">
   <div class="example" id="example-1194">
    <p><strong>Example #1 <span class="function"><strong>version_compare()</strong></span> examples</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">if (</span><span style="color: #0000BB">version_compare</span><span style="color: #007700">(</span><span style="color: #0000BB">PHP_VERSION</span><span style="color: #007700">, </span><span style="color: #DD0000">'7.0.0'</span><span style="color: #007700">) &gt;= </span><span style="color: #0000BB">0</span><span style="color: #007700">) {<br />    echo </span><span style="color: #DD0000">'I am at least PHP version 7.0.0, my version: ' </span><span style="color: #007700">. </span><span style="color: #0000BB">PHP_VERSION </span><span style="color: #007700">. </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}<br /><br />if (</span><span style="color: #0000BB">version_compare</span><span style="color: #007700">(</span><span style="color: #0000BB">PHP_VERSION</span><span style="color: #007700">, </span><span style="color: #DD0000">'5.3.0'</span><span style="color: #007700">) &gt;= </span><span style="color: #0000BB">0</span><span style="color: #007700">) {<br />    echo </span><span style="color: #DD0000">'I am at least PHP version 5.3.0, my version: ' </span><span style="color: #007700">. </span><span style="color: #0000BB">PHP_VERSION </span><span style="color: #007700">. </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}<br /><br />if (</span><span style="color: #0000BB">version_compare</span><span style="color: #007700">(</span><span style="color: #0000BB">PHP_VERSION</span><span style="color: #007700">, </span><span style="color: #DD0000">'5.0.0'</span><span style="color: #007700">, </span><span style="color: #DD0000">'&gt;='</span><span style="color: #007700">)) {<br />    echo </span><span style="color: #DD0000">'I am at least PHP version 5.0.0, my version: ' </span><span style="color: #007700">. </span><span style="color: #0000BB">PHP_VERSION </span><span style="color: #007700">. </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}<br /><br />if (</span><span style="color: #0000BB">version_compare</span><span style="color: #007700">(</span><span style="color: #0000BB">PHP_VERSION</span><span style="color: #007700">, </span><span style="color: #DD0000">'5.0.0'</span><span style="color: #007700">, </span><span style="color: #DD0000">'&lt;'</span><span style="color: #007700">)) {<br />    echo </span><span style="color: #DD0000">'I am still PHP 4, my version: ' </span><span style="color: #007700">. </span><span style="color: #0000BB">PHP_VERSION </span><span style="color: #007700">. </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.version-compare-notes">
  <h3 class="title">注释</h3>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <p class="para">
    <strong><code>PHP_VERSION</code></strong> 常量包含了当前 PHP 的版本。
   </p>
  </p></blockquote>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <p class="para">
    注意，类似 5.3.0-dev 的预发行版本，被认为是低于它们的最终发行版本（就像 5.3.0）。
   </p>
  </p></blockquote>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <p class="para">
    指定类似 <code class="literal">alpha</code>、<code class="literal">beta</code> 的版本字符串是大小写敏感的。
    版本字符串的来源若不遵循 PHP 标准，可能需要在调用 <span class="function"><strong>version_compare()</strong></span> 之前先用 <span class="function"><a href="function.strtolower.html" class="function">strtolower()</a></span> 转成小写。
   </p>
  </p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.version-compare-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.phpversion.html" class="function" rel="rdfs-seeAlso">phpversion()</a> - 获取当前的PHP版本</span></li>
    <li class="member"><span class="function"><a href="function.php-uname.html" class="function" rel="rdfs-seeAlso">php_uname()</a> - 返回运行 PHP 的系统的有关信息</span></li>
    <li class="member"><span class="function"><a href="function.function-exists.html" class="function" rel="rdfs-seeAlso">function_exists()</a> - 如果给定的函数已经被定义就返回 true</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="127315""></a>
  <div class="note">
   <strong class="user">Lcuis</strong>
   <a href="#127315" class="date">20-Jul-2022 10:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In case you need to handle more complex version numbers like alpha, beta,..., here is a little something that can help:<br />
<br />
function multiExplode($delimiters,$string){<br />
&nbsp;&nbsp;&nbsp; $pattern = '/['.preg_quote($delimiters).']/';<br />
&nbsp;&nbsp;&nbsp; return(preg_split( $pattern, $string ));<br />
}<br />
<br />
function isInteger($input){<br />
&nbsp;&nbsp;&nbsp; return(ctype_digit(strval($input)));<br />
}<br />
<br />
function keepIntsStartArray($arr){<br />
&nbsp;&nbsp;&nbsp; $nonIntMappings=[<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; "alpha"=&gt;1,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; "beta"=&gt;2,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; "gamma"=&gt;3,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; "delta"=&gt;4,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; "epsilon"=&gt;5,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; "zeta"=&gt;6,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; "eta"=&gt;7,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; "theta"=&gt;8,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; "iota"=&gt;9,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; "kappa"=&gt;10,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; "lambda"=&gt;11,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; "mu"=&gt;12,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; "nu"=&gt;13,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; "xi"=&gt;14,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; "omicron"=&gt;15,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; "pi"=&gt;16,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; "rho"=&gt;17,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; "sigma"=&gt;18,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; "tau"=&gt;19,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; "upsilon"=&gt;20,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; "phi"=&gt;21,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; "chi"=&gt;22,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; "psi"=&gt;23,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; "omega"=&gt;24,<br />
&nbsp;&nbsp;&nbsp; ];<br />
&nbsp;&nbsp;&nbsp; $ret=[];<br />
&nbsp;&nbsp;&nbsp; foreach($arr as $i){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(!isInteger($i)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(!array_key_exists($i,$nonIntMappings)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $ret[]=$nonIntMappings[$i];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $ret[]=$i;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return($ret);<br />
}<br />
<br />
function appVersionBigger($v1,$v2,$orEqual=false){<br />
&nbsp;&nbsp;&nbsp; $delimiters=".-+";<br />
&nbsp;&nbsp;&nbsp; $a1=keepIntsStartArray(multiExplode($delimiters,$v1));<br />
&nbsp;&nbsp;&nbsp; $a2=keepIntsStartArray(multiExplode($delimiters,$v2));<br />
&nbsp;&nbsp;&nbsp; $len=count($a1);<br />
&nbsp;&nbsp;&nbsp; if($len&gt;count($a2)){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $len=count($a2);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; for($i=0;$i&lt;$len;$i++){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $n1=$a1[$i];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $n2=$a2[$i];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if($n1&gt;$n2){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return(true);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if($n1&lt;$n2){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return(false);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if(count($a1)&gt;count($a2)){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return(true);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if(count($a1)&lt;count($a2)){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return(false);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return($orEqual);<br />
}<br />
<br />
// usage examples:<br />
<br />
$versions=[<br />
&nbsp;&nbsp;&nbsp; "1.2.3-45"=&gt;"1.2.3-45",<br />
&nbsp;&nbsp;&nbsp; "1.2.3-44"=&gt;"1.2.3-45",<br />
&nbsp;&nbsp;&nbsp; "1.2.3-46"=&gt;"1.2.3-45",<br />
&nbsp;&nbsp;&nbsp; "1.2.3"=&gt;"1.2.3-45",<br />
&nbsp;&nbsp;&nbsp; "1.2.4"=&gt;"1.2.3-45",<br />
&nbsp;&nbsp;&nbsp; "1.2.2"=&gt;"1.2.3-45",<br />
&nbsp;&nbsp;&nbsp; "1.2"=&gt;"1.2.3-45",<br />
&nbsp;&nbsp;&nbsp; "1.3"=&gt;"1.2.3-45",<br />
&nbsp;&nbsp;&nbsp; "1.2.3-ios"=&gt;"1.2.3-and",<br />
&nbsp;&nbsp;&nbsp; "1.2-ios"=&gt;"1.2.3-and",<br />
&nbsp;&nbsp;&nbsp; "2-ios"=&gt;"1.2.3-and",<br />
&nbsp;&nbsp;&nbsp; "1.2.3-alpha"=&gt;"1.2.3-beta",<br />
&nbsp;&nbsp;&nbsp; "1.2.3-beta"=&gt;"1.2.3-alpha",<br />
&nbsp;&nbsp;&nbsp; "1-gamma"=&gt;"1.2.3-beta",<br />
&nbsp;&nbsp;&nbsp; "1-alpha"=&gt;"1.2.3-beta",<br />
];<br />
<br />
foreach($versions as $v1=&gt;$v2){<br />
&nbsp;&nbsp;&nbsp; echo("v1: ".$v1."\tv2: ".$v2."\tgt: ".(appVersionBigger($v1,$v2,false)?"true":"false")."\tge: ".(appVersionBigger($v1,$v2,true)?"true":"false")."\n");<br />
}<br />
<br />
// output with php version 8.1.8:<br />
/*<br />
v1: 1.2.3-45&nbsp; &nbsp; v2: 1.2.3-45&nbsp; &nbsp; gt: false&nbsp; &nbsp; ge: true<br />
v1: 1.2.3-44&nbsp; &nbsp; v2: 1.2.3-45&nbsp; &nbsp; gt: false&nbsp; &nbsp; ge: false<br />
v1: 1.2.3-46&nbsp; &nbsp; v2: 1.2.3-45&nbsp; &nbsp; gt: true&nbsp; &nbsp; ge: true<br />
v1: 1.2.3&nbsp; &nbsp; v2: 1.2.3-45&nbsp; &nbsp; gt: false&nbsp; &nbsp; ge: false<br />
v1: 1.2.4&nbsp; &nbsp; v2: 1.2.3-45&nbsp; &nbsp; gt: true&nbsp; &nbsp; ge: true<br />
v1: 1.2.2&nbsp; &nbsp; v2: 1.2.3-45&nbsp; &nbsp; gt: false&nbsp; &nbsp; ge: false<br />
v1: 1.2&nbsp; &nbsp; v2: 1.2.3-45&nbsp; &nbsp; gt: false&nbsp; &nbsp; ge: false<br />
v1: 1.3&nbsp; &nbsp; v2: 1.2.3-45&nbsp; &nbsp; gt: true&nbsp; &nbsp; ge: true<br />
v1: 1.2.3-ios&nbsp; &nbsp; v2: 1.2.3-and&nbsp; &nbsp; gt: false&nbsp; &nbsp; ge: true<br />
v1: 1.2-ios&nbsp; &nbsp; v2: 1.2.3-and&nbsp; &nbsp; gt: false&nbsp; &nbsp; ge: false<br />
v1: 2-ios&nbsp; &nbsp; v2: 1.2.3-and&nbsp; &nbsp; gt: true&nbsp; &nbsp; ge: true<br />
v1: 1.2.3-alpha&nbsp; &nbsp; v2: 1.2.3-beta&nbsp; &nbsp; gt: false&nbsp; &nbsp; ge: false<br />
v1: 1.2.3-beta&nbsp; &nbsp; v2: 1.2.3-alpha&nbsp; &nbsp; gt: true&nbsp; &nbsp; ge: true<br />
v1: 1-gamma&nbsp; &nbsp; v2: 1.2.3-beta&nbsp; &nbsp; gt: true&nbsp; &nbsp; ge: true<br />
v1: 1-alpha&nbsp; &nbsp; v2: 1.2.3-beta&nbsp; &nbsp; gt: false&nbsp; &nbsp; ge: false<br />
*/</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="118230""></a>
  <div class="note">
   <strong class="user">Bob Ray</strong>
   <a href="#118230" class="date">29-Oct-2015 11:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that both leading and trailing spaces on your version numbers can break version_compare(). <br />
<br />
Tested on PHP 5.6.8:<br />
&nbsp;<span class="default">&lt;?php<br />
&nbsp;</span><span class="keyword">echo&nbsp; </span><span class="string">"\nShould be 0"</span><span class="keyword">;<br />
echo </span><span class="string">"\n '1.0.0-pl' vs. '1.0.0-pl'&nbsp; ---&gt; " </span><span class="keyword">. </span><span class="default">version_compare</span><span class="keyword">(</span><span class="string">'1.0.0-pl'</span><span class="keyword">, </span><span class="string">'1.0.0-pl'</span><span class="keyword">);<br />
echo </span><span class="string">"\n '1.0.0-pl' vs. ' 1.0.0-pl' ---&gt; " </span><span class="keyword">. </span><span class="default">version_compare</span><span class="keyword">(</span><span class="string">'1.0.0-pl'</span><span class="keyword">, </span><span class="string">' 1.0.0-pl'</span><span class="keyword">);<br />
echo </span><span class="string">"\n ' 1.0.0-pl' vs. '1.0.0-pl' ---&gt; " </span><span class="keyword">. </span><span class="default">version_compare</span><span class="keyword">(</span><span class="string">' 1.0.0-pl'</span><span class="keyword">, </span><span class="string">'1.0.0-pl'</span><span class="keyword">);<br />
echo </span><span class="string">"\n '1.0.0-pl' vs. '1.0.0-pl ' ---&gt; " </span><span class="keyword">. </span><span class="default">version_compare</span><span class="keyword">(</span><span class="string">'1.0.0-pl'</span><span class="keyword">, </span><span class="string">'1.0.0-pl '</span><span class="keyword">);<br />
echo </span><span class="string">"\n '1.0.0-pl ' vs. '1.0.0-pl' ---&gt; " </span><span class="keyword">. </span><span class="default">version_compare</span><span class="keyword">(</span><span class="string">'1.0.0-pl '</span><span class="keyword">, </span><span class="string">'1.0.0-pl'</span><span class="keyword">);<br />
<br />
echo </span><span class="string">"\n\nShould be 1"</span><span class="keyword">;<br />
echo </span><span class="string">"\n '1.1.1-pl' vs. '1.0.0-pl'&nbsp; ---&gt; " </span><span class="keyword">. </span><span class="default">version_compare</span><span class="keyword">(</span><span class="string">'1.1.1-pl'</span><span class="keyword">, </span><span class="string">'1.0.0-pl'</span><span class="keyword">);<br />
echo </span><span class="string">"\n ' 1.1.1-pl' vs. '1.0.0-pl' ---&gt; " </span><span class="keyword">. </span><span class="default">version_compare</span><span class="keyword">(</span><span class="string">' 1.1.1-pl'</span><span class="keyword">, </span><span class="string">'1.0.0-pl'</span><span class="keyword">);<br />
<br />
echo </span><span class="string">"\n\nShould be -1"</span><span class="keyword">;<br />
echo </span><span class="string">"\n '1.0.0-pl' vs. '1.1.1-pl'&nbsp; ---&gt; " </span><span class="keyword">. </span><span class="default">version_compare</span><span class="keyword">(</span><span class="string">'1.0.0-pl'</span><span class="keyword">, </span><span class="string">'1.1.1-pl'</span><span class="keyword">);<br />
echo </span><span class="string">"\n '1.0.0-pl' vs. ' 1.1.1-pl' ---&gt; " </span><span class="keyword">. </span><span class="default">version_compare</span><span class="keyword">(</span><span class="string">'1.0.0-pl'</span><span class="keyword">, </span><span class="string">' 1.1.1-pl'</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/* Output <br />
Should be 0<br />
&nbsp;'1.0.0-pl' vs. '1.0.0-pl'&nbsp; ---&gt; 0<br />
&nbsp;'1.0.0-pl' vs. ' 1.0.0-pl' ---&gt; 1<br />
&nbsp;' 1.0.0-pl' vs. '1.0.0-pl' ---&gt; -1<br />
&nbsp;'1.0.0-pl' vs. '1.0.0-pl ' ---&gt; 1<br />
&nbsp;'1.0.0-pl ' vs. '1.0.0-pl' ---&gt; -1<br />
<br />
Should be 1<br />
&nbsp;'1.1.1-pl' vs. '1.0.0-pl'&nbsp; ---&gt; 1<br />
&nbsp;' 1.1.1-pl' vs. '1.0.0-pl' ---&gt; -1<br />
<br />
Should be -1<br />
&nbsp;'1.0.0-pl' vs. '1.1.1-pl'&nbsp; ---&gt; -1<br />
&nbsp;'1.0.0-pl' vs. ' 1.1.1-pl' ---&gt; 1<br />
&nbsp;&nbsp;&nbsp; */</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="109489""></a>
  <div class="note">
   <strong class="user">mindplay.dk</strong>
   <a href="#109489" class="date">21-Jul-2012 03:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This little script can perhaps help you understand version comparison a little better - the output is displayed in the comment at the top. Tweak the list of versions if you need more examples...<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">#&nbsp; &nbsp; &nbsp; 1 lt 1.0<br />
#&nbsp; &nbsp; 1.0 lt 1.01<br />
#&nbsp;&nbsp; 1.01 eq 1.1<br />
#&nbsp; &nbsp; 1.1 lt 1.10<br />
#&nbsp;&nbsp; 1.10 gt 1.10b<br />
#&nbsp; 1.10b lt 1.10.0<br />
<br />
</span><span class="default">header</span><span class="keyword">(</span><span class="string">'Content-type: text/plain'</span><span class="keyword">);<br />
<br />
</span><span class="default">$versions </span><span class="keyword">= array(<br />
&nbsp; </span><span class="string">'1'</span><span class="keyword">,<br />
&nbsp; </span><span class="string">'1.0'</span><span class="keyword">,<br />
&nbsp; </span><span class="string">'1.01'</span><span class="keyword">,<br />
&nbsp; </span><span class="string">'1.1'</span><span class="keyword">,<br />
&nbsp; </span><span class="string">'1.10'</span><span class="keyword">,<br />
&nbsp; </span><span class="string">'1.10b'</span><span class="keyword">,<br />
&nbsp; </span><span class="string">'1.10.0'</span><span class="keyword">,<br />
);<br />
<br />
</span><span class="default">$comps </span><span class="keyword">= array(<br />
&nbsp;-</span><span class="default">1 </span><span class="keyword">=&gt; </span><span class="string">'lt'</span><span class="keyword">,<br />
&nbsp; </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="string">'eq'</span><span class="keyword">,<br />
&nbsp; </span><span class="default">1 </span><span class="keyword">=&gt; </span><span class="string">'gt'<br />
</span><span class="keyword">);<br />
<br />
foreach (</span><span class="default">$versions </span><span class="keyword">as </span><span class="default">$version</span><span class="keyword">) {<br />
&nbsp; if (isset(</span><span class="default">$last</span><span class="keyword">)) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$comp </span><span class="keyword">= </span><span class="default">version_compare</span><span class="keyword">(</span><span class="default">$last</span><span class="keyword">, </span><span class="default">$version</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">str_pad</span><span class="keyword">(</span><span class="default">$last</span><span class="keyword">,</span><span class="default">8</span><span class="keyword">,</span><span class="string">' '</span><span class="keyword">,</span><span class="default">STR_PAD_LEFT</span><span class="keyword">) . </span><span class="string">" </span><span class="keyword">{</span><span class="default">$comps</span><span class="keyword">[</span><span class="default">$comp</span><span class="keyword">]}</span><span class="string"> </span><span class="keyword">{</span><span class="default">$version</span><span class="keyword">}</span><span class="string">\n"</span><span class="keyword">;<br />
&nbsp; }<br />
&nbsp; </span><span class="default">$last </span><span class="keyword">= </span><span class="default">$version</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106715""></a>
  <div class="note">
   <strong class="user">rogier</strong>
   <a href="#106715" class="date">30-Nov-2011 08:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Please note that supplying an operator that is not listed (e.g. ===), this function returns NULL instead of false.<br />
<br />
Tested on PHP5.3.0, Win32</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89416""></a>
  <div class="note">
   <strong class="user">insid0r at yahoo dot com</strong>
   <a href="#89416" class="date">06-Mar-2009 01:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Since this function considers 1 &lt; 1.0 &lt; 1.0.0, others might find this function useful (which considers 1 == 1.0):
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="comment">//Compare two sets of versions, where major/minor/etc. releases are separated by dots.
<br />
//Returns 0 if both are equal, 1 if A &gt; B, and -1 if B &lt; A.
<br />
</span><span class="keyword">function </span><span class="default">version_compare2</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">)
<br />
{
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$a </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"."</span><span class="keyword">, </span><span class="default">rtrim</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="string">".0"</span><span class="keyword">)); </span><span class="comment">//Split version into pieces and remove trailing .0
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$b </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"."</span><span class="keyword">, </span><span class="default">rtrim</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">, </span><span class="string">".0"</span><span class="keyword">)); </span><span class="comment">//Split version into pieces and remove trailing .0
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">foreach (</span><span class="default">$a </span><span class="keyword">as </span><span class="default">$depth </span><span class="keyword">=&gt; </span><span class="default">$aVal</span><span class="keyword">)
<br />
&nbsp;&nbsp;&nbsp; { </span><span class="comment">//Iterate over each piece of A
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (isset(</span><span class="default">$b</span><span class="keyword">[</span><span class="default">$depth</span><span class="keyword">]))
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; { </span><span class="comment">//If B matches A to this depth, compare the values
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$aVal </span><span class="keyword">&gt; </span><span class="default">$b</span><span class="keyword">[</span><span class="default">$depth</span><span class="keyword">]) return </span><span class="default">1</span><span class="keyword">; </span><span class="comment">//Return A &gt; B
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">else if (</span><span class="default">$aVal </span><span class="keyword">&lt; </span><span class="default">$b</span><span class="keyword">[</span><span class="default">$depth</span><span class="keyword">]) return -</span><span class="default">1</span><span class="keyword">; </span><span class="comment">//Return B &gt; A
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //An equal result is inconclusive at this point
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; { </span><span class="comment">//If B does not match A to this depth, then A comes after B in sort order
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">1</span><span class="keyword">; </span><span class="comment">//so return A &gt; B
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//At this point, we know that to the depth that A and B extend to, they are equivalent.
<br />
&nbsp;&nbsp;&nbsp; //Either the loop ended because A is shorter than B, or both are equal.
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">return (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">) &lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">)) ? -</span><span class="default">1 </span><span class="keyword">: </span><span class="default">0</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75656""></a>
  <div class="note">
   <strong class="user">opendb at iamvegan dot net</strong>
   <a href="#75656" class="date">10-Jun-2007 05:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Something that may trip some folks up, but is useful to mention is that the following version comparison does not work quite as I expected:<br />
&nbsp;&nbsp;&nbsp; version_compare('1.0.1', '1.0pl1', '&gt;') <br />
<br />
However, its quite easy to get working:<br />
&nbsp;&nbsp;&nbsp; version_compare('1.0.1', '1.0.0pl1', '&gt;')</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="46094""></a>
  <div class="note">
   <strong class="user">arnoud at procurios dot nl</strong>
   <a href="#46094" class="date">29-Sep-2004 02:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you're careful, this function actualy works quite nicely for comparing version numbers from programs other than PHP itself. I've used it to compare MySQL version numbers. The only issue is that version_compare doesn't recognize the 'gamma' addition that mysql uses as being later than 'alpha' or 'beta', because the latter two are treated specially. If you keep this in mind though, you should have no problems.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="43452""></a>
  <div class="note">
   <strong class="user">eric at themepark dot com</strong>
   <a href="#43452" class="date">21-Jun-2004 09:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
[editors note]
<br />
snipbit fixed after comment from Matt Mullenweg
<br />

<br />
--jm
<br />
[/editors note]
<br />

<br />
so in a nutshell... I believe it works best like this:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">if (</span><span class="default">version_compare</span><span class="keyword">(</span><span class="default">phpversion</span><span class="keyword">(), </span><span class="string">"4.3.0"</span><span class="keyword">, </span><span class="string">"&gt;="</span><span class="keyword">)) {
<br />
&nbsp; </span><span class="comment">// you're on 4.3.0 or later
<br />
</span><span class="keyword">} else {
<br />
&nbsp; </span><span class="comment">// you're not
<br />
</span><span class="keyword">}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="42608""></a>
  <div class="note">
   <strong class="user">sam at wyvern dot non-spammers-remove dot com dot au</strong>
   <a href="#42608" class="date">23-May-2004 11:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Actually, it works to any degree:<br />
<br />
<span class="default">&lt;?php<br />
version_compare</span><span class="keyword">(</span><span class="string">'1.2.3.4RC7.7'</span><span class="keyword">, </span><span class="string">'1.2.3.4RC7.8'</span><span class="keyword">)<br />
</span><span class="default">version_compare</span><span class="keyword">(</span><span class="string">'8.2.50.4'</span><span class="keyword">, </span><span class="string">'8.2.52.6'</span><span class="keyword">)<br />
</span><span class="default">?&gt;<br />
</span><br />
will both give -1 (ie the left is lower than the right).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
