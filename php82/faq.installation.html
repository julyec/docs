<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=UTF-8">
  <title>安装常见问题</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="faq.databases.html">? Database issues</a></li>
      <li style="float: right;"><a href="faq.build.html">编译问题 ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="faq.html">FAQ</a></li>
    <li>安装常见问题</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="faq.installation" class="chapter">
  <h1>安装常见问题</h1>

  
  <p class="para">本章包括了安装 PHP 的常见问题。PHP 可以用于几乎任何操作系统（可能除了 OS X 之前的 MacOS 之外），以及几乎任何 web 服务器。</p>
  <p class="para">要安装 PHP，请按照
  <a href="install.html" class="link">安装与配置</a>一章中的指示进行。</p>
  <div class="qandaset"><ol class="qandaset_questions"><li><a href="#faq.installation.apache2">
        为什么不应该在实际运作环境中的 Apache2 中使用线程化的 MPM？
      </a></li><li><a href="#faq.installation.phpini">
        Unix/Windows：应该上哪儿去找我的 php.ini 文件？
      </a></li><li><a href="#faq.installation.nodata">
        Unix：我安装了 PHP，但每次我打开一个页面时，只得到一条&ldquo;Document Contains No Data&rdquo;消息！这是怎么回事？
      </a></li><li><a href="#faq.installation.processing">
        Unix：我从 RPMS 安装了 PHP，但是 Apache 不处理 PHP 页面！这是怎么回事？
      </a></li><li><a href="#faq.installation.frontpage">
        Unix：我给 Apache 加上了 FrontPage extensions 补丁，结果 PHP 突然不工作了。PHP 和 Apache FrontPage extensions 兼容吗？
      </a></li><li><a href="#faq.installation.blankscreen">
        Unix/Windows：我已经安装了 PHP，但当我试着通过浏览器访问 PHP 脚本时，得到了一个空白页面。
      </a></li><li><a href="#faq.installation.500error">
        Unix/Windows：我已经安装了 PHP，但当我试着通过浏览器访问 PHP 脚本时，得到了一个服务器的 500 错误。
      </a></li><li><a href="#faq.installation.undefinedsyms">
        某些操作系统：我已经在不出错的情况下安装了 PHP，但当我试着启动 Apache 时得到了一个未定义符号错误： 
        [mybox:user /src/php4] root# apachectl configtest apachectl: /usr/local/apache/bin/httpd Undefined symbols: _compress _uncompress
      </a></li><li><a href="#faq.installation.cgierror">
        Windows：我已经安装了 PHP，但当我试着通过浏览器访问 PHP 脚本时，得到如下错误： 
        cgi error: The specified CGI application misbehaved by not returning a complete set of HTTP headers. The headers it did return are:
      </a></li><li><a href="#faq.installation.phpandiis">
        Windows：我已经照着所有的说明做了，但还是不能让 PHP 和 IIS 一起工作！
      </a></li><li><a href="#faq.installation.forceredirect">
        当在 IIS，PWS，OmniHTTPD 或者 Xitami 中以 CGI 方式运行 PHP 时，出现如下错误：
        Security Alert! PHP CGI cannot be accessed directly..
      </a></li><li><a href="#faq.installation.findphpini">
        怎样得知我的 php.ini 是否被找到和应用了？似乎我做的修改都没有生效。
      </a></li><li><a href="#faq.installation.addtopath">
        怎样将 PHP 目录加入到 Windows 路径 
        PATH中去？
      </a></li><li><a href="#faq.installation.phprc">
        怎样使 php.ini 文件在 Windows 下被 PHP 所用？
      </a></li><li><a href="#faq.installation.apache.multiviews">
        有可能使 PHP 运作于 Apache 的 content negotiation（MultiViews 选项）吗？
      </a></li><li><a href="#faq.installation.requestmethods">
        PHP 是否仅限于处理 GET 和 POST 请求方法？
      </a></li></ol></div>
    <dl class="qandaentry" id="faq.installation.apache2">
      <dt><strong>
        为什么不应该在实际运作环境中的 Apache2 中使用线程化的 MPM？
      </strong></dt>
      <dd class="answer">
        <p class="para">PHP 是粘合剂。它将几十种第三方的库粘合到一起来创建很酷的 web 应用，并通过很直观且易于学习的语言界面使其看上去好像一个整体。PHP 的灵活与强大依赖于底层平台的稳定与耐用。起码需要将一个可运作的操作系统，一个可运作的 web 服务器以及可运作的第三方库粘合起来。其中任何一方不运作了，PHP 都需要有方法来识别出问题并且快速解决。如果没有完全独立的执行线程，完全独立的内存单元和稳定的空间对付每个请求，那底层架构就太复杂以至于不稳定因素更容易进入到 PHP 系统中。</p>
        <p class="para">如果必须要用线程化的 MPM，看看 FastCGI 配置，使 PHP 运行于自己独立的内存空间中。</p>
        <p class="para">最后需要指出，不使用线程化 MPM 的警告在 Windows 系统中没那么强烈，因为 Windows 中的大多数库都理应在多线程下安全运行。</p>
      </dd>
    </dl>
    <dl class="qandaentry" id="faq.installation.phpini">
      <dt><strong>
        Unix/Windows：应该上哪儿去找我的 <var class="filename">php.ini</var> 文件？
      </strong></dt>
      <dd class="answer">
        <p class="para">UNIX 中默认在 
        <var class="filename">/usr/local/lib</var>目录中，也就是 
        <var class="filename">&lt;install-path&gt;/lib</var>。很多人会在编译时通过 
        <a href="configure.about.html#configure.with-config-file-path" class="link">--with-config-file-path</a>标记来改变路径。例如可以将路径设为： 
        <div class="example-contents"><div class="shellcode"><pre class="shellcode">--with-config-file-path=/etc</pre>
</div></div>
然后从发行包中将 
        <var class="filename">php.ini-dist</var>拷贝为 
        <var class="filename">/etc/php.ini</var>并编辑它来作出想要的修改。</p>
        <div class="example-contents"><div class="shellcode"><pre class="shellcode">--with-config-file-scan-dir=PATH</pre>
</div></div>

        <p class="para">Windows 中 <var class="filename">php.ini</var> 文件的默认路径在 Windows 目录下。如果使用的是 Apache 服务器，则会首先在 Apache 的安装目录中寻找 <var class="filename">php.ini</var>，例如 
        <var class="filename">C:\Program Files\Apache Group\Apache</var>。这样同一台机器上不同版本的 Apache 就可以有不同的 <var class="filename">php.ini</var> 文件。</p>
        <p class="para">参见
        <a href="configuration.file.html" class="link">配置文件</a>。</p>
      </dd>
    </dl>
    <dl class="qandaentry" id="faq.installation.nodata">
      <dt><strong>
        Unix：我安装了 PHP，但每次我打开一个页面时，只得到一条"Document Contains No Data"消息！这是怎么回事？
      </strong></dt>
      <dd class="answer">
        <p class="para">这可能意味着 PHP 发生了某类错误而导致了 core dump。查看服务器的错误日志看看是不是这样，再用一个小的测试例子试着重现此问题。如果你会用"gdb"的话，那么在 bug 报告中提供回溯跟踪很有助于帮开发人员查明问题。如果你用 Apache 的模块方式使用 PHP，试着这么做： 
        <ul class="itemizedlist">
          <li class="listitem">
            <p class="para">停止 httpd 进程</p>
          </li>
          <li class="listitem">
            <p class="para">gdb httpd</p>
          </li>
          <li class="listitem">
            <p class="para">停止 httpd 进程</p>
          </li>
          <li class="listitem">
            <p class="para">&gt; run -X -f /path/to/httpd.conf</p>
          </li>
          <li class="listitem">
            <p class="para">然后在你的浏览器中访问导致错误的 URL</p>
          </li>
          <li class="listitem">
            <p class="para">&gt; run -X -f /path/to/httpd.conf</p>
          </li>
          <li class="listitem">
            <p class="para">如果你遇到 core dump，gdb 此时就会通知你</p>
          </li>
          <li class="listitem">
            <p class="para">输入：bt</p>
          </li>
          <li class="listitem">
            <p class="para">你应该在 bug 报告中包括回溯追踪记录。应该提交到 
            <a href="https://github.com/php/php-src/issues" class="link external" title="Link : https://github.com/php/php-src/issues">&raquo;&nbsp;https://github.com/php/php-src/issues</a></p>
          </li>
        </ul></p>
        <p class="para">如果你的脚本使用了正则表达式函数（
        <span class="function"><strong>ereg()</strong></span>等），应该确认在编译 PHP 和 Apache 时使用了同一个正则表达式包。在 PHP 和 Apache 1.3.x 中应该自动就是这样。</p>
      </dd>
    </dl>
    <dl class="qandaentry" id="faq.installation.processing">
      <dt><strong>
        Unix：我从 RPMS 安装了 PHP，但是 Apache 不处理 PHP 页面！这是怎么回事？
      </strong></dt>
      <dd class="answer">
        <p class="para">假定你的 Apache 和 PHP 都是从 RPM 包中安装的，你需要在 <var class="filename">httpd.conf</var> 文件中取消以下部分或所有行的注释，或者把它们添加到该文件中： 
        <div class="example-contents">
          <div class="apache-confcode"><pre class="apache-confcode"># Extra Modules
AddModule mod_php.c
AddModule mod_perl.c

# Extra Modules
LoadModule php_module         modules/mod_php.so
LoadModule php5_module        modules/libphp5.so
LoadModule perl_module        modules/libperl.so</pre>
</div>
</div>
并且把： 
        <div class="example-contents">
          <div class="apache-confcode"><pre class="apache-confcode">AddType application/x-httpd-php .php</pre>
</div>
</div>
添加到全局属性中，或者添加到你希望加入 PHP 支持的虚拟域中。</p>
      </dd>
    </dl>
    <dl class="qandaentry" id="faq.installation.frontpage">
      <dt><strong>
        Unix：我给 Apache 加上了 FrontPage extensions 补丁，结果 PHP 突然不工作了。PHP 和 Apache FrontPage extensions 兼容吗？
      </strong></dt>
      <dd class="answer">
        <p class="para">兼容的。PHP 可以和 FrontPage extensions 一起工作，问题是 FrontPage 补丁修改了几个 PHP 依赖的 Apache 构造。在 FrontPage 补丁安装之后之后重新编译 PHP（用"make clean ; make"）可以解决此问题。</p>
      </dd>
    </dl>
    <dl class="qandaentry" id="faq.installation.blankscreen">
      <dt><strong>
        Unix/Windows：我已经安装了 PHP，但当我试着通过浏览器访问 PHP 脚本时，得到了一个空白页面。
      </strong></dt>
      <dd class="answer">
        <p class="para">用浏览器中的"查看源文件"，你可能会发现能看到 PHP 脚本的源程序。这意味着 web 服务器没有把脚本发送给 PHP 解释。服务器配置在某处有问题，请对照 PHP 安装说明仔细检查服务器配置。</p>
      </dd>
    </dl>
    <dl class="qandaentry" id="faq.installation.500error">
      <dt><strong>
        Unix/Windows：我已经安装了 PHP，但当我试着通过浏览器访问 PHP 脚本时，得到了一个服务器的 500 错误。
      </strong></dt>
      <dd class="answer">
        <p class="para">当服务器尝试运行 PHP 时出了错。要想看到有意义的错误信息，在命令行中转到 PHP 可执行程序（Windows 中是 
        <var class="filename">php.exe</var>）所在目录下并运行 
        <strong class="command">php -i</strong>。如果 PHP 运行有任何问题，那么会显示相应的错误信息，这将给你下一步要做什么的线索。如果你得到满屏幕 HTML 代码（
        <span class="function"><a href="function.phpinfo.html" class="function">phpinfo()</a></span>函数的输出）的话说明 PHP 本身工作正常，你的问题可能和你的服务器配置有关，要仔细检查。</p>
      </dd>
    </dl>
    <dl class="qandaentry" id="faq.installation.undefinedsyms">
      <dt><strong>
        某些操作系统：我已经在不出错的情况下安装了 PHP，但当我试着启动 Apache 时得到了一个未定义符号错误： 
        <div class="example-contents"><div class="shellcode"><pre class="shellcode">[mybox:user /src/php4] root# apachectl configtest apachectl: /usr/local/apache/bin/httpd Undefined symbols: _compress _uncompress</pre>
</div></div>

      </strong></dt>
      <dd class="answer">
        <p class="para">这实际上和 PHP 没有关系，而和 MySQL 的客户端库有关。有的需要 
        <strong class="option configure">--with-zlib</strong>，有的不需要。这个问题也包括在 MySQL 的 FAQ 中。</p>
      </dd>
    </dl>
    <dl class="qandaentry" id="faq.installation.cgierror">
      <dt><strong>
        Windows：我已经安装了 PHP，但当我试着通过浏览器访问 PHP 脚本时，得到如下错误： 
        <div class="example-contents screen">cgi error: The specified CGI application misbehaved by not returning a complete set of HTTP headers. The headers it did return are:</div>
      </strong></dt>
      <dd class="answer">
        <p class="para">这个错误信息意味着 PHP 根本就不能产生任何输出。要想看到有意义的错误信息，在命令行中转到 PHP 可执行程序（Windows 中是 
        <var class="filename">php.exe</var>）所在目录下并运行 
        <strong class="command">php -i</strong>。如果 PHP 运行有任何问题，那么会显示相应的错误信息，这将给你下一步要做什么的线索。如果你得到满屏幕 HTML 代码（
        <span class="function"><a href="function.phpinfo.html" class="function">phpinfo()</a></span>函数的输出）的话说明 PHP 本身工作正常。</p>
        <p class="para">一旦 PHP 在命令行中工作正常，试着通过浏览器再次访问脚本。如果还失败的话那可能是如下原因之一：</p>
        <ul class="itemizedlist">
          <li class="listitem">
            <span class="simpara">文件权限问题，你的 PHP 脚本，
            <var class="filename">php.exe</var>，
            <var class="filename">php4ts.dll</var>，<var class="filename">php.ini</var> 或任何你要加载的 PHP 扩展库是匿名 internet 用户 
            <code class="literal">ISUR_&lt;machinename&gt;</code>无权访问的。</span>
          </li>
          <li class="listitem">
            <span class="simpara">脚本文件不存在（或者有可能不在你以为的地方，注意 web 文档的目录）。注意在 IIS 中通过 Internet 服务管理器设定脚本映射时选中"检查文件是否存在"可以捕捉到此错误。这样一来如果脚本文件不存在的话服务器就会返回一个 404 错误信息。还有一个额外的好处就是 IIS 会基于 NTLanMan 权限来替你对脚本文件做任何所需要的认证。</span>
          </li>
        </ul>
      </dd>
    </dl>
    <dl class="qandaentry" id="faq.installation.phpandiis">
      <dt><strong>
        Windows：我已经照着所有的说明做了，但还是不能让 PHP 和 IIS 一起工作！
      </strong></dt>
      <dd class="answer">
        <p class="para">确认需要运行 PHP 脚本的任何用户有权限运行 
        <var class="filename">php.exe</var>！IIS 使用了一个在安装 IIS 时添加的匿名用户，这个用户需要有访问 
        <var class="filename">php.exe</var>的权限。同样任何认证用户也需要执行 
        <var class="filename">php.exe</var>的权限。在 IIS4 中你还需要告诉它 PHP 是一个脚本引擎。此外，你可能还需要阅读
        <a href="faq.installation.html#faq.installation.forceredirect" class="link">此常见问题</a>。</p>
      </dd>
    </dl>
    <dl class="qandaentry" id="faq.installation.forceredirect">
      <dt><strong>
        当在 IIS，PWS，OmniHTTPD 或者 Xitami 中以 CGI 方式运行 PHP 时，出现如下错误：
        <code class="literal">Security Alert! PHP CGI cannot be accessed directly.</code>.
      </strong></dt>
      <dd class="answer">
        <p class="para">必须将 
        <a href="ini.core.html#ini.cgi.force-redirect" class="link">cgi.force_redirect</a>选项设为 
        <code class="literal">0</code>。 默认值为 
        <code class="literal">1</code>，因此要确认此选项没有被注释掉（用 
        <code class="literal">;</code>）。和其它选项一样，是在 <var class="filename">php.ini</var> 中设定的。</p>
        <p class="para">因为默认值是 
        <code class="literal">1</code>，因此你必须百分之百确认使用了正确的 <var class="filename">php.ini</var> 文件。详细信息请阅读
        <a href="faq.installation.html#faq.installation.findphpini" class="link">此常见问题</a>。</p>
      </dd>
    </dl>
    <dl class="qandaentry" id="faq.installation.findphpini">
      <dt><strong>
        怎样得知我的 <var class="filename">php.ini</var> 是否被找到和应用了？似乎我做的修改都没有生效。
      </strong></dt>
      <dd class="answer">
        <p class="para">要确认你的 <var class="filename">php.ini</var> 被 PHP 使用了，调用 
        <span class="function"><a href="function.phpinfo.html" class="function">phpinfo()</a></span>，在接近开头的位置有一项叫做 
        <code class="literal">Configuration File (php.ini)</code>。这里将告诉你 PHP 在哪里找到了 <var class="filename">php.ini</var> 并且是否使用了。如果只显示一个目录则 没有使用任何 <var class="filename">php.ini</var> 文件，你应将你的 <var class="filename">php.ini</var> 文件放到该目录中。如果 <var class="filename">php.ini</var> 包括在该路径中则它已被应用了。</p>
        <p class="para">如果 <var class="filename">php.ini</var> 被使用了并且你是以模块方式运行 PHP 的，确保在修改了 <var class="filename">php.ini</var> 之后重新启动你的 web server。</p>
      </dd>
    </dl>
    <dl class="qandaentry" id="faq.installation.addtopath">
      <dt><strong>
        怎样将 PHP 目录加入到 Windows 路径 
        <var class="varname">PATH</var>中去？
      </strong></dt>
      <dd class="answer">
        <p class="para">在 Windows NT，2000，XP 和 2003 下： 
        <ul class="itemizedlist">
          <li class="listitem">
            <p class="para">进入控制面板并打开"系统"图标（开始 -&gt; 设置 -&gt; 控制面板 -&gt; 系统，Windows XP/2003 中是：开始 -&gt; 控制面板 -&gt; 系统）</p>
          </li>
          <li class="listitem">
            <p class="para">选择"高级"标签页</p>
          </li>
          <li class="listitem">
            <p class="para">点击"环境变量"按钮</p>
          </li>
          <li class="listitem">
            <p class="para">在"系统变量"栏中</p>
          </li>
          <li class="listitem">
            <p class="para">找到 Path 这一项（可能需要向下滚动才能找到）</p>
          </li>
          <li class="listitem">
            <p class="para">鼠标双击 Path 这一项</p>
          </li>
          <li class="listitem">
            <p class="para">在最后加入你的 PHP 目录，包括前面的";"（例如：
            <code class="literal">;C:\php</code>）</p>
          </li>
          <li class="listitem">
            <p class="para">点击"确定"并重新启动电脑</p>
          </li>
        </ul></p>
        <p class="para">在 Windows 98/Me 中需要编辑 
        <var class="filename">autoexec.bat</var>文件： 
        <ul class="itemizedlist">
          <li class="listitem">
            <p class="para">打开记事本（开始 -&gt; 运行，然后输入 notepad 并点确定）</p>
          </li>
          <li class="listitem">
            <p class="para">打开 
            <var class="filename">C:\autoexec.bat</var>文件</p>
          </li>
          <li class="listitem">
            <p class="para">找到这么一行：PATH=C:\WINDOWS;C:\WINDOWS\COMMAND;..... 并在最后加上 
            <code class="literal">;C:\php</code></p>
          </li>
          <li class="listitem">
            <p class="para">保存文件并重新启动电脑</p>
          </li>
        </ul></p>
        <blockquote class="note"><p><strong class="note">Note</strong>: 
          <span class="simpara">记住在上述修改之后重新启动，以确保对 
          <var class="varname">PATH</var>的改变生效。</span>
        </p></blockquote>
        <p class="para">PHP 手册过去提倡把文件拷贝到 Windows 系统目录中去，这是因为该目录（
        <var class="filename">C:\Windows</var>，
        <var class="filename">C:\WINNT</var>，等等）默认就在系统路径中。但是把文件拷贝到 Windows 系统目录中这一方式早已不被提倡，还可能造成问题。</p>
      </dd>
    </dl>
    <dl class="qandaentry" id="faq.installation.phprc">
      <dt><strong>
        怎样使 <var class="filename">php.ini</var> 文件在 Windows 下被 PHP 所用？
      </strong></dt>
      <dd class="answer">
        <p class="para">
         有几种方法可以做到这一点。如果您使用的是 Apache，
         请参阅 Apache 文档，否则
         您必须设置<var class="varname">PHPRC</var>环境变量。
        </p>
      </dd>
    </dl>
    <dl class="qandaentry" id="faq.installation.apache.multiviews">
      <dt><strong>
        有可能使 PHP 运作于 Apache 的 content negotiation（MultiViews 选项）吗？
      </strong></dt>
      <dd class="answer">
        <p class="para">如果到 PHP 文件的连接包含扩展名，一切都运行完美。本解答只针对到 PHP 文件的连接不包含扩展名时，而希望通过 content negotiation 来从不包含扩展名的 URL 来选择 PHP 文件的情况。在此种情况下，将 
        <code class="literal">AddType application/x-httpd-php .php</code>替换为： 
        <div class="example-contents">
          <div class="apache-confcode"><pre class="apache-confcode"># PHP 4
AddHandler php-script php
AddType text/html php

# PHP 5
AddHandler php5-script php
AddType text/html php</pre>
</div>
</div>
此方案对于 Apache 1 不适用，因为 PHP 模块不捕获 
        <code class="literal">php-script</code>。</p>
      </dd>
    </dl>
    <dl class="qandaentry" id="faq.installation.requestmethods">
      <dt><strong>
        PHP 是否仅限于处理 GET 和 POST 请求方法？
      </strong></dt>
      <dd class="answer">
        <p class="para">不是，PHP 有可能处理任何请求方法，例如 CONNECT。适当的回应状态可以用 
        <span class="function"><a href="function.header.html" class="function">header()</a></span>发送。如果仅需要处理 GET 和 POST 方法，可以通过如下的 Apache 配置实现： 
        <div class="example-contents">
          <div class="apache-confcode"><pre class="apache-confcode">&lt;LimitExcept GET POST&gt;
Deny from all
&lt;/LimitExcept&gt;</pre>
</div>
</div>
</p>
      </dd>
    </dl>
  
</div>
<div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="96710""></a>
  <div class="note">
   <strong class="user">ssaxena at nriol dot com</strong>
   <a href="#96710" class="date">12-Mar-2010 02:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here are my struggle to get PHP 5.2.12 working on Windows XP SP3, IIS 5.1 (Please note Win XP SP3 has issue of FastCGI)<br />
<br />
1. Dowloaded installer and installed in C:\Program Files\PHP as ISAPI module<br />
<br />
----&gt;Did not work<br />
<br />
Added php5isapi.dll in ISAPI Filter and added the extension .php in Home Dir-&gt;Configuration<br />
(For every setting change restarted IIS on cmd-&gt;iisreset)<br />
<br />
----&gt;Did not work<br />
<br />
(And the Google was pointing to the Fast CGI issue; Don't know why microsoft has MS-FAST ! )<br />
Uninstalled the PHP and cleaned up the folders, PATH environment variable &amp; PHPRC, the IIS settings and registry entries and shut down(restart is different from shut down) the system to make it very clean<br />
<br />
2. Reinstalled the PHP in C:\PHP as ISAPI and did the same as above in IIS<br />
(For every setting change restarted IIS on cmd-&gt;iisreset)<br />
<br />
----&gt;Did not work<br />
<br />
Uninstalled and cleaned up same as above and took a breath to make sure what I am doing wrong.<br />
Shutdown the system.<br />
<br />
3. Unzipped the php-5.2.12-Win32.zip and did the same as above (this time manually PATH variable and security permission for the PHP folder and following settings)<br />
<br />
short_open_tag = On<br />
error_reporting = E_ALL &amp; ~E_NOTICE<br />
display_errors = On<br />
doc_root = "C:\Inetpub\wwwroot"<br />
extension_dir = "C:\PHP\ext"<br />
cgi.force_redirect = 0 <br />
<br />
----&gt;Did not work<br />
<br />
Uninstalled and cleaned up same as above<br />
Shutdown the system.<br />
<br />
4. Downloaded Microsoft Web Platform Installer 2.0 and select the PHP+Fast CGI+Windows Cache for PHP extension and Web Deployment Tools<br />
restarted the system to take effect the settings<br />
<br />
----&gt;Did not work<br />
<br />
Uninstalled and cleaned up same as above<br />
Shutdown the system<br />
<br />
5. Took the prev version of PHP php-5.2.4-Win32.zip unzip the folder and did the following changes:<br />
<br />
short_open_tag = On<br />
error_reporting = E_ALL &amp; ~E_NOTICE<br />
display_errors = On<br />
doc_root = "C:\Inetpub\wwwroot"<br />
extension_dir = "C:\PHP\ext"<br />
cgi.force_redirect = 0<br />
<br />
set the security permission as IIS_machinename with full access to the C:\PHP folder<br />
<br />
-------&gt;IT GOT WOKRING<br />
<br />
Hope people would be aware of php-5.2.12 and would love the php-5.2.4</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82967""></a>
  <div class="note">
   <strong class="user">john dot calder at manukau dot ac dot nz</strong>
   <a href="#82967" class="date">03-May-2008 10:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
WINDOWS 2003 and IIS.&nbsp; BIG LESSON FOR ME was "don't mess with the optional components". <br />
I had lots of trouble until I tried installing without asking for extras and then it was very smooth.<br />
I have found no need to set up paths.&nbsp; <br />
I have found no need to configure IIS.&nbsp; <br />
I have found no need to change security on the PHP folder.<br />
<br />
What works for me with Windows/IIS:<br />
<br />
1.&nbsp; You need to be logged-on as "administrator"<br />
<br />
2.&nbsp; Run&nbsp; "php-5.2.6-win32-installer.msi"<br />
Your ONLY action during this wizard is to select "IIS ISAPI" as the webserver.&nbsp; Do NOT CHANGE anything else!&nbsp; I am guessing that the optional extras apply only to Apache because after enabling them I see Apache-related error messages.<br />
<br />
3.&nbsp; Setup a test virtual directory as you would for an ASP or ASP.NET web app.&nbsp; eg "phptest"<br />
Then use notepad to create a test page eg "test.php"<br />
<span class="default">&lt;?php<br />
phpinfo</span><span class="keyword">();<br />
</span><span class="default">?&gt;</span> <br />
<br />
4.&nbsp; In Internet Explorer, test with eg this address<br />
<a href="http://localhost/phptest/test.php" rel="nofollow" target="_blank">http://localhost/phptest/test.php</a><br />
<br />
IF this does not give you a beautiful page of details THEN start reading other advice on this page - especially helpful for me was the faq advice to test run "php.exe -i" from the command prompt.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82606""></a>
  <div class="note">
   <strong class="user">charleslynch at xybersoftware dot com</strong>
   <a href="#82606" class="date">17-Apr-2008 07:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
One final note to the message below if you are getting the message about not having rights to execute...You need to use IIS right click on the website and choose 'Properties/Home Directory' then on the 'Execute Permissions' combo box you need to choose 'Scripts only'...Click ok...another dialog may appear asking which directories to apply the action too...choose any directories that you intend on using php in and click ok...It should work now...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="78933""></a>
  <div class="note">
   <strong class="user">joerg at fenin dot de</strong>
   <a href="#78933" class="date">02-Nov-2007 02:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To limit HTTP Request Methods on the Apache server running PHP you should use mod_rewrite or mod_security instead of LimitExcept, to give you more control over the handling of such http errors.&nbsp; Can go in .htaccess file or httpd.conf<br />
<br />
# mod_rewrite<br />
&lt;IfModule mod_rewrite.c&gt;<br />
&nbsp; RewriteEngine On<br />
&nbsp; RewriteCond %{REQUEST_METHOD} !^(GET|HEAD|POST)$<br />
&nbsp; RewriteRule .* - [F,L]<br />
&lt;/IfModule&gt;<br />
<br />
# mod_security<br />
&lt;IfModule mod_security.c&gt;<br />
&nbsp; SecFilterSelective REQUEST_METHOD "!^(GET|HEAD|POST)$" "deny,log,status:403"<br />
&lt;/IfModule&gt;<br />
<br />
You can use the php request method scanner at askapache to see exactly how your server deals with various request methods, and check that your server is configured properly..&nbsp; <br />
<br />
<a href="http://www.askapache.com/online-tools/request-method-scanner/" rel="nofollow" target="_blank">http://www.askapache.com/online-tools/request-method-scanner/</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="77927""></a>
  <div class="note">
   <strong class="user">scott at chaisson dot net</strong>
   <a href="#77927" class="date">19-Sep-2007 09:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Windows 2000 Server and IIS (SP4 and all patches):<br />
<br />
After many frustrating hours of trying to figure out the install (again), It took a while, but here are a couple tips:<br />
<br />
PHP working with IIS uses c:\winnt\php.ini<br />
<br />
It doesn't matter what you set the path to, nor what you set the PHPRC environment variable to. After you get PHP running correctly in the installation folder (using php -i) copy the php.ini file into the c:\winnt folder.<br />
<br />
Here's what worked for me:<br />
<br />
- Add PHP path to System environment variable<br />
<br />
- Add php5activescript.dll from <a href="http://snaps.php.net/ to the PHP folder, then Register it: " rel="nofollow" target="_blank">http://snaps.php.net/ to the PHP folder, then Register it: </a>"regsvr32 php5activescript.dll"<br />
<br />
Set extension_dir and doc_root directives in PHP.INI:<br />
&nbsp; extension_dir = C:\WWW\PHP\ext<br />
&nbsp; doc_root = C:\WWW\Site<br />
&nbsp; cgi.force_redirect = 0<br />
<br />
(the last cgi.force_redirect isn't required, but I like to set it anyway)<br />
<br />
Copy the .INI file into WINNT folder<br />
<br />
In IIS Manager, right-click "Default Web Site", Click "Home Directory",<br />
&nbsp; Click "Configuration", "Add" the ISAPI application:<br />
&nbsp;&nbsp;&nbsp; Executable: &lt;your php install&gt;\php5isapi.dll<br />
&nbsp;&nbsp;&nbsp; Extension: .php<br />
&nbsp;&nbsp;&nbsp; Limit to: GET,HEAD,POST<br />
&nbsp;&nbsp;&nbsp; Check: "Script Engine"<br />
&nbsp;&nbsp;&nbsp; Uncheck: "Check that file exists"<br />
<br />
Finally: Set up an ISAPI filter:<br />
&nbsp; Click the "ISAPI Filters" tab,<br />
&nbsp; Filter Name: PHP<br />
&nbsp; Executable: &lt;your php install&gt;\php5isapi.dll<br />
<br />
Notes: You don't have to set any of your folders as "Script source" folders. .PHP files aren't scripts, merely text files that require processing before being shipped off to the browser, which is what the ISAPI filter does.<br />
<br />
Finally, working again.<br />
<br />
Chase</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76456""></a>
  <div class="note">
   <strong class="user">christianfelix at laszlo dot com</strong>
   <a href="#76456" class="date">16-Jul-2007 03:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For Windows XP users<br />
<br />
Just add php.ini to windows/system 32 and also save a copy in the setup folder e.g. c:/php/php.ini, c:/php5/php.ini, <br />
<br />
You have to follow the suggestions, add to path, uncomment extensions and voila!!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75615""></a>
  <div class="note">
   <strong class="user">Meiki67 skipthis at geemail</strong>
   <a href="#75615" class="date">07-Jun-2007 04:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Had a hard day to MSI install 5.2.3 on WinXP with MySQL. I use a drive substitution (subst drive: path - in my case subst d: c:\drive_d) and installed PHP in D:\PHP - which in reality is C:\DRIVE_D\PHP.&nbsp; To make a long story short - only after (1) changing all substituted D:\ back to C:\DRIVE_D and (2) resolving all DOS short names to Win long names PHP started to work. The first one is clear - the substitution works only for the active console user - not for services or IUSR. For the second one I have no explanation, since DOS short names should work systemwide - maybe Win handles them correctly but PHP not ?<br />
<br />
BTW <span class="default">&lt;?php phpinfo</span><span class="keyword">(); </span><span class="default">?&gt;</span> was of tremendeous help<br />
<br />
Meiki</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75234""></a>
  <div class="note">
   <strong class="user">Curtis</strong>
   <a href="#75234" class="date">18-May-2007 07:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I have some additional troubleshooting tips for 53.7, which deals with getting a blank screen on your browser when running a PHP script.<br />
<br />
In addition to server misconfiguration, it may also be that PHP isn't configured to output errors to the browser, which is the case if you or your host uses a more secure php.ini. If this is the case, you need to find out where errors are being logged to find out if any errors are preventing normal output from being delivered to the client.<br />
<br />
If you have access to php.ini, check the 'display_errors' directive, which is, by default, located under the 'error_reporting' directive. It's helpful to have 'display_errors' on during debugging phases, but best to have it off in production environments.<br />
<br />
Related functions: <a href="http://php.net/ini_set | http://php.net/error_reporting | http://php.net/error_log" rel="nofollow" target="_blank">http://php.net/ini_set | http://php.net/error_reporting | http://php.net/error_log</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="70978""></a>
  <div class="note">
   <strong class="user">knutw at sparhell dot no</strong>
   <a href="#70978" class="date">06-Nov-2006 09:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I recntly upgraded from PHP 5.1 to 5.2 on my Windows Server 2003 using IIS6. I selected CGI as before. My PHP folder is as always C:\Program Files\PHP. I also edited my brand new php.ini, enabling all my old extensions and recommended settings for IIS. I like not to keep my old config into a new version.<br />
<br />
After upgrade, I just got blank pages in my browser, and the response status was 404 Not found.<br />
<br />
I checked my installation twice, using this FAQ, but got no way.<br />
<br />
Then I went to IIS Manager, Web Service Extensions. The php Service Extension was Allowed as it should. I deleted the Service Extension and added it. The old extension used short file names containing tilde (PROGRA~) character, but I don'?t know if that gas anything to do with the problem. Anyway, after allowing my" new" Service Extension, pointing to php-cgi.exe as before, mye web sites suddenly worked. So will revommend anyone with thos problem to delete and add the Servcie Extension. It didn't help re-allowing it, restarting IIS or the complete server.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="69653""></a>
  <div class="note">
   
   <a href="#69653" class="date">13-Sep-2006 07:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
After setting the PHPRC environment variable, none of my PHP files would hit the preprocessor. The browser was just serving out PHP source code right there in the "view source."<br />
<br />
The manual was telling me to set this var to "c:\php," but nothing was working. It's almost as if IIS/Win2000 wasn't reading my php.ini at all.<br />
<br />
After I set that variable to "c:\php\php.ini," all of a sudden I was getting honest to goodness PHP pages working.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="60267""></a>
  <div class="note">
   <strong class="user">emzeperx at emzeper dot hu</strong>
   <a href="#60267" class="date">01-Jan-2006 12:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You do not have to restart the whole system make effect of changing the PATH env var. For me (sbs2003) worked automatically.<br />
on older systems you can use<br />
<br />
set $Path=%path%;c:\php<br />
<br />
command to extend immediately the path var.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="55823""></a>
  <div class="note">
   <strong class="user">JUSTANOTHERUSER</strong>
   <a href="#55823" class="date">14-Aug-2005 11:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
&lt;LimitExcept GET POST&gt;<br />
Deny from all<br />
&lt;/LimitExcept&gt;<br />
<br />
Does not work with Apache2+ &amp; PHP5 . Apache Refuses to start</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54662""></a>
  <div class="note">
   <strong class="user">per dot fikse at ipj dot no</strong>
   <a href="#54662" class="date">12-Jul-2005 01:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Installing PHP 4 or 5 on Windows Server 2003 x64 results in http error 505. This is not a PHP bug. It is due to running a 32-bit ISAPI DLL under the 64-bit version of IIS 6, as documented here: <a href="http://support.microsoft.com/?id=895976" rel="nofollow" target="_blank">http://support.microsoft.com/?id=895976</a><br />
<br />
Solution: Flip the Metabase flag for Enable32bitAppOnWin64 as described in <a href="http://support.microsoft.com/?id=894435 , " rel="nofollow" target="_blank">http://support.microsoft.com/?id=894435 , </a><br />
like this: CSCRIPT ADSUTIL.VBS SET W3SVC/AppPools/Enable32bitAppOnWin64 1<br />
<br />
(Alternatively with full path: cscript %SYSTEMDRIVE%\inetpub\adminscripts\adsutil.vbs SET W3SVC/AppPools/Enable32bitAppOnWin64 1)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="48681""></a>
  <div class="note">
   <strong class="user">barry dot fagin at usafa dot af dot mil</strong>
   <a href="#48681" class="date">04-Jan-2005 09:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Fixing 404 (file not found) errors with PHP 5.0.3 and IIS 6.0<br />
<br />
IIS 6.0 is installed with security settings that don't permit dynamic content.&nbsp; This means that even if all the hints in the FAQ are paid attention to (.ini modified correctly, security and permissions correct for IUSR_xxx user, etc), you still get 404 errors for all php files.&nbsp; <br />
<br />
To fix this:&nbsp; IIS Manager -&gt; expand local computer -&gt; Web Services Extensions -&gt; Add web service or extension -&gt; .php, browse to c:\php\php-cgi.exe or wherever you had the php executable installed. That plus setting the doc_root in the .ini file solved the problem.<br />
<br />
--BF</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="39542""></a>
  <div class="note">
   <strong class="user">jeff_graham at datacenterservices dot net</strong>
   <a href="#39542" class="date">01-Feb-2004 01:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As stated within the note "jimo at mail dot azhsv dot com<br />
29-Nov-2003 04:33 <br />
PHP 4 and IIS 6.0 (Windows Server 2003)," I found the same steps were requiered for installation of PhP 5 beta 3 on my Windows 2003 server (Standard Edition)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="38251""></a>
  <div class="note">
   <strong class="user">nigel dot salt at hotmail dot com</strong>
   <a href="#38251" class="date">13-Dec-2003 05:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Finally got IIS 5 and PHP 5 to talk.&nbsp; <br />
<br />
What worked for me was:<br />
<br />
1) Set<br />
[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\<br />
W3SVC\Parameters\Script Map]<br />
".php"="your path to php\\php.exe"<br />
<br />
2) ensure there is not a php.ini in the windows system folder and that there is one wherever you've put PHP<br />
<br />
3) edit php.ini and set cgi force redirect to 0 and cgi.rfc2616_headers = 1<br />
<br />
4) Put the PHP scripts in their own folder underneath the inetpub root<br />
<br />
5) Open the IIS console, right click your new php folder<br />
In the Directory tab<br />
&nbsp;set application name to the name of the folder<br />
&nbsp;set executable and script as permission<br />
&nbsp;set application protection to low<br />
Click configuration and check that .php is mapped to wherever you put<br />
PHP<br />
<br />
Restart IIS<br />
<br />
Try a very simple PHP page and it should work<br />
<br />
Nigel</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="37852""></a>
  <div class="note">
   <strong class="user">jimo at mail dot azhsv dot com</strong>
   <a href="#37852" class="date">29-Nov-2003 07:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
PHP 4 and IIS 6.0 (Windows Server 2003)<br />
<br />
Had difficulty getting PHP 4.3.3 to work with Win2003 Ent Server for use with SquirrelMail.&nbsp; Problem found and believed solved.&nbsp; Appears to be something New with IIS 6.0 (More security by Micro$oft)&nbsp; Was getting 404 error and php was not being run as a cgi even though it was in extensions and IIS user had rights to execute it. (php from command line operated correctly)<br />
<br />
If you are installing on Windows Server 2003 (only have Enterprise Edition ? Not sure if this applies to standard edition), and you have done the normal procedures for inclusion of PHP scripts (either ISAPI or CGI) in IIS, you will still get a 404 error when attempting to execute those scripts even though IIS has rights and the extension points to the correct file.&nbsp; To alleviate this problem, perform the following:<br />
<br />
1.&nbsp; &nbsp; Open a command prompt window<br />
2.&nbsp; &nbsp; Change to C:\windows\system32<br />
3.&nbsp; &nbsp; Execute the command:&nbsp; cscript&nbsp; iisext.vbs /AddFile c:\php\php.exe 1 php 0 php<br />
4.&nbsp; &nbsp; Execute the command:&nbsp; cscript iisext.vbs /EnFile c:\php\php.exe<br />
5.&nbsp; &nbsp; To check for correct execution of the above,<br />
6.&nbsp; &nbsp; Execute the command:&nbsp; cscript IisExt.vbs /ListFile ? the php extension should be listed<br />
<br />
If you try just step 4 without step 3 you get an error that the file is not in the list (and won?t be there till you do step 3 above)<br />
<br />
After this, IIS seems to like the php extension and work normally.<br />
<br />
For additional reference, see the below 3 Micro$oft KB Articles:<br />
HOWTO: Enable and Disable ISAPI Extensions and CGI Applications in IIS 6.0 (MS KB Article 328360)<br />
<br />
HOWTO List Web Server Extensions and Extension Files in IIS 6.0 (MS KB Article 328505)<br />
<br />
HOWTO Add and Remove Web Service Extension Files in IIS 6.0 (MS KB Article 328419)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="30112""></a>
  <div class="note">
   <strong class="user">peter dot mosinskisNOSPAM at csuci dot edu</strong>
   <a href="#30112" class="date">06-Mar-2003 12:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Running Win2K AS + IIS5.0 + PHP 4.3.1, I ran into a nasty problem that I mistakenly thought had to do with something in the php.ini configuration. When I would try to submit a form using the HTTP method GET it would work, but I would get a "404 Page Not Found" error using the POST method. <br />
<br />
All my permissions were set correctly, the php.ini was configured correctly. It had to do with URLScan being installed on IIS (see below)<br />
<br />
Page 404 File Not Found Error When Using POST method in PHP (and Perl, and otherwise)<br />
-------------------------------------------<br />
<br />
This is related to the Microsoft URLScan utility. If you have this problem, the IIS administrator has probably run the IIS Lockdown tool as well as configured URLScan to reject this type of HTTP method when sent in a URL. These tools are meant to enhance web server security.<br />
<br />
URLScan configuration files can be found in the \WINNT\system32\inetsrv\urlscan folder on the web server. Specifically, the file to modify is urlscan.ini.<br />
<br />
The changes to make are as follows:<br />
1. Make sure UseAllowVerbs=1 under [options]<br />
2. Under the [AllowVerbs] section, list your allowed HTTP methods to include:<br />
&nbsp;&nbsp;&nbsp; GET<br />
&nbsp;&nbsp;&nbsp; POST<br />
<br />
For more information on the IIS Lockdown tool and URLScan, visit <a href="http://technet.microsoft.com" rel="nofollow" target="_blank">http://technet.microsoft.com</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="21586""></a>
  <div class="note">
   <strong class="user">monroe at peoplego dot com</strong>
   <a href="#21586" class="date">17-May-2002 10:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
INSTALLATION ON OPENBSD 3.1 VIA PORTS COLLECTION<br />
Would have succeed but no mysql support. <br />
I commented out the FLAVORS+= dbase filepro mysql mysql_bundled postgresql iodbc in the /usr/ports/www/php4/Makefile and in the configure options added&nbsp; <br />
--with-mysql=/usr/local&nbsp;&nbsp; and it worked. <br />
<br />
Good Luck</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
