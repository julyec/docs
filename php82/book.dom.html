<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=UTF-8">
  <title>Document Object Model</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="refs.xml.html">? XML 操作</a></li>
      <li style="float: right;"><a href="intro.dom.html">简介 ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="refs.xml.html">XML 操作</a></li>
    <li>Document Object Model</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="book.dom" class="book">
 
 <h1 class="title">Document Object Model</h1>
 

 
 
 







 


 
 


 



   



 




 




 




 



 




 




 




 




 




 




 





 





 





 





 




 





 





 



 




 




 





 
 

 
 
<ul class="chunklist chunklist_book"><li><a href="intro.dom.html">简介</a></li><li><a href="dom.setup.html">安装/配置</a><ul class="chunklist chunklist_book chunklist_children"><li><a href="dom.requirements.html">需求</a></li><li><a href="dom.installation.html">安装</a></li><li><a href="dom.configuration.html">运行时配置</a></li><li><a href="dom.resources.html">资源类型</a></li></ul></li><li><a href="dom.constants.html">预定义常量</a></li><li><a href="dom.examples.html">示例</a></li><li><a href="class.domattr.html">DOMAttr</a> &mdash; The DOMAttr class<ul class="chunklist chunklist_book chunklist_children"><li><a href="domattr.construct.html">DOMAttr::__construct</a> &mdash; Creates a new DOMAttr object</li><li><a href="domattr.isid.html">DOMAttr::isId</a> &mdash; Checks if attribute is a defined ID</li></ul></li><li><a href="class.domcdatasection.html">DOMCdataSection</a> &mdash; The DOMCdataSection class<ul class="chunklist chunklist_book chunklist_children"><li><a href="domcdatasection.construct.html">DOMCdataSection::__construct</a> &mdash; Constructs a new DOMCdataSection object</li></ul></li><li><a href="class.domcharacterdata.html">DOMCharacterData</a> &mdash; The DOMCharacterData class<ul class="chunklist chunklist_book chunklist_children"><li><a href="domcharacterdata.appenddata.html">DOMCharacterData::appendData</a> &mdash; Append the string to the end of the character data of the node</li><li><a href="domcharacterdata.deletedata.html">DOMCharacterData::deleteData</a> &mdash; Remove a range of characters from the node</li><li><a href="domcharacterdata.insertdata.html">DOMCharacterData::insertData</a> &mdash; Insert a string at the specified 16-bit unit offset</li><li><a href="domcharacterdata.replacedata.html">DOMCharacterData::replaceData</a> &mdash; Replace a substring within the DOMCharacterData node</li><li><a href="domcharacterdata.substringdata.html">DOMCharacterData::substringData</a> &mdash; Extracts a range of data from the node</li></ul></li><li><a href="class.domchildnode.html">DOMChildNode</a> &mdash; The DOMChildNode interface<ul class="chunklist chunklist_book chunklist_children"><li><a href="domchildnode.after.html">DOMChildNode::after</a> &mdash; Adds nodes after the node</li><li><a href="domchildnode.before.html">DOMChildNode::before</a> &mdash; Adds nodes before the node</li><li><a href="domchildnode.remove.html">DOMChildNode::remove</a> &mdash; Removes the node</li><li><a href="domchildnode.replacewith.html">DOMChildNode::replaceWith</a> &mdash; Replaces the node with new nodes</li></ul></li><li><a href="class.domcomment.html">DOMComment</a> &mdash; The DOMComment class<ul class="chunklist chunklist_book chunklist_children"><li><a href="domcomment.construct.html">DOMComment::__construct</a> &mdash; Creates a new DOMComment object</li></ul></li><li><a href="class.domdocument.html">DOMDocument</a> &mdash; The DOMDocument class<ul class="chunklist chunklist_book chunklist_children"><li><a href="domdocument.construct.html">DOMDocument::__construct</a> &mdash; Creates a new DOMDocument object</li><li><a href="domdocument.createattribute.html">DOMDocument::createAttribute</a> &mdash; Create new attribute</li><li><a href="domdocument.createattributens.html">DOMDocument::createAttributeNS</a> &mdash; Create new attribute node with an associated namespace</li><li><a href="domdocument.createcdatasection.html">DOMDocument::createCDATASection</a> &mdash; Create new cdata node</li><li><a href="domdocument.createcomment.html">DOMDocument::createComment</a> &mdash; Create new comment node</li><li><a href="domdocument.createdocumentfragment.html">DOMDocument::createDocumentFragment</a> &mdash; Create new document fragment</li><li><a href="domdocument.createelement.html">DOMDocument::createElement</a> &mdash; Create new element node</li><li><a href="domdocument.createelementns.html">DOMDocument::createElementNS</a> &mdash; Create new element node with an associated namespace</li><li><a href="domdocument.createentityreference.html">DOMDocument::createEntityReference</a> &mdash; Create new entity reference node</li><li><a href="domdocument.createprocessinginstruction.html">DOMDocument::createProcessingInstruction</a> &mdash; Creates new PI node</li><li><a href="domdocument.createtextnode.html">DOMDocument::createTextNode</a> &mdash; Create new text node</li><li><a href="domdocument.getelementbyid.html">DOMDocument::getElementById</a> &mdash; Searches for an element with a certain id</li><li><a href="domdocument.getelementsbytagname.html">DOMDocument::getElementsByTagName</a> &mdash; Searches for all elements with given local tag name</li><li><a href="domdocument.getelementsbytagnamens.html">DOMDocument::getElementsByTagNameNS</a> &mdash; Searches for all elements with given tag name in specified namespace</li><li><a href="domdocument.importnode.html">DOMDocument::importNode</a> &mdash; Import node into current document</li><li><a href="domdocument.load.html">DOMDocument::load</a> &mdash; Load XML from a file</li><li><a href="domdocument.loadhtml.html">DOMDocument::loadHTML</a> &mdash; Load HTML from a string</li><li><a href="domdocument.loadhtmlfile.html">DOMDocument::loadHTMLFile</a> &mdash; Load HTML from a file</li><li><a href="domdocument.loadxml.html">DOMDocument::loadXML</a> &mdash; Load XML from a string</li><li><a href="domdocument.normalizedocument.html">DOMDocument::normalizeDocument</a> &mdash; Normalizes the document</li><li><a href="domdocument.registernodeclass.html">DOMDocument::registerNodeClass</a> &mdash; Register extended class used to create base node type</li><li><a href="domdocument.relaxngvalidate.html">DOMDocument::relaxNGValidate</a> &mdash; Performs relaxNG validation on the document</li><li><a href="domdocument.relaxngvalidatesource.html">DOMDocument::relaxNGValidateSource</a> &mdash; Performs relaxNG validation on the document</li><li><a href="domdocument.save.html">DOMDocument::save</a> &mdash; Dumps the internal XML tree back into a file</li><li><a href="domdocument.savehtml.html">DOMDocument::saveHTML</a> &mdash; Dumps the internal document into a string using HTML formatting</li><li><a href="domdocument.savehtmlfile.html">DOMDocument::saveHTMLFile</a> &mdash; Dumps the internal document into a file using HTML formatting</li><li><a href="domdocument.savexml.html">DOMDocument::saveXML</a> &mdash; Dumps the internal XML tree back into a string</li><li><a href="domdocument.schemavalidate.html">DOMDocument::schemaValidate</a> &mdash; Validates a document based on a schema. Only XML Schema 1.0 is supported.</li><li><a href="domdocument.schemavalidatesource.html">DOMDocument::schemaValidateSource</a> &mdash; Validates a document based on a schema</li><li><a href="domdocument.validate.html">DOMDocument::validate</a> &mdash; Validates the document based on its DTD</li><li><a href="domdocument.xinclude.html">DOMDocument::xinclude</a> &mdash; Substitutes XIncludes in a DOMDocument Object</li></ul></li><li><a href="class.domdocumentfragment.html">DOMDocumentFragment</a> &mdash; The DOMDocumentFragment class<ul class="chunklist chunklist_book chunklist_children"><li><a href="domdocumentfragment.appendxml.html">DOMDocumentFragment::appendXML</a> &mdash; Append raw XML data</li><li><a href="domdocumentfragment.construct.html">DOMDocumentFragment::__construct</a> &mdash; Constructs a DOMDocumentFragment object</li></ul></li><li><a href="class.domdocumenttype.html">DOMDocumentType</a> &mdash; The DOMDocumentType class</li><li><a href="class.domelement.html">DOMElement</a> &mdash; The DOMElement class<ul class="chunklist chunklist_book chunklist_children"><li><a href="domelement.construct.html">DOMElement::__construct</a> &mdash; Creates a new DOMElement object</li><li><a href="domelement.getattribute.html">DOMElement::getAttribute</a> &mdash; Returns value of attribute</li><li><a href="domelement.getattributenode.html">DOMElement::getAttributeNode</a> &mdash; Returns attribute node</li><li><a href="domelement.getattributenodens.html">DOMElement::getAttributeNodeNS</a> &mdash; Returns attribute node</li><li><a href="domelement.getattributens.html">DOMElement::getAttributeNS</a> &mdash; Returns value of attribute</li><li><a href="domelement.getelementsbytagname.html">DOMElement::getElementsByTagName</a> &mdash; Gets elements by tagname</li><li><a href="domelement.getelementsbytagnamens.html">DOMElement::getElementsByTagNameNS</a> &mdash; Get elements by namespaceURI and localName</li><li><a href="domelement.hasattribute.html">DOMElement::hasAttribute</a> &mdash; Checks to see if attribute exists</li><li><a href="domelement.hasattributens.html">DOMElement::hasAttributeNS</a> &mdash; Checks to see if attribute exists</li><li><a href="domelement.removeattribute.html">DOMElement::removeAttribute</a> &mdash; Removes attribute</li><li><a href="domelement.removeattributenode.html">DOMElement::removeAttributeNode</a> &mdash; Removes attribute</li><li><a href="domelement.removeattributens.html">DOMElement::removeAttributeNS</a> &mdash; Removes attribute</li><li><a href="domelement.setattribute.html">DOMElement::setAttribute</a> &mdash; Adds new or modifies existing attribute</li><li><a href="domelement.setattributenode.html">DOMElement::setAttributeNode</a> &mdash; Adds new attribute node to element</li><li><a href="domelement.setattributenodens.html">DOMElement::setAttributeNodeNS</a> &mdash; Adds new attribute node to element</li><li><a href="domelement.setattributens.html">DOMElement::setAttributeNS</a> &mdash; Adds new attribute</li><li><a href="domelement.setidattribute.html">DOMElement::setIdAttribute</a> &mdash; Declares the attribute specified by name to be of type ID</li><li><a href="domelement.setidattributenode.html">DOMElement::setIdAttributeNode</a> &mdash; Declares the attribute specified by node to be of type ID</li><li><a href="domelement.setidattributens.html">DOMElement::setIdAttributeNS</a> &mdash; Declares the attribute specified by local name and namespace URI to be of type ID</li></ul></li><li><a href="class.domentity.html">DOMEntity</a> &mdash; The DOMEntity class</li><li><a href="class.domentityreference.html">DOMEntityReference</a> &mdash; The DOMEntityReference class<ul class="chunklist chunklist_book chunklist_children"><li><a href="domentityreference.construct.html">DOMEntityReference::__construct</a> &mdash; Creates a new DOMEntityReference object</li></ul></li><li><a href="class.domexception.html">DOMException</a> &mdash; The DOMException class</li><li><a href="class.domimplementation.html">DOMImplementation</a> &mdash; The DOMImplementation class<ul class="chunklist chunklist_book chunklist_children"><li><a href="domimplementation.construct.html">DOMImplementation::__construct</a> &mdash; Creates a new DOMImplementation object</li><li><a href="domimplementation.createdocument.html">DOMImplementation::createDocument</a> &mdash; Creates a DOMDocument object of the specified type with its document element</li><li><a href="domimplementation.createdocumenttype.html">DOMImplementation::createDocumentType</a> &mdash; Creates an empty DOMDocumentType object</li><li><a href="domimplementation.hasfeature.html">DOMImplementation::hasFeature</a> &mdash; Test if the DOM implementation implements a specific feature</li></ul></li><li><a href="class.domnamednodemap.html">DOMNamedNodeMap</a> &mdash; The DOMNamedNodeMap class<ul class="chunklist chunklist_book chunklist_children"><li><a href="domnamednodemap.count.html">DOMNamedNodeMap::count</a> &mdash; Get number of nodes in the map</li><li><a href="domnamednodemap.getnameditem.html">DOMNamedNodeMap::getNamedItem</a> &mdash; Retrieves a node specified by name</li><li><a href="domnamednodemap.getnameditemns.html">DOMNamedNodeMap::getNamedItemNS</a> &mdash; Retrieves a node specified by local name and namespace URI</li><li><a href="domnamednodemap.item.html">DOMNamedNodeMap::item</a> &mdash; Retrieves a node specified by index</li></ul></li><li><a href="class.domnode.html">DOMNode</a> &mdash; The DOMNode class<ul class="chunklist chunklist_book chunklist_children"><li><a href="domnode.appendchild.html">DOMNode::appendChild</a> &mdash; Adds new child at the end of the children</li><li><a href="domnode.c14n.html">DOMNode::C14N</a> &mdash; Canonicalize nodes to a string</li><li><a href="domnode.c14nfile.html">DOMNode::C14NFile</a> &mdash; Canonicalize nodes to a file</li><li><a href="domnode.clonenode.html">DOMNode::cloneNode</a> &mdash; Clones a node</li><li><a href="domnode.getlineno.html">DOMNode::getLineNo</a> &mdash; Get line number for a node</li><li><a href="domnode.getnodepath.html">DOMNode::getNodePath</a> &mdash; Get an XPath for a node</li><li><a href="domnode.hasattributes.html">DOMNode::hasAttributes</a> &mdash; Checks if node has attributes</li><li><a href="domnode.haschildnodes.html">DOMNode::hasChildNodes</a> &mdash; Checks if node has children</li><li><a href="domnode.insertbefore.html">DOMNode::insertBefore</a> &mdash; Adds a new child before a reference node</li><li><a href="domnode.isdefaultnamespace.html">DOMNode::isDefaultNamespace</a> &mdash; Checks if the specified namespaceURI is the default namespace or not</li><li><a href="domnode.issamenode.html">DOMNode::isSameNode</a> &mdash; Indicates if two nodes are the same node</li><li><a href="domnode.issupported.html">DOMNode::isSupported</a> &mdash; Checks if feature is supported for specified version</li><li><a href="domnode.lookupnamespaceuri.html">DOMNode::lookupNamespaceURI</a> &mdash; Gets the namespace URI of the node based on the prefix</li><li><a href="domnode.lookupprefix.html">DOMNode::lookupPrefix</a> &mdash; Gets the namespace prefix of the node based on the namespace URI</li><li><a href="domnode.normalize.html">DOMNode::normalize</a> &mdash; Normalizes the node</li><li><a href="domnode.removechild.html">DOMNode::removeChild</a> &mdash; Removes child from list of children</li><li><a href="domnode.replacechild.html">DOMNode::replaceChild</a> &mdash; Replaces a child</li></ul></li><li><a href="class.domnodelist.html">DOMNodeList</a> &mdash; The DOMNodeList class<ul class="chunklist chunklist_book chunklist_children"><li><a href="domnodelist.count.html">DOMNodeList::count</a> &mdash; Get number of nodes in the list</li><li><a href="domnodelist.item.html">DOMNodeList::item</a> &mdash; Retrieves a node specified by index</li></ul></li><li><a href="class.domnotation.html">DOMNotation</a> &mdash; The DOMNotation class</li><li><a href="class.domparentnode.html">DOMParentNode</a> &mdash; The DOMParentNode interface<ul class="chunklist chunklist_book chunklist_children"><li><a href="domparentnode.append.html">DOMParentNode::append</a> &mdash; Appends nodes after the last child node</li><li><a href="domparentnode.prepend.html">DOMParentNode::prepend</a> &mdash; Prepends nodes before the first child node</li></ul></li><li><a href="class.domprocessinginstruction.html">DOMProcessingInstruction</a> &mdash; The DOMProcessingInstruction class<ul class="chunklist chunklist_book chunklist_children"><li><a href="domprocessinginstruction.construct.html">DOMProcessingInstruction::__construct</a> &mdash; Creates a new DOMProcessingInstruction object</li></ul></li><li><a href="class.domtext.html">DOMText</a> &mdash; The DOMText class<ul class="chunklist chunklist_book chunklist_children"><li><a href="domtext.construct.html">DOMText::__construct</a> &mdash; Creates a new DOMText object</li><li><a href="domtext.iselementcontentwhitespace.html">DOMText::isElementContentWhitespace</a> &mdash; Returns whether this text node contains whitespace in element content</li><li><a href="domtext.iswhitespaceinelementcontent.html">DOMText::isWhitespaceInElementContent</a> &mdash; Indicates whether this text node contains whitespace</li><li><a href="domtext.splittext.html">DOMText::splitText</a> &mdash; Breaks this node into two nodes at the specified offset</li></ul></li><li><a href="class.domxpath.html">DOMXPath</a> &mdash; The DOMXPath class<ul class="chunklist chunklist_book chunklist_children"><li><a href="domxpath.construct.html">DOMXPath::__construct</a> &mdash; Creates a new DOMXPath object</li><li><a href="domxpath.evaluate.html">DOMXPath::evaluate</a> &mdash; Evaluates the given XPath expression and returns a typed result if possible</li><li><a href="domxpath.query.html">DOMXPath::query</a> &mdash; Evaluates the given XPath expression</li><li><a href="domxpath.registernamespace.html">DOMXPath::registerNamespace</a> &mdash; Registers the namespace with the DOMXPath object</li><li><a href="domxpath.registerphpfunctions.html">DOMXPath::registerPhpFunctions</a> &mdash; Register PHP functions as XPath functions</li></ul></li><li><a href="ref.dom.html">DOM 函数</a><ul class="chunklist chunklist_book chunklist_children"><li><a href="function.dom-import-simplexml.html">dom_import_simplexml</a> &mdash; Gets a DOMElement object from a
   SimpleXMLElement object</li></ul></li></ul></div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="122913""></a>
  <div class="note">
   <strong class="user">chealer at gmail dot com</strong>
   <a href="#122913" class="date">05-Jul-2018 05:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This extension allows editing an HTML snippet, for example removing an element:<br />
??$dom = new DOMDocument();<br />
??$dom-&gt;loadHTML('keep&lt;b id="simple"&gt;REMOVE&lt;/b&gt;');<br />
$??remove = $dom-&gt;getElementById('simple');<br />
??$dom-&gt;removeChild($??remove);<br />
echo ??$dom-&gt;saveHTML();<br />
...would output "keep".<br />
<br />
But it does not preserve formatting. If your code defines attributes using double quotes, saveHTML() may for instance return single quotes instead.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="122659""></a>
  <div class="note">
   <strong class="user">emmanuellutula at hotmail dot com</strong>
   <a href="#122659" class="date">24-Apr-2018 04:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to&nbsp; use DOMDocument in your PHPUnit Tests drive on Symfony Controller (testing form)! Use like :<br />
<br />
namespace Tests\YourBundle\Controller;<br />
<br />
use Symfony\Bundle\FrameworkBundle\Test\WebTestCase;<br />
use YourBundle\Controller\TextController;<br />
<br />
class DefaultControllerTest extends WebTestCase<br />
{<br />
&nbsp;&nbsp;&nbsp; public function testIndex()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $client = static::createClient(array(), array());<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $crawler = $client-&gt;request('GET', '/text/add');<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $this-&gt;assertTrue($crawler-&gt;filter("form")-&gt;count() &gt; 0, "Text form exist !");<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $form = $crawler-&gt;filter("form")-&gt;form();<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $domDocument = new \DOMDocument;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $domInput = $domDocument-&gt;createElement('input');<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $dom = $domDocument-&gt;appendChild($domInput);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $dom-&gt;setAttribute('slug', 'bloc');<br />
&nbsp;&nbsp; &nbsp; &nbsp; <br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $formInput = new \Symfony\Component\DomCrawler\Field\InputFormField($domInput);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $form-&gt;set($formInput); <br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $crawler = $client-&gt;submit($form);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ($client-&gt;getResponse()-&gt;isRedirect())<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $crawler = $client-&gt;followRedirect(false);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; // $this-&gt;assertTrue($client-&gt;getResponse()-&gt;isSuccessful());<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //$this-&gt;assertEquals(200, $client-&gt;getResponse()-&gt;getStatusCode(),<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; "Unexpected HTTP status code for GET /backoffice/login");<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; }<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="118227""></a>
  <div class="note">
   <strong class="user">ohcc at 163 dot com</strong>
   <a href="#118227" class="date">29-Oct-2015 05:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// this note is about how to get a DOMNode's outerHTML and innerHTML.<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$dom </span><span class="keyword">= new </span><span class="default">DOMDocument</span><span class="keyword">(</span><span class="string">'1.0'</span><span class="keyword">,</span><span class="string">'UTF-8'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$dom</span><span class="keyword">-&gt;</span><span class="default">loadHTML</span><span class="keyword">(</span><span class="string">'&lt;html&gt;&lt;body&gt;&lt;div&gt;&lt;p&gt;p1&lt;/p&gt;&lt;p&gt;p2&lt;/p&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;'</span><span class="keyword">);&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$node </span><span class="keyword">= </span><span class="default">$dom</span><span class="keyword">-&gt;</span><span class="default">getElementsByTagName</span><span class="keyword">(</span><span class="string">'div'</span><span class="keyword">)-&gt;</span><span class="default">item</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">);&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$outerHTML </span><span class="keyword">= </span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">ownerDocument</span><span class="keyword">-&gt;</span><span class="default">saveHTML</span><span class="keyword">(</span><span class="default">$node</span><span class="keyword">);&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$innerHTML </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">childNodes </span><span class="keyword">as </span><span class="default">$childNode</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$innerHTML </span><span class="keyword">.= </span><span class="default">$childNode</span><span class="keyword">-&gt;</span><span class="default">ownerDocument</span><span class="keyword">-&gt;</span><span class="default">saveHTML</span><span class="keyword">(</span><span class="default">$childNode</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">'&lt;h2&gt;outerHTML: &lt;/h2&gt;'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">htmlspecialchars</span><span class="keyword">(</span><span class="default">$outerHTML</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">'&lt;h2&gt;innerHTML: &lt;/h2&gt;'</span><span class="keyword">;&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">htmlspecialchars</span><span class="keyword">(</span><span class="default">$innerHTML</span><span class="keyword">);&nbsp; &nbsp; <br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="115016""></a>
  <div class="note">
   <strong class="user">super dot puma at gmail dot com</strong>
   <a href="#115016" class="date">13-May-2014 04:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If&nbsp; you want to print the DOM XML file content, you can use the next code:<br />
<br />
$doc = new DOMDocument();<br />
$doc-&gt;load($xmlFileName);<br />
echo "&lt;br&gt;" . $doc-&gt;documentURI;<br />
$x = $doc-&gt;documentElement;<br />
getNodeContent($x-&gt;childNodes, 0);<br />
<br />
function getNodeContent($nodes, $level){<br />
&nbsp;&nbsp;&nbsp; foreach ($nodes AS $item) {<br />
&nbsp;&nbsp;&nbsp; //&nbsp; print "&lt;br&gt;&lt;br&gt;TIPO: " . $item-&gt;nodeType ;<br />
&nbsp;&nbsp; &nbsp;&nbsp; printValues($item, $level);<br />
&nbsp;&nbsp; &nbsp;&nbsp; if ($item-&gt;nodeType == 1) { //DOMElement<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach ($item-&gt;attributes AS $itemAtt) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; printValues($itemAtt, $level+3);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if($item-&gt;childNodes || $item-&gt;childNodes-&gt;lenth &gt; 0) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; getNodeContent($item-&gt;childNodes, $level+5);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
function printValues($item, $level){<br />
&nbsp;&nbsp;&nbsp; if ($item-&gt;nodeType == 1) { //DOMElement<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; printLevel($level);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; print $item-&gt;nodeName . " = " . $item-&gt;nodeValue;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if ($item-&gt;nodeType == 2) { //DOMAttr<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; printLevel($level);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; print $item-&gt;name . " = " . $item-&gt;value ;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if ($item-&gt;nodeType == 3) { //DOMText<br />
&nbsp;&nbsp; &nbsp;&nbsp; if ($item-&gt;isWhitespaceInElementContent() == false){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; printLevel($level);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; print $item-&gt;wholeText ;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
function printLevel($level)<br />
{<br />
&nbsp;&nbsp;&nbsp; print "&lt;br&gt;";<br />
&nbsp;&nbsp;&nbsp; if ($level == 0) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; print "&lt;br&gt;";<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; for($i=0; $i &lt; $level; $i++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; print "-";<br />
&nbsp;&nbsp;&nbsp; }<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105815""></a>
  <div class="note">
   <strong class="user">Drupella</strong>
   <a href="#105815" class="date">16-Sep-2011 09:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is a fast innerHTML function that returns the result without iterating over child nodes.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">innerHTML</span><span class="keyword">(</span><span class="default">$el</span><span class="keyword">) {<br />
&nbsp; </span><span class="default">$doc </span><span class="keyword">= new </span><span class="default">DOMDocument</span><span class="keyword">();<br />
&nbsp; </span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(</span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">importNode</span><span class="keyword">(</span><span class="default">$el</span><span class="keyword">, </span><span class="default">TRUE</span><span class="keyword">));<br />
&nbsp; </span><span class="default">$html </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">saveHTML</span><span class="keyword">());<br />
&nbsp; </span><span class="default">$tag </span><span class="keyword">= </span><span class="default">$el</span><span class="keyword">-&gt;</span><span class="default">nodeName</span><span class="keyword">;<br />
&nbsp; return </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'@^&lt;' </span><span class="keyword">. </span><span class="default">$tag </span><span class="keyword">. </span><span class="string">'[^&gt;]*&gt;|&lt;/' </span><span class="keyword">. </span><span class="default">$tag </span><span class="keyword">. </span><span class="string">'&gt;$@'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$html</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Example<br />
<span class="default">&lt;?php<br />
$doc </span><span class="keyword">= new </span><span class="default">DOMDocument</span><span class="keyword">();<br />
</span><span class="comment">// A corrupt HTML string<br />
</span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">loadHTML</span><span class="keyword">(</span><span class="string">'&lt;HTML&gt;&lt;A HREF="ss"&gt;asd&lt;/A&gt;'</span><span class="keyword">);<br />
</span><span class="default">$body </span><span class="keyword">= </span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">getElementsByTagName</span><span class="keyword">(</span><span class="string">'body'</span><span class="keyword">)-&gt;</span><span class="default">item</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">);<br />
print </span><span class="default">htmlspecialchars</span><span class="keyword">(</span><span class="default">innerHTML</span><span class="keyword">(</span><span class="default">$body</span><span class="keyword">));<br />
</span><span class="comment">// Prints &lt;a href="ss"&gt;asd&lt;/a&gt;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="97518""></a>
  <div class="note">
   <strong class="user">ben_demott at hotmail dot com</strong>
   <a href="#97518" class="date">23-Apr-2010 01:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A function among several others to parse a google results page, I wrote this some time ago - google has probably changed their site since then, but I thought this might be helpful to someone.<br />
<br />
I'm moving servers, but I will probably throw this up on my blog when I get it back up.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">googleResult</span><span class="keyword">(</span><span class="default">$listItem</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// given a LIST ITEM element, this will validate, and return an array for that LI entry as an inline result from google.<br />
&nbsp;&nbsp;&nbsp; /*<br />
&nbsp;&nbsp; &nbsp; * &lt;li class='g w0'&gt;<br />
&nbsp;&nbsp; &nbsp; *&nbsp;&nbsp; &lt;h3 class='r'&gt;<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp;&nbsp; &lt;a href='the URL' class='l'&gt;<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp; &nbsp;&nbsp; Description &lt;em&gt;description&lt;/em&gt;<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp;&nbsp; &lt;/a&gt;<br />
&nbsp;&nbsp; &nbsp; *&nbsp;&nbsp; &lt;/h3&gt;<br />
&nbsp;&nbsp; &nbsp; * &lt;/li&gt;<br />
&nbsp;&nbsp; &nbsp; *<br />
&nbsp;&nbsp; &nbsp; &nbsp; UPDATE:<br />
&nbsp;&nbsp; &nbsp; &nbsp; This function will now look for any subcontainer that has an href, it doesn't have to be an H3<br />
&nbsp;&nbsp; &nbsp; &nbsp; this will make it work with a few more formatted search results.<br />
&nbsp;&nbsp; &nbsp; */<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$listItem </span><span class="keyword">= </span><span class="default">$listItem</span><span class="keyword">-&gt;</span><span class="default">childNodes</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Yes I don't use instanceof - I guess you'll have to deal.<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">foreach(</span><span class="default">$listItem </span><span class="keyword">as </span><span class="default">$element</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$element</span><span class="keyword">) &amp;&amp; </span><span class="default">get_class</span><span class="keyword">(</span><span class="default">$element</span><span class="keyword">) == </span><span class="string">'DOMElement' </span><span class="keyword">&amp;&amp; </span><span class="default">$element</span><span class="keyword">-&gt;</span><span class="default">hasChildNodes</span><span class="keyword">()) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$hrefContainer </span><span class="keyword">= </span><span class="default">$element</span><span class="keyword">-&gt;</span><span class="default">childNodes</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$hrefContainer </span><span class="keyword">as </span><span class="default">$element2</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$element2</span><span class="keyword">) &amp;&amp; </span><span class="default">get_class</span><span class="keyword">(</span><span class="default">$element2</span><span class="keyword">) == </span><span class="string">'DOMElement' </span><span class="keyword">&amp;&amp; </span><span class="default">$element2</span><span class="keyword">-&gt;</span><span class="default">nodeName </span><span class="keyword">== </span><span class="string">'a' </span><span class="keyword">&amp;&amp; </span><span class="default">$element2</span><span class="keyword">-&gt;</span><span class="default">hasAttribute</span><span class="keyword">(</span><span class="string">'href'</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$anchor </span><span class="keyword">= </span><span class="default">$element2</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; unset(</span><span class="default">$h3</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; unset(</span><span class="default">$element2</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//print __LINE__ ." :: Breaking out of loop (normal result) element is not an annchor Element='".$element2-&gt;nodeName."'\n";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; unset(</span><span class="default">$element</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; unset(</span><span class="default">$listItem</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if(empty(</span><span class="default">$anchor</span><span class="keyword">) || !</span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$anchor</span><span class="keyword">) || </span><span class="default">get_class</span><span class="keyword">(</span><span class="default">$anchor</span><span class="keyword">) != </span><span class="string">'DOMElement'</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//print __LINE__ ." :: Returning false, did not locate anchor through iteration...";<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$href </span><span class="keyword">= </span><span class="default">$anchor</span><span class="keyword">-&gt;</span><span class="default">getAttribute</span><span class="keyword">(</span><span class="string">'href'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if(empty(</span><span class="default">$href</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//print __LINE__ ." :: Found anchor object, could not read href attribute / href is empty? href='$href'\n";<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$description </span><span class="keyword">= </span><span class="default">$anchor</span><span class="keyword">-&gt;</span><span class="default">childNodes</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$urlDescription </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$description </span><span class="keyword">as </span><span class="default">$words</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$name </span><span class="keyword">=&nbsp; </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$words</span><span class="keyword">-&gt;</span><span class="default">nodeName</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$name </span><span class="keyword">== </span><span class="string">'em' </span><span class="keyword">|| </span><span class="default">$name </span><span class="keyword">== </span><span class="string">'#text' </span><span class="keyword">|| </span><span class="default">$name </span><span class="keyword">== </span><span class="string">'b'</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(!empty(</span><span class="default">$words</span><span class="keyword">-&gt;</span><span class="default">nodeValue</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$text </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$words</span><span class="keyword">-&gt;</span><span class="default">nodeValue</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$urlDescription </span><span class="keyword">= </span><span class="default">$urlDescription </span><span class="keyword">. </span><span class="default">$text </span><span class="keyword">. </span><span class="string">' '</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$urlDescription </span><span class="keyword">= </span><span class="default">htmlspecialchars_decode</span><span class="keyword">(</span><span class="default">$urlDescription</span><span class="keyword">, </span><span class="default">ENT_QUOTES</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$urlDescription </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$urlDescription</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return array(</span><span class="string">'description' </span><span class="keyword">=&gt; </span><span class="default">$urlDescription</span><span class="keyword">, </span><span class="string">'href' </span><span class="keyword">=&gt; </span><span class="default">$href</span><span class="keyword">);<br />
}</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93717""></a>
  <div class="note">
   <strong class="user">sweisman at pobox dot com</strong>
   <a href="#93717" class="date">24-Sep-2009 01:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I had problems with the dom2array_full function by "nospam at ya dot ru". Here's my function, which works correctly for my project, and might work for yours:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">dom_to_array</span><span class="keyword">(</span><span class="default">$root</span><span class="keyword">)
<br />
{
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= array();
<br />

<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$root</span><span class="keyword">-&gt;</span><span class="default">hasAttributes</span><span class="keyword">())
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$attrs </span><span class="keyword">= </span><span class="default">$root</span><span class="keyword">-&gt;</span><span class="default">attributes</span><span class="keyword">;
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$attrs </span><span class="keyword">as </span><span class="default">$i </span><span class="keyword">=&gt; </span><span class="default">$attr</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[</span><span class="default">$attr</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">] = </span><span class="default">$attr</span><span class="keyword">-&gt;</span><span class="default">value</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$children </span><span class="keyword">= </span><span class="default">$root</span><span class="keyword">-&gt;</span><span class="default">childNodes</span><span class="keyword">;
<br />

<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$children</span><span class="keyword">-&gt;</span><span class="default">length </span><span class="keyword">== </span><span class="default">1</span><span class="keyword">)
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$child </span><span class="keyword">= </span><span class="default">$children</span><span class="keyword">-&gt;</span><span class="default">item</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">);
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$child</span><span class="keyword">-&gt;</span><span class="default">nodeType </span><span class="keyword">== </span><span class="default">XML_TEXT_NODE</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[</span><span class="string">'_value'</span><span class="keyword">] = </span><span class="default">$child</span><span class="keyword">-&gt;</span><span class="default">nodeValue</span><span class="keyword">;
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">) == </span><span class="default">1</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">[</span><span class="string">'_value'</span><span class="keyword">];
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$group </span><span class="keyword">= array();
<br />

<br />
&nbsp;&nbsp;&nbsp; for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$children</span><span class="keyword">-&gt;</span><span class="default">length</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$child </span><span class="keyword">= </span><span class="default">$children</span><span class="keyword">-&gt;</span><span class="default">item</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">);
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!isset(</span><span class="default">$result</span><span class="keyword">[</span><span class="default">$child</span><span class="keyword">-&gt;</span><span class="default">nodeName</span><span class="keyword">]))
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[</span><span class="default">$child</span><span class="keyword">-&gt;</span><span class="default">nodeName</span><span class="keyword">] = </span><span class="default">dom_to_array</span><span class="keyword">(</span><span class="default">$child</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (!isset(</span><span class="default">$group</span><span class="keyword">[</span><span class="default">$child</span><span class="keyword">-&gt;</span><span class="default">nodeName</span><span class="keyword">]))
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp </span><span class="keyword">= </span><span class="default">$result</span><span class="keyword">[</span><span class="default">$child</span><span class="keyword">-&gt;</span><span class="default">nodeName</span><span class="keyword">];
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[</span><span class="default">$child</span><span class="keyword">-&gt;</span><span class="default">nodeName</span><span class="keyword">] = array(</span><span class="default">$tmp</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$group</span><span class="keyword">[</span><span class="default">$child</span><span class="keyword">-&gt;</span><span class="default">nodeName</span><span class="keyword">] = </span><span class="default">1</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[</span><span class="default">$child</span><span class="keyword">-&gt;</span><span class="default">nodeName</span><span class="keyword">][] = </span><span class="default">dom_to_array</span><span class="keyword">(</span><span class="default">$child</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93637""></a>
  <div class="note">
   <strong class="user">odessa131 at aol dot nospam dot com</strong>
   <a href="#93637" class="date">20-Sep-2009 06:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I had the hardest time updating a complex XML document. Here's a quick example on how to do it.<br />
<br />
<span class="default">&lt;?php <br />
<br />
</span><span class="comment">// Load the XML from a file.<br />
</span><span class="default">$xml </span><span class="keyword">= </span><span class="string">"a2062.xml"</span><span class="keyword">; </span><span class="comment">// This is an XFDL form previously unencoded and ungzipped.<br />
</span><span class="default">$dom </span><span class="keyword">= new </span><span class="default">DOMDocument</span><span class="keyword">();<br />
</span><span class="default">$dom</span><span class="keyword">-&gt;</span><span class="default">preserveWhiteSpace </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
</span><span class="default">$dom</span><span class="keyword">-&gt;</span><span class="default">Load</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">);<br />
<br />
</span><span class="comment">// Create an XPath query.<br />
// Note: you must define the namespace if the XML document has defined namespaces.<br />
</span><span class="default">$xpath </span><span class="keyword">= new </span><span class="default">DOMXPath</span><span class="keyword">(</span><span class="default">$dom</span><span class="keyword">);<br />
</span><span class="default">$xpath</span><span class="keyword">-&gt;</span><span class="default">registerNamespace</span><span class="keyword">(</span><span class="string">'xfdl'</span><span class="keyword">, </span><span class="string">"<a href="http://www.PureEdge.com/XFDL/6.5" rel="nofollow" target="_blank">http://www.PureEdge.com/XFDL/6.5</a>"</span><span class="keyword">);<br />
<br />
</span><span class="comment">// Locate the value for the first Item Description field.<br />
</span><span class="default">$query </span><span class="keyword">= </span><span class="string">"//xfdl:page/xfdl:field[@sid='ITEMDESA']/xfdl:value"</span><span class="keyword">;<br />
</span><span class="default">$nodeList </span><span class="keyword">= </span><span class="default">$xpath</span><span class="keyword">-&gt;</span><span class="default">query</span><span class="keyword">(</span><span class="default">$query</span><span class="keyword">);<br />
<br />
</span><span class="default">$nodeList</span><span class="keyword">-&gt;</span><span class="default">item</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">)-&gt;</span><span class="default">nodeValue </span><span class="keyword">= </span><span class="string">"This is the text in the value node of the first Item Description field inside the DA 2062 PureEdge form."</span><span class="keyword">;<br />
<br />
</span><span class="default">$dom</span><span class="keyword">-&gt;</span><span class="default">save</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
I hope this helps someone.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92571""></a>
  <div class="note">
   <strong class="user">philipwaynerollins at gmail dot com</strong>
   <a href="#92571" class="date">29-Jul-2009 02:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You can get the "innerHTML" by nodeValue so<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $doc </span><span class="keyword">= new </span><span class="default">DOMDocument</span><span class="keyword">( );<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$ele </span><span class="keyword">= </span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">createElement</span><span class="keyword">( </span><span class="string">'p'</span><span class="keyword">, </span><span class="string">'Sensei Ninja' </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; print </span><span class="default">$ele</span><span class="keyword">-&gt;</span><span class="default">nodeValue</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
You can even set it if you want<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $doc </span><span class="keyword">= new </span><span class="default">DOMDocument</span><span class="keyword">( );<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$ele </span><span class="keyword">= </span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">createElement</span><span class="keyword">( </span><span class="string">'p' </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$ele</span><span class="keyword">-&gt;</span><span class="default">nodeValue </span><span class="keyword">= </span><span class="string">'Sensei Ninja'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">( </span><span class="default">$ele </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; print </span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">saveHTML</span><span class="keyword">( );<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89718""></a>
  <div class="note">
   <strong class="user">Junior</strong>
   <a href="#89718" class="date">20-Mar-2009 01:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
innerHTML in PHP DOM 
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">DOMinnerHTML</span><span class="keyword">(</span><span class="default">$element</span><span class="keyword">)
<br />
{
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$innerHTML </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$children </span><span class="keyword">= </span><span class="default">$element</span><span class="keyword">-&gt;</span><span class="default">childNodes</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$children </span><span class="keyword">as </span><span class="default">$child</span><span class="keyword">) 
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp_dom </span><span class="keyword">= new </span><span class="default">DOMDocument</span><span class="keyword">();
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp_dom</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(</span><span class="default">$tmp_dom</span><span class="keyword">-&gt;</span><span class="default">importNode</span><span class="keyword">(</span><span class="default">$child</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">));
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$innerHTML</span><span class="keyword">.=</span><span class="default">trim</span><span class="keyword">(</span><span class="default">$tmp_dom</span><span class="keyword">-&gt;</span><span class="default">saveHTML</span><span class="keyword">());
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$innerHTML</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Example:
<br />

<br />
<span class="default">&lt;?php
<br />
$dom</span><span class="keyword">= new </span><span class="default">DOMDocument</span><span class="keyword">(); 
<br />
</span><span class="default">$dom</span><span class="keyword">-&gt;</span><span class="default">load</span><span class="keyword">(</span><span class="default">$html_string</span><span class="keyword">);
<br />
</span><span class="default">$dom</span><span class="keyword">-&gt;</span><span class="default">preserveWhiteSpace </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;
<br />

<br />
</span><span class="default">$domTable </span><span class="keyword">= </span><span class="default">$dom</span><span class="keyword">-&gt;</span><span class="default">getElementsByTagName</span><span class="keyword">(</span><span class="string">"table"</span><span class="keyword">);
<br />

<br />
foreach (</span><span class="default">$domTable </span><span class="keyword">as </span><span class="default">$tables</span><span class="keyword">)
<br />
{
<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">DOMinnerHTML</span><span class="keyword">(</span><span class="default">$tables</span><span class="keyword">);
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="88025""></a>
  <div class="note">
   <strong class="user">nospam at ya dot ru</strong>
   <a href="#88025" class="date">06-Jan-2009 10:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?PHP<br />
</span><span class="keyword">function </span><span class="default">dom2array_full</span><span class="keyword">(</span><span class="default">$node</span><span class="keyword">){ <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= array(); <br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">nodeType </span><span class="keyword">== </span><span class="default">XML_TEXT_NODE</span><span class="keyword">) { <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">nodeValue</span><span class="keyword">; <br />
&nbsp;&nbsp;&nbsp; } <br />
&nbsp;&nbsp;&nbsp; else { <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">hasAttributes</span><span class="keyword">()) { <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$attributes </span><span class="keyword">= </span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">attributes</span><span class="keyword">; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(!</span><span class="default">is_null</span><span class="keyword">(</span><span class="default">$attributes</span><span class="keyword">))&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$attributes </span><span class="keyword">as </span><span class="default">$index</span><span class="keyword">=&gt;</span><span class="default">$attr</span><span class="keyword">)&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[</span><span class="default">$attr</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">] = </span><span class="default">$attr</span><span class="keyword">-&gt;</span><span class="default">value</span><span class="keyword">; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">hasChildNodes</span><span class="keyword">()){ <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$children </span><span class="keyword">= </span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">childNodes</span><span class="keyword">; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$children</span><span class="keyword">-&gt;</span><span class="default">length</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++) { <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$child </span><span class="keyword">= </span><span class="default">$children</span><span class="keyword">-&gt;</span><span class="default">item</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">); <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$child</span><span class="keyword">-&gt;</span><span class="default">nodeName </span><span class="keyword">!= </span><span class="string">'#text'</span><span class="keyword">) <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(!isset(</span><span class="default">$result</span><span class="keyword">[</span><span class="default">$child</span><span class="keyword">-&gt;</span><span class="default">nodeName</span><span class="keyword">])) <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[</span><span class="default">$child</span><span class="keyword">-&gt;</span><span class="default">nodeName</span><span class="keyword">] = </span><span class="default">dom2array</span><span class="keyword">(</span><span class="default">$child</span><span class="keyword">); <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else { <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$aux </span><span class="keyword">= </span><span class="default">$result</span><span class="keyword">[</span><span class="default">$child</span><span class="keyword">-&gt;</span><span class="default">nodeName</span><span class="keyword">]; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[</span><span class="default">$child</span><span class="keyword">-&gt;</span><span class="default">nodeName</span><span class="keyword">] = array( </span><span class="default">$aux </span><span class="keyword">); <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[</span><span class="default">$child</span><span class="keyword">-&gt;</span><span class="default">nodeName</span><span class="keyword">][] = </span><span class="default">dom2array</span><span class="keyword">(</span><span class="default">$child</span><span class="keyword">); <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } <br />
&nbsp;&nbsp;&nbsp; } <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">; <br />
} <br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87471""></a>
  <div class="note">
   <strong class="user">fantasyman3000 at gmail dot com</strong>
   <a href="#87471" class="date">06-Dec-2008 05:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In response to "simlee at indiana dot edu",<br />
- First of all thanks for sharing your funciton.<br />
- It didn't work for me so i rewrite it from scratch using different method.<br />
<br />
Here is the new version, hope it helps someone : <br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
* result sample : /html[1]/body[1]/span[1]/fieldset[1]/div[1]<br />
* @return string<br />
*/<br />
</span><span class="keyword">function </span><span class="default">getNodeXPath</span><span class="keyword">( </span><span class="default">$node </span><span class="keyword">) {&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">=</span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; while (</span><span class="default">$parentNode </span><span class="keyword">= </span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">parentNode</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$nodeIndex</span><span class="keyword">=-</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$nodeTagIndex</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; do {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$nodeIndex</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$testNode </span><span class="keyword">= </span><span class="default">$parentNode</span><span class="keyword">-&gt;</span><span class="default">childNodes</span><span class="keyword">-&gt;</span><span class="default">item</span><span class="keyword">( </span><span class="default">$nodeIndex </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$testNode</span><span class="keyword">-&gt;</span><span class="default">nodeName</span><span class="keyword">==</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">nodeName </span><span class="keyword">and </span><span class="default">$testNode</span><span class="keyword">-&gt;</span><span class="default">parentNode</span><span class="keyword">-&gt;</span><span class="default">isSameNode</span><span class="keyword">(</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">parentNode</span><span class="keyword">) and </span><span class="default">$testNode</span><span class="keyword">-&gt;</span><span class="default">childNodes</span><span class="keyword">-&gt;</span><span class="default">length</span><span class="keyword">&gt;</span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//echo "{$testNode-&gt;parentNode-&gt;nodeName}-{$testNode-&gt;nodeName}-{}&lt;br/&gt;";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$nodeTagIndex</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } while (!</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">isSameNode</span><span class="keyword">(</span><span class="default">$testNode</span><span class="keyword">));<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">=</span><span class="string">"/</span><span class="keyword">{</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">nodeName</span><span class="keyword">}</span><span class="string">[</span><span class="keyword">{</span><span class="default">$nodeTagIndex</span><span class="keyword">}</span><span class="string">]"</span><span class="keyword">.</span><span class="default">$result</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$node</span><span class="keyword">=</span><span class="default">$parentNode</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; };<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
By Sina.Salek.ws</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85874""></a>
  <div class="note">
   <strong class="user">miguelangelhdz  at  NOSPAM  dot  com</strong>
   <a href="#85874" class="date">22-Sep-2008 06:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
After searching how to extend the DOMDocument and DOMElement I found a way in the bug: <a href="http://bugs.php.net/bug.php?id=35104. The following code shows how:" rel="nofollow" target="_blank">http://bugs.php.net/bug.php?id=35104. The following code shows how:</a><br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">extDOMDocument </span><span class="keyword">extends </span><span class="default">DOMDocument </span><span class="keyword">{<br />
&nbsp;public function </span><span class="default">createElement</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">=</span><span class="default">null</span><span class="keyword">) {<br />
&nbsp; </span><span class="default">$orphan </span><span class="keyword">= new </span><span class="default">extDOMElement</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">); </span><span class="comment">// new&nbsp; sub-class object<br />
&nbsp; </span><span class="default">$docFragment </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">createDocumentFragment</span><span class="keyword">(); </span><span class="comment">// lightweight container maintains "ownerDocument"<br />
&nbsp; </span><span class="default">$docFragment</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(</span><span class="default">$orphan</span><span class="keyword">); </span><span class="comment">// attach<br />
&nbsp; </span><span class="default">$ret </span><span class="keyword">= </span><span class="default">$docFragment</span><span class="keyword">-&gt;</span><span class="default">removeChild</span><span class="keyword">(</span><span class="default">$orphan</span><span class="keyword">); </span><span class="comment">// remove<br />
&nbsp; </span><span class="keyword">return </span><span class="default">$ret</span><span class="keyword">; </span><span class="comment">// ownerDocument set; won't be destroyed on&nbsp; method exit<br />
&nbsp;</span><span class="keyword">}<br />
&nbsp;</span><span class="comment">// .. more class definition<br />
</span><span class="keyword">}<br />
<br />
class </span><span class="default">extDOMElement </span><span class="keyword">extends </span><span class="default">DOMElement </span><span class="keyword">{<br />
&nbsp;function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">=</span><span class="string">''</span><span class="keyword">, </span><span class="default">$namespaceURI</span><span class="keyword">=</span><span class="default">null</span><span class="keyword">) {<br />
&nbsp; </span><span class="default">parent</span><span class="keyword">::</span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">, </span><span class="default">$namespaceURI</span><span class="keyword">);<br />
&nbsp;}<br />
&nbsp; </span><span class="comment">//&nbsp; ... more class definition here<br />
</span><span class="keyword">}<br />
<br />
</span><span class="default">$doc </span><span class="keyword">= new </span><span class="default">extDOMDocument</span><span class="keyword">(</span><span class="string">'test'</span><span class="keyword">);<br />
</span><span class="default">$el </span><span class="keyword">= </span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">createElement</span><span class="keyword">(</span><span class="string">'tagname'</span><span class="keyword">);<br />
</span><span class="default">$el</span><span class="keyword">-&gt;</span><span class="default">setAttribute</span><span class="keyword">(</span><span class="string">"attr"</span><span class="keyword">, </span><span class="string">"val"</span><span class="keyword">);<br />
</span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(</span><span class="default">$el</span><span class="keyword">); <br />
<br />
</span><span class="comment">// append discards the DOMDocumentFragment and just adds its child nodes, but ownerDocument is maintained.<br />
</span><span class="keyword">echo </span><span class="default">get_class</span><span class="keyword">(</span><span class="default">$el</span><span class="keyword">).</span><span class="string">"&lt;br/&gt;"</span><span class="keyword">;<br />
echo </span><span class="default">get_class</span><span class="keyword">(</span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">documentElement</span><span class="keyword">).</span><span class="string">"&lt;br/&gt;"</span><span class="keyword">;<br />
echo </span><span class="string">"&lt;xmp&gt;"</span><span class="keyword">.</span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">saveXML</span><span class="keyword">().</span><span class="string">"&lt;/xmp&gt;"</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84771""></a>
  <div class="note">
   <strong class="user">tobiasz.cudnik[at]gmail.com</strong>
   <a href="#84771" class="date">29-Jul-2008 06:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you need simple interface to DOM check out phpQuery - jQuery port to PHP:<br />
<a href="http://code.google.com/p/phpquery/" rel="nofollow" target="_blank">http://code.google.com/p/phpquery/</a><br />
<br />
It uses CSS selectors to fetch nodes.<br />
Here's example how it works:<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// just one file to include<br />
</span><span class="keyword">require(</span><span class="string">'phpQuery/phpQuery.php'</span><span class="keyword">);<br />
<br />
</span><span class="default">$html </span><span class="keyword">= </span><span class="string">'<br />
&lt;div&gt;<br />
&nbsp;&nbsp;&nbsp; mydiv<br />
&nbsp;&nbsp;&nbsp; &lt;ul&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;li&gt;1&lt;/li&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;li&gt;2&lt;/li&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;li&gt;3&lt;/li&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;/ul&gt;<br />
&lt;/div&gt;'</span><span class="keyword">;<br />
<br />
</span><span class="comment">// intialize new DOM from markup<br />
</span><span class="default">phpQuery</span><span class="keyword">::</span><span class="default">newDocument</span><span class="keyword">(</span><span class="default">$markup</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; -&gt;</span><span class="default">find</span><span class="keyword">(</span><span class="string">'ul &gt; li'</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; -&gt;</span><span class="default">addClass</span><span class="keyword">(</span><span class="string">'my-new-class'</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; -&gt;</span><span class="default">filter</span><span class="keyword">(</span><span class="string">':last'</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; -&gt;</span><span class="default">addClass</span><span class="keyword">(</span><span class="string">'last-li'</span><span class="keyword">);<br />
<br />
</span><span class="comment">// query all unordered lists in last used DOM<br />
</span><span class="default">pq</span><span class="keyword">(</span><span class="string">'ul'</span><span class="keyword">)-&gt;</span><span class="default">insertAfter</span><span class="keyword">(</span><span class="string">'div'</span><span class="keyword">);<br />
<br />
</span><span class="comment">// iterate all LIs from last used DOM<br />
</span><span class="keyword">foreach(</span><span class="default">pq</span><span class="keyword">(</span><span class="string">'li'</span><span class="keyword">) as </span><span class="default">$li</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// iteration returns plain DOM nodes, not phpQuery objects<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">pq</span><span class="keyword">(</span><span class="default">$li</span><span class="keyword">)-&gt;</span><span class="default">addClass</span><span class="keyword">(</span><span class="string">'my-second-new-class'</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="comment">// same as pq('anything')-&gt;htmlOuter()<br />
// but on document root (returns doctype etc)<br />
</span><span class="keyword">print </span><span class="default">phpQuery</span><span class="keyword">::</span><span class="default">getDocument</span><span class="keyword">();<br />
</span><span class="default">?&gt;<br />
</span><br />
It uses DOM extension and XPath so it works only in PHP5.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81860""></a>
  <div class="note">
   <strong class="user">Sven Arduwie</strong>
   <a href="#81860" class="date">16-Mar-2008 06:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I needed a function that quickly converts an xml with key/value pairs to an array.<br />
<br />
for example:<br />
&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br />
&lt;test&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;key id="Array key #1" value="Value #1"/&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;key id="Array key #2" value="Value #2"/&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;key id="Dupe" value="Duplicate keys"/&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;key id="Dupe" value="create numeric arrays"/&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;key id="And another key"&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;![CDATA[<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; Multiline<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; data<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; works<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; just<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; as<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; well.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; ]]&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;/key&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;nested&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;key id="Nested key" value="Nested data works as well, but it still results in a 1 dimensional array."/&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;/nested&gt;<br />
&lt;/test&gt;<br />
<br />
Results in the following array:<br />
array(5) {<br />
&nbsp; ["Array key #1"]=&gt;<br />
&nbsp; string(8) "Value #1"<br />
&nbsp; ["Array key #2"]=&gt;<br />
&nbsp; string(8) "Value #2"<br />
&nbsp; ["Dupe"]=&gt;<br />
&nbsp; array(2) {<br />
&nbsp;&nbsp;&nbsp; [0]=&gt;<br />
&nbsp;&nbsp;&nbsp; string(14) "Duplicate keys"<br />
&nbsp;&nbsp;&nbsp; [1]=&gt;<br />
&nbsp;&nbsp;&nbsp; string(21) "create numeric arrays"<br />
&nbsp; }<br />
&nbsp; ["And another key"]=&gt;<br />
&nbsp; string(49) "Multiline<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; data<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; works<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; just<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; as<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; well."<br />
&nbsp; ["Nested key"]=&gt;<br />
&nbsp; string(73) "Nested data works as well, but it still results in a 1 dimensional array."<br />
}<br />
<br />
Here's the code:<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">xml2array</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$domDocument </span><span class="keyword">= new </span><span class="default">DOMDocument</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$domDocument</span><span class="keyword">-&gt;</span><span class="default">loadXML</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$domXPath </span><span class="keyword">= new </span><span class="default">DOMXPath</span><span class="keyword">(</span><span class="default">$domDocument</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array </span><span class="keyword">= array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$domXPath</span><span class="keyword">-&gt;</span><span class="default">query</span><span class="keyword">(</span><span class="string">'//key'</span><span class="keyword">) as </span><span class="default">$keyDOM</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$id </span><span class="keyword">= </span><span class="default">$keyDOM</span><span class="keyword">-&gt;</span><span class="default">getAttribute</span><span class="keyword">(</span><span class="string">'id'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">$keyDOM</span><span class="keyword">-&gt;</span><span class="default">hasAttribute</span><span class="keyword">(</span><span class="string">'value'</span><span class="keyword">) ? </span><span class="default">$keyDOM</span><span class="keyword">-&gt;</span><span class="default">getAttribute</span><span class="keyword">(</span><span class="string">'value'</span><span class="keyword">) : </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$keyDOM</span><span class="keyword">-&gt;</span><span class="default">textContent</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$id</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$id</span><span class="keyword">])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$id</span><span class="keyword">][] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$id</span><span class="keyword">] = array(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$id</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$id</span><span class="keyword">][] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$id</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$array</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81360""></a>
  <div class="note">
   <strong class="user">danf dot 1979 at []gmail[] dot com</strong>
   <a href="#81360" class="date">24-Feb-2008 07:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is a couple of classes to deal with yahoo yui menu.<br />
<br />
/*<br />
&nbsp; $menubar = new MenuBar();<br />
<br />
&nbsp; $file = new Menu("File");<br />
&nbsp; $file-&gt;setAttribute("href", "<a href="http://file.com" rel="nofollow" target="_blank">http://file.com</a>");<br />
<br />
&nbsp; $quit = new Menu("Quit");<br />
&nbsp; $quit-&gt;setAttribute("href", "<a href="http://quit.com" rel="nofollow" target="_blank">http://quit.com</a>");<br />
<br />
&nbsp; $file-&gt;appendChild($quit);<br />
&nbsp; $menubar-&gt;appendChild($file);<br />
<br />
&nbsp; echo $menubar-&gt;grab();<br />
*/<br />
<br />
//<br />
// Author: Daniel Queirolo.<br />
// LGPL<br />
//<br />
<br />
/** ---------------------------------<br />
/**&nbsp; Class MenuBar()<br />
/**&nbsp; Creates a the menubar and appends<br />
/**&nbsp; yuimenubaritems to it.<br />
/** ---------------------------------*/<br />
<br />
class MenuBar extends DOMDocument<br />
{<br />
<br />
&nbsp; public $menuID = "nav_menu";&nbsp; // holds the css id that javascript yui menu code should have to recognize<br />
&nbsp; private $UL;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // This node holds every menu, This is THE node.<br />
<br />
&nbsp; /** ---------------------------------<br />
&nbsp; /**&nbsp; Constructor<br />
&nbsp; /**&nbsp; Generates a menubar skeleton and the UL node<br />
&nbsp; /** ---------------------------------*/<br />
<br />
&nbsp; public function __construct() {<br />
<br />
&nbsp;&nbsp;&nbsp; parent::__construct();<br />
<br />
&nbsp;&nbsp;&nbsp; $rootdiv = parent::createElement("div");<br />
&nbsp;&nbsp;&nbsp; $rootdiv-&gt;setAttribute("class", "yui-skin-sam");<br />
<br />
&nbsp;&nbsp;&nbsp; parent::appendChild($rootdiv);<br />
<br />
&nbsp;&nbsp;&nbsp; $yui_menubar = parent::createElement("div");<br />
&nbsp;&nbsp;&nbsp; $yui_menubar-&gt;setAttribute("id", $this-&gt;menuID);<br />
&nbsp;&nbsp;&nbsp; $yui_menubar-&gt;setAttribute("class", "yuimenubar");<br />
<br />
&nbsp;&nbsp;&nbsp; $rootdiv-&gt;appendChild($yui_menubar);<br />
<br />
&nbsp;&nbsp;&nbsp; $bd = parent::createElement("div");<br />
&nbsp;&nbsp;&nbsp; $bd-&gt;setAttribute("class", "bd");<br />
<br />
&nbsp;&nbsp;&nbsp; $yui_menubar-&gt;appendChild($bd);<br />
<br />
&nbsp;&nbsp;&nbsp; $ul = parent::createElement("ul");<br />
&nbsp;&nbsp;&nbsp; $ul-&gt;setAttribute("class", "first-of-type");<br />
<br />
&nbsp;&nbsp;&nbsp; // ALL Menu() instances ocurr inside an &lt;ul&gt; tag.<br />
<br />
&nbsp;&nbsp;&nbsp; $this-&gt;UL = $bd-&gt;appendChild($ul);<br />
<br />
&nbsp; }<br />
<br />
&nbsp; /** ---------------------------------<br />
&nbsp; /**&nbsp; appendChild()<br />
&nbsp; /**&nbsp; Appends a new yuimenubaritem to the menubar UL node.<br />
&nbsp; /**&nbsp; This function changes &lt;li&gt; and &lt;a&gt; classes to yuiMENUBARsomething<br />
&nbsp; /** ---------------------------------*/<br />
<br />
&nbsp; public function appendChild($child) {<br />
<br />
&nbsp;&nbsp;&nbsp; $li = parent::importNode($child-&gt;LI, true);<br />
<br />
&nbsp;&nbsp;&nbsp; $li-&gt;setAttribute("class", "yuimenubaritem");<br />
<br />
&nbsp;&nbsp;&nbsp; $li-&gt;getElementsByTagName("a")-&gt;item(0)-&gt;setAttribute("class", "yuimenubaritemlabel");<br />
<br />
&nbsp;&nbsp;&nbsp; $this-&gt;UL-&gt;appendChild($li);<br />
<br />
&nbsp; }<br />
<br />
&nbsp; public function grab() {<br />
<br />
&nbsp;&nbsp;&nbsp; return parent::saveHTML();<br />
<br />
&nbsp; }<br />
<br />
}<br />
<br />
/** ---------------------------------<br />
/**&nbsp; Class Menu()<br />
/**&nbsp; Creates a yuimenuitem li node<br />
/** ---------------------------------*/<br />
<br />
class Menu extends DOMDocument {<br />
<br />
&nbsp; public $LI; // stores the &lt;li&gt; node (THE link) that will be exported to MenuBar() or used on appendChild()<br />
<br />
&nbsp; /** ---------------------------------<br />
&nbsp; /**&nbsp; Constructor<br />
&nbsp; /**&nbsp; Generates a yuimenuitem li node<br />
&nbsp; /**&nbsp; No yuimenubar items are created here. MenuBar handles that.<br />
&nbsp; /** ---------------------------------*/<br />
<br />
&nbsp; public function __construct($link_name) {<br />
<br />
&nbsp;&nbsp;&nbsp; parent::__construct();<br />
<br />
&nbsp;&nbsp;&nbsp; $li = parent::createElement("li");<br />
&nbsp;&nbsp;&nbsp; $li-&gt;setAttribute("class", "yuimenuitem");<br />
<br />
&nbsp;&nbsp;&nbsp; // LI node stores THE link.<br />
&nbsp;&nbsp;&nbsp; // if appendChild is used, the new (sub) Menu() would be LI node child.<br />
<br />
&nbsp;&nbsp;&nbsp; $this-&gt;LI = parent::appendChild($li);<br />
<br />
&nbsp;&nbsp;&nbsp; $a = parent::createElement("a", $link_name);<br />
&nbsp;&nbsp;&nbsp; $a-&gt;setAttribute("class", "yuimenuitemlabel");<br />
<br />
&nbsp;&nbsp;&nbsp; $li-&gt;appendChild($a);<br />
<br />
&nbsp;&nbsp;&nbsp; $this-&gt;li = $li;<br />
&nbsp;&nbsp;&nbsp; $this-&gt;a = $a;<br />
<br />
&nbsp; }<br />
<br />
&nbsp; /** ---------------------------------<br />
&nbsp; /**&nbsp; appendChild<br />
&nbsp; /**&nbsp; Appends a (sub) Menu() to current Menu() in LI<br />
&nbsp; /** ---------------------------------*/<br />
<br />
&nbsp; public function appendChild($child) {<br />
<br />
&nbsp;&nbsp;&nbsp; $yuimenu = parent::createElement("div");<br />
&nbsp;&nbsp;&nbsp; $yuimenu-&gt;setAttribute("class", "yuimenu");<br />
<br />
&nbsp;&nbsp;&nbsp; $this-&gt;LI-&gt;appendChild($yuimenu);<br />
<br />
&nbsp;&nbsp;&nbsp; $bd = parent::createElement("div");<br />
&nbsp;&nbsp;&nbsp; $bd-&gt;setAttribute("class", "bd");<br />
<br />
&nbsp;&nbsp;&nbsp; $yuimenu-&gt;appendChild($bd);<br />
<br />
&nbsp;&nbsp;&nbsp; $ul = parent::createElement("ul");<br />
<br />
&nbsp;&nbsp;&nbsp; $bd-&gt;appendChild($ul);<br />
<br />
&nbsp;&nbsp;&nbsp; // child-&gt;NODE holds THE link from the new child (from child's __construct())<br />
<br />
&nbsp;&nbsp;&nbsp; $ul-&gt;appendChild(parent::importNode($child-&gt;LI, true));<br />
<br />
&nbsp; }<br />
<br />
&nbsp; public function setAttribute($name, $value, $node="a") {<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; if ($node == "a") {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $this-&gt;a-&gt;setAttribute($name, $value);<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $this-&gt;li-&gt;setAttribute($name, $value);<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp; }<br />
<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80724""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#80724" class="date">29-Jan-2008 11:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In response to...<br />
"If you create your own custom element extending DOMElement and append him in place of the document element, you cannot access to any new members newly defined in your custom class via DOMDocument::$documentElement."<br />
<br />
... it is not a bug, it is a feature. The DOMDocument::$documentElement property name may be misleading but according to the DOM Level 2 Core specification it is a convenience attribute meant to access the root element of your DOMDocument. See here: <a href="http://www.w3.org/TR/DOM-Level-2-Core/core.html#i-Document" rel="nofollow" target="_blank">http://www.w3.org/TR/DOM-Level-2-Core/core.html#i-Document</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80613""></a>
  <div class="note">
   <strong class="user">ryoroxdahouse at hotmail dot com</strong>
   <a href="#80613" class="date">25-Jan-2008 12:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I use DOM to generate dynamically XHTML document.<br />
<br />
When trying to extend the DOMDocument and DOMElement classes, I found a very annoying bug concerning DOMDocument::$documentElement.<br />
<br />
If you create your own custom element extending DOMElement and append him in place of the document element, you cannot access to any new members newly defined in your custom class via DOMDocument::$documentElement.<br />
<br />
In my situation, I cannot use DOMDocument::registerNodeClass() because the document element is not necessarily the base class for all the elements in my document.<br />
<br />
*******<br />
problem<br />
*******<br />
<br />
See bellow for the repro step:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">class </span><span class="default">MyElement </span><span class="keyword">extends </span><span class="default">DOMElement</span><span class="keyword">{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public </span><span class="default">$myProp</span><span class="keyword">=</span><span class="string">"myProp"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public function </span><span class="default">myMethod</span><span class="keyword">(){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="string">'myMethod()'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$myDocument</span><span class="keyword">=new </span><span class="default">DOMDocument</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$myDocument</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(new </span><span class="default">MyElement</span><span class="keyword">(</span><span class="string">'myElement'</span><span class="keyword">,</span><span class="string">'myElement'</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; echo (</span><span class="string">'$myElement-&gt;myProp :'</span><span class="keyword">.</span><span class="default">$myDocument</span><span class="keyword">-&gt;</span><span class="default">documentElement</span><span class="keyword">-&gt;</span><span class="default">myProp</span><span class="keyword">.</span><span class="string">'&lt;br /&gt;'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; echo (</span><span class="string">'$myElement-&gt;myMethod :'</span><span class="keyword">.</span><span class="default">$myDocument</span><span class="keyword">-&gt;</span><span class="default">documentElement</span><span class="keyword">-&gt;</span><span class="default">myMethod</span><span class="keyword">().</span><span class="string">'&lt;br /&gt;'</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
will output:<br />
<br />
Notice: Undefined property: DOMElement::$myProp in C:\Program Files\EasyPHP 2.0b1\www\testDOMBug\test2.php on line 11<br />
$myElement-&gt;myProp :<br />
<br />
Fatal error: Call to undefined method DOMElement::myMethod() in C:\Program Files\EasyPHP 2.0b1\www\testDOMBug\test2.php on line 12<br />
<br />
*******<br />
solution<br />
*******<br />
<br />
After searching around, I found a pretty odd way to fix this problem. It seems that you have to stock a reference to your appended document element in an user-defined (and persistent) variable (in other words, not only in DOMDocument::$documentElement). See below:<br />
<br />
<span class="default">&lt;?php&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">class </span><span class="default">MyElement </span><span class="keyword">extends </span><span class="default">DOMElement</span><span class="keyword">{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public </span><span class="default">$myProp</span><span class="keyword">=</span><span class="string">"myProp"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public function </span><span class="default">myMethod</span><span class="keyword">(){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="string">'myMethod()'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$myDocument</span><span class="keyword">=new </span><span class="default">DOMDocument</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$mydocumentElement</span><span class="keyword">=</span><span class="default">$myDocument</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(new </span><span class="default">MyElement</span><span class="keyword">(</span><span class="string">'myElement'</span><span class="keyword">,</span><span class="string">'myElement'</span><span class="keyword">)); </span><span class="comment">//here is the hack<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">echo (</span><span class="string">'$myElement-&gt;myProp :'</span><span class="keyword">.</span><span class="default">$myDocument</span><span class="keyword">-&gt;</span><span class="default">documentElement</span><span class="keyword">-&gt;</span><span class="default">myProp</span><span class="keyword">.</span><span class="string">'&lt;br /&gt;'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; echo (</span><span class="string">'$myElement-&gt;myMethod :'</span><span class="keyword">.</span><span class="default">$myDocument</span><span class="keyword">-&gt;</span><span class="default">documentElement</span><span class="keyword">-&gt;</span><span class="default">myMethod</span><span class="keyword">().</span><span class="string">'&lt;br /&gt;'</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
will output:<br />
<br />
$myElement-&gt;myProp :myProp<br />
$myElement-&gt;myMethod :myMethod()<br />
<br />
Hope it will help.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80200""></a>
  <div class="note">
   <strong class="user">naudyj at aus3d.com</strong>
   <a href="#80200" class="date">03-Jan-2008 05:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The following can take a XML_TEXT_NODE node and return the contents in an array. Yanick's contribution rocks - but<br />
it overwrote with duplicates only keeping the last line<br />
in the returned array. All the other functions i tested from various sources failed to handle text nodes correctly. Hope this helps someone. It is adapted from code on this site.<br />
<br />
function myTextNode($n, &amp;$a)<br />
{<br />
&nbsp;static $depth = 0;<br />
&nbsp;static $sz = '';<br />
<br />
&nbsp;if ($cn = $n-&gt;firstChild) <br />
&nbsp;{<br />
&nbsp; while ($cn)<br />
&nbsp; {<br />
&nbsp;&nbsp; if ($cn-&gt;nodeType == XML_TEXT_NODE) <br />
&nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp; $sz .= $cn-&gt;nodeValue;<br />
&nbsp;&nbsp; } <br />
&nbsp;&nbsp; elseif ($cn-&gt;nodeType == XML_ELEMENT_NODE) <br />
&nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp; $b = 1;<br />
&nbsp;&nbsp;&nbsp; if ($cn-&gt;hasChildNodes()) <br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; $depth++;<br />
&nbsp;&nbsp; &nbsp; if ($this-&gt;myHeadings($cn, $a)) <br />
&nbsp;&nbsp; &nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; if ($sz){<br />
&nbsp;&nbsp; &nbsp; &nbsp; array_push($a, $sz);<br />
&nbsp;&nbsp; &nbsp; &nbsp; $sz = '';<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; $depth--;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp; }<br />
&nbsp;&nbsp; $cn = $cn-&gt;nextSibling;<br />
&nbsp; }<br />
&nbsp; return $b;<br />
&nbsp;}<br />
} <br />
<br />
so you could use:&nbsp;&nbsp; <br />
<br />
$nodes = $dom-&gt;getElementsByTagName("td"); <br />
if($nodes){<br />
&nbsp;foreach ($nodes as $node){<br />
&nbsp; $a = Array();<br />
&nbsp; myTextNode($node, $a);<br />
&nbsp;}<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="78941""></a>
  <div class="note">
   <strong class="user">jim.filter (at gmail.com)</strong>
   <a href="#78941" class="date">03-Nov-2007 07:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Array to DOM<br />
<br />
Here is a recursive function to turn a multidimensional array into an XML document.&nbsp; It will handle multiple elements of the same tag, but only one per parent element. IE: <br />
<br />
Can't generate:&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; Can generate:<br />
&lt;root&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;root&gt;<br />
&nbsp; &lt;sub1&gt;data1&lt;/sub1&gt;&nbsp; &nbsp; &nbsp; &lt;subs1&gt;<br />
&nbsp; &lt;sub1&gt;data2&lt;/sub1&gt;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;value&gt;data1&lt;/value&gt;<br />
&nbsp; &lt;sub2&gt;data1&lt;/sub2&gt;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;value&gt;data2&lt;/value&gt;<br />
&nbsp; &lt;sub2&gt;data2&lt;/sub2&gt;&nbsp; &nbsp; &nbsp; &lt;/subs1&gt;<br />
&lt;/root&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;subs2&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;value&gt;data1&lt;/value&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;value&gt;data2&lt;/value&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;subs2&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;/root&gt;<br />
<br />
Also, the function performs no type of error checking on your array and will throw a DOMException if a key value you used in your array contains invalid characters for a proper DOM tag. This function is untested for "deep" multidimensional arrays.<br />
<br />
Complete code ready to run with example:<br />
<br />
<span class="default">&lt;?PHP<br />
&nbsp; </span><span class="keyword">function </span><span class="default">AtoX</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$DOM</span><span class="keyword">=</span><span class="default">null</span><span class="keyword">, </span><span class="default">$root</span><span class="keyword">=</span><span class="default">null</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$DOM&nbsp; </span><span class="keyword">== </span><span class="default">null</span><span class="keyword">){</span><span class="default">$DOM&nbsp; </span><span class="keyword">= new </span><span class="default">DOMDocument</span><span class="keyword">(</span><span class="string">'1.0'</span><span class="keyword">, </span><span class="string">'iso-8859-1'</span><span class="keyword">);}<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$root </span><span class="keyword">== </span><span class="default">null</span><span class="keyword">){</span><span class="default">$root </span><span class="keyword">= </span><span class="default">$DOM</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(</span><span class="default">$DOM</span><span class="keyword">-&gt;</span><span class="default">createElement</span><span class="keyword">(</span><span class="string">'root'</span><span class="keyword">));}<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$name </span><span class="keyword">= </span><span class="default">$array</span><span class="keyword">[</span><span class="string">'#MULTIPLE_ELEMENT_NAME'</span><span class="keyword">];<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">){&nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_int</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">) &amp;&amp; </span><span class="default">$name </span><span class="keyword">!= </span><span class="default">null</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$subroot </span><span class="keyword">= </span><span class="default">$root</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(</span><span class="default">$DOM</span><span class="keyword">-&gt;</span><span class="default">createElement</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">AtoX</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$DOM</span><span class="keyword">, </span><span class="default">$subroot</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else if(</span><span class="default">is_scalar</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$root</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(</span><span class="default">$DOM</span><span class="keyword">-&gt;</span><span class="default">createElement</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else if(</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">) &amp;&amp; </span><span class="default">$key </span><span class="keyword">!= </span><span class="string">'#MULTIPLE_ELEMENT_NAME'</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$subroot </span><span class="keyword">= </span><span class="default">$root</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(</span><span class="default">$DOM</span><span class="keyword">-&gt;</span><span class="default">createElement</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">AtoX</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$DOM</span><span class="keyword">, </span><span class="default">$subroot</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else if(</span><span class="default">is_scalar</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$root</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(</span><span class="default">$DOM</span><span class="keyword">-&gt;</span><span class="default">createElement</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$DOM</span><span class="keyword">;&nbsp; <br />
&nbsp; }<br />
&nbsp; <br />
&nbsp; </span><span class="default">$array </span><span class="keyword">= array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'#MULTIPLE_ELEMENT_NAME' </span><span class="keyword">=&gt; </span><span class="string">'GenericDatas'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Date'&nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="string">'November 03, 2007'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Company'&nbsp;&nbsp; </span><span class="keyword">=&gt; </span><span class="string">'Facility One'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Field'&nbsp; &nbsp;&nbsp; </span><span class="keyword">=&gt; </span><span class="string">'Facility Management Software'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Employees' </span><span class="keyword">=&gt; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'#MULTIPLE_ELEMENT_NAME' </span><span class="keyword">=&gt; </span><span class="string">'Employee'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Cindy'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Sean'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Joe'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Owen'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Jim'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Dale'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Kelly'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Ryan'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Johnathan'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Robin'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'William Marcus'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'NewCoops' </span><span class="keyword">=&gt; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'#MULTIPLE_ELEMENT_NAME' </span><span class="keyword">=&gt; </span><span class="string">'Coop'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'John'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Tyler'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Ray'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Dawn'<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">)&nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Datas'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'DATAS'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'OtherDatas'<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">);<br />
&nbsp; <br />
&nbsp; </span><span class="default">$DOM&nbsp; </span><span class="keyword">= new </span><span class="default">DOMDocument</span><span class="keyword">(</span><span class="string">'1.0'</span><span class="keyword">, </span><span class="string">'iso-8859-1'</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$root </span><span class="keyword">= </span><span class="default">$DOM</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(</span><span class="default">$DOM</span><span class="keyword">-&gt;</span><span class="default">createElement</span><span class="keyword">(</span><span class="string">'CompanyData'</span><span class="keyword">)); <br />
&nbsp; </span><span class="default">$DOM&nbsp; </span><span class="keyword">= </span><span class="default">AtoX</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$DOM</span><span class="keyword">, </span><span class="default">$root</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$DOM</span><span class="keyword">-&gt;</span><span class="default">save</span><span class="keyword">(</span><span class="string">'C:\test.xml'</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="77627""></a>
  <div class="note">
   <strong class="user">PHPdeveloper</strong>
   <a href="#77627" class="date">06-Sep-2007 02:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The Yanik's dom2array() function (added on 14-Mar-2007 08:40) does not handle multiple nodes with the same name, i.e.:<br />
<br />
&lt;foo&gt;<br />
&nbsp; &lt;name&gt;aa&lt;/name&gt;<br />
&nbsp; &lt;name&gt;bb&lt;/name&gt;<br />
&lt;/foo&gt;<br />
<br />
It will overwrite former and your array will contain just the last one ("bb")</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76838""></a>
  <div class="note">
   <strong class="user">Francois  Hill</strong>
   <a href="#76838" class="date">01-Aug-2007 11:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In response to lutfi at smartconsultant dot us :<br />
<br />
(see my post on<br />
<a href="http://fr2.php.net/manual/en/" rel="nofollow" target="_blank">http://fr2.php.net/manual/en/</a><br />
function.dom-domdocument-getelementsbytagname.php<br />
)<br />
<br />
Use this class I wrote:<br />
<br />
class XPathableNode extends DOMNode<br />
{<br />
&nbsp;&nbsp;&nbsp; protected $Node;<br />
&nbsp;&nbsp;&nbsp; protected $DOMDocument_from_node;<br />
&nbsp;&nbsp;&nbsp; protected $DOMXpath_for_node;<br />
<br />
&nbsp;&nbsp;&nbsp; public function __construct(/* DOMNode */ $node)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $this-&gt;Node=$node;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $this-&gt;DOMDocument_from_node=new <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; DomDocument();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $domNode=$this-&gt;DOMDocument_from_node<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; -&gt;importNode($this-&gt;Node, true);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $this-&gt;DOMDocument_from_node<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -&gt;appendChild($domNode);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $this-&gt;DomXpath_for_node = <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; new Domxpath($this-&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; DOMDocument_from_node);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; public function convertHTML()<br />
&nbsp;&nbsp;&nbsp; {&nbsp; &nbsp; return $this-&gt;DOMDocument_from_node<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -&gt;saveHTML();<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; public /*DomNodeList*/ function applyXpath($xpath)<br />
&nbsp;&nbsp;&nbsp; {&nbsp; &nbsp; return $this-&gt;DomXpath_for_node<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -&gt;query($xpath);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
(sorry for the display... What a terrible hinderance on the<br />
part of php.net !)<br />
<br />
Then :<br />
Make a new XPathableNode out of your parent node.<br />
You may then retrieve a DOMNodeList from it by applying a<br />
xpath (thus being able to specify the depth&nbsp; and name of <br />
elements you want).<br />
<br />
Has got me around some (of the many) DOM awkwardnesses a few times.<br />
<br />
;o)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75553""></a>
  <div class="note">
   <strong class="user">Sanados at failure dot at</strong>
   <a href="#75553" class="date">05-Jun-2007 02:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
appended to <br />
brian dot reynolds at risaris dot com<br />
20-Feb-2007 10:09<br />
<br />
when you got variable nodes at start you array fails and looses nodes&nbsp; beneath.<br />
solution that counts occurance though eats up performance:<br />
<br />
function xmlToArray($n)<br />
{<br />
&nbsp;&nbsp;&nbsp; $xml_array = array();<br />
&nbsp;&nbsp;&nbsp; $occurance = array();<br />
<br />
&nbsp;&nbsp; &nbsp; foreach($n-&gt;childNodes as $nc)<br />
&nbsp;&nbsp; &nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; $occurance[$nc-&gt;nodeName]++;<br />
&nbsp;&nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; foreach($n-&gt;childNodes as $nc){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if( $nc-&gt;hasChildNodes() )<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if($occurance[$nc-&gt;nodeName] &gt; 1)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $xml_array[$nc-&gt;nodeName][] = xmlToArray($nc);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $xml_array[$nc-&gt;nodeName] = xmlToArray($nc);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return utf8_decode($nc-&gt;nodeValue);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return $xml_array;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73875""></a>
  <div class="note">
   <strong class="user">Yanik &lt;clonyara(at)ahoo(dot)com&gt;</strong>
   <a href="#73875" class="date">13-Mar-2007 11:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I hate DOM model !<br />
so I wrote dom2array simple function (simple for use):<br />
<br />
function dom2array($node) {<br />
&nbsp; $res = array();<br />
&nbsp; print $node-&gt;nodeType.'&lt;br/&gt;';<br />
&nbsp; if($node-&gt;nodeType == XML_TEXT_NODE){<br />
&nbsp;&nbsp; &nbsp;&nbsp; $res = $node-&gt;nodeValue;<br />
&nbsp; }<br />
&nbsp; else{<br />
&nbsp;&nbsp; &nbsp;&nbsp; if($node-&gt;hasAttributes()){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $attributes = $node-&gt;attributes;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(!is_null($attributes)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $res['@attributes'] = array();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach ($attributes as $index=&gt;$attr) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $res['@attributes'][$attr-&gt;name] = $attr-&gt;value;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; if($node-&gt;hasChildNodes()){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $children = $node-&gt;childNodes;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for($i=0;$i&lt;$children-&gt;length;$i++){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $child = $children-&gt;item($i);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $res[$child-&gt;nodeName] = dom2array($child);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp; }<br />
&nbsp; return $res;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73793""></a>
  <div class="note">
   <strong class="user">Nevyn at N dot O dot S dot P dot A dot M dot emai dot it</strong>
   <a href="#73793" class="date">10-Mar-2007 07:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I wrote a couple of functions to:<br />
&nbsp;- create a DOMDocument from a file<br />
&nbsp;- parse the namespaces in it<br />
&nbsp;- create a XPath object with all the namespaces registered<br />
&nbsp;- load the schemalocations<br />
&nbsp;- validate the file on the main schema (the one without prefix)<br />
<br />
It is useful for me, see if it is also for someone else!!<br />
<br />
Giulio<br />
<br />
function decodeNode($node)<br />
{<br />
&nbsp;&nbsp;&nbsp; $out = $node-&gt;ownerDocument-&gt;saveXML($node);<br />
&nbsp;&nbsp;&nbsp; $re = "{^&lt;((?:\\w*:)?\\w*)". //the tag name<br />
&nbsp;&nbsp;&nbsp; "[\\s\n\r]*((?:[\\s\n\r]*". <br />
&nbsp;&nbsp;&nbsp; "(?:\\w*:)?\\w+[\\s\n\r]*=[\\s\n\r]*". //possible attribute name<br />
&nbsp;&nbsp;&nbsp; "(?:\"[^\"]*\"|\'[^\']*\'))*)". //attribute value<br />
&nbsp;&nbsp;&nbsp; "[\\s\n\r]*&gt;[\r\n]*".<br />
&nbsp;&nbsp;&nbsp; "((?:.*[\r\n]*)*)". //content<br />
&nbsp;&nbsp;&nbsp; "[\r\n]*&lt;/\\1&gt;$}"; //closing tag<br />
&nbsp;&nbsp;&nbsp; preg_match($re, $out, $mat);<br />
&nbsp;&nbsp;&nbsp; return $mat;<br />
}<br />
<br />
function innerXml($node)<br />
{<br />
&nbsp;&nbsp;&nbsp; $mat = decodeNode($node);<br />
&nbsp;&nbsp;&nbsp; return $mat[3];<br />
}<br />
<br />
function getnodeAttributes($node)<br />
{<br />
&nbsp;&nbsp;&nbsp; $mat = decodeNode($node);<br />
&nbsp;&nbsp;&nbsp; $txt = $mat[2];<br />
&nbsp;&nbsp;&nbsp; $re = "{((?:\\w*:)?\\w+)[\\s\n\r]*=[\\s\n\r]*(\"[^\"]*\"|\'[^\']*\')}";<br />
&nbsp;&nbsp;&nbsp; preg_match_all($re, $txt, $mat);<br />
&nbsp;&nbsp;&nbsp; $att = array();<br />
&nbsp;&nbsp;&nbsp; for ($i=0; $i&lt;count($mat[0]); $i++)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $value = $mat[2][$i];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ($value[0] == "\'" || $value[0] == "\"")<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $len = strlen($value);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $value = substr($value, 1, strlen($value)-2);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $att[ $mat[1][$i] ] = $value;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return $att;<br />
}<br />
<br />
function loadXml($file)<br />
{<br />
&nbsp;&nbsp;&nbsp; $doc = new DOMDocument();<br />
&nbsp;&nbsp;&nbsp; $doc-&gt;load($file);<br />
&nbsp;&nbsp;&nbsp; //cerca l'attributo xmlns<br />
&nbsp;&nbsp;&nbsp; $xsi = false;<br />
&nbsp;&nbsp;&nbsp; $doc-&gt;namespaces = array();<br />
&nbsp;&nbsp;&nbsp; $doc-&gt;xpath = new DOMXPath($doc);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; $attr = getnodeAttributes($doc-&gt;documentElement);<br />
&nbsp;&nbsp;&nbsp; foreach ($attr as $name =&gt; $value)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (substr($name,0,5) == "xmlns")<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $uri = $value;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $pre = $doc-&gt;documentElement-&gt;lookupPrefix($uri);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ($uri == "<a href="http://www.w3.org/2001/XMLSchema-instance" rel="nofollow" target="_blank">http://www.w3.org/2001/XMLSchema-instance</a>")<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $xsi = $pre;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $doc-&gt;namespaces[$pre] = $uri;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ($pre == "")<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $pre = "noname";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $doc-&gt;xpath-&gt;registerNamespace($pre, $uri);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; if ($xsi)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $doc-&gt;schemaLocations = array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $lst = $doc-&gt;xpath-&gt;query("//@$xsi:schemaLocation");<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach($lst as $el)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $re = "{[\\s\n\r]*([^\\s\n\r]+)[\\s\n\r]*([^\\s\n\r]+)}";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; preg_match_all($re, $el-&gt;nodeValue, $mat);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for ($i=0; $i&lt;count($mat[0]); $i++)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $value = $mat[2][$i];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $doc-&gt;schemaLocations[ $mat[1][$i] ] = $value;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $olddir = getcwd();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; chdir(dirname($file));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $schema = $doc-&gt;schemaLocations[$doc-&gt;namespaces[""]];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (substr($schema,0,7) == "file://")<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $schema = substr($value,7);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!$doc-&gt;schemaValidate($schema))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; dbg()-&gt;err("Invalid file");<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; chdir($olddir);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return $doc;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73365""></a>
  <div class="note">
   <strong class="user">brian dot reynolds at risaris dot com</strong>
   <a href="#73365" class="date">20-Feb-2007 01:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I found the xml2array function below very useful, but there seems to be a bug in it. The $item variable was never getting set. I've expanded this out to be a bit more readable, and the corrected code is : <br />
<br />
function xmlToArray($n)<br />
{<br />
&nbsp;&nbsp;&nbsp; $return=array();<br />
<br />
&nbsp;&nbsp;&nbsp; foreach($n-&gt;childNodes as $nc){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if( $nc-&gt;hasChildNodes() ){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if( $n-&gt;firstChild-&gt;nodeName== $n-&gt;lastChild-&gt;nodeName&amp;&amp;$n-&gt;childNodes-&gt;length&gt;1){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $item = $n-&gt;firstChild;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $return[$nc-&gt;nodeName][]=$this-&gt;xmlToArray($item);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $return[$nc-&gt;nodeName]=$this-&gt;xmlToArray($nc);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $return=$nc-&gt;nodeValue;<br />
&nbsp;&nbsp; &nbsp; &nbsp; } <br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return $return;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="71317""></a>
  <div class="note">
   <strong class="user">cooper at asu dot ntu-kpi dot kiev dot ua</strong>
   <a href="#71317" class="date">22-Nov-2006 02:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you are using not object-oriented functions and it takes too much time to change them all (or you'll be replacing them later) then as a temporary decision can be used this modules:<br />
<br />
For DOM XML:<br />
<a href="http://alexandre.alapetite.net/doc-alex/domxml-php4-php5/" rel="nofollow" target="_blank">http://alexandre.alapetite.net/doc-alex/domxml-php4-php5/</a><br />
<br />
For XSLT:<br />
<a href="http://alexandre.alapetite.net/doc-alex/xslt-php4-php5/" rel="nofollow" target="_blank">http://alexandre.alapetite.net/doc-alex/xslt-php4-php5/</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="68967""></a>
  <div class="note">
   <strong class="user">sean at lookin3d dot com</strong>
   <a href="#68967" class="date">17-Aug-2006 10:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
$xmlDoc=&lt;&lt;&lt;XML<br />
&lt;?xml version="1.0"?&gt;<br />
&lt;methodCall&gt;<br />
&nbsp;&nbsp; &lt;methodName&gt;examples.getStateName&lt;/methodName&gt;<br />
&nbsp;&nbsp; &lt;params&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; &lt;param&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &lt;value&gt;&lt;i4&gt;41&lt;/i4&gt;&lt;/value&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &lt;/param&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; &lt;/params&gt;<br />
&nbsp;&nbsp; &lt;/methodCall&gt;<br />
XML;<br />
<br />
$xml= new DOMDocument();<br />
$xml-&gt;preserveWhiteSpace=false;<br />
$xml-&gt;loadXML($xmlDoc);<br />
print_r(xml2array($xml));<br />
<br />
function xml2array($n)<br />
{<br />
&nbsp;&nbsp;&nbsp; $return=array();<br />
&nbsp;&nbsp;&nbsp; foreach($n-&gt;childNodes as $nc)<br />
&nbsp;&nbsp;&nbsp; ($nc-&gt;hasChildNodes())<br />
&nbsp;&nbsp;&nbsp; ?($n-&gt;firstChild-&gt;nodeName== $n-&gt;lastChild-&gt;nodeName&amp;&amp;$n-&gt;childNodes-&gt;length&gt;1)<br />
&nbsp;&nbsp;&nbsp; ?$return[$nc-&gt;nodeName][]=xml2array($item)<br />
&nbsp;&nbsp;&nbsp; :$return[$nc-&gt;nodeName]=xml2array($nc)<br />
&nbsp;&nbsp;&nbsp; :$return=$nc-&gt;nodeValue;<br />
&nbsp;&nbsp;&nbsp; return $return;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="60188""></a>
  <div class="note">
   <strong class="user">simlee at indiana dot edu</strong>
   <a href="#60188" class="date">29-Dec-2005 12:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The project I'm currently working on uses XPaths to dynamically navigate through chunks of an XML file.&nbsp; I couldn't find any PHP code on the net that would build the XPath to a node for me, so I wrote my own function.&nbsp; Turns out it wasn't as hard as I thought it might be (yay recursion), though it does entail using some PHP shenanigans...&nbsp; <br />
<br />
Hopefully it'll save someone else the trouble of reinventing this wheel. <br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">getNodeXPath</span><span class="keyword">( </span><span class="default">$node </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// REMEMBER THAT XPATHS USE BASE-1 INSTEAD OF BASE-0!!!<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // Get the index for the current node by looping through the siblings.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$parentNode </span><span class="keyword">= </span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">parentNode</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if( </span><span class="default">$parentNode </span><span class="keyword">!= </span><span class="default">null </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$nodeIndex </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; do {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$testNode </span><span class="keyword">= </span><span class="default">$parentNode</span><span class="keyword">-&gt;</span><span class="default">childNodes</span><span class="keyword">-&gt;</span><span class="default">item</span><span class="keyword">( </span><span class="default">$nodeIndex </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$nodeName </span><span class="keyword">= </span><span class="default">$testNode</span><span class="keyword">-&gt;</span><span class="default">nodeName</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$nodeIndex</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// PHP trickery!&nbsp; Here we create a counter based on the node <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //&nbsp; name of the test node to use in the XPath.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if( !isset( $</span><span class="default">$nodeName </span><span class="keyword">) ) $</span><span class="default">$nodeName </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else $</span><span class="default">$nodeName</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Failsafe return value.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if( </span><span class="default">$nodeIndex </span><span class="keyword">&gt; </span><span class="default">$parentNode</span><span class="keyword">-&gt;</span><span class="default">childNodes</span><span class="keyword">-&gt;</span><span class="default">length </span><span class="keyword">) return( </span><span class="string">"/" </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } while( !</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">isSameNode</span><span class="keyword">( </span><span class="default">$testNode </span><span class="keyword">) );<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Recursively get the XPath for the parent.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return( </span><span class="default">getNodeXPath</span><span class="keyword">( </span><span class="default">$parentNode </span><span class="keyword">) . </span><span class="string">"/</span><span class="keyword">{</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">nodeName</span><span class="keyword">}</span><span class="string">[</span><span class="keyword">{$</span><span class="default">$nodeName</span><span class="keyword">}</span><span class="string">]" </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Hit the root node!&nbsp; Note that the slash is added when <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //&nbsp; building the XPath, so we return just an empty string.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return( </span><span class="string">"" </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="59734""></a>
  <div class="note">
   <strong class="user">johanwthijs-at-hotmail-dot-com</strong>
   <a href="#59734" class="date">14-Dec-2005 06:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Being an experienced ASP developer I was wondering how to replace textual content of a node (with msxml this is simply acheived by setting the 'text' property of a node). Out of frustration I started to play around with SimpleXml but I could not get it to work in combination with xPath.<br />
<br />
I took me a lot of time to find out so I hope this helps others:<br />
<br />
function replaceNodeText($objXml, $objNode, $strNewContent){<br />
&nbsp;&nbsp;&nbsp; /*<br />
&nbsp;&nbsp;&nbsp; This function replaces a node's string content with strNewContent<br />
&nbsp;&nbsp;&nbsp; */<br />
&nbsp;&nbsp;&nbsp; $objNodeListNested = &amp;$objNode-&gt;childNodes;<br />
&nbsp;&nbsp;&nbsp; foreach ( $objNodeListNested as $objNodeNested ){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; if ($objNodeNested-&gt;nodeType == XML_TEXT_NODE)$objNode-&gt;removeChild ($objNodeNested);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; $objNode-&gt;appendChild($objXml-&gt;createTextNode($strNewContent));<br />
}<br />
<br />
$objXml= new DOMDocument();<br />
$objXml-&gt;loadXML('&lt;root&gt;&lt;node id="1"&gt;bla&lt;/note&gt;&lt;/root&gt;');<br />
$objXpath = new domxpath($objXml);<br />
<br />
$strXpath="/root/node[@id='1']";<br />
$objNodeList = $objXpath -&gt;query($strXpath);<br />
foreach ($objNodeList as $objNode){<br />
//pass the node by reference<br />
replaceNodeText($objXml, &amp;$objNode, $strImportedValue);<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="58856""></a>
  <div class="note">
   <strong class="user">mark at vectrex dot org dot uk</strong>
   <a href="#58856" class="date">17-Nov-2005 02:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that these DOM functions expect (and presumably return) all their data in UTF-8 character encoding, regardless of what PHP's current encoding is. This means that text nodes, attribute values etc, should be in utf8.<br />
<br />
This applies even if you're generating an XML document which is not ultimately in utf8.<br />
<br />
Mark</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="58056""></a>
  <div class="note">
   <strong class="user">toby at tobiasly dot com</strong>
   <a href="#58056" class="date">22-Oct-2005 11:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This module is not included by default either in the CentOS 4 "centosplus" repository. For those using PHP5 on CentOS 4, a simple "yum --enablerepo=centosplus install php-xml" will do the trick (this will install both the XML and DOM modules).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="57274""></a>
  <div class="note">
   <strong class="user">pes_cz</strong>
   <a href="#57274" class="date">29-Sep-2005 12:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When I tried to parse my XHTML Strict files with DOM extension, it couldn't understand xhtml entities (like &amp;copy;). I found post about it here (14-Jul-2005 09:05) which adviced to add resolveExternals = true, but it was very slow. There was some small note about xml catalogs but without any glue. Here it is:<br />
<br />
XML catalogs is something like cache. Download all needed dtd's to /etc/xml, edit file /etc/xml/catalog and add this line: &lt;public publicId="-//W3C//DTD XHTML 1.0 Strict//EN" uri="file:///etc/xml/xhtml1-strict.dtd" /&gt;<br />
<br />
Thats all. Thanks to <a href="http://www.whump.com/moreLikeThis/link/03815" rel="nofollow" target="_blank">http://www.whump.com/moreLikeThis/link/03815</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="56059""></a>
  <div class="note">
   <strong class="user">amir.laherATcomplinet.com</strong>
   <a href="#56059" class="date">22-Aug-2005 05:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This particular W3C page provides invaluable documentation for the DOM classes implemented in php5 (via libxml2). It fills in plenty of php.net's gaps:<br />
<br />
<a href="http://www.w3.org/TR/DOM-Level-2-Core/core.html" rel="nofollow" target="_blank">http://www.w3.org/TR/DOM-Level-2-Core/core.html</a><br />
<br />
Some key examples:<br />
* concise summary of the class heirachy (1.1.1)<br />
* clarification that DOM level 2 doesn't allow for population of internal DTDs<br />
* explanation of DOMNode-&gt;normalize()<br />
* explanation of the DOMImplementation class<br />
<br />
The interfaces are described in OMG's Interface Definition Language</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54909""></a>
  <div class="note">
   <strong class="user">aidan at php dot net</strong>
   <a href="#54909" class="date">19-Jul-2005 06:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As of PHP 5.1, libxml options may be set using constants rather than the use of proprietary DomDocument properties.<br />
<br />
DomDocument-&gt;resolveExternals is equivilant to setting<br />
LIBXML_DTDLOAD<br />
LIBXML_DTDATTR<br />
<br />
DomDocument-&gt;validateOnParse is equivilant to setting<br />
LIBXML_DTDLOAD<br />
LIBXML_DTDVALID<br />
<br />
PHP 5.1 users are encouraged to use the new constants. <br />
<br />
Example:<br />
<br />
DomDocument-&gt;load($file, LIBXML_DTDLOAD|LIBXML_DTDATTR);<br />
<br />
DomDocument-&gt;load($file, LIBXML_DTDLOAD|LIBXML_DTDVALID);</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54893""></a>
  <div class="note">
   <strong class="user">aidan at php dot net</strong>
   <a href="#54893" class="date">18-Jul-2005 08:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When dealing with validation or loading, the output errors can be quite annoying.<br />
<br />
PHP 5.1 introduces libxml_get_errors().<br />
<br />
<a href="http://php.net/libxml_get_errors" rel="nofollow" target="_blank">http://php.net/libxml_get_errors</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54777""></a>
  <div class="note">
   <strong class="user">php at webdevelopers dot cz</strong>
   <a href="#54777" class="date">14-Jul-2005 12:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
[Editor's Note: If you're using entities, then you have no choice. XML Catalogs can speed DTD resolution.]
<br />

<br />
Never use 
<br />

<br />
$dom-&gt;resolveExternals=true;
<br />

<br />
when parsing XHTML document that has the DOCTYPE declaration with DTD URL specified in it.
<br />

<br />
Otherwise parsing the XHTML with DOCTYPE like this one:
<br />

<br />
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "<a href="http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd" rel="nofollow" target="_blank">http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd</a>"&gt;
<br />

<br />
will result in PHP/DOM downloading the DTD file from W3C site when parsing your document. It will add extra delay to your script - I experienced that $dom-&gt;load()'s total time was from 1 to 16 seconds.
<br />

<br />
elixon</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="51817""></a>
  <div class="note">
   <strong class="user">spammable69 at hotmail dot com</strong>
   <a href="#51817" class="date">11-Apr-2005 10:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I wrote a framework to implement the StyleSheet interfaces as specified on the W3C website.&nbsp; The code is written in PHP, and is NOT a complete implementation.&nbsp; Use it how ya like.&nbsp; I was planning on adding the CSSStyleSheet interfaces as well.&nbsp; Feel free to ask.<br />
<br />
&lt;?<br />
&nbsp;&nbsp;&nbsp; class StyleSheetList {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public length;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; private self;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; function __construct ( ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $this-&gt;self = array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; function __get($property, $&amp;ret) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if($property == 'length')<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $ret = count($this-&gt;self);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return true;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; function __set($property, $val) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if($property == 'length')<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return true;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; function item( $index ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return $this-&gt;self[$index];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; class MediaList extends StyleSheetList {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; function appendMedium ( $newMedium ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array_push($this-&gt;self, $newMedium);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; function deleteMedium ( $oldMedium ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach($this-&gt;self as $item) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if( $item == $oldMedium ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $item = $this-&gt;self[ $this-&gt;length-1 ];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array_pop($this-&gt;self);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; class DocumentStyle {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public styleSheets;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; function __construct ( ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $this-&gt;styleSheets = new StyleSheetList();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; function __set($property, $val) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if($property == 'styleSheets')<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return true;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; class LinkStyle {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public sheet;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; function __construct () {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $this-&gt;sheet = new StyleSheet();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; function __set($property, $val) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if($property == 'sheet')<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return true;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; class StyleSheet {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public type;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public disabled;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public ownerNode;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public parentStyleSheet;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public href;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public title;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public media;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; function __construct( $type, $disabled, $ownerNode, $parentStyleSheet, $href, $title){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $this-&gt;type = $type;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $this-&gt;disabled = $disabled;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $this-&gt;media = new MediaList();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $this-&gt;ownerNode = $ownerNode;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $this-&gt;parentStyleSheet = $parentStyleSheet;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $this-&gt;href = $href;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $this-&gt;title = $title;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
?&gt;<br />
<br />
Only contactable via <a href="http://murpsoft.com/contact.html" rel="nofollow" target="_blank">http://murpsoft.com/contact.html</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
