<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=UTF-8">
  <title>类常量</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="language.oop5.properties.html">? 属性</a></li>
      <li style="float: right;"><a href="language.oop5.autoload.html">类的自动加载 ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="language.oop5.html">类与对象</a></li>
    <li>类常量</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="language.oop5.constants" class="sect1">
  <h2 class="title">类常量</h2>
  <p class="para">
   可以把在类中始终保持不变的值定义为 <a href="language.constants.html" class="link">常量</a> 。
   类常量的默认可见性是 <code class="literal">public</code> 。
  </p>
 <blockquote class="note"><p><strong class="note">Note</strong>: 
  <p class="para">
   类常量可以通过子类重新定义。PHP 8.1.0 起，如果类常量定义为 <a href="language.oop5.final.html" class="link">final</a>，则不能被子类重新定义。
  </p>
 </p></blockquote>
  <p class="para">
   接口（interface）中也可以定义常量。更多示例见文档中的<a href="language.oop5.interfaces.html" class="link">接口</a>部分。
  </p>
  <p class="para">
   可以用一个变量来动态调用类。但该变量的值不能为关键字（如 <code class="literal">self</code> ， 
   <code class="literal">parent</code> 或 <code class="literal">static</code>）。
  </p>
  <p class="para">
  注意，类常量只为每个类分配一次，而不是为每个类的实例分配。
 </p>
  <div class="example" id="example-442">
   <p><strong>Example #1 定义和使用一个类常量</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">class </span><span style="color: #0000BB">MyClass<br /></span><span style="color: #007700">{<br />    const </span><span style="color: #0000BB">CONSTANT </span><span style="color: #007700">= </span><span style="color: #DD0000">'constant value'</span><span style="color: #007700">;<br /><br />    function </span><span style="color: #0000BB">showConstant</span><span style="color: #007700">() {<br />        echo  </span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">CONSTANT </span><span style="color: #007700">. </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />    }<br />}<br /><br />echo </span><span style="color: #0000BB">MyClass</span><span style="color: #007700">::</span><span style="color: #0000BB">CONSTANT </span><span style="color: #007700">. </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$classname </span><span style="color: #007700">= </span><span style="color: #DD0000">"MyClass"</span><span style="color: #007700">;<br />echo </span><span style="color: #0000BB">$classname</span><span style="color: #007700">::</span><span style="color: #0000BB">CONSTANT </span><span style="color: #007700">. </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$class </span><span style="color: #007700">= new </span><span style="color: #0000BB">MyClass</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">showConstant</span><span style="color: #007700">();<br /><br />echo </span><span style="color: #0000BB">$class</span><span style="color: #007700">::</span><span style="color: #0000BB">CONSTANT</span><span style="color: #007700">.</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
  <p class="para">
  特殊的 <strong><code>::class</code></strong> 允许在编译时进行完全限定的类名解析，
  这在命名空间类中非常有用。
 </p>
  <div class="example" id="example-444">
  <p><strong>Example #2 命名空间的 ::class 示例</strong></p>
  <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">namespace </span><span style="color: #0000BB">foo </span><span style="color: #007700">{<br />    class </span><span style="color: #0000BB">bar </span><span style="color: #007700">{<br />    }<br /><br />    echo </span><span style="color: #0000BB">bar</span><span style="color: #007700">::class; </span><span style="color: #FF8000">// foo\bar<br /></span><span style="color: #007700">}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
  </div>

 </div>

<div class="example" id="example-446">
  <p><strong>Example #3 类常量表达式示例</strong></p>
  <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">const </span><span style="color: #0000BB">ONE </span><span style="color: #007700">= </span><span style="color: #0000BB">1</span><span style="color: #007700">;<br />class </span><span style="color: #0000BB">foo </span><span style="color: #007700">{<br />    const </span><span style="color: #0000BB">TWO </span><span style="color: #007700">= </span><span style="color: #0000BB">ONE </span><span style="color: #007700">* </span><span style="color: #0000BB">2</span><span style="color: #007700">;<br />    const </span><span style="color: #0000BB">THREE </span><span style="color: #007700">= </span><span style="color: #0000BB">ONE </span><span style="color: #007700">+ </span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">TWO</span><span style="color: #007700">;<br />    const </span><span style="color: #0000BB">SENTENCE </span><span style="color: #007700">= </span><span style="color: #DD0000">'The value of THREE is '</span><span style="color: #007700">.</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">THREE</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
  </div>

 </div>

 <div class="example" id="example-448">
  <p><strong>Example #4 自 PHP 7.1.0 起，类常量支持可见性修饰符</strong></p>
  <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">class </span><span style="color: #0000BB">Foo </span><span style="color: #007700">{<br />    public const </span><span style="color: #0000BB">BAR </span><span style="color: #007700">= </span><span style="color: #DD0000">'bar'</span><span style="color: #007700">;<br />    private const </span><span style="color: #0000BB">BAZ </span><span style="color: #007700">= </span><span style="color: #DD0000">'baz'</span><span style="color: #007700">;<br />}<br />echo </span><span style="color: #0000BB">Foo</span><span style="color: #007700">::</span><span style="color: #0000BB">BAR</span><span style="color: #007700">, </span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br />echo </span><span style="color: #0000BB">Foo</span><span style="color: #007700">::</span><span style="color: #0000BB">BAZ</span><span style="color: #007700">, </span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
  </div>

   <div class="example-contents"><p>以上示例在 PHP 7.1 中的输出：</p></div>
   <div class="example-contents screen">
<div class="cdata"><pre>
bar

Fatal error: Uncaught Error: Cannot access private const Foo::BAZ in ...
</pre></div>
   </div>
 </div>
 <blockquote class="note"><p><strong class="note">Note</strong>: 
  <p class="para">
   自 PHP 7.1.0 起，类常量允许使用可见性修饰符。
  </p>
 </p></blockquote>
</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="128452""></a>
  <div class="note">
   <strong class="user">powtac at gmx dot de</strong>
   <a href="#128452" class="date">05-May-2023 02:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Since it it is not mentioned in the description the following types can be set as a class constant: string, array, int, bool and probably float. But not objects. <br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">class </span><span class="default">Test </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; const </span><span class="default">arr&nbsp; </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; const </span><span class="default">string </span><span class="keyword">= </span><span class="string">'string'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; const </span><span class="default">int </span><span class="keyword">= </span><span class="default">99</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; const </span><span class="default">bool </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">var_dump</span><span class="keyword">(<br />
&nbsp;&nbsp;&nbsp; (new </span><span class="default">Test</span><span class="keyword">())::</span><span class="default">arr</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; (new </span><span class="default">Test</span><span class="keyword">())::</span><span class="default">string</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; (new </span><span class="default">Test</span><span class="keyword">())::</span><span class="default">int</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; (new </span><span class="default">Test</span><span class="keyword">())::</span><span class="default">bool<br />
</span><span class="keyword">);<br />
<br />
</span><span class="comment">/* ouput for PHP 7.0.0+: <br />
<br />
array(0) {<br />
}<br />
string(6) "string"<br />
int(99)<br />
bool(true)</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="123039""></a>
  <div class="note">
   <strong class="user">David Spector</strong>
   <a href="#123039" class="date">16-Aug-2018 01:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The usual comma-separated syntax can be used to declare several constants:<br />
<br />
class STATE<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp; const INIT=0, NAME_SEEN=1, ADDR_SEEN=2;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
This shows the declaration of a set of enumeration literals suitable for use in a finite state machine loop. Reference such an enum by using syntax such as "STATE::INIT". Its actual type in this case will be integer.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="121613""></a>
  <div class="note">
   <strong class="user">Nimja</strong>
   <a href="#121613" class="date">06-Sep-2017 01:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that this magic constant DOES NOT load classes. And in fact can work on classes that do not exist.<br />
<br />
This means it does not mess with auto-loading.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $className </span><span class="keyword">= </span><span class="default">\Foo\Bar</span><span class="keyword">::class;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$className</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">class_exists</span><span class="keyword">(</span><span class="default">$className</span><span class="keyword">, </span><span class="default">false</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span><br />
Will output: <br />
<br />
&nbsp;&nbsp;&nbsp; string(7) "Foo\Bar"<br />
&nbsp;&nbsp;&nbsp; bool(false)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="120083""></a>
  <div class="note">
   <strong class="user">jimmmy dot chief at gmail dot com</strong>
   <a href="#120083" class="date">25-Oct-2016 02:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hi, i would like to point out difference between self::CONST and $this::CONST with extended class.<br />
Let us have class a:<br />
<br />
<span class="default">&lt;?php <br />
</span><span class="keyword">class </span><span class="default">a </span><span class="keyword">{&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; const </span><span class="default">CONST_INT </span><span class="keyword">= </span><span class="default">10</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">getSelf</span><span class="keyword">(){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">self</span><span class="keyword">::</span><span class="default">CONST_INT</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">getThis</span><span class="keyword">(){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">::</span><span class="default">CONST_INT</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
And class b (which extends a)<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">b </span><span class="keyword">extends </span><span class="default">a </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; const </span><span class="default">CONST_INT </span><span class="keyword">= </span><span class="default">20</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">getSelf</span><span class="keyword">(){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">parent</span><span class="keyword">::</span><span class="default">getSelf</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">getThis</span><span class="keyword">(){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">parent</span><span class="keyword">::</span><span class="default">getThis</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Both classes have same named constant CONST_INT.<br />
When child call method in parent class, there is different output between self and $this usage.<br />
<br />
<span class="default">&lt;?php<br />
$b </span><span class="keyword">= new </span><span class="default">b</span><span class="keyword">();<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">getSelf</span><span class="keyword">());&nbsp; &nbsp;&nbsp; </span><span class="comment">//10<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">getThis</span><span class="keyword">());&nbsp; &nbsp;&nbsp; </span><span class="comment">//20<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="118998""></a>
  <div class="note">
   <strong class="user">nepomuk at nepda dot de</strong>
   <a href="#118998" class="date">15-Mar-2016 08:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
[Editor's note: that is already possible as of PHP 5.6.0.]
<br />

<br />
Note, as of PHP7 it is possible to define class constants with an array.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">class </span><span class="default">MyClass
<br />
</span><span class="keyword">{
<br />
&nbsp;&nbsp;&nbsp; const </span><span class="default">ABC </span><span class="keyword">= array(</span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'B'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; const </span><span class="default">A </span><span class="keyword">= </span><span class="string">'1'</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; const </span><span class="default">B </span><span class="keyword">= </span><span class="string">'2'</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; const </span><span class="default">C </span><span class="keyword">= </span><span class="string">'3'</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; const </span><span class="default">NUMBERS </span><span class="keyword">= array(
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">A</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">B</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">C</span><span class="keyword">,
<br />
&nbsp;&nbsp;&nbsp; );
<br />
}
<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">MyClass</span><span class="keyword">::</span><span class="default">ABC</span><span class="keyword">);
<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">MyClass</span><span class="keyword">::</span><span class="default">NUMBERS</span><span class="keyword">);
<br />

<br />
</span><span class="comment">// Result:
<br />
/*
<br />
array(3) {
<br />
&nbsp;&nbsp;&nbsp; [0]=&gt;
<br />
&nbsp; string(1) "A"
<br />
&nbsp;&nbsp;&nbsp; [1]=&gt;
<br />
&nbsp; string(1) "B"
<br />
&nbsp;&nbsp;&nbsp; [2]=&gt;
<br />
&nbsp; string(1) "C"
<br />
}
<br />
array(3) {
<br />
&nbsp;&nbsp;&nbsp; [0]=&gt;
<br />
&nbsp; string(1) "1"
<br />
&nbsp;&nbsp;&nbsp; [1]=&gt;
<br />
&nbsp; string(1) "2"
<br />
&nbsp;&nbsp;&nbsp; [2]=&gt;
<br />
&nbsp; string(1) "3"
<br />
}
<br />
*/
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="117265""></a>
  <div class="note">
   <strong class="user">Paul</strong>
   <a href="#117265" class="date">12-May-2015 10:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Square or curly bracket syntax can normally be used to access a single byte (character) within a string. For example: $mystring[5]. However, please note that (for some reason) this syntax is not accepted for string class constants (at least, not in PHP 5.5.12).<br />
For example, the following code gives "PHP Parse error:&nbsp; syntax error, unexpected '[' in php shell code on line 6".<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">SomeClass<br />
</span><span class="keyword">{<br />
&nbsp; const </span><span class="default">SOME_STRING </span><span class="keyword">= </span><span class="string">'0123456790'</span><span class="keyword">;<br />
&nbsp; public static function </span><span class="default">ATest</span><span class="keyword">()<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">self</span><span class="keyword">::</span><span class="default">SOME_STRING</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br />
&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span>It looks like you have to use a variable/class member instead.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="116109""></a>
  <div class="note">
   <strong class="user">kuzawinski dot marcin at gmail dot com</strong>
   <a href="#116109" class="date">11-Nov-2014 01:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As of PHP 5.6 you can finally define constant using math expressions, like this one:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">class </span><span class="default">MyTimer </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; const </span><span class="default">SEC_PER_DAY </span><span class="keyword">= </span><span class="default">60 </span><span class="keyword">* </span><span class="default">60 </span><span class="keyword">* </span><span class="default">24</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Me happy :)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114599""></a>
  <div class="note">
   <strong class="user">Xiong Chiamiov</strong>
   <a href="#114599" class="date">10-Mar-2014 11:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
const can also be used directly in namespaces, a feature never explicitly stated in the documentation.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment"># foo.php<br />
</span><span class="keyword">namespace </span><span class="default">Foo</span><span class="keyword">;<br />
<br />
const </span><span class="default">BAR </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
<span class="default">&lt;?php<br />
</span><span class="comment"># bar.php<br />
</span><span class="keyword">require </span><span class="string">'foo.php'</span><span class="keyword">;<br />
<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">Foo\BAR</span><span class="keyword">); </span><span class="comment">// =&gt; int(1)<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114143""></a>
  <div class="note">
   <strong class="user">delete dot this dot and dot dots dot gt at kani dot hu</strong>
   <a href="#114143" class="date">16-Jan-2014 11:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I think it's useful if we draw some attention to late static binding here:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">A </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; const </span><span class="default">MY_CONST </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">my_const_self</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">self</span><span class="keyword">::</span><span class="default">MY_CONST</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; } <br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">my_const_static</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return static::</span><span class="default">MY_CONST</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; } <br />
}<br />
<br />
class </span><span class="default">B </span><span class="keyword">extends </span><span class="default">A </span><span class="keyword">{<br />
&nbsp;&nbsp; const </span><span class="default">MY_CONST </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$b </span><span class="keyword">= new </span><span class="default">B</span><span class="keyword">();<br />
echo </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">my_const_self </span><span class="keyword">? </span><span class="string">'yes' </span><span class="keyword">: </span><span class="string">'no'</span><span class="keyword">; </span><span class="comment">// output: no<br />
</span><span class="keyword">echo </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">my_const_static </span><span class="keyword">? </span><span class="string">'yes' </span><span class="keyword">: </span><span class="string">'no'</span><span class="keyword">; </span><span class="comment">// output: yes<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="104260""></a>
  <div class="note">
   <strong class="user">tmp dot 4 dot longoria at gmail dot com</strong>
   <a href="#104260" class="date">04-Jun-2011 01:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
it's possible to declare constant in base class, and override it in child, and access to correct value of the const from the static method is possible by 'get_called_class' method:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">abstract class </span><span class="default">dbObject<br />
</span><span class="keyword">{&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; const </span><span class="default">TABLE_NAME</span><span class="keyword">=</span><span class="string">'undefined'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; public static function </span><span class="default">GetAll</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$c </span><span class="keyword">= </span><span class="default">get_called_class</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="string">"SELECT * FROM `"</span><span class="keyword">.</span><span class="default">$c</span><span class="keyword">::</span><span class="default">TABLE_NAME</span><span class="keyword">.</span><span class="string">"`"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }&nbsp; &nbsp; <br />
}<br />
<br />
class </span><span class="default">dbPerson </span><span class="keyword">extends </span><span class="default">dbObject<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; const </span><span class="default">TABLE_NAME</span><span class="keyword">=</span><span class="string">'persons'</span><span class="keyword">;<br />
}<br />
<br />
class </span><span class="default">dbAdmin </span><span class="keyword">extends </span><span class="default">dbPerson<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; const </span><span class="default">TABLE_NAME</span><span class="keyword">=</span><span class="string">'admins'</span><span class="keyword">;<br />
}<br />
<br />
echo </span><span class="default">dbPerson</span><span class="keyword">::</span><span class="default">GetAll</span><span class="keyword">().</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;</span><span class="comment">//output: "SELECT * FROM `persons`"<br />
</span><span class="keyword">echo </span><span class="default">dbAdmin</span><span class="keyword">::</span><span class="default">GetAll</span><span class="keyword">().</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;</span><span class="comment">//output: "SELECT * FROM `admins`"<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100142""></a>
  <div class="note">
   <strong class="user">anonymous</strong>
   <a href="#100142" class="date">27-Sep-2010 06:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Most people miss the point in declaring constants and confuse then things by trying to declare things like functions or arrays as constants. What happens next is to try things that are more complicated then necessary and sometimes lead to bad coding practices. Let me explain...
<br />

<br />
A constant is a name for a value (but it's NOT a variable), that usually will be replaced in the code while it gets COMPILED and NOT at runtime. 
<br />

<br />
So returned values from functions can't be used, because they will return a value only at runtime. 
<br />

<br />
Arrays can't be used, because they are data structures that exist at runtime. 
<br />

<br />
One main purpose of declaring a constant is usually using a value in your code, that you can replace easily in one place without looking for all the occurences. Another is, to avoid mistakes. 
<br />

<br />
Think about some examples written by some before me: 
<br />

<br />
1. const MY_ARR = "return array(\"A\", \"B\", \"C\", \"D\");";
<br />
It was said, this would declare an array that can be used with eval. WRONG! This is just a string as constant, NOT an array. Does it make sense if it would be possible to declare an array as constant? Probably not. Instead declare the values of the array as constants and make an array variable. 
<br />

<br />
2. const magic_quotes = (bool)get_magic_quotes_gpc();
<br />
This can't work, of course. And it doesn't make sense either. The function already returns the value, there is no purpose in declaring a constant for the same thing. 
<br />

<br />
3. Someone spoke about "dynamic" assignments to constants. What? There are no dynamic assignments to constants, runtime assignments work _only_ with variables. Let's take the proposed example: 
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="comment">/**
<br />
&nbsp;* Constants that deal only with the database
<br />
&nbsp;*/
<br />
</span><span class="keyword">class </span><span class="default">DbConstant </span><span class="keyword">extends </span><span class="default">aClassConstant </span><span class="keyword">{
<br />
&nbsp;&nbsp;&nbsp; protected </span><span class="default">$host </span><span class="keyword">= </span><span class="string">'localhost'</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; protected </span><span class="default">$user </span><span class="keyword">= </span><span class="string">'user'</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; protected </span><span class="default">$password </span><span class="keyword">= </span><span class="string">'pass'</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; protected </span><span class="default">$database </span><span class="keyword">= </span><span class="string">'db'</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; protected </span><span class="default">$time</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">__construct</span><span class="keyword">() {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">time </span><span class="keyword">= </span><span class="default">time</span><span class="keyword">() + </span><span class="default">1</span><span class="keyword">; </span><span class="comment">// dynamic assignment
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">}
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Those aren't constants, those are properties of the class. Something like "this-&gt;time = time()" would even totally defy the purpose of a constant. Constants are supposed to be just that, constant values, on every execution. They are not supposed to change every time a script runs or a class is instantiated. 
<br />

<br />
Conclusion: Don't try to reinvent constants as variables. If constants don't work, just use variables. Then you don't need to reinvent methods to achieve things for what is already there.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85703""></a>
  <div class="note">
   <strong class="user">wbcarts at juno dot com</strong>
   <a href="#85703" class="date">12-Sep-2008 12:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Use CONST to set UPPER and LOWER LIMITS<br />
<br />
If you have code that accepts user input or you just need to make sure input is acceptable, you can use constants to set upper and lower limits. Note: a static function that enforces your limits is highly recommended... sniff the clamp() function below for a taste.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">class </span><span class="default">Dimension<br />
</span><span class="keyword">{<br />
&nbsp; const </span><span class="default">MIN </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, </span><span class="default">MAX </span><span class="keyword">= </span><span class="default">800</span><span class="keyword">;<br />
<br />
&nbsp; public </span><span class="default">$width</span><span class="keyword">, </span><span class="default">$height</span><span class="keyword">;<br />
<br />
&nbsp; public function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$w </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, </span><span class="default">$h </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">width&nbsp; </span><span class="keyword">= </span><span class="default">self</span><span class="keyword">::</span><span class="default">clamp</span><span class="keyword">(</span><span class="default">$w</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">height </span><span class="keyword">= </span><span class="default">self</span><span class="keyword">::</span><span class="default">clamp</span><span class="keyword">(</span><span class="default">$h</span><span class="keyword">);<br />
&nbsp; }<br />
<br />
&nbsp; public function </span><span class="default">__toString</span><span class="keyword">(){<br />
&nbsp;&nbsp;&nbsp; return </span><span class="string">"Dimension [width=</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">width</span><span class="string">, height=</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">height</span><span class="string">]"</span><span class="keyword">;<br />
&nbsp; }<br />
<br />
&nbsp; protected static function </span><span class="default">clamp</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$value </span><span class="keyword">&lt; </span><span class="default">self</span><span class="keyword">::</span><span class="default">MIN</span><span class="keyword">) </span><span class="default">$value </span><span class="keyword">= </span><span class="default">self</span><span class="keyword">::</span><span class="default">MIN</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$value </span><span class="keyword">&gt; </span><span class="default">self</span><span class="keyword">::</span><span class="default">MAX</span><span class="keyword">) </span><span class="default">$value </span><span class="keyword">= </span><span class="default">self</span><span class="keyword">::</span><span class="default">MAX</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp; }<br />
}<br />
<br />
echo (new </span><span class="default">Dimension</span><span class="keyword">()) . </span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br />
echo (new </span><span class="default">Dimension</span><span class="keyword">(</span><span class="default">1500</span><span class="keyword">, </span><span class="default">97</span><span class="keyword">)) . </span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br />
echo (new </span><span class="default">Dimension</span><span class="keyword">(</span><span class="default">14</span><span class="keyword">, -</span><span class="default">20</span><span class="keyword">)) . </span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br />
echo (new </span><span class="default">Dimension</span><span class="keyword">(</span><span class="default">240</span><span class="keyword">, </span><span class="default">80</span><span class="keyword">)) . </span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
- - - - - - - -<br />
&nbsp;Dimension [width=0, height=0] - default size<br />
&nbsp;Dimension [width=800, height=97] - width has been clamped to MAX<br />
&nbsp;Dimension [width=14, height=0] - height has been clamped to MIN<br />
&nbsp;Dimension [width=240, height=80] - width and height unchanged<br />
- - - - - - - -<br />
<br />
Setting upper and lower limits on your classes also help your objects make sense. For example, it is not possible for the width or height of a Dimension to be negative. It is up to you to keep phoney input from corrupting your objects, and to avoid potential errors and exceptions in other parts of your code.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
