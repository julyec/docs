<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=UTF-8">
  <title>基本概念</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="oop5.intro.html">? 简介</a></li>
      <li style="float: right;"><a href="language.oop5.properties.html">属性 ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="language.oop5.html">类与对象</a></li>
    <li>基本概念</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="language.oop5.basic" class="sect1">
 <h2 class="title">基本概念</h2>

 <div class="sect2" id="language.oop5.basic.class">
  <h3 class="title">class</h3>
  <p class="para">
   每个类的定义都以关键字 <code class="literal">class</code>
   开头，后面跟着类名，后面跟着一对花括号，里面包含有类的属性与方法的定义。
  </p>
  <p class="para">
   类名可以是任何非 PHP
   <a href="reserved.html" class="link">保留字</a>
      的合法标签。一个合法类名以字母或下划线开头，后面跟着若干字母，数字或下划线。以正则表达式表示为：
      <code class="code">^[a-zA-Z_\x80-\xff][a-zA-Z0-9_\x80-\xff]*$</code>。
  </p>
  <p class="para">
   一个类可以包含有属于自己的 <a href="language.oop5.constants.html" class="link">常量</a>，<a href="language.oop5.properties.html" class="link">变量</a>（称为"属性"）以及函数（称为"方法"）。
  </p>
  <div class="example" id="example-386">
   <p><strong>Example #1 简单的类定义</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">class </span><span style="color: #0000BB">SimpleClass<br /></span><span style="color: #007700">{<br />    </span><span style="color: #FF8000">// 声明属性<br />    </span><span style="color: #007700">public </span><span style="color: #0000BB">$var </span><span style="color: #007700">= </span><span style="color: #DD0000">'a default value'</span><span style="color: #007700">;<br /><br />    </span><span style="color: #FF8000">// 声明方法<br />    </span><span style="color: #007700">public function </span><span style="color: #0000BB">displayVar</span><span style="color: #007700">() {<br />        echo </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">var</span><span style="color: #007700">;<br />    }<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
  <p class="para">
   当一个方法在类定义内部被调用时，有一个可用的伪变量
   <var class="varname">$this</var>。<var class="varname">$this</var>
   是一个到当前对象的引用。
  </p>
  <div class="warning"><strong class="warning">Warning</strong>
      <p class="para">
          以静态方式去调用一个非静态方法，将会抛出一个
          <span class="classname"><a href="class.error.html" class="classname">Error</a></span>。
          在 PHP 8.0.0 之前版本中，将会产生一个废弃通知，同时
          <var class="varname">$this</var> 将会被声明为未定义。
      </p>
   <div class="example" id="iterator.example.basic">
    <p><strong>Example #2 使用 <var class="varname">$this</var> 伪变量的示例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">class </span><span style="color: #0000BB">A<br /></span><span style="color: #007700">{<br />    function </span><span style="color: #0000BB">foo</span><span style="color: #007700">()<br />    {<br />        if (isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">)) {<br />            echo </span><span style="color: #DD0000">'$this is defined ('</span><span style="color: #007700">;<br />            echo </span><span style="color: #0000BB">get_class</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">);<br />            echo </span><span style="color: #DD0000">")\n"</span><span style="color: #007700">;<br />        } else {<br />            echo </span><span style="color: #DD0000">"\$this is not defined.\n"</span><span style="color: #007700">;<br />        }<br />    }<br />}<br /><br />class </span><span style="color: #0000BB">B<br /></span><span style="color: #007700">{<br />    function </span><span style="color: #0000BB">bar</span><span style="color: #007700">()<br />    {<br />        </span><span style="color: #0000BB">A</span><span style="color: #007700">::</span><span style="color: #0000BB">foo</span><span style="color: #007700">();<br />    }<br />}<br /><br /></span><span style="color: #0000BB">$a </span><span style="color: #007700">= new </span><span style="color: #0000BB">A</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$a</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">foo</span><span style="color: #007700">();<br /><br /></span><span style="color: #0000BB">A</span><span style="color: #007700">::</span><span style="color: #0000BB">foo</span><span style="color: #007700">();<br /><br /></span><span style="color: #0000BB">$b </span><span style="color: #007700">= new </span><span style="color: #0000BB">B</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$b</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bar</span><span style="color: #007700">();<br /><br /></span><span style="color: #0000BB">B</span><span style="color: #007700">::</span><span style="color: #0000BB">bar</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

     <div class="example-contents"><p>以上示例在 PHP 7 中的输出：</p></div>
     <div class="example-contents screen">
<div class="cdata"><pre>
$this is defined (A)

Deprecated: Non-static method A::foo() should not be called statically in %s  on line 27
$this is not defined.

Deprecated: Non-static method A::foo() should not be called statically in %s  on line 20
$this is not defined.

Deprecated: Non-static method B::bar() should not be called statically in %s  on line 32

Deprecated: Non-static method A::foo() should not be called statically in %s  on line 20
$this is not defined.
</pre></div>
     </div>
     <div class="example-contents"><p>以上示例在 PHP 8 中的输出：</p></div>
     <div class="example-contents screen">
<div class="cdata"><pre>
$this is defined (A)

Fatal error: Uncaught Error: Non-static method A::foo() cannot be called statically in %s :27
Stack trace:
#0 {main}
  thrown in %s  on line 27
</pre></div>
     </div>
    </div>
   </div>

   <div class="sect3" id="language.oop5.basic.class.readonly">
    <h4 class="title">只读类</h4>
    <p class="para">
     自 PHP 8.2.0 起，可以使用 <span class="modifier">readonly</span> 修饰符来标记类。将类标记为 <span class="modifier">readonly</span>
     只会向每个声明的属性添加 <a href="language.oop5.properties.html#language.oop5.properties.readonly-properties" class="link"><span class="modifier">readonly</span>
     修饰符</a>并禁止创建<a href="language.oop5.properties.html#language.oop5.properties.dynamic-properties" class="link">动态属性</a>。此外，不能通过使用
     <span class="classname"><a href="class.allowdynamicproperties.html" class="classname">AllowDynamicProperties</a></span> 注解来添加对后者的支持。尝试这样做会触发编译错误。
    </p>
    <div class="example" id="arrayaccess.example.basic">
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">#[</span><span style="color: #0000BB">\AllowDynamicProperties</span><span style="color: #007700">]<br />readonly class </span><span style="color: #0000BB">Foo </span><span style="color: #007700">{<br />}<br /><br /></span><span style="color: #FF8000">// Fatal error: Cannot apply #[AllowDynamicProperties] to readonly class Foo<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>

    <p class="para">
     由于无类型的属性和静态属性不能用 <code class="literal">readonly</code> 修饰符，所以 readonly 也不会对其声明：
    </p>
    <div class="example" id="serializable.example.basic">
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">readonly class </span><span style="color: #0000BB">Foo<br /></span><span style="color: #007700">{<br />    public </span><span style="color: #0000BB">$bar</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #FF8000">// Fatal error: Readonly property Foo::$bar must have type<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">readonly class </span><span style="color: #0000BB">Foo<br /></span><span style="color: #007700">{<br />    public static </span><span style="color: #0000BB">int $bar</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #FF8000">// Fatal error: Readonly class Foo cannot declare static properties<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>
    <p class="para">
     仅当子类也是 <span class="modifier">readonly</span> 类时，才可以<a href="language.oop5.basic.html#language.oop5.basic.extends" class="link">继承</a> <span class="modifier">readonly</span> 类。
    </p>
   </div>
  </div>

 <div class="sect2" id="language.oop5.basic.new">
  <h3 class="title">new</h3>
  <p class="para">
   要创建一个类的实例，必须使用 <code class="literal">new</code>
   关键字。当创建新对象时该对象总是被赋值，除非该对象定义了 <a href="language.oop5.decon.html" class="link">构造函数</a> 并且在出错时抛出了一个 <a href="language.exceptions.html" class="link">异常</a>。类应在被实例化之前定义（某些情况下则必须这样）。
  </p>
  <p class="para">
   如果在 <code class="literal">new</code> 之后跟着的是一个包含有类名的字符串
      <span class="type">string</span>，则该类的一个实例被创建。如果该类属于一个命名空间，则必须使用其完整名称。
  </p>

   <blockquote class="note"><p><strong class="note">Note</strong>: 
    <p class="para">
      如果没有参数要传递给类的构造函数，类名后的括号则可以省略掉。
    </p>
   </p></blockquote>

  <div class="example" id="example-394">
   <p><strong>Example #3 创建实例</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$instance </span><span style="color: #007700">= new </span><span style="color: #0000BB">SimpleClass</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">// 也可以这样做：<br /></span><span style="color: #0000BB">$className </span><span style="color: #007700">= </span><span style="color: #DD0000">'SimpleClass'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$instance </span><span style="color: #007700">= new </span><span style="color: #0000BB">$className</span><span style="color: #007700">(); </span><span style="color: #FF8000">// new SimpleClass()<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
  <p class="para">
    PHP 8.0.0 起，支持任意表达式中使用 <code class="literal">new</code>。如果表达式生成一个 
    <span class="type">string</span>，这将允许更复杂的实例化。表达式必须使用括号括起来。
   </p>
   <div class="example" id="stdclass.basic-example">
    <p><strong>Example #4 使用任意表达式创建实例</strong></p>
    <div class="example-contents"><p>
     在下列示例中，我们展示了多个生成类名的任意有效表达式的示例。展示了函数调用，string 连接和 <strong><code>::class</code></strong> 常量。
    </p></div>
    <div class="example-contents">
     <div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">class </span><span style="color: #0000BB">ClassA </span><span style="color: #007700">extends </span><span style="color: #0000BB">\stdClass </span><span style="color: #007700">{}<br />class </span><span style="color: #0000BB">ClassB </span><span style="color: #007700">extends </span><span style="color: #0000BB">\stdClass </span><span style="color: #007700">{}<br />class </span><span style="color: #0000BB">ClassC </span><span style="color: #007700">extends </span><span style="color: #0000BB">ClassB </span><span style="color: #007700">{}<br />class </span><span style="color: #0000BB">ClassD </span><span style="color: #007700">extends </span><span style="color: #0000BB">ClassA </span><span style="color: #007700">{}<br /><br />function </span><span style="color: #0000BB">getSomeClass</span><span style="color: #007700">(): </span><span style="color: #0000BB">string<br /></span><span style="color: #007700">{<br />    return </span><span style="color: #DD0000">'ClassA'</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(new (</span><span style="color: #0000BB">getSomeClass</span><span style="color: #007700">()));<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(new (</span><span style="color: #DD0000">'Class' </span><span style="color: #007700">. </span><span style="color: #DD0000">'B'</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(new (</span><span style="color: #DD0000">'Class' </span><span style="color: #007700">. </span><span style="color: #DD0000">'C'</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(new (</span><span style="color: #0000BB">ClassD</span><span style="color: #007700">::class));<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上示例在 PHP 8 中的输出：</p></div>
    <div class="example-contents screen">
     <div class="cdata"><pre>
object(ClassA)#1 (0) {
}
object(ClassB)#1 (0) {
}
object(ClassC)#1 (0) {
}
object(ClassD)#1 (0) {
}

</pre></div>
    </div>
   </div>
   <p class="para">
   在类定义内部，可以用 <code class="literal">new self</code> 和 <code class="literal">new parent</code> 创建新对象。
  </p>
  <p class="para">
      当把一个对象已经创建的实例赋给一个新变量时，新变量会访问同一个实例，就和用该对象赋值一样。此行为和给函数传递入实例时一样。可以用
      <a href="language.oop5.cloning.html" class="link">克隆</a> 给一个已创建的对象建立一个新实例。
  </p>
   <div class="example" id="stdclass.properties-example">
    <p><strong>Example #5 对象赋值</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br />$instance </span><span style="color: #007700">= new </span><span style="color: #0000BB">SimpleClass</span><span style="color: #007700">();<br /><br /></span><span style="color: #0000BB">$assigned   </span><span style="color: #007700">=  </span><span style="color: #0000BB">$instance</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$reference  </span><span style="color: #007700">=&amp; </span><span style="color: #0000BB">$instance</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$instance</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">var </span><span style="color: #007700">= </span><span style="color: #DD0000">'$assigned will have this value'</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$instance </span><span style="color: #007700">= </span><span style="color: #0000BB">null</span><span style="color: #007700">; </span><span style="color: #FF8000">// $instance 和 $reference 变为 null<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$instance</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$reference</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$assigned</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上示例会输出：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
NULL
NULL
object(SimpleClass)#1 (1) {
   [&quot;var&quot;]=&gt;
     string(30) &quot;$assigned will have this value&quot;
}
</pre></div>
    </div>
   </div>
  <p class="para">
      有几种方法可以创建一个对象的实例。
  </p>
  <div class="example" id="example-400">
   <p><strong>Example #6 创建新对象</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">class </span><span style="color: #0000BB">Test<br /></span><span style="color: #007700">{<br />    static public function </span><span style="color: #0000BB">getNew</span><span style="color: #007700">()<br />    {<br />        return new static;<br />    }<br />}<br /><br />class </span><span style="color: #0000BB">Child </span><span style="color: #007700">extends </span><span style="color: #0000BB">Test<br /></span><span style="color: #007700">{}<br /><br /></span><span style="color: #0000BB">$obj1 </span><span style="color: #007700">= new </span><span style="color: #0000BB">Test</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$obj2 </span><span style="color: #007700">= new </span><span style="color: #0000BB">$obj1</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$obj1 </span><span style="color: #007700">!== </span><span style="color: #0000BB">$obj2</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$obj3 </span><span style="color: #007700">= </span><span style="color: #0000BB">Test</span><span style="color: #007700">::</span><span style="color: #0000BB">getNew</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$obj3 </span><span style="color: #007700">instanceof </span><span style="color: #0000BB">Test</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$obj4 </span><span style="color: #007700">= </span><span style="color: #0000BB">Child</span><span style="color: #007700">::</span><span style="color: #0000BB">getNew</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$obj4 </span><span style="color: #007700">instanceof </span><span style="color: #0000BB">Child</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上示例会输出：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
bool(true)
bool(true)
bool(true)
</pre></div>
    </div>
   </div>

   <p class="para">
    可以通过一个表达式来访问新创建对象的成员：
   </p>
   <div class="example" id="example-402">
    <p><strong>Example #7 访问新创建对象的成员</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">echo (new </span><span style="color: #0000BB">DateTime</span><span style="color: #007700">())-&gt;</span><span style="color: #0000BB">format</span><span style="color: #007700">(</span><span style="color: #DD0000">'Y'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上示例的输出类似于：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
2016
</pre></div>
    </div>
   </div>

   <blockquote class="note"><p><strong class="note">Note</strong>: 
    <span class="simpara">
     在 PHP 7.1 之前，如果类没有定义构造函数，则不对参数进行执行。
    </span>
   </p></blockquote>
  </div>

  <div class="sect2" id="language.oop5.basic.properties-methods">
   <h3 class="title">属性和方法</h3>
   <p class="para">
    类的属性和方法存在于不同的"命名空间"中，这意味着同一个类的属性和方法可以使用同样的名字。
    在类中访问属性和调用方法使用同样的操作符，具体是访问一个属性还是调用一个方法，取决于你的上下文，即用法是变量访问还是函数调用。
   </p>
   <div class="example" id="example-404">
    <p><strong>Example #8 访问类属性 vs. 调用类方法</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">class </span><span style="color: #0000BB">Foo<br /></span><span style="color: #007700">{<br />    public </span><span style="color: #0000BB">$bar </span><span style="color: #007700">= </span><span style="color: #DD0000">'property'</span><span style="color: #007700">;<br /><br />    public function </span><span style="color: #0000BB">bar</span><span style="color: #007700">() {<br />        return </span><span style="color: #DD0000">'method'</span><span style="color: #007700">;<br />    }<br />}<br /><br /></span><span style="color: #0000BB">$obj </span><span style="color: #007700">= new </span><span style="color: #0000BB">Foo</span><span style="color: #007700">();<br />echo </span><span style="color: #0000BB">$obj</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bar</span><span style="color: #007700">, </span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">, </span><span style="color: #0000BB">$obj</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bar</span><span style="color: #007700">(), </span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上示例会输出：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
property
method
</pre></div>
    </div>
   </div>
   <p class="para">
    这意味着，如果你的类属性被分配给一个
    <a href="functions.anonymous.html" class="link">匿名函数</a>
    你将无法直接调用它。因为访问类属性的优先级要更高，在此场景下需要用括号包裹起来调用。
   </p>
   <div class="example" id="example-406">
    <p><strong>Example #9 类属性被赋值为匿名函数时的调用示例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">class </span><span style="color: #0000BB">Foo<br /></span><span style="color: #007700">{<br />    public </span><span style="color: #0000BB">$bar</span><span style="color: #007700">;<br /><br />    public function </span><span style="color: #0000BB">__construct</span><span style="color: #007700">() {<br />        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bar </span><span style="color: #007700">= function() {<br />            return </span><span style="color: #0000BB">42</span><span style="color: #007700">;<br />        };<br />    }<br />}<br /><br /></span><span style="color: #0000BB">$obj </span><span style="color: #007700">= new </span><span style="color: #0000BB">Foo</span><span style="color: #007700">();<br /><br />echo (</span><span style="color: #0000BB">$obj</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bar</span><span style="color: #007700">)(), </span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上示例会输出：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
42
</pre></div>
    </div>
   </div>
  </div>

 <div class="sect2" id="language.oop5.basic.extends">
  
  
  <h3 class="title">extends</h3>
  <p class="para">
   一个类可以在声明中用 <code class="literal">extends</code>
   关键字继承另一个类的方法和属性。PHP 不支持多重继承，一个类只能继承一个基类。
  </p>
  <p class="para">
   被继承的方法和属性可以通过用同样的名字重新声明被覆盖。但是如果父类定义方法或者常量时使用了
   <a href="language.oop5.final.html" class="link">final</a>，则不可被覆盖。可以通过
   <a href="language.oop5.paamayim-nekudotayim.html" class="link">parent::</a>
   来访问被覆盖的方法或属性。
  </p>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
    <span class="simpara">
     从 PHP 8.1.0 起，常量可以声明为 final。
    </span>
   </p></blockquote>
  <div class="example" id="example-408">
   <p><strong>Example #10 简单的类继承</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">class </span><span style="color: #0000BB">ExtendClass </span><span style="color: #007700">extends </span><span style="color: #0000BB">SimpleClass<br /></span><span style="color: #007700">{<br />    </span><span style="color: #FF8000">// 同样名称的方法，将会覆盖父类的方法<br />    </span><span style="color: #007700">function </span><span style="color: #0000BB">displayVar</span><span style="color: #007700">()<br />    {<br />        echo </span><span style="color: #DD0000">"Extending class\n"</span><span style="color: #007700">;<br />        </span><span style="color: #0000BB">parent</span><span style="color: #007700">::</span><span style="color: #0000BB">displayVar</span><span style="color: #007700">();<br />    }<br />}<br /><br /></span><span style="color: #0000BB">$extended </span><span style="color: #007700">= new </span><span style="color: #0000BB">ExtendClass</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$extended</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">displayVar</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上示例会输出：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Extending class
a default value
</pre></div>
    </div>
   </div>

   <div class="sect3" id="language.oop.lsp">
    <h4 class="title">签名兼容性规则</h4>
    <p class="para">
     当覆盖（override）方法时，签名必须兼容父类方法。否则会导致 Fatal 错误，PHP 8.0.0 之前是 <strong><code>E_WARNING</code></strong> 级错误。
     兼容签名是指：遵守<a href="language.oop5.variance.html" class="link">协变与逆变</a>规则；强制参数可以改为可选参数；添加的新参数只能是可选；放宽可见性而不是继续限制。这就是著名的里氏替换原则（Liskov
     Substitution Principle），简称 LSP。不过<a href="language.oop5.decon.html#language.oop5.decon.constructor" class="link">构造方法</a>和私有（<code class="literal">private</code>）方法不需要遵循签名兼容规则，哪怕签名不匹配也不会导致 Fatal 错误。
    </p>
    <div class="example" id="example-410">
     <p><strong>Example #11 兼容子类方法</strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">class </span><span style="color: #0000BB">Base<br /></span><span style="color: #007700">{<br />    public function </span><span style="color: #0000BB">foo</span><span style="color: #007700">(</span><span style="color: #0000BB">int $a</span><span style="color: #007700">) {<br />        echo </span><span style="color: #DD0000">"Valid\n"</span><span style="color: #007700">;<br />    }<br />}<br /><br />class </span><span style="color: #0000BB">Extend1 </span><span style="color: #007700">extends </span><span style="color: #0000BB">Base<br /></span><span style="color: #007700">{<br />    function </span><span style="color: #0000BB">foo</span><span style="color: #007700">(</span><span style="color: #0000BB">int $a </span><span style="color: #007700">= </span><span style="color: #0000BB">5</span><span style="color: #007700">)<br />    {<br />        </span><span style="color: #0000BB">parent</span><span style="color: #007700">::</span><span style="color: #0000BB">foo</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">);<br />    }<br />}<br /><br />class </span><span style="color: #0000BB">Extend2 </span><span style="color: #007700">extends </span><span style="color: #0000BB">Base<br /></span><span style="color: #007700">{<br />    function </span><span style="color: #0000BB">foo</span><span style="color: #007700">(</span><span style="color: #0000BB">int $a</span><span style="color: #007700">, </span><span style="color: #0000BB">$b </span><span style="color: #007700">= </span><span style="color: #0000BB">5</span><span style="color: #007700">)<br />    {<br />        </span><span style="color: #0000BB">parent</span><span style="color: #007700">::</span><span style="color: #0000BB">foo</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">);<br />    }<br />}<br /><br /></span><span style="color: #0000BB">$extended1 </span><span style="color: #007700">= new </span><span style="color: #0000BB">Extend1</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$extended1</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">foo</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$extended2 </span><span style="color: #007700">= new </span><span style="color: #0000BB">Extend2</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$extended2</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">foo</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">);</span>
</span>
</code></div>
     </div>

     <div class="example-contents"><p>以上示例会输出：</p></div>
     <div class="example-contents screen">
<div class="cdata"><pre>
Valid
Valid
</pre></div>
     </div>
    </div>

    <p class="para">
     下面演示子类与父类方法不兼容的例子：通过移除参数、修改可选参数为必填参数。
    </p>
    <div class="example" id="example-412">
     <p><strong>Example #12 子类方法移除参数后，导致 Fatal 错误</strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">class </span><span style="color: #0000BB">Base<br /></span><span style="color: #007700">{<br />    public function </span><span style="color: #0000BB">foo</span><span style="color: #007700">(</span><span style="color: #0000BB">int $a </span><span style="color: #007700">= </span><span style="color: #0000BB">5</span><span style="color: #007700">) {<br />        echo </span><span style="color: #DD0000">"Valid\n"</span><span style="color: #007700">;<br />    }<br />}<br /><br />class </span><span style="color: #0000BB">Extend </span><span style="color: #007700">extends </span><span style="color: #0000BB">Base<br /></span><span style="color: #007700">{<br />    function </span><span style="color: #0000BB">foo</span><span style="color: #007700">()<br />    {<br />        </span><span style="color: #0000BB">parent</span><span style="color: #007700">::</span><span style="color: #0000BB">foo</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br />    }<br />}</span>
</span>
</code></div>
     </div>

     <div class="example-contents"><p>以上示例在 PHP 8 中的输出类似于：</p></div>
     <div class="example-contents screen">
<div class="cdata"><pre>
Fatal error: Declaration of Extend::foo() must be compatible with Base::foo(int $a = 5) in /in/evtlq on line 13
</pre></div>
     </div>
    </div>
    <div class="example" id="context.http.example-post">
     <p><strong>Example #13 子类方法把可选参数改成强制参数，导致 Fatal 错误</strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">class </span><span style="color: #0000BB">Base<br /></span><span style="color: #007700">{<br />    public function </span><span style="color: #0000BB">foo</span><span style="color: #007700">(</span><span style="color: #0000BB">int $a </span><span style="color: #007700">= </span><span style="color: #0000BB">5</span><span style="color: #007700">) {<br />        echo </span><span style="color: #DD0000">"Valid\n"</span><span style="color: #007700">;<br />    }<br />}<br /><br />class </span><span style="color: #0000BB">Extend </span><span style="color: #007700">extends </span><span style="color: #0000BB">Base<br /></span><span style="color: #007700">{<br />    function </span><span style="color: #0000BB">foo</span><span style="color: #007700">(</span><span style="color: #0000BB">int $a</span><span style="color: #007700">)<br />    {<br />        </span><span style="color: #0000BB">parent</span><span style="color: #007700">::</span><span style="color: #0000BB">foo</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">);<br />    }<br />}</span>
</span>
</code></div>
     </div>

     <div class="example-contents"><p>以上示例在 PHP 8 中的输出类似于：</p></div>
     <div class="example-contents screen">
<div class="cdata"><pre>
Fatal error: Declaration of Extend::foo(int $a) must be compatible with Base::foo(int $a = 5) in /in/qJXVC on line 13
</pre></div>
     </div>
    </div>

    <div class="warning"><strong class="warning">Warning</strong>
     <p class="para">
      重命名子类方法的参数名称也是签名兼容的。
      然而我们不建议这样做，因为使用<a href="functions.arguments.html#functions.named-arguments" class="link">命名参数</a>时，
      这种做法会导致运行时的 <span class="classname"><a href="class.error.html" class="classname">Error</a></span>。
     </p>
     <div class="example" id="context.zip.example-password">
      <p><strong>Example #14 在子类中重命一个命名参数，导致 Error</strong></p>
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">class </span><span style="color: #0000BB">A </span><span style="color: #007700">{<br />    public function </span><span style="color: #0000BB">test</span><span style="color: #007700">(</span><span style="color: #0000BB">$foo</span><span style="color: #007700">, </span><span style="color: #0000BB">$bar</span><span style="color: #007700">) {}<br />}<br /><br />class </span><span style="color: #0000BB">B </span><span style="color: #007700">extends </span><span style="color: #0000BB">A </span><span style="color: #007700">{<br />    public function </span><span style="color: #0000BB">test</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">, </span><span style="color: #0000BB">$b</span><span style="color: #007700">) {}<br />}<br /><br /></span><span style="color: #0000BB">$obj </span><span style="color: #007700">= new </span><span style="color: #0000BB">B</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">// 按 A::test() 的签名约定传入参数<br /></span><span style="color: #0000BB">$obj</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">test</span><span style="color: #007700">(</span><span style="color: #0000BB">foo</span><span style="color: #007700">: </span><span style="color: #DD0000">"foo"</span><span style="color: #007700">, </span><span style="color: #0000BB">bar</span><span style="color: #007700">: </span><span style="color: #DD0000">"bar"</span><span style="color: #007700">); </span><span style="color: #FF8000">// ERROR!</span>
</span>
</code></div>
      </div>

      <div class="example-contents"><p>以上示例的输出类似于：</p></div>
      <div class="example-contents screen">
<div class="cdata"><pre>
Fatal error: Uncaught Error: Unknown named parameter $foo in /in/XaaeN:14
Stack trace:
#0 {main}
  thrown in /in/XaaeN on line 14
</pre></div>
      </div>
     </div>
    </div>
   </div>
  </div>

  <div class="sect2" id="language.oop5.basic.class.class">
   <h3 class="title">::class</h3>

   <p class="para">
    关键词 <code class="literal">class</code> 也可用于类名的解析。使用 <code class="literal">ClassName::class</code>
    可以获取包含类 <code class="literal">ClassName</code> 的完全限定名称。这对使用了
    <a href="language.namespaces.html" class="link">命名空间</a> 的类尤其有用。
   </p>
   <p class="para">
    <div class="example" id="example-418">
     <p><strong>Example #15 类名的解析</strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">namespace </span><span style="color: #0000BB">NS </span><span style="color: #007700">{<br />    class </span><span style="color: #0000BB">ClassName </span><span style="color: #007700">{<br />    }<br /><br />    echo </span><span style="color: #0000BB">ClassName</span><span style="color: #007700">::class;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

     <div class="example-contents"><p>以上示例会输出：</p></div>
     <div class="example-contents screen">
<div class="cdata"><pre>
NS\ClassName
</pre></div>
     </div>
    </div>
   </p>
   <blockquote class="note"><p><strong class="note">Note</strong>: 
    <p class="para">使用 <code class="literal">::class</code>
     解析类名操作会在底层编译时进行。这意味着在执行该操作时，类还没有被加载。
     因此，即使要调用的类不存在，类名也会被展示。在此种场景下，并不会发生错误。
    </p>
    <div class="example" id="example-420">
     <p><strong>Example #16 解析不存在的类名</strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">print </span><span style="color: #0000BB">Does\Not\Exist</span><span style="color: #007700">::class;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

     <div class="example-contents"><p>以上示例会输出：</p></div>
     <div class="example-contents screen">
<div class="cdata"><pre>
Does\Not\Exist
</pre></div>
     </div>
    </div>
   </p></blockquote>
   <p class="para">
    自 PHP 8.0.0 起，<code class="literal">::class</code> 也可用于对象。
    与上述情况不同，此时解析将会在运行时进行。此操作的运行结果和在对象上调用
    <span class="function"><a href="function.get-class.html" class="function">get_class()</a></span> 相同。
   </p>
   <div class="example" id="example-422">
    <p><strong>Example #17 类名解析</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">namespace </span><span style="color: #0000BB">NS </span><span style="color: #007700">{<br />    class </span><span style="color: #0000BB">ClassName </span><span style="color: #007700">{<br />    }<br />}<br /></span><span style="color: #0000BB">$c </span><span style="color: #007700">= new </span><span style="color: #0000BB">ClassName</span><span style="color: #007700">();<br />print </span><span style="color: #0000BB">$c</span><span style="color: #007700">::class;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上示例会输出：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
NS\ClassName
</pre></div>
    </div>
   </div>
  </div>
 <div class="sect2" id="language.oop5.basic.nullsafe">
  <h3 class="title">Nullsafe 方法和属性</h3>
  <p class="para">
   自 PHP 8.0.0 起，类属性和方法可以通过 &quot;nullsafe&quot; 操作符访问：
   <code class="literal">?-&gt;</code>。
   除了一处不同，nullsafe 操作符和以上原来的属性、方法访问是一致的：
   对象引用解析（dereference）为 <strong><code>null</code></strong> 时不抛出异常，而是返回 <strong><code>null</code></strong>。
   并且如果是链式调用中的一部分，剩余链条会直接跳过。
  </p>
  <p class="para">
   此操作的结果，类似于在每次访问前使用 <span class="function"><a href="function.is-null.html" class="function">is_null()</a></span>
   函数判断方法和属性是否存在，但更加简洁。
  </p>
  <p class="para">
   <div class="example" id="example-424">
    <p><strong>Example #18 Nullsafe 操作符</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">// 自 PHP 8.0.0 起可用<br /></span><span style="color: #0000BB">$result </span><span style="color: #007700">= </span><span style="color: #0000BB">$repository</span><span style="color: #007700">?-&gt;</span><span style="color: #0000BB">getUser</span><span style="color: #007700">(</span><span style="color: #0000BB">5</span><span style="color: #007700">)?-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">// 上边那行代码等价于以下代码<br /></span><span style="color: #007700">if (</span><span style="color: #0000BB">is_null</span><span style="color: #007700">(</span><span style="color: #0000BB">$repository</span><span style="color: #007700">)) {<br />    </span><span style="color: #0000BB">$result </span><span style="color: #007700">= </span><span style="color: #0000BB">null</span><span style="color: #007700">;<br />} else {<br />    </span><span style="color: #0000BB">$user </span><span style="color: #007700">= </span><span style="color: #0000BB">$repository</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getUser</span><span style="color: #007700">(</span><span style="color: #0000BB">5</span><span style="color: #007700">);<br />    if (</span><span style="color: #0000BB">is_null</span><span style="color: #007700">(</span><span style="color: #0000BB">$user</span><span style="color: #007700">)) {<br />        </span><span style="color: #0000BB">$result </span><span style="color: #007700">= </span><span style="color: #0000BB">null</span><span style="color: #007700">;<br />    } else {<br />        </span><span style="color: #0000BB">$result </span><span style="color: #007700">= </span><span style="color: #0000BB">$user</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">;<br />    }<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <p class="para">
    仅当 null 被认为是属性或方法返回的有效和预期的可能值时，才推荐使用 nullsafe
    操作符。如果业务中需要明确指示错误，抛出异常会是更好的处理方式。
   </p>
  </p></blockquote>
 </div>
</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="127136""></a>
  <div class="note">
   <strong class="user">pawel dot zimnowodzki at gmail dot com</strong>
   <a href="#127136" class="date">26-May-2022 11:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Although there is no null-safe operator for not existed array keys I found workaround for it: ($array['not_existed_key'] ?? null)?-&gt;methodName()</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="126640""></a>
  <div class="note">
   <strong class="user">johannes dot kingma at gmail dot com</strong>
   <a href="#126640" class="date">25-Nov-2021 11:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
BEWARE! <br />
<br />
Like Hayley Watson pointed out class names are not case sensitive. <br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">Foo</span><span class="keyword">{}<br />
class </span><span class="default">foo</span><span class="keyword">{} </span><span class="comment">// Fatal error: Cannot declare class foo, because the name is already in use<br />
</span><span class="default">?&gt;<br />
</span>As well as<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">BAR</span><span class="keyword">{}<br />
</span><span class="default">$bar </span><span class="keyword">= new </span><span class="default">Bar</span><span class="keyword">();<br />
echo </span><span class="default">get_class</span><span class="keyword">(</span><span class="default">$bar</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span> <br />
<br />
Is perfectly fine and will return 'BAR'.<br />
<br />
This has implications on autoloading classes though. The standard spl_autoload function will strtolower the class name to cope with case in-sensitiveness and thus the class BAR can only be found if the file name is bar.php (or another variety if an extension was registered with spl_autoload_extensions(); ) not BAR.php for a case sensitive file and operating system like linux. Windows file system is case sensitive but the OS is not&nbsp; and there for autoloading BAR.php will work.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="125534""></a>
  <div class="note">
   <strong class="user">thisleenoble at DOPEOPLESTILLNOSPAM dot me dot com</strong>
   <a href="#125534" class="date">23-Nov-2020 09:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Instantiating an object with a string variable defaults to non-namespaced scope. Given two classes in the same namespace.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">namespace </span><span class="default">foo</span><span class="keyword">;<br />
<br />
class </span><span class="default">bar </span><span class="keyword">{<br />
&nbsp; public function </span><span class="default">createSubclass</span><span class="keyword">(</span><span class="default">string $type</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; return new </span><span class="default">$type</span><span class="keyword">();<br />
&nbsp; }<br />
</span><span class="default">?&gt;<br />
&lt;?php<br />
</span><span class="keyword">namespace </span><span class="default">foo</span><span class="keyword">;<br />
<br />
class </span><span class="default">baz </span><span class="keyword">{<br />
<br />
}<br />
</span><span class="default">?&gt;<br />
&lt;?php<br />
$barObj </span><span class="keyword">= new </span><span class="default">bar</span><span class="keyword">();<br />
</span><span class="default">$barObj</span><span class="keyword">-&gt;</span><span class="default">createSubclass</span><span class="keyword">(</span><span class="string">'baz'</span><span class="keyword">);<br />
<br />
</span><span class="comment">// result: Uncaught Error: Class 'baz' not found<br />
</span><span class="default">?&gt;<br />
</span><br />
Change bar class to:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">namespace </span><span class="default">foo</span><span class="keyword">;<br />
<br />
class </span><span class="default">bar </span><span class="keyword">{<br />
&nbsp; public function </span><span class="default">createSubclass</span><span class="keyword">(</span><span class="default">string $type</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">type </span><span class="keyword">= </span><span class="string">'\\'</span><span class="keyword">.</span><span class="default">__NAMESPACE__</span><span class="keyword">.</span><span class="string">'\\'</span><span class="keyword">.</span><span class="default">type</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; return new </span><span class="default">$type</span><span class="keyword">();<br />
&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="122844""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#122844" class="date">15-Jun-2018 05:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
At first I was also confused by the assignment vs referencing but here's how I was finally able to get my head around it. This is another example which is somewhat similar to one of the comments but can be helpful to those who did not understand the first example. Imagine object instances as rooms where you can store and manipulate your properties and functions.&nbsp; The variable that contains the object simply holds 'a key' to this room and thus access to the object. When you assign this variable to another new variable, what you are doing is you're making a copy of the key and giving it to this new variable. That means these two variable now have access to the same 'room' (object) and can thus get in and manipulate the values. However, when you create a reference, what you doing is you're making the variables SHARE the same key. They both have access to the room. If one of the variable is given a new key, then the key that they are sharing is replaced and they now share a new different key. This does not affect the other variable with a copy of the old key...that variable still has access to the first room</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="122293""></a>
  <div class="note">
   <strong class="user">Hayley Watson</strong>
   <a href="#122293" class="date">21-Jan-2018 10:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Class names are case-insensitive:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">Foo</span><span class="keyword">{}<br />
class </span><span class="default">foo</span><span class="keyword">{} </span><span class="comment">//Fatal error.<br />
</span><span class="default">?&gt;<br />
</span><br />
Any casing can be used to refer to the class<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">bAr</span><span class="keyword">{}<br />
</span><span class="default">$t </span><span class="keyword">= new </span><span class="default">Bar</span><span class="keyword">();<br />
</span><span class="default">$u </span><span class="keyword">= new </span><span class="default">bar</span><span class="keyword">();<br />
echo (</span><span class="default">$t </span><span class="keyword">instanceof </span><span class="default">$u</span><span class="keyword">) ? </span><span class="string">"true" </span><span class="keyword">: </span><span class="string">"false"</span><span class="keyword">; </span><span class="comment">// "true"<br />
</span><span class="keyword">echo (</span><span class="default">$t </span><span class="keyword">instanceof </span><span class="default">BAR</span><span class="keyword">) ? </span><span class="string">"true" </span><span class="keyword">: </span><span class="string">"false"</span><span class="keyword">; </span><span class="comment">// "true"<br />
</span><span class="keyword">echo </span><span class="default">is_a</span><span class="keyword">(</span><span class="default">$u</span><span class="keyword">, </span><span class="string">'baR'</span><span class="keyword">) ? </span><span class="string">"true" </span><span class="keyword">: </span><span class="string">"false"</span><span class="keyword">; </span><span class="comment">// "true"<br />
</span><span class="default">?&gt;<br />
</span><br />
But the case used when the class was defined is preserved as "canonical":<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">echo </span><span class="default">get_class</span><span class="keyword">(</span><span class="default">$t</span><span class="keyword">); </span><span class="comment">// "bAr"<br />
</span><span class="default">?&gt;<br />
</span><br />
And, as always, "case-insensitivity" only applies to ASCII.<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">пасха</span><span class="keyword">{}<br />
class </span><span class="default">Пасха</span><span class="keyword">{} </span><span class="comment">// valid<br />
</span><span class="default">$p </span><span class="keyword">= new </span><span class="default">ПАСХА</span><span class="keyword">(); </span><span class="comment">// Uncaught warning.<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="120909""></a>
  <div class="note">
   <strong class="user">kStarbe at gmail point com</strong>
   <a href="#120909" class="date">30-Mar-2017 07:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You start using :: in second example although the static concept has not been explained. This is not easy to discover when you are starting from the basics.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="120595""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#120595" class="date">04-Feb-2017 09:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Understanding what does $this exactly do:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">toop </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$i </span><span class="keyword">= </span><span class="string">"1234"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">setv</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">i </span><span class="keyword">= </span><span class="default">$a</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">returnthis</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">$ob </span><span class="keyword">= new </span><span class="default">toop</span><span class="keyword">();<br />
</span><span class="default">$ob1 </span><span class="keyword">= new </span><span class="default">toop</span><span class="keyword">();<br />
</span><span class="default">$obthis </span><span class="keyword">= </span><span class="default">$ob</span><span class="keyword">-&gt;</span><span class="default">returnthis</span><span class="keyword">();<br />
echo </span><span class="default">$ob</span><span class="keyword">-&gt;</span><span class="default">i</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">;<br />
</span><span class="default">$ob</span><span class="keyword">-&gt;</span><span class="default">setv</span><span class="keyword">(</span><span class="string">"\$ob set"</span><span class="keyword">);<br />
echo </span><span class="default">$ob</span><span class="keyword">-&gt;</span><span class="default">i</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">;<br />
</span><span class="default">$obthis</span><span class="keyword">-&gt;</span><span class="default">setv</span><span class="keyword">(</span><span class="string">"\$obthis set"</span><span class="keyword">);<br />
echo </span><span class="default">$ob</span><span class="keyword">-&gt;</span><span class="default">i</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">;<br />
</span><span class="default">$ob1</span><span class="keyword">-&gt;</span><span class="default">setv</span><span class="keyword">(</span><span class="string">'$ob1 set'</span><span class="keyword">);<br />
echo </span><span class="default">$ob</span><span class="keyword">-&gt;</span><span class="default">i</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
This will output:<br />
<br />
1234<br />
$ob set<br />
$obthis set<br />
$obthis set</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100314""></a>
  <div class="note">
   <strong class="user">Doug</strong>
   <a href="#100314" class="date">07-Oct-2010 07:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
What is the difference between&nbsp; $this&nbsp; and&nbsp; self ?<br />
<br />
Inside a class definition, $this refers to the current object, while&nbsp; self&nbsp; refers to the current class.<br />
<br />
It is necessary to refer to a class element using&nbsp; self ,<br />
and refer to an object element using&nbsp; $this .<br />
Note also how an object variable must be preceded by a keyword in its definition.<br />
<br />
The following example illustrates a few cases:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">Classy </span><span class="keyword">{<br />
<br />
const&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">STAT </span><span class="keyword">= </span><span class="string">'S' </span><span class="keyword">; </span><span class="comment">// no dollar sign for constants (they are always static)<br />
</span><span class="keyword">static&nbsp; &nbsp;&nbsp; </span><span class="default">$stat </span><span class="keyword">= </span><span class="string">'Static' </span><span class="keyword">;<br />
public&nbsp; &nbsp;&nbsp; </span><span class="default">$publ </span><span class="keyword">= </span><span class="string">'Public' </span><span class="keyword">;<br />
private&nbsp; &nbsp; </span><span class="default">$priv </span><span class="keyword">= </span><span class="string">'Private' </span><span class="keyword">;<br />
protected&nbsp; </span><span class="default">$prot </span><span class="keyword">= </span><span class="string">'Protected' </span><span class="keyword">;<br />
<br />
function </span><span class="default">__construct</span><span class="keyword">( ){&nbsp; }<br />
<br />
public function </span><span class="default">showMe</span><span class="keyword">( ){<br />
&nbsp;&nbsp;&nbsp; print </span><span class="string">'&lt;br&gt; self::STAT: '&nbsp; </span><span class="keyword">.&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">STAT </span><span class="keyword">; </span><span class="comment">// refer to a (static) constant like this<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">print </span><span class="string">'&lt;br&gt; self::$stat: ' </span><span class="keyword">. </span><span class="default">self</span><span class="keyword">::</span><span class="default">$stat </span><span class="keyword">; </span><span class="comment">// static variable<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">print </span><span class="string">'&lt;br&gt;$this-&gt;stat: '&nbsp; </span><span class="keyword">. </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">stat </span><span class="keyword">; </span><span class="comment">// legal, but not what you might think: empty result<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">print </span><span class="string">'&lt;br&gt;$this-&gt;publ: '&nbsp; </span><span class="keyword">. </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">publ </span><span class="keyword">; </span><span class="comment">// refer to an object variable like this<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">print </span><span class="string">'&lt;br&gt;' </span><span class="keyword">;<br />
}<br />
}<br />
</span><span class="default">$me </span><span class="keyword">= new </span><span class="default">Classy</span><span class="keyword">( ) ;<br />
</span><span class="default">$me</span><span class="keyword">-&gt;</span><span class="default">showMe</span><span class="keyword">( ) ;<br />
<br />
</span><span class="comment">/* Produces this output:<br />
self::STAT: S<br />
self::$stat: Static<br />
$this-&gt;stat:<br />
$this-&gt;publ: Public<br />
*/<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92958""></a>
  <div class="note">
   <strong class="user">moty66 at gmail dot com</strong>
   <a href="#92958" class="date">16-Aug-2009 07:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I hope that this will help to understand how to work with static variables inside a class<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">class </span><span class="default">a </span><span class="keyword">{<br />
<br />
&nbsp;&nbsp;&nbsp; public static </span><span class="default">$foo </span><span class="keyword">= </span><span class="string">'I am foo'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$bar </span><span class="keyword">= </span><span class="string">'I am bar'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; public static function </span><span class="default">getFoo</span><span class="keyword">() { echo </span><span class="default">self</span><span class="keyword">::</span><span class="default">$foo</span><span class="keyword">;&nbsp; &nbsp; }<br />
&nbsp;&nbsp;&nbsp; public static function </span><span class="default">setFoo</span><span class="keyword">() { </span><span class="default">self</span><span class="keyword">::</span><span class="default">$foo </span><span class="keyword">= </span><span class="string">'I am a new foo'</span><span class="keyword">; }<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">getBar</span><span class="keyword">() { echo </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">bar</span><span class="keyword">;&nbsp; &nbsp; }&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
}<br />
<br />
</span><span class="default">$ob </span><span class="keyword">= new </span><span class="default">a</span><span class="keyword">();<br />
</span><span class="default">a</span><span class="keyword">::</span><span class="default">getFoo</span><span class="keyword">();&nbsp; &nbsp;&nbsp; </span><span class="comment">// output: I am foo&nbsp; &nbsp; <br />
</span><span class="default">$ob</span><span class="keyword">-&gt;</span><span class="default">getFoo</span><span class="keyword">();&nbsp; &nbsp; </span><span class="comment">// output: I am foo<br />
//a::getBar();&nbsp; &nbsp;&nbsp; // fatal error: using $this not in object context<br />
</span><span class="default">$ob</span><span class="keyword">-&gt;</span><span class="default">getBar</span><span class="keyword">();&nbsp; &nbsp; </span><span class="comment">// output: I am bar<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // If you keep $bar non static this will work<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // but if bar was static, then var_dump($this-&gt;bar) will output null <br />
<br />
// unset($ob);<br />
</span><span class="default">a</span><span class="keyword">::</span><span class="default">setFoo</span><span class="keyword">();&nbsp; &nbsp; </span><span class="comment">// The same effect as if you called $ob-&gt;setFoo(); because $foo is static<br />
</span><span class="default">$ob </span><span class="keyword">= new </span><span class="default">a</span><span class="keyword">();&nbsp; &nbsp;&nbsp; </span><span class="comment">// This will have no effects on $foo<br />
</span><span class="default">$ob</span><span class="keyword">-&gt;</span><span class="default">getFoo</span><span class="keyword">();&nbsp; &nbsp; </span><span class="comment">// output: I am a new foo <br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Regards<br />
Motaz Abuthiab</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92123""></a>
  <div class="note">
   <strong class="user">Notes on stdClass</strong>
   <a href="#92123" class="date">09-Jul-2009 03:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
stdClass is the default PHP object. stdClass has no properties, methods or parent. It does not support magic methods, and implements no interfaces.<br />
<br />
When you cast a scalar or array as Object, you get an instance of stdClass. You can use stdClass whenever you need a generic object instance.<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// ways of creating stdClass instances<br />
</span><span class="default">$x </span><span class="keyword">= new </span><span class="default">stdClass</span><span class="keyword">;<br />
</span><span class="default">$y </span><span class="keyword">= (object) </span><span class="default">null</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// same as above<br />
</span><span class="default">$z </span><span class="keyword">= (object) </span><span class="string">'a'</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// creates property 'scalar' = 'a'<br />
</span><span class="default">$a </span><span class="keyword">= (object) array(</span><span class="string">'property1' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'property2' </span><span class="keyword">=&gt; </span><span class="string">'b'</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
stdClass is NOT a base class! PHP classes do not automatically inherit from any class. All classes are standalone, unless they explicitly extend another class. PHP differs from many object-oriented languages in this respect.<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// CTest does not derive from stdClass<br />
</span><span class="keyword">class </span><span class="default">CTest </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$property1</span><span class="keyword">;<br />
}<br />
</span><span class="default">$t </span><span class="keyword">= new </span><span class="default">CTest</span><span class="keyword">;<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$t </span><span class="keyword">instanceof </span><span class="default">stdClass</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// false<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">is_subclass_of</span><span class="keyword">(</span><span class="default">$t</span><span class="keyword">, </span><span class="string">'stdClass'</span><span class="keyword">));&nbsp; &nbsp; </span><span class="comment">// false<br />
</span><span class="keyword">echo </span><span class="default">get_class</span><span class="keyword">(</span><span class="default">$t</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// 'CTest'<br />
</span><span class="keyword">echo </span><span class="default">get_parent_class</span><span class="keyword">(</span><span class="default">$t</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// false (no parent)<br />
</span><span class="default">?&gt;<br />
</span><br />
You cannot define a class named 'stdClass' in your code. That name is already used by the system. You can define a class named 'Object'.<br />
<br />
You could define a class that extends stdClass, but you would get no benefit, as stdClass does nothing.<br />
<br />
(tested on PHP 5.2.8)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86235""></a>
  <div class="note">
   <strong class="user">Jeffrey</strong>
   <a href="#86235" class="date">08-Oct-2008 03:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A PHP Class can be used for several things, but at the most basic level, you'll use classes to "organize and deal with like-minded data". Here's what I mean by "organizing like-minded data". First, start with unorganized data.<br />
<br />
<span class="default">&lt;?php<br />
$customer_name</span><span class="keyword">;<br />
</span><span class="default">$item_name</span><span class="keyword">;<br />
</span><span class="default">$item_price</span><span class="keyword">;<br />
</span><span class="default">$customer_address</span><span class="keyword">;<br />
</span><span class="default">$item_qty</span><span class="keyword">;<br />
</span><span class="default">$item_total</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
Now to organize the data into PHP classes:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">Customer </span><span class="keyword">{<br />
&nbsp; </span><span class="default">$name</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// same as $customer_name<br />
&nbsp; </span><span class="default">$address</span><span class="keyword">;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// same as $customer_address<br />
</span><span class="keyword">}<br />
<br />
class </span><span class="default">Item </span><span class="keyword">{<br />
&nbsp; </span><span class="default">$name</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// same as $item_name<br />
&nbsp; </span><span class="default">$price</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// same as $item_price<br />
&nbsp; </span><span class="default">$qty</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// same as $item_qty<br />
&nbsp; </span><span class="default">$total</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// same as $item_total<br />
</span><span class="keyword">}<br />
</span><span class="default">?&gt;<br />
</span><br />
Now here's what I mean by "dealing" with the data. Note: The data is already organized, so that in itself makes writing new functions extremely easy.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">Customer </span><span class="keyword">{<br />
&nbsp; public </span><span class="default">$name</span><span class="keyword">, </span><span class="default">$address</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// the data for this class...<br />
<br />
&nbsp; // function to deal with user-input / validation<br />
&nbsp; // function to build string for output<br />
&nbsp; // function to write -&gt; database<br />
&nbsp; // function to&nbsp; read &lt;- database<br />
&nbsp; // etc, etc<br />
</span><span class="keyword">}<br />
<br />
class </span><span class="default">Item </span><span class="keyword">{<br />
&nbsp; public </span><span class="default">$name</span><span class="keyword">, </span><span class="default">$price</span><span class="keyword">, </span><span class="default">$qty</span><span class="keyword">, </span><span class="default">$total</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// the data for this class...<br />
<br />
&nbsp; // function to calculate total<br />
&nbsp; // function to format numbers<br />
&nbsp; // function to deal with user-input / validation<br />
&nbsp; // function to build string for output<br />
&nbsp; // function to write -&gt; database<br />
&nbsp; // function to&nbsp; read &lt;- database<br />
&nbsp; // etc, etc<br />
</span><span class="keyword">}<br />
</span><span class="default">?&gt;<br />
</span><br />
Imagination that each function you write only calls the bits of data in that class. Some functions may access all the data, while other functions may only access one piece of data. If each function revolves around the data inside, then you have created a good class.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85220""></a>
  <div class="note">
   <strong class="user">wbcarts at juno dot com</strong>
   <a href="#85220" class="date">20-Aug-2008 06:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
CLASSES and OBJECTS that represent the "Ideal World"<br />
<br />
Wouldn't it be great to get the lawn mowed by saying $son-&gt;mowLawn()? Assuming the function mowLawn() is defined, and you have a son that doesn't throw errors, the lawn will be mowed. <br />
<br />
In the following example; let objects of type Line3D measure their own length in 3-dimensional space. Why should I or PHP have to provide another method from outside this class to calculate length, when the class itself holds all the neccessary data and has the education to make the calculation for itself?<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">/*<br />
&nbsp;* Point3D.php<br />
&nbsp;*<br />
&nbsp;* Represents one locaton or position in 3-dimensional space<br />
&nbsp;* using an (x, y, z) coordinate system.<br />
&nbsp;*/<br />
</span><span class="keyword">class </span><span class="default">Point3D<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$x</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$y</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$z</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// the x coordinate of this Point.<br />
<br />
&nbsp;&nbsp;&nbsp; /*<br />
&nbsp;&nbsp; &nbsp; * use the x and y variables inherited from Point.php.<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$xCoord</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">, </span><span class="default">$yCoord</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">, </span><span class="default">$zCoord</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">x </span><span class="keyword">= </span><span class="default">$xCoord</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">y </span><span class="keyword">= </span><span class="default">$yCoord</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">z </span><span class="keyword">= </span><span class="default">$zCoord</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/*<br />
&nbsp;&nbsp; &nbsp; * the (String) representation of this Point as "Point3D(x, y, z)".<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">__toString</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="string">'Point3D(x=' </span><span class="keyword">. </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">x </span><span class="keyword">. </span><span class="string">', y=' </span><span class="keyword">. </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">y </span><span class="keyword">. </span><span class="string">', z=' </span><span class="keyword">. </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">z </span><span class="keyword">. </span><span class="string">')'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="comment">/*<br />
&nbsp;* Line3D.php<br />
&nbsp;*<br />
&nbsp;* Represents one Line in 3-dimensional space using two Point3D objects.<br />
&nbsp;*/<br />
</span><span class="keyword">class </span><span class="default">Line3D<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$start</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$end</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$xCoord1</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">, </span><span class="default">$yCoord1</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">, </span><span class="default">$zCoord1</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">, </span><span class="default">$xCoord2</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">, </span><span class="default">$yCoord2</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">, </span><span class="default">$zCoord2</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">start </span><span class="keyword">= new </span><span class="default">Point3D</span><span class="keyword">(</span><span class="default">$xCoord1</span><span class="keyword">, </span><span class="default">$yCoord1</span><span class="keyword">, </span><span class="default">$zCoord1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">end </span><span class="keyword">= new </span><span class="default">Point3D</span><span class="keyword">(</span><span class="default">$xCoord2</span><span class="keyword">, </span><span class="default">$yCoord2</span><span class="keyword">, </span><span class="default">$zCoord2</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/*<br />
&nbsp;&nbsp; &nbsp; * calculate the length of this Line in 3-dimensional space.<br />
&nbsp;&nbsp; &nbsp; */ <br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">getLength</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">sqrt</span><span class="keyword">(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">pow</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">start</span><span class="keyword">-&gt;</span><span class="default">x </span><span class="keyword">- </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">end</span><span class="keyword">-&gt;</span><span class="default">x</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">) +<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">pow</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">start</span><span class="keyword">-&gt;</span><span class="default">y </span><span class="keyword">- </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">end</span><span class="keyword">-&gt;</span><span class="default">y</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">) +<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">pow</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">start</span><span class="keyword">-&gt;</span><span class="default">z </span><span class="keyword">- </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">end</span><span class="keyword">-&gt;</span><span class="default">z</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; );<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/*<br />
&nbsp;&nbsp; &nbsp; * The (String) representation of this Line as "Line3D[start, end, length]".<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">__toString</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="string">'Line3D[start=' </span><span class="keyword">. </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">start </span><span class="keyword">.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">', end=' </span><span class="keyword">. </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">end </span><span class="keyword">.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">', length=' </span><span class="keyword">. </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">getLength</span><span class="keyword">() . </span><span class="string">']'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="comment">/*<br />
&nbsp;* create and display objects of type Line3D.<br />
&nbsp;*/<br />
</span><span class="keyword">echo </span><span class="string">'&lt;p&gt;' </span><span class="keyword">. (new </span><span class="default">Line3D</span><span class="keyword">()) . </span><span class="string">"&lt;/p&gt;\n"</span><span class="keyword">;<br />
echo </span><span class="string">'&lt;p&gt;' </span><span class="keyword">. (new </span><span class="default">Line3D</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">100</span><span class="keyword">, </span><span class="default">100</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">)) . </span><span class="string">"&lt;/p&gt;\n"</span><span class="keyword">;<br />
echo </span><span class="string">'&lt;p&gt;' </span><span class="keyword">. (new </span><span class="default">Line3D</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">100</span><span class="keyword">, </span><span class="default">100</span><span class="keyword">, </span><span class="default">100</span><span class="keyword">)) . </span><span class="string">"&lt;/p&gt;\n"</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
&nbsp; &lt;--&nbsp; The results look like this&nbsp; --&gt;<br />
<br />
Line3D[start=Point3D(x=0, y=0, z=0), end=Point3D(x=1, y=1, z=1), length=1.73205080757]<br />
<br />
Line3D[start=Point3D(x=0, y=0, z=0), end=Point3D(x=100, y=100, z=0), length=141.421356237]<br />
<br />
Line3D[start=Point3D(x=0, y=0, z=0), end=Point3D(x=100, y=100, z=100), length=173.205080757]<br />
<br />
My absolute favorite thing about OOP is that "good" objects keep themselves in check. I mean really, it's the exact same thing in reality... like, if you hire a plumber to fix your kitchen sink, wouldn't you expect him to figure out the best plan of attack? Wouldn't he dislike the fact that you want to control the whole job? Wouldn't you expect him to not give you additional problems? And for god's sake, it is too much to ask that he cleans up before he leaves?<br />
<br />
I say, design your classes well, so they can do their jobs uninterrupted... who like bad news? And, if your classes and objects are well defined, educated, and have all the necessary data to work on (like the examples above do), you won't have to micro-manage the whole program from outside of the class. In other words... create an object, and LET IT RIP!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="79856""></a>
  <div class="note">
   <strong class="user">aaron at thatone dot com</strong>
   <a href="#79856" class="date">15-Dec-2007 06:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was confused at first about object assignment, because it's not quite the same as normal assignment or assignment by reference. But I think I've figured out what's going on.<br />
<br />
First, think of variables in PHP as data slots. Each one is a name that points to a data slot that can hold a value that is one of the basic data types: a number, a string, a boolean, etc. When you create a reference, you are making a second name that points at the same data slot. When you assign one variable to another, you are copying the contents of one data slot to another data slot.<br />
<br />
Now, the trick is that object instances are not like the basic data types. They cannot be held in the data slots directly. Instead, an object's "handle" goes in the data slot. This is an identifier that points at one particular instance of an obect. So, the object handle, although not directly visible to the programmer, is one of the basic datatypes. <br />
<br />
What makes this tricky is that when you take a variable which holds an object handle, and you assign it to another variable, that other variable gets a copy of the same object handle. This means that both variables can change the state of the same object instance. But they are not references, so if one of the variables is assigned a new value, it does not affect the other variable.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// Assignment of an object<br />
</span><span class="keyword">Class </span><span class="default">Object</span><span class="keyword">{<br />
&nbsp;&nbsp; public </span><span class="default">$foo</span><span class="keyword">=</span><span class="string">"bar"</span><span class="keyword">;<br />
};<br />
<br />
</span><span class="default">$objectVar </span><span class="keyword">= new </span><span class="default">Object</span><span class="keyword">();<br />
</span><span class="default">$reference </span><span class="keyword">=&amp; </span><span class="default">$objectVar</span><span class="keyword">;<br />
</span><span class="default">$assignment </span><span class="keyword">= </span><span class="default">$objectVar<br />
<br />
</span><span class="comment">//<br />
// $objectVar ---&gt;+---------+<br />
//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |(handle1)----+<br />
// $reference ---&gt;+---------+&nbsp;&nbsp; |<br />
//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br />
//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +---------+&nbsp;&nbsp; |<br />
// $assignment --&gt;|(handle1)----+<br />
//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +---------+&nbsp;&nbsp; |<br />
//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br />
//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; v<br />
//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Object(1):foo="bar"<br />
//<br />
</span><span class="default">?&gt;<br />
</span><br />
$assignment has a different data slot from $objectVar, but its data slot holds a handle to the same object. This makes it behave in some ways like a reference. If you use the variable $objectVar to change the state of the Object instance, those changes also show up under $assignment, because it is pointing at that same Object instance.<br />
<br />
<span class="default">&lt;?php<br />
$objectVar</span><span class="keyword">-&gt;</span><span class="default">foo </span><span class="keyword">= </span><span class="string">"qux"</span><span class="keyword">;<br />
</span><span class="default">print_r</span><span class="keyword">( </span><span class="default">$objectVar </span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">( </span><span class="default">$reference </span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">( </span><span class="default">$assignment </span><span class="keyword">);<br />
<br />
</span><span class="comment">//<br />
// $objectVar ---&gt;+---------+<br />
//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |(handle1)----+<br />
// $reference ---&gt;+---------+&nbsp;&nbsp; |<br />
//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br />
//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +---------+&nbsp;&nbsp; |<br />
// $assignment --&gt;|(handle1)----+<br />
//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +---------+&nbsp;&nbsp; |<br />
//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br />
//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; v<br />
//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Object(1):foo="qux"<br />
//<br />
</span><span class="default">?&gt;<br />
</span><br />
But it is not exactly the same as a reference. If you null out $objectVar, you replace the handle in its data slot with NULL. This means that $reference, which points at the same data slot, will also be NULL. But $assignment, which is a different data slot, will still hold its copy of the handle to the Object instance, so it will not be NULL.<br />
<br />
<span class="default">&lt;?php<br />
$objectVar </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$objectVar</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$reference</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$assignment</span><span class="keyword">);<br />
<br />
</span><span class="comment">//<br />
// $objectVar ---&gt;+---------+<br />
//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp; NULL&nbsp;&nbsp; | <br />
// $reference ---&gt;+---------+<br />
//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +---------+<br />
// $assignment --&gt;|(handle1)----+<br />
//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +---------+&nbsp;&nbsp; |<br />
//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br />
//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; v<br />
//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Object(1):foo="qux"<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
