<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=UTF-8">
  <title>Adds new child at the end of the children</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="class.domnode.html">? DOMNode</a></li>
      <li style="float: right;"><a href="domnode.c14n.html">DOMNode::C14N ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="class.domnode.html">DOMNode</a></li>
    <li>Adds new child at the end of the children</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="domnode.appendchild" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">DOMNode::appendChild</h1>
  <p class="verinfo">(PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">DOMNode::appendChild</span> &mdash; <span class="dc-title">
   Adds new child at the end of the children
  </span></p>

 </div>
 <div class="refsect1 description" id="refsect1-domnode.appendchild-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="methodname"><strong>DOMNode::appendChild</strong></span>(<span class="methodparam"><span class="type"><a href="class.domnode.html" class="type DOMNode">DOMNode</a></span> <code class="parameter">$node</code></span>): <span class="type"><span class="type"><a href="class.domnode.html" class="type DOMNode">DOMNode</a></span>|<span class="type"><span class="type false">false</span></span></span></div>

  <p class="para rdfs-comment">
   This function appends a child to an existing list of children or creates
   a new list of children. The child can be created with e.g. 
   <span class="methodname"><a href="domdocument.createelement.html" class="methodname">DOMDocument::createElement()</a></span>,
   <span class="methodname"><a href="domdocument.createtextnode.html" class="methodname">DOMDocument::createTextNode()</a></span> etc. or simply by using
   any other node.
  </p>
  <p class="para">
   When using an existing node it will be moved.
  </p>
 </div>

 <div class="refsect1 parameters" id="refsect1-domnode.appendchild-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">node</code></dt>

     <dd>

      <p class="para">
       The appended child.
      </p>
     </dd>

    
   </dl>

  </p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-domnode.appendchild-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   The node added or <strong><code>false</code></strong> on error.
  </p>
 </div>

 <div class="refsect1 errors" id="refsect1-domnode.appendchild-errors">
  <h3 class="title">错误／异常</h3>
  <p class="para">
   <dl>
    
     <dt>
<strong><code>DOM_NO_MODIFICATION_ALLOWED_ERR</code></strong></dt>

     <dd>

      <p class="para">
       Raised if this node is readonly or if the previous parent of the node
       being inserted is readonly.
      </p>
     </dd>

    
    
     <dt>
<strong><code>DOM_HIERARCHY_REQUEST_ERR</code></strong></dt>

     <dd>

      <p class="para">
       Raised if this node is of a type that does not allow children of the 
       type of the <code class="parameter">node</code> node, or if the node to 
       append is one of this node&#039;s ancestors or this node itself.
      </p>
     </dd>

    
    
     <dt>
<strong><code>DOM_WRONG_DOCUMENT_ERR</code></strong></dt>

     <dd>

      <p class="para">
       Raised if <code class="parameter">node</code> was created from a different 
       document than the one that created this node.
      </p>
     </dd>

    
   </dl>

  </p>
 </div>

 
 <div class="refsect1 examples" id="refsect1-domnode.appendchild-examples">
  <h3 class="title">示例</h3>
  <p class="para">
   The following example will add a new element node to a fresh document.
   <div class="example" id="">
    <p><strong>Example #1 Adding a child</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br />$doc </span><span style="color: #007700">= new </span><span style="color: #0000BB">DOMDocument</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$node </span><span style="color: #007700">= </span><span style="color: #0000BB">$doc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createElement</span><span style="color: #007700">(</span><span style="color: #DD0000">"para"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$newnode </span><span style="color: #007700">= </span><span style="color: #0000BB">$doc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">appendChild</span><span style="color: #007700">(</span><span style="color: #0000BB">$node</span><span style="color: #007700">);<br /><br />echo </span><span style="color: #0000BB">$doc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">saveXML</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  
  <p class="para">
   <div class="example" id="">
    <p><strong>Example #2 Nested children</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br />$doc </span><span style="color: #007700">= new </span><span style="color: #0000BB">DOMDocument</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$headNode </span><span style="color: #007700">= </span><span style="color: #0000BB">$doc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createElement</span><span style="color: #007700">(</span><span style="color: #DD0000">"head"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$doc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">appendChild</span><span style="color: #007700">(</span><span style="color: #0000BB">$headNode</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$titleNode </span><span style="color: #007700">= </span><span style="color: #0000BB">$doc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createElement</span><span style="color: #007700">(</span><span style="color: #DD0000">"title"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$headNode</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">appendChild</span><span style="color: #007700">(</span><span style="color: #0000BB">$titleNode</span><span style="color: #007700">);<br /><br />echo </span><span style="color: #0000BB">$doc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">saveXML</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>

 
 <div class="refsect1 seealso" id="refsect1-domnode.appendchild-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="methodname"><a href="domchildnode.after.html" class="methodname" rel="rdfs-seeAlso">DOMChildNode::after()</a> - Adds nodes after the node</span></li>
    <li class="member"><span class="methodname"><a href="domnode.insertbefore.html" class="methodname" rel="rdfs-seeAlso">DOMNode::insertBefore()</a> - Adds a new child before a reference node</span></li>
    <li class="member"><span class="methodname"><a href="domnode.removechild.html" class="methodname" rel="rdfs-seeAlso">DOMNode::removeChild()</a> - Removes child from list of children</span></li>
    <li class="member"><span class="methodname"><a href="domnode.replacechild.html" class="methodname" rel="rdfs-seeAlso">DOMNode::replaceChild()</a> - Replaces a child</span></li>
   </ul>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="121829""></a>
  <div class="note">
   <strong class="user">cweiske at php dot net</strong>
   <a href="#121829" class="date">05-Nov-2017 01:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to move the children of one node to another, you cannot simply iterate on $element-&gt;childNodes - you have to make an array first:<br />
<br />
<span class="default">&lt;?php<br />
$children </span><span class="keyword">= [];<br />
foreach (</span><span class="default">$elemWithChildren</span><span class="keyword">-&gt;</span><span class="default">childNodes </span><span class="keyword">as </span><span class="default">$child</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$children</span><span class="keyword">[] = </span><span class="default">$child</span><span class="keyword">;<br />
}<br />
foreach (</span><span class="default">$children </span><span class="keyword">as </span><span class="default">$child</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$targetElement</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(</span><span class="default">$child</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101185""></a>
  <div class="note">
   <strong class="user">frame at dynamiccreated dot de</strong>
   <a href="#101185" class="date">01-Dec-2010 04:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Aware dealing with DOMNodeList and appendChild() on the same Node.<br />
<br />
If you want to replace only the children not the DOMElement itself you probably foreach childNodes-property or get the DOMElements with a for-loop and item()-method of the DOMNodeList.<br />
<br />
You will fail if you not clone the received single DOMElement. Actually the count of the DOMNodelist will be decreased on appendChild count but appendChild seems to refer to the old Nodelist and nothing visible will happen. Cloning will help.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83559""></a>
  <div class="note">
   <strong class="user">krisdover at hotmail dot com</strong>
   <a href="#83559" class="date">31-May-2008 08:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
What's not mentioned here is that DOMNode::appendChild() can also be used to move an existing node to another part of the DOMDocument, e.g.<br />
<br />
<span class="default">&lt;?php<br />
$doc </span><span class="keyword">= new </span><span class="default">DOMDocument</span><span class="keyword">();<br />
</span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">loadXML</span><span class="keyword">(</span><span class="string">"&lt;foobar&gt;&lt;bar/&gt;&lt;foo/&gt;&lt;/foobar&gt;"</span><span class="keyword">);<br />
</span><span class="default">$bar </span><span class="keyword">= </span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">documentElement</span><span class="keyword">-&gt;</span><span class="default">firstChild</span><span class="keyword">;<br />
</span><span class="default">$foo </span><span class="keyword">= </span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">documentElement</span><span class="keyword">-&gt;</span><span class="default">lastChild</span><span class="keyword">;<br />
</span><span class="default">$foo</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(</span><span class="default">$bar</span><span class="keyword">);<br />
print </span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">saveXML</span><span class="keyword">();<br />
</span><span class="default">?&gt;<br />
</span><br />
This produces:<br />
<br />
&lt;?xml version="1.0"?&gt;<br />
&lt;foobar&gt;&lt;foo&gt;&lt;bar/&gt;&lt;/foo&gt;&lt;/foobar&gt;<br />
<br />
Note that the nodes "&lt;foo/&gt;" and "&lt;bar/&gt;" were siblings, i.e. the first and last child of "&lt;foobar&gt;" but using appendChild() we were able to move "&lt;bar/&gt;" so that it is a child of "&lt;foo/&gt;".<br />
<br />
This saves you the trouble of doing a DOMNode::removeChild($bar) to remove "&lt;bar/&gt;" before appending it as a child of "&lt;foo/&gt;". <br />
<br />
Kris Dover</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82172""></a>
  <div class="note">
   <strong class="user">jrtayloriv at gmail dot com</strong>
   <a href="#82172" class="date">30-Mar-2008 04:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to create nested DOM elements:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $doc </span><span class="keyword">= new </span><span class="default">DOMDocument</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$foo </span><span class="keyword">= </span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">createElement</span><span class="keyword">(</span><span class="string">"foo"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(</span><span class="default">$foo</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$bar </span><span class="keyword">= </span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">createElement</span><span class="keyword">(</span><span class="string">"bar"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$foo</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(</span><span class="default">$bar</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$bazz </span><span class="keyword">= </span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">createElement</span><span class="keyword">(</span><span class="string">"bazz"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$foo</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(</span><span class="default">$bazz</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">saveXML</span><span class="keyword">();<br />
</span><span class="default">?&gt;<br />
</span><br />
Is equivalent to:<br />
<br />
&lt;foo&gt;<br />
&nbsp; &lt;bar&gt;&lt;/bar&gt;<br />
&nbsp; &lt;bazz&gt;&lt;/bazz&gt;<br />
&lt;/foo&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
