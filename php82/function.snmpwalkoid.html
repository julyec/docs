<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=UTF-8">
  <title>查询有关网络实体的信息树</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.snmpwalk.html">? snmpwalk</a></li>
      <li style="float: right;"><a href="class.snmp.html">SNMP ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.snmp.html">SNMP 函数</a></li>
    <li>查询有关网络实体的信息树</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.snmpwalkoid" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">snmpwalkoid</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">snmpwalkoid</span> &mdash; <span class="dc-title">查询有关网络实体的信息树
  </span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.snmpwalkoid-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>snmpwalkoid</strong></span>(<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">string</span> <code class="parameter">$hostname</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">string</span> <code class="parameter">$community</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type"><span class="type">array</span>|<span class="type">string</span></span> <code class="parameter">$object_id</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">int</span> <code class="parameter">$timeout</code><span class="initializer"> = -1</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">int</span> <code class="parameter">$retries</code><span class="initializer"> = -1</span></span><br>): <span class="type"><span class="type">array</span>|<span class="type"><span class="type false">false</span></span></span></div>


  <p class="para rdfs-comment">
   <span class="function"><strong>snmpwalkoid()</strong></span> 函数用于从 <code class="parameter">hostname</code> 指定的 SNMP 代理读取所有对象 ID 及其各自的值。
  </p>

  <p class="para">
   <span class="function"><strong>snmpwalkoid()</strong></span> 和 <span class="function"><a href="function.snmpwalk.html" class="function">snmpwalk()</a></span> 的存在是有历史原因的。提供这两个函数是为了向后兼容。请改用 <span class="function"><a href="function.snmprealwalk.html" class="function">snmprealwalk()</a></span>。
  </p> 
 </div>


 <div class="refsect1 parameters" id="refsect1-function.snmpwalkoid-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">hostname</code></dt>

     <dd>

      <p class="para">
       SNMP 代理。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">community</code></dt>

     <dd>

      <p class="para">
       The read community.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">object_id</code></dt>

     <dd>

      <p class="para">
       如果为 <strong><code>null</code></strong>，则将 <code class="parameter">object_id</code> 作为 <abbr title="Simple Network Management Protocol">SNMP</abbr> 对象树的根，并且该树下的所有对象都作为数组返回。
      </p>
      <p class="para">
       如果指定了 <code class="parameter">object_id</code>，则返回该 <code class="parameter">object_id</code> 下面的所有 <abbr title="Simple Network Management Protocol">SNMP</abbr> 对象。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">timeout</code></dt>

     <dd>

      <p class="para">
       第一次超时前的微秒数。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">retries</code></dt>

     <dd>

      <p class="para">
       发生超时时重试的次数。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.snmpwalkoid-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   返回关联数组，其中包含对象 ID 及其各自的对象值，从 <code class="parameter">object_id</code> 开始为 root 或错误时为 <strong><code>false</code></strong>。
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.snmpwalkoid-examples">
  <h3 class="title">示例</h3>
  <p class="para"> 
   <div class="example" id="">
    <p><strong>Example #1 <span class="function"><strong>snmpwalkoid()</strong></span> 示例</strong></p>
    <div class="example-contents"> 
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$a </span><span style="color: #007700">= </span><span style="color: #0000BB">snmpwalkoid</span><span style="color: #007700">(</span><span style="color: #DD0000">"127.0.0.1"</span><span style="color: #007700">, </span><span style="color: #DD0000">"public"</span><span style="color: #007700">, </span><span style="color: #DD0000">""</span><span style="color: #007700">); <br />for (</span><span style="color: #0000BB">reset</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">); </span><span style="color: #0000BB">$i </span><span style="color: #007700">= </span><span style="color: #0000BB">key</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">); </span><span style="color: #0000BB">next</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">)) {<br />    echo </span><span style="color: #DD0000">"</span><span style="color: #0000BB">$i</span><span style="color: #DD0000">: </span><span style="color: #0000BB">$a</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">]</span><span style="color: #DD0000">&lt;br /&gt;\n"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p> 
  <p class="para">
   上面的函数调用将从本地主机上运行的 SNMP 代理返回所有 SNMP 对象。可以通过循环遍历这些值
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.snmpwalkoid-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.snmpwalk.html" class="function" rel="rdfs-seeAlso">snmpwalk()</a> - 从代理获取所有 SNMP 对象</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="116209""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#116209" class="date">21-Nov-2014 10:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
make sure you install "snmp-mibs-downloader" in debian.&nbsp; <br />
<br />
apt-get install snmp-mibs-downloader<br />
<br />
you my also need to edit your /etc/apt/sources.list<br />
<br />
deb <a href="http://ftp.us.debian.org/debian/ wheezy main contrib non-free" rel="nofollow" target="_blank">http://ftp.us.debian.org/debian/ wheezy main contrib non-free</a><br />
deb-src <a href="http://ftp.us.debian.org/debian/ wheezy main contrib non-free" rel="nofollow" target="_blank">http://ftp.us.debian.org/debian/ wheezy main contrib non-free</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="53832""></a>
  <div class="note">
   <strong class="user">thammer at rtccom dot com</strong>
   <a href="#53832" class="date">14-Jun-2005 08:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The above note mentions that the MAC addresses come back converted to integers or something funky like that. Not sure why that is happening but I fixed that with a wrapper function.<br />
<br />
function PadMAC($mac) {<br />
&nbsp;&nbsp;&nbsp; $mac_arr = explode(':',$mac);<br />
&nbsp;&nbsp;&nbsp; foreach($mac_arr as $atom) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $atom = trim($atom);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $newarr[] = sprintf("%02s",$atom);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; $newmac = implode(':',$newarr);<br />
&nbsp;&nbsp;&nbsp; return $newmac;<br />
}<br />
<br />
Maybe that will help somebody with that issue. I know I personally use the heck out of these user contributed notes</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="46538""></a>
  <div class="note">
   <strong class="user">gene_wood at example dot com</strong>
   <a href="#46538" class="date">14-Oct-2004 09:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Looks like timeout is in MICRO seconds.<br />
1,000,000 &amp;micros = 1 s</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="10489""></a>
  <div class="note">
   <strong class="user">jasper at pointless dot net</strong>
   <a href="#10489" class="date">06-Jan-2001 07:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
N.B. it's possible for snmpwalkoid to lose data - the "rmon.matrix.matrixSDTable" table for example uses binary mac addresses as part of the index, these get converted to ascii, and by the time they get to php they can be non-unique - so some entrys in the table get lost...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
