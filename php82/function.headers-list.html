<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=UTF-8">
  <title>返回已发送的 HTTP 响应头（或准备发送的）</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.header.html">? header</a></li>
      <li style="float: right;"><a href="function.headers-sent.html">headers_sent ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.network.html">网络 函数</a></li>
    <li>返回已发送的 HTTP 响应头（或准备发送的）</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.headers-list" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">headers_list</h1>
  <p class="verinfo">(PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">headers_list</span> &mdash; <span class="dc-title">返回已发送的 HTTP 响应头（或准备发送的）</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.headers-list-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>headers_list</strong></span>(): <span class="type">array</span></div>

  <p class="para rdfs-comment">
   <span class="function"><strong>headers_list()</strong></span> 会返回准备发送给浏览器/客户端的 HTTP 头列表。
   检测这些头是否已经发送，使用 <span class="function"><a href="function.headers-sent.html" class="function">headers_sent()</a></span>。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.headers-list-parameters">
  <h3 class="title">参数</h3>
  <p class="para">此函数没有参数。</p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.headers-list-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   返回数字索引的头数组。
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.headers-list-examples">
  <h3 class="title">示例</h3>
  <p class="para">
   <div class="example" id="">
    <p><strong>Example #1 使用 <span class="function"><strong>headers_list()</strong></span> 的例子</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">/* setcookie() 会自己添加一个响应头 */<br /></span><span style="color: #0000BB">setcookie</span><span style="color: #007700">(</span><span style="color: #DD0000">'foo'</span><span style="color: #007700">, </span><span style="color: #DD0000">'bar'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/* 添加自定义的响应头<br /> 大多数客户端会主动忽略 */<br /></span><span style="color: #0000BB">header</span><span style="color: #007700">(</span><span style="color: #DD0000">"Example-Test: foo"</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/* 响应中指定内容为明文 text */<br /></span><span style="color: #0000BB">header</span><span style="color: #007700">(</span><span style="color: #DD0000">'Content-Type: text/plain; CHARSET=gb2312'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/* 所以会发送什么头呢？ */<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">headers_list</span><span style="color: #007700">());<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上示例的输出类似于：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
array(3) {
  [0]=&gt;
  string(19) &quot;Set-Cookie: foo=bar&quot;
  [1]=&gt;
  string(17) &quot;Example-Test: foo&quot;
  [2]=&gt;
  string(39) &quot;Content-Type: text/plain; CHARSET=gb2312&quot;
}

</pre></div>
    </div>
   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.headers-list-notes">
  <h3 class="title">注释</h3>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
<p class="para">
 数据头只会在SAPI支持时得到处理和输出。
</p>
</p></blockquote>

 </div>


 <div class="refsect1 seealso" id="refsect1-function.headers-list-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.headers-sent.html" class="function" rel="rdfs-seeAlso">headers_sent()</a> - 检测消息头是否已经发送</span></li>
    <li class="member"><span class="function"><a href="function.header.html" class="function" rel="rdfs-seeAlso">header()</a> - 发送原生 HTTP 头</span></li>
    <li class="member"><span class="function"><a href="function.setcookie.html" class="function" rel="rdfs-seeAlso">setcookie()</a> - 发送 Cookie</span></li>
    <li class="member"><span class="function"><a href="function.apache-response-headers.html" class="function" rel="rdfs-seeAlso">apache_response_headers()</a> - 获得全部 HTTP 响应头信息</span></li>
    <li class="member"><span class="function"><a href="function.http-response-code.html" class="function" rel="rdfs-seeAlso">http_response_code()</a> - 获取/设置响应的 HTTP 状态码</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="120539""></a>
  <div class="note">
   <strong class="user">arnold at jasny dot net</strong>
   <a href="#120539" class="date">26-Jan-2017 04:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function won't work for when you're running PHP from the command line. If will always return an empty array. This can be an issue when testing your project using PHPUnit or Codeception.<br />
<br />
To solve this, install the xdebug extension and use `xdebug_get_headers` when on the cli.<br />
<br />
<span class="default">&lt;?php<br />
$headers </span><span class="keyword">= </span><span class="default">php_sapi_name</span><span class="keyword">() === </span><span class="string">'cli' </span><span class="keyword">? </span><span class="default">xdebug_get_headers</span><span class="keyword">() : </span><span class="default">headers_list</span><span class="keyword">();<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="110330""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#110330" class="date">11-Oct-2012 12:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
note that it does not return the status header<br />
<br />
<span class="default">&lt;?php<br />
<br />
header</span><span class="keyword">(</span><span class="string">'HTTP/1.1 301 Moved Permanently'</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">, </span><span class="default">301</span><span class="keyword">);<br />
<br />
</span><span class="default">header</span><span class="keyword">(</span><span class="string">'foo: bar'</span><span class="keyword">);<br />
</span><span class="default">header</span><span class="keyword">(</span><span class="string">'a: b'</span><span class="keyword">);<br />
</span><span class="default">header</span><span class="keyword">(</span><span class="string">'colon less example'</span><span class="keyword">);<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">headers_list</span><span class="keyword">());<br />
</span><span class="default">?&gt;<br />
</span><br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; X-Powered-By: PHP/5.4.7<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; foo: bar<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; a: b<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="109395""></a>
  <div class="note">
   <strong class="user">SOLO2</strong>
   <a href="#109395" class="date">13-Jul-2012 04:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Function to check if a particular header has been added to the list:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">header_sent</span><span class="keyword">(</span><span class="default">$header</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$headers </span><span class="keyword">= </span><span class="default">headers_list</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$header </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$header</span><span class="keyword">,</span><span class="string">': '</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$headers </span><span class="keyword">as </span><span class="default">$hdr</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">stripos</span><span class="keyword">(</span><span class="default">$hdr</span><span class="keyword">, </span><span class="default">$header</span><span class="keyword">) !== </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
