<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=UTF-8">
  <title>ArrayIterator 类</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="appenditerator.valid.html">? AppendIterator::valid</a></li>
      <li style="float: right;"><a href="arrayiterator.append.html">ArrayIterator::append ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="spl.iterators.html">迭代器</a></li>
    <li>ArrayIterator 类</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="class.arrayiterator" class="reference">
 <h1 class="title">ArrayIterator 类</h1>
 
 
 <div class="partintro"><p class="verinfo">(PHP 5, PHP 7, PHP 8)</p>
 

  <div class="section" id="arrayiterator.intro">
   <h2 class="title">简介</h2>
   <p class="para">
    这个迭代器允许在遍历数组和对象时删除和更新值与键。
   </p>
   <p class="para">
    当你想多次遍历相同数组时你需要实例化 ArrayObject，然后让这个实例创建一个 ArrayIterator 实例。
    当你想遍历相同数组时多次你需要实例 ArrayObject 并且让这个实例创建一个 ArrayIterator 实例，然后使用
    <a href="control-structures.foreach.html" class="link">foreach</a> 或者手动调用 getIterator() 方法。
   </p>
  </div>

 
  <div class="section" id="arrayiterator.synopsis">
   <h2 class="title">类摘要</h2>
 

   <div class="classsynopsis">
    <span class="ooclass">
     <strong class="classname"></strong>
    </span>

    <div class="classsynopsisinfo">
     <span class="ooclass">
      <span class="modifier">class</span> <strong class="classname">ArrayIterator</strong>
     </span>
 
     <span class="oointerface"><span class="modifier">implements</span> 
       <a href="class.seekableiterator.html" class="interfacename">SeekableIterator</a></span><span class="oointerface">,  <a href="class.arrayaccess.html" class="interfacename">ArrayAccess</a></span><span class="oointerface">,  <a href="class.serializable.html" class="interfacename">Serializable</a></span><span class="oointerface">,  <a href="class.countable.html" class="interfacename">Countable</a></span> {</div>
    
    <div class="classsynopsisinfo classsynopsisinfo_comment">/* 常量 */</div>
    <div class="fieldsynopsis">
     <span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="class.arrayiterator.html#arrayiterator.constants.std-prop-list"><var class="varname">STD_PROP_LIST</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="class.arrayiterator.html#arrayiterator.constants.array-as-props"><var class="varname">ARRAY_AS_PROPS</var></a></var>;</div>


    <div class="classsynopsisinfo classsynopsisinfo_comment">/* 方法 */</div>
    <div class="constructorsynopsis dc-description">
   <span class="modifier">public</span> <span class="methodname"><a href="arrayiterator.construct.html" class="methodname">__construct</a></span>(<span class="methodparam"><span class="type"><span class="type">array</span>|<span class="type">object</span></span> <code class="parameter">$array</code><span class="initializer"> = []</span></span>, <span class="methodparam"><span class="type">int</span> <code class="parameter">$flags</code><span class="initializer"> = 0</span></span>)</div>

    <div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="arrayiterator.append.html" class="methodname">append</a></span>(<span class="methodparam"><span class="type"><a href="language.types.declarations.html#language.types.declarations.mixed" class="type mixed">mixed</a></span> <code class="parameter">$value</code></span>): <span class="type"><span class="type void">void</span></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="arrayiterator.asort.html" class="methodname">asort</a></span>(<span class="methodparam"><span class="type">int</span> <code class="parameter">$flags</code><span class="initializer"> = <strong><code>SORT_REGULAR</code></strong></span></span>): <span class="type"><span class="type true">true</span></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="arrayiterator.count.html" class="methodname">count</a></span>(): <span class="type">int</span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="arrayiterator.current.html" class="methodname">current</a></span>(): <span class="type"><a href="language.types.declarations.html#language.types.declarations.mixed" class="type mixed">mixed</a></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="arrayiterator.getarraycopy.html" class="methodname">getArrayCopy</a></span>(): <span class="type">array</span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="arrayiterator.getflags.html" class="methodname">getFlags</a></span>(): <span class="type">int</span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="arrayiterator.key.html" class="methodname">key</a></span>(): <span class="type"><span class="type">string</span>|<span class="type">int</span>|<span class="type">null</span></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="arrayiterator.ksort.html" class="methodname">ksort</a></span>(<span class="methodparam"><span class="type">int</span> <code class="parameter">$flags</code><span class="initializer"> = <strong><code>SORT_REGULAR</code></strong></span></span>): <span class="type"><span class="type true">true</span></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="arrayiterator.natcasesort.html" class="methodname">natcasesort</a></span>(): <span class="type"><span class="type true">true</span></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="arrayiterator.natsort.html" class="methodname">natsort</a></span>(): <span class="type"><span class="type true">true</span></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="arrayiterator.next.html" class="methodname">next</a></span>(): <span class="type"><span class="type void">void</span></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="arrayiterator.offsetexists.html" class="methodname">offsetExists</a></span>(<span class="methodparam"><span class="type"><a href="language.types.declarations.html#language.types.declarations.mixed" class="type mixed">mixed</a></span> <code class="parameter">$key</code></span>): <span class="type">bool</span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="arrayiterator.offsetget.html" class="methodname">offsetGet</a></span>(<span class="methodparam"><span class="type"><a href="language.types.declarations.html#language.types.declarations.mixed" class="type mixed">mixed</a></span> <code class="parameter">$key</code></span>): <span class="type"><a href="language.types.declarations.html#language.types.declarations.mixed" class="type mixed">mixed</a></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="arrayiterator.offsetset.html" class="methodname">offsetSet</a></span>(<span class="methodparam"><span class="type"><a href="language.types.declarations.html#language.types.declarations.mixed" class="type mixed">mixed</a></span> <code class="parameter">$key</code></span>, <span class="methodparam"><span class="type"><a href="language.types.declarations.html#language.types.declarations.mixed" class="type mixed">mixed</a></span> <code class="parameter">$value</code></span>): <span class="type"><span class="type void">void</span></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="arrayiterator.offsetunset.html" class="methodname">offsetUnset</a></span>(<span class="methodparam"><span class="type"><a href="language.types.declarations.html#language.types.declarations.mixed" class="type mixed">mixed</a></span> <code class="parameter">$key</code></span>): <span class="type"><span class="type void">void</span></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="arrayiterator.rewind.html" class="methodname">rewind</a></span>(): <span class="type"><span class="type void">void</span></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="arrayiterator.seek.html" class="methodname">seek</a></span>(<span class="methodparam"><span class="type">int</span> <code class="parameter">$offset</code></span>): <span class="type"><span class="type void">void</span></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="arrayiterator.serialize.html" class="methodname">serialize</a></span>(): <span class="type">string</span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="arrayiterator.setflags.html" class="methodname">setFlags</a></span>(<span class="methodparam"><span class="type">int</span> <code class="parameter">$flags</code></span>): <span class="type"><span class="type void">void</span></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="arrayiterator.uasort.html" class="methodname">uasort</a></span>(<span class="methodparam"><span class="type"><a href="language.types.callable.html" class="type callable">callable</a></span> <code class="parameter">$callback</code></span>): <span class="type"><span class="type true">true</span></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="arrayiterator.uksort.html" class="methodname">uksort</a></span>(<span class="methodparam"><span class="type"><a href="language.types.callable.html" class="type callable">callable</a></span> <code class="parameter">$callback</code></span>): <span class="type"><span class="type true">true</span></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="arrayiterator.unserialize.html" class="methodname">unserialize</a></span>(<span class="methodparam"><span class="type">string</span> <code class="parameter">$data</code></span>): <span class="type"><span class="type void">void</span></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="arrayiterator.valid.html" class="methodname">valid</a></span>(): <span class="type">bool</span></div>

   }</div>
 
  </div>
 
  <div class="section" id="arrayiterator.constants">
   <h2 class="title">预定义常量</h2>
   <div class="section" id="arrayiterator.constants.flags">
    <h2 class="title">ArrayIterator 标记</h2>
    <dl>

     
      <dt id="arrayiterator.constants.std-prop-list"><strong><code>ArrayIterator::STD_PROP_LIST</code></strong></dt>

      <dd>

       <p class="para">Properties of the object have their normal functionality when accessed as list (var_dump, foreach, etc.).</p>
      </dd>

     

     
      <dt id="arrayiterator.constants.array-as-props"><strong><code>ArrayIterator::ARRAY_AS_PROPS</code></strong></dt>

      <dd>

       <p class="para">可以通过属性访问条目（读写都支持）。</p>
      </dd>

     
    </dl>

   </div>
  </div>
  

 
 </div>
 
 
























































































































 
<h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="arrayiterator.append.html">ArrayIterator::append</a> &mdash; Append an element</li><li><a href="arrayiterator.asort.html">ArrayIterator::asort</a> &mdash; Sort entries by values</li><li><a href="arrayiterator.construct.html">ArrayIterator::__construct</a> &mdash; Construct an ArrayIterator</li><li><a href="arrayiterator.count.html">ArrayIterator::count</a> &mdash; Count elements</li><li><a href="arrayiterator.current.html">ArrayIterator::current</a> &mdash; Return current array entry</li><li><a href="arrayiterator.getarraycopy.html">ArrayIterator::getArrayCopy</a> &mdash; Get array copy</li><li><a href="arrayiterator.getflags.html">ArrayIterator::getFlags</a> &mdash; Get behavior flags</li><li><a href="arrayiterator.key.html">ArrayIterator::key</a> &mdash; Return current array key</li><li><a href="arrayiterator.ksort.html">ArrayIterator::ksort</a> &mdash; Sort entries by keys</li><li><a href="arrayiterator.natcasesort.html">ArrayIterator::natcasesort</a> &mdash; Sort entries naturally, case insensitive</li><li><a href="arrayiterator.natsort.html">ArrayIterator::natsort</a> &mdash; Sort entries naturally</li><li><a href="arrayiterator.next.html">ArrayIterator::next</a> &mdash; Move to next entry</li><li><a href="arrayiterator.offsetexists.html">ArrayIterator::offsetExists</a> &mdash; Check if offset exists</li><li><a href="arrayiterator.offsetget.html">ArrayIterator::offsetGet</a> &mdash; Get value for an offset</li><li><a href="arrayiterator.offsetset.html">ArrayIterator::offsetSet</a> &mdash; Set value for an offset</li><li><a href="arrayiterator.offsetunset.html">ArrayIterator::offsetUnset</a> &mdash; Unset value for an offset</li><li><a href="arrayiterator.rewind.html">ArrayIterator::rewind</a> &mdash; Rewind array back to the start</li><li><a href="arrayiterator.seek.html">ArrayIterator::seek</a> &mdash; Seek to position</li><li><a href="arrayiterator.serialize.html">ArrayIterator::serialize</a> &mdash; Serialize</li><li><a href="arrayiterator.setflags.html">ArrayIterator::setFlags</a> &mdash; Set behaviour flags</li><li><a href="arrayiterator.uasort.html">ArrayIterator::uasort</a> &mdash; Sort with a user-defined comparison function and maintain index association</li><li><a href="arrayiterator.uksort.html">ArrayIterator::uksort</a> &mdash; Sort by keys using a user-defined comparison function</li><li><a href="arrayiterator.unserialize.html">ArrayIterator::unserialize</a> &mdash; Unserialize</li><li><a href="arrayiterator.valid.html">ArrayIterator::valid</a> &mdash; Check whether array contains more entries</li></ul>
</div>
<div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="127869""></a>
  <div class="note">
   <strong class="user">butesa at freenet dot de</strong>
   <a href="#127869" class="date">28-Oct-2022 05:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The documentation states "This iterator allows to unset and modify values and keys while iterating over Arrays and Objects". But if you pass an array to the constructor, the iterator works with a copy of that array, so the modifications will not be written back to that initial array. ArrayObject behaves the same way.<br />
<br />
If you want an iterator that writes back to the array, you can use this function:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function &amp;</span><span class="default">getArrayIterator</span><span class="keyword">(array &amp;</span><span class="default">$a</span><span class="keyword">): </span><span class="default">Iterator </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$a </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; &amp;</span><span class="default">$v</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; yield </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Usage:<br />
<br />
<span class="default">&lt;?php<br />
$array </span><span class="keyword">= [</span><span class="default">1 </span><span class="keyword">=&gt; </span><span class="string">'a'</span><span class="keyword">, </span><span class="default">2 </span><span class="keyword">=&gt; </span><span class="string">'b'</span><span class="keyword">];<br />
<br />
</span><span class="default">$iterator </span><span class="keyword">= </span><span class="default">getArrayIterator</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
foreach (</span><span class="default">$iterator </span><span class="keyword">as &amp;</span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$value </span><span class="keyword">.= </span><span class="string">'x'</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">//array(2) {<br />
//&nbsp; [1]=&gt;<br />
//&nbsp; string(2) "ax"<br />
//&nbsp; [2]=&gt;<br />
//&nbsp; &amp;string(2) "bx"<br />
//}<br />
//object(Generator)#4 (0) {<br />
//}<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$iterator</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Comparison with plain array, ArrayIterator and ArrayObject:<br />
<br />
<span class="default">&lt;?php<br />
$array1 </span><span class="keyword">= [</span><span class="default">1 </span><span class="keyword">=&gt; </span><span class="string">'a'</span><span class="keyword">, </span><span class="default">2 </span><span class="keyword">=&gt; </span><span class="string">'b'</span><span class="keyword">];<br />
</span><span class="default">$array2 </span><span class="keyword">= [</span><span class="default">1 </span><span class="keyword">=&gt; </span><span class="string">'a'</span><span class="keyword">, </span><span class="default">2 </span><span class="keyword">=&gt; </span><span class="string">'b'</span><span class="keyword">];<br />
</span><span class="default">$array3 </span><span class="keyword">= [</span><span class="default">1 </span><span class="keyword">=&gt; </span><span class="string">'a'</span><span class="keyword">, </span><span class="default">2 </span><span class="keyword">=&gt; </span><span class="string">'b'</span><span class="keyword">];<br />
<br />
foreach (</span><span class="default">$array1 </span><span class="keyword">as &amp;</span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$value </span><span class="keyword">.= </span><span class="string">'x'</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$iterator2 </span><span class="keyword">= new </span><span class="default">ArrayIterator</span><span class="keyword">(</span><span class="default">$array2</span><span class="keyword">);<br />
foreach (</span><span class="default">$iterator2 </span><span class="keyword">as &amp;</span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$value </span><span class="keyword">.= </span><span class="string">'x'</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$iterator3 </span><span class="keyword">= new </span><span class="default">ArrayObject</span><span class="keyword">(</span><span class="default">$array3</span><span class="keyword">);<br />
foreach (</span><span class="default">$iterator3 </span><span class="keyword">as &amp;</span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$value </span><span class="keyword">.= </span><span class="string">'x'</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">//array(2) {<br />
//&nbsp; [1]=&gt;<br />
//&nbsp; string(2) "ax"<br />
//&nbsp; [2]=&gt;<br />
//&nbsp; string(2) "bx"<br />
//}<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$array1</span><span class="keyword">);<br />
<br />
</span><span class="comment">//array(2) {<br />
//&nbsp; [1]=&gt;<br />
//&nbsp; string(1) "a"<br />
//&nbsp; [2]=&gt;<br />
//&nbsp; string(1) "b"<br />
//}<br />
//object(ArrayIterator)#1 (1) {<br />
//&nbsp; ["storage":"ArrayIterator":private]=&gt;<br />
//&nbsp; array(2) {<br />
//&nbsp; &nbsp; [1]=&gt;<br />
//&nbsp; &nbsp; string(2) "ax"<br />
//&nbsp; &nbsp; [2]=&gt;<br />
//&nbsp; &nbsp; string(2) "bx"<br />
//&nbsp; }<br />
//}<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$array2</span><span class="keyword">);<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$iterator2</span><span class="keyword">);<br />
<br />
</span><span class="comment">//array(2) {<br />
//&nbsp; [1]=&gt;<br />
//&nbsp; string(1) "a"<br />
//&nbsp; [2]=&gt;<br />
//&nbsp; string(1) "b"<br />
//}<br />
//object(ArrayObject)#2 (1) {<br />
//&nbsp; ["storage":"ArrayObject":private]=&gt;<br />
//&nbsp; array(2) {<br />
//&nbsp; &nbsp; [1]=&gt;<br />
//&nbsp; &nbsp; string(2) "ax"<br />
//&nbsp; &nbsp; [2]=&gt;<br />
//&nbsp; &nbsp; string(2) "bx"<br />
//&nbsp; }<br />
//}<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$array3</span><span class="keyword">);<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$iterator3</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="124458""></a>
  <div class="note">
   <strong class="user">shaman_master at list dot ru</strong>
   <a href="#124458" class="date">01-Dec-2019 06:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want something like `ArrayCallbackIterator` by Relakuyae https://www.php.net/manual/ru/class.arrayiterator.php#106231 , use function `iterator_apply`.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="118050""></a>
  <div class="note">
   <strong class="user">daniel dot rutkoski at gmail dot com</strong>
   <a href="#118050" class="date">25-Sep-2015 02:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">PrintArray<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; private </span><span class="default">$code </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">__construct </span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">code </span><span class="keyword">= </span><span class="default">$val</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_print</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; private function </span><span class="default">arrayIterator</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">, </span><span class="default">$grau</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$grau</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arr </span><span class="keyword">= new </span><span class="default">\ArrayIterator</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while (</span><span class="default">$arr</span><span class="keyword">-&gt;</span><span class="default">valid</span><span class="keyword">())<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">-&gt;</span><span class="default">current</span><span class="keyword">()))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">arrayIterator</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">-&gt;</span><span class="default">current</span><span class="keyword">(), </span><span class="default">$grau</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">code </span><span class="keyword">.= </span><span class="default">str_repeat</span><span class="keyword">(</span><span class="string">" "</span><span class="keyword">, (</span><span class="default">4 </span><span class="keyword">* </span><span class="default">$grau</span><span class="keyword">)) . </span><span class="default">$arr</span><span class="keyword">-&gt;</span><span class="default">key</span><span class="keyword">() . </span><span class="string">" : " </span><span class="keyword">. </span><span class="default">$arr</span><span class="keyword">-&gt;</span><span class="default">current</span><span class="keyword">() . </span><span class="default">PHP_EOL</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arr</span><span class="keyword">-&gt;</span><span class="default">next</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; private function </span><span class="default">_print</span><span class="keyword">() <br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">code</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arr </span><span class="keyword">= new </span><span class="default">\ArrayIterator</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">code</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">code </span><span class="keyword">= </span><span class="string">'array(' </span><span class="keyword">. </span><span class="default">PHP_EOL</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; while (</span><span class="default">$arr</span><span class="keyword">-&gt;</span><span class="default">valid</span><span class="keyword">())<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">-&gt;</span><span class="default">current</span><span class="keyword">()))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">arrayIterator</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">-&gt;</span><span class="default">current</span><span class="keyword">(), </span><span class="default">0</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">code </span><span class="keyword">.= </span><span class="default">$arr</span><span class="keyword">-&gt;</span><span class="default">key</span><span class="keyword">() . </span><span class="string">" : " </span><span class="keyword">. </span><span class="default">$arr</span><span class="keyword">-&gt;</span><span class="default">current</span><span class="keyword">() . </span><span class="string">"\n"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arr</span><span class="keyword">-&gt;</span><span class="default">next</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">code </span><span class="keyword">.= </span><span class="string">')'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">getVal </span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">code</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">$arr </span><span class="keyword">= array(<br />
&nbsp;&nbsp;&nbsp; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'ok' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, array(</span><span class="default">9</span><span class="keyword">,</span><span class="default">7</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">,</span><span class="default">9</span><span class="keyword">,</span><span class="string">'a'</span><span class="keyword">,</span><span class="string">'b'</span><span class="keyword">=&gt;array(</span><span class="default">1</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">)),<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'error' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">, array(</span><span class="string">'h'</span><span class="keyword">,</span><span class="string">'u'</span><span class="keyword">,</span><span class="string">'o'</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; )<br />
&nbsp;&nbsp;&nbsp; , </span><span class="string">'array'<br />
</span><span class="keyword">);<br />
</span><span class="default">$pArray </span><span class="keyword">= new </span><span class="default">PrintArray</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">);<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$pArray</span><span class="keyword">-&gt;</span><span class="default">getVal</span><span class="keyword">());</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106231""></a>
  <div class="note">
   <strong class="user">Relakuyae</strong>
   <a href="#106231" class="date">19-Oct-2011 05:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Need a callback on an iterated value, but don't have PHP 5.4+?&nbsp; This makes is stupid easy:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">class </span><span class="default">ArrayCallbackIterator </span><span class="keyword">extends </span><span class="default">ArrayIterator </span><span class="keyword">{
<br />
&nbsp; private </span><span class="default">$callback</span><span class="keyword">;
<br />
&nbsp; public function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$callback</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">parent</span><span class="keyword">::</span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">callback </span><span class="keyword">= </span><span class="default">$callback</span><span class="keyword">;
<br />
&nbsp; }
<br />

<br />
&nbsp; public function </span><span class="default">current</span><span class="keyword">() {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">parent</span><span class="keyword">::</span><span class="default">current</span><span class="keyword">();
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">call_user_func</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">callback</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">);
<br />
&nbsp; }
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
You can use it pretty much exactly as the Array Iterator:
<br />

<br />
<span class="default">&lt;?php
<br />
$iterator1 </span><span class="keyword">= new </span><span class="default">ArrayCallbackIterator</span><span class="keyword">(</span><span class="default">$valueList</span><span class="keyword">, </span><span class="string">"callback_function"</span><span class="keyword">);
<br />
</span><span class="default">$iterator2 </span><span class="keyword">= new </span><span class="default">ArrayCallbackIterator</span><span class="keyword">(</span><span class="default">$valueList</span><span class="keyword">, array(</span><span class="default">$object</span><span class="keyword">, </span><span class="string">"callback_class_method"</span><span class="keyword">));
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101321""></a>
  <div class="note">
   <strong class="user">foobuilder at gmail dot com</strong>
   <a href="#101321" class="date">09-Dec-2010 11:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Unsetting all keys of an ArrayItem within foreach will always leave the second key: <br />
<br />
<span class="default">&lt;?php<br />
$items </span><span class="keyword">= new </span><span class="default">ArrayObject</span><span class="keyword">(</span><span class="default">range</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">9</span><span class="keyword">)); <br />
<br />
while (list(</span><span class="default">$k</span><span class="keyword">, </span><span class="default">$v</span><span class="keyword">) = </span><span class="default">each</span><span class="keyword">(</span><span class="default">$items</span><span class="keyword">)) {<br />
&nbsp;&nbsp;&nbsp; unset(</span><span class="default">$items</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">]); <br />
}<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$items</span><span class="keyword">); <br />
<br />
</span><span class="comment">//&nbsp; ArrayIterator Object<br />
//&nbsp; (<br />
//&nbsp; &nbsp; &nbsp; [storage:ArrayIterator:private] =&gt; Array<br />
//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (<br />
//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [1] =&gt; 1<br />
//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )<br />
//&nbsp; )<br />
</span><span class="default">?&gt;<br />
</span><br />
I'm not sure if this is a bug as unsetting keys within foreach is usually a bad idea to begin with (use while instead), but it's something to be aware of.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="91122""></a>
  <div class="note">
   <strong class="user">Sean Burlington</strong>
   <a href="#91122" class="date">26-May-2009 05:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
and to iterate recursively use the (sparsely documented)&nbsp; RecursiveArrayIterator<br />
<br />
<span class="default">&lt;?php<br />
<br />
$fruits </span><span class="keyword">= array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"apple" </span><span class="keyword">=&gt; </span><span class="string">"yummy"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"orange" </span><span class="keyword">=&gt; </span><span class="string">"ah ya, nice"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"grape" </span><span class="keyword">=&gt; </span><span class="string">"wow, I love it!"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"plum" </span><span class="keyword">=&gt; </span><span class="string">"nah, not me"<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">);<br />
<br />
</span><span class="default">$veg </span><span class="keyword">= array(</span><span class="string">"potato" </span><span class="keyword">=&gt; </span><span class="string">"chips"</span><span class="keyword">, </span><span class="string">"carrot" </span><span class="keyword">=&gt; </span><span class="string">"soup"</span><span class="keyword">);<br />
</span><span class="default">$grocery </span><span class="keyword">= array(</span><span class="default">$fruits</span><span class="keyword">, </span><span class="default">$veg</span><span class="keyword">);<br />
</span><span class="default">$obj </span><span class="keyword">= new </span><span class="default">ArrayObject</span><span class="keyword">( </span><span class="default">$grocery </span><span class="keyword">);<br />
<br />
</span><span class="default">$it </span><span class="keyword">= new </span><span class="default">RecursiveIteratorIterator</span><span class="keyword">( new </span><span class="default">RecursiveArrayIterator</span><span class="keyword">(</span><span class="default">$grocery</span><span class="keyword">));<br />
<br />
foreach (</span><span class="default">$it </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$val</span><span class="keyword">)<br />
echo </span><span class="default">$key</span><span class="keyword">.</span><span class="string">":"</span><span class="keyword">.</span><span class="default">$val</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Output<br />
--------<br />
apple:yummy<br />
orange:ah ya, nice<br />
grape:wow, I love it!<br />
plum:nah, not me<br />
potato:chips<br />
carrot:soup</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86935""></a>
  <div class="note">
   <strong class="user">Venelin Vulkov</strong>
   <a href="#86935" class="date">11-Nov-2008 03:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Another fine Iterator from php . You can use it especially when you have to iterate over objects<br />
<br />
<span class="default">&lt;?php<br />
$fruits </span><span class="keyword">= array(<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">"apple" </span><span class="keyword">=&gt; </span><span class="string">"yummy"</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">"orange" </span><span class="keyword">=&gt; </span><span class="string">"ah ya, nice"</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">"grape" </span><span class="keyword">=&gt; </span><span class="string">"wow, I love it!"</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">"plum" </span><span class="keyword">=&gt; </span><span class="string">"nah, not me"<br />
</span><span class="keyword">);<br />
</span><span class="default">$obj </span><span class="keyword">= new </span><span class="default">ArrayObject</span><span class="keyword">( </span><span class="default">$fruits </span><span class="keyword">);<br />
</span><span class="default">$it </span><span class="keyword">= </span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">getIterator</span><span class="keyword">();<br />
<br />
</span><span class="comment">// How many items are we iterating over?<br />
<br />
</span><span class="keyword">echo </span><span class="string">"Iterating over: " </span><span class="keyword">. </span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">count</span><span class="keyword">() . </span><span class="string">" values\n"</span><span class="keyword">;<br />
<br />
</span><span class="comment">// Iterate over the values in the ArrayObject:<br />
</span><span class="keyword">while( </span><span class="default">$it</span><span class="keyword">-&gt;</span><span class="default">valid</span><span class="keyword">() )<br />
{<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$it</span><span class="keyword">-&gt;</span><span class="default">key</span><span class="keyword">() . </span><span class="string">"=" </span><span class="keyword">. </span><span class="default">$it</span><span class="keyword">-&gt;</span><span class="default">current</span><span class="keyword">() . </span><span class="string">"\n"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$it</span><span class="keyword">-&gt;</span><span class="default">next</span><span class="keyword">();<br />
}<br />
<br />
</span><span class="comment">// The good thing here is that it can be iterated with foreach loop<br />
<br />
</span><span class="keyword">foreach (</span><span class="default">$it </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$val</span><span class="keyword">)<br />
echo </span><span class="default">$key</span><span class="keyword">.</span><span class="string">":"</span><span class="keyword">.</span><span class="default">$val</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">;<br />
<br />
</span><span class="comment">/* Outputs something like */<br />
<br />
</span><span class="default">Iterating over</span><span class="keyword">: </span><span class="default">4 values<br />
apple</span><span class="keyword">=</span><span class="default">yummy<br />
orange</span><span class="keyword">=</span><span class="default">ah ya</span><span class="keyword">, </span><span class="default">nice<br />
grape</span><span class="keyword">=</span><span class="default">wow</span><span class="keyword">, </span><span class="default">I love it</span><span class="keyword">!<br />
</span><span class="default">plum</span><span class="keyword">=</span><span class="default">nah</span><span class="keyword">, </span><span class="default">not me<br />
<br />
?&gt;<br />
</span><br />
Regards.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
