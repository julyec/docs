<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=UTF-8">
  <title>Close an ODBC connection</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.odbc-close-all.html">? odbc_close_all</a></li>
      <li style="float: right;"><a href="function.odbc-columnprivileges.html">odbc_columnprivileges ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.uodbc.html">ODBC 函数</a></li>
    <li>Close an ODBC connection</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.odbc-close" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">odbc_close</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">odbc_close</span> &mdash; <span class="dc-title">Close an ODBC connection</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.odbc-close-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>odbc_close</strong></span>(<span class="methodparam"><span class="type">resource</span> <code class="parameter">$odbc</code></span>): <span class="type"><span class="type void">void</span></span></div>

  <p class="para rdfs-comment">
   Closes down the connection to the database server.
  </p>
 </div>

 <div class="refsect1 parameters" id="refsect1-function.odbc-close-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">odbc</code></dt>

     <dd>

      <p class="para">ODBC 连接标识符，详见
<span class="function"><a href="function.odbc-connect.html" class="function">odbc_connect()</a></span>。</p>
     </dd>

    
   </dl>

  </p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.odbc-close-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   没有返回值。
  </p>
 </div>

 <div class="refsect1 notes" id="refsect1-function.odbc-close-notes">
  <h3 class="title">注释</h3>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <p class="para">
    This function will fail if there are open transactions on this
    connection. The connection will remain open in this case.
   </p>
  </p></blockquote>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="122547""></a>
  <div class="note">
   <strong class="user">alvaro at demogracia dot com</strong>
   <a href="#122547" class="date">26-Mar-2018 10:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
`odbc_close()` does not report success and some drivers (namely Microsoft Access) don't seem to close connections at first attempt. This is normally not an issue, unless you need to establish many connections within the script lifetime.<br />
<br />
You can use the fact that resource type changes (e.g. from "odbc link" to "Unknown") as a trick to figure out whether connection was successfully closed (and eventually retry):<br />
<br />
<span class="default">&lt;?php<br />
$type </span><span class="keyword">= </span><span class="default">get_resource_type</span><span class="keyword">(</span><span class="default">$conn</span><span class="keyword">);<br />
</span><span class="default">$wait_until </span><span class="keyword">= </span><span class="default">time</span><span class="keyword">() + </span><span class="default">3</span><span class="keyword">;<br />
do {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">odbc_close</span><span class="keyword">(</span><span class="default">$conexion_odbc</span><span class="keyword">);<br />
} while (</span><span class="default">get_resource_type</span><span class="keyword">(</span><span class="default">$conn</span><span class="keyword">)===</span><span class="default">$type </span><span class="keyword">&amp;&amp; </span><span class="default">time</span><span class="keyword">()&lt;</span><span class="default">$wait_until</span><span class="keyword">);</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
