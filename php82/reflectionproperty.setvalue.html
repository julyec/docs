<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=UTF-8">
  <title>Set property value</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="reflectionproperty.setaccessible.html">? ReflectionProperty::setAccessible</a></li>
      <li style="float: right;"><a href="reflectionproperty.tostring.html">ReflectionProperty::__toString ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="class.reflectionproperty.html">ReflectionProperty</a></li>
    <li>Set property value</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="reflectionproperty.setvalue" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">ReflectionProperty::setValue</h1>
  <p class="verinfo">(PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">ReflectionProperty::setValue</span> &mdash; <span class="dc-title">Set property value</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-reflectionproperty.setvalue-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="methodname"><strong>ReflectionProperty::setValue</strong></span>(<span class="methodparam"><span class="type">object</span> <code class="parameter">$object</code></span>, <span class="methodparam"><span class="type"><a href="language.types.declarations.html#language.types.declarations.mixed" class="type mixed">mixed</a></span> <code class="parameter">$value</code></span>): <span class="type"><span class="type void">void</span></span></div>

  <div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><strong>ReflectionProperty::setValue</strong></span>(<span class="methodparam"><span class="type"><a href="language.types.declarations.html#language.types.declarations.mixed" class="type mixed">mixed</a></span> <code class="parameter">$value</code></span>): <span class="type"><span class="type void">void</span></span></div>

  <p class="para rdfs-comment">
   Sets (changes) the property&#039;s value.
  </p>
 </div>

 
 <div class="refsect1 parameters" id="refsect1-reflectionproperty.setvalue-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">object</code></dt>

     <dd>

      <p class="para">
       If the property is non-static an object must be provided to change
       the property on. If the property is static this parameter is left
       out and only <code class="parameter">value</code> needs to be provided.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">value</code></dt>

     <dd>

      <p class="para">
       The new value.
      </p>
     </dd>

    
   </dl>

  </p>
 </div>

 
 <div class="refsect1 returnvalues" id="refsect1-reflectionproperty.setvalue-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   没有返回值。
  </p>
 </div>

 
 <div class="refsect1 changelog" id="refsect1-reflectionproperty.setvalue-changelog">
  <h3 class="title">更新日志</h3>
  <table class="doctable informaltable">
   
    <thead>
     <tr>
      <th>版本</th>
      <th>说明</th>
     </tr>

    </thead>

    <tbody class="tbody">
     <tr>
      <td>8.1.0</td>
      <td>
       Private and protected properties can be accessed by
       <span class="methodname"><strong>ReflectionProperty::setValue()</strong></span> right away.
       Previously, they needed to be made accessible by calling
       <span class="methodname"><a href="reflectionproperty.setaccessible.html" class="methodname">ReflectionProperty::setAccessible()</a></span>; otherwise
       a <span class="classname"><a href="class.reflectionexception.html" class="classname">ReflectionException</a></span> was thrown.
      </td>
     </tr>

    </tbody>
   
  </table>

 </div>


 <div class="refsect1 examples" id="refsect1-reflectionproperty.setvalue-examples">
  <h3 class="title">示例</h3>
  <p class="para">
   <div class="example" id="">
    <p><strong>Example #1 <span class="methodname"><strong>ReflectionProperty::setValue()</strong></span> example</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">class </span><span style="color: #0000BB">Foo </span><span style="color: #007700">{<br />    public static </span><span style="color: #0000BB">$staticProperty</span><span style="color: #007700">;<br />    <br />    public </span><span style="color: #0000BB">$property</span><span style="color: #007700">;<br />    protected </span><span style="color: #0000BB">$privateProperty</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">$reflectionClass </span><span style="color: #007700">= new </span><span style="color: #0000BB">ReflectionClass</span><span style="color: #007700">(</span><span style="color: #DD0000">'Foo'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$reflectionClass</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getProperty</span><span style="color: #007700">(</span><span style="color: #DD0000">'staticProperty'</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">setValue</span><span style="color: #007700">(</span><span style="color: #DD0000">'foo'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">Foo</span><span style="color: #007700">::</span><span style="color: #0000BB">$staticProperty</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$foo </span><span style="color: #007700">= new </span><span style="color: #0000BB">Foo</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$reflectionClass</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getProperty</span><span style="color: #007700">(</span><span style="color: #DD0000">'property'</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">setValue</span><span style="color: #007700">(</span><span style="color: #0000BB">$foo</span><span style="color: #007700">, </span><span style="color: #DD0000">'bar'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$foo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">property</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$reflectionProperty </span><span style="color: #007700">= </span><span style="color: #0000BB">$reflectionClass</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getProperty</span><span style="color: #007700">(</span><span style="color: #DD0000">'privateProperty'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$reflectionProperty</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAccessible</span><span style="color: #007700">(</span><span style="color: #0000BB">true</span><span style="color: #007700">); </span><span style="color: #FF8000">// only required prior to PHP 8.1.0<br /></span><span style="color: #0000BB">$reflectionProperty</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setValue</span><span style="color: #007700">(</span><span style="color: #0000BB">$foo</span><span style="color: #007700">, </span><span style="color: #DD0000">'foobar'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$reflectionProperty</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getValue</span><span style="color: #007700">(</span><span style="color: #0000BB">$foo</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上示例会输出：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
string(3) &quot;foo&quot;
string(3) &quot;bar&quot;
string(6) &quot;foobar&quot;
</pre></div>
    </div>
   </div>
  </p>
 </div>

 
 <div class="refsect1 seealso" id="refsect1-reflectionproperty.setvalue-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="methodname"><a href="reflectionproperty.getvalue.html" class="methodname" rel="rdfs-seeAlso">ReflectionProperty::getValue()</a> - Gets value</span></li>
    <li class="member"><span class="methodname"><a href="reflectionproperty.setaccessible.html" class="methodname" rel="rdfs-seeAlso">ReflectionProperty::setAccessible()</a> - Set property accessibility</span></li>
    <li class="member"><span class="methodname"><a href="reflectionclass.setstaticpropertyvalue.html" class="methodname" rel="rdfs-seeAlso">ReflectionClass::setStaticPropertyValue()</a> - 设置静态属性的值</span></li>
   </ul>
  </p>
 </div>

 
</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="128024""></a>
  <div class="note">
   <strong class="user">p stewart imperial ac uk</strong>
   <a href="#128024" class="date">16-Dec-2022 03:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
setValue can be used for readonly properties, but only if the property has not yet been initialised:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">class </span><span class="default">Person<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; private readonly </span><span class="default">int $age</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">__construct</span><span class="keyword">(array </span><span class="default">$props </span><span class="keyword">= []) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (isset(</span><span class="default">$props</span><span class="keyword">[</span><span class="string">'age'</span><span class="keyword">])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">age </span><span class="keyword">= (int)</span><span class="default">$props</span><span class="keyword">[</span><span class="string">'age'</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">$personWithKnownAge </span><span class="keyword">= new </span><span class="default">Person</span><span class="keyword">([</span><span class="string">'age' </span><span class="keyword">=&gt; </span><span class="default">50</span><span class="keyword">]);<br />
<br />
</span><span class="default">$reflection </span><span class="keyword">= new </span><span class="default">ReflectionProperty</span><span class="keyword">(</span><span class="default">$personWithKnownAge</span><span class="keyword">, </span><span class="string">'age'</span><span class="keyword">);<br />
</span><span class="default">$reflection</span><span class="keyword">-&gt;</span><span class="default">setValue</span><span class="keyword">(</span><span class="default">$personWithKnownAge</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">); </span><span class="comment">// Fails - Age is already initialised, value cannot be changed.<br />
<br />
</span><span class="default">$personWithUnknownAge </span><span class="keyword">= new </span><span class="default">Person</span><span class="keyword">();<br />
<br />
</span><span class="default">$reflection </span><span class="keyword">= new </span><span class="default">ReflectionProperty</span><span class="keyword">(</span><span class="default">$personWithUnknownAge</span><span class="keyword">, </span><span class="string">'age'</span><span class="keyword">);<br />
</span><span class="default">$reflection</span><span class="keyword">-&gt;</span><span class="default">setValue</span><span class="keyword">(</span><span class="default">$personWithUnknownAge</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">); </span><span class="comment">// Succeeeds - Age is not yet initialised, value can be set.<br />
</span><span class="default">?&gt;<br />
</span><br />
This can be useful for situations where it is desirable to initialise properties from outside of the defining class, for example an ORM setup where the parent class is responsible for setting properties on a model subclass instance.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="127707""></a>
  <div class="note">
   <strong class="user">temirkhan.nasukhov</strong>
   <a href="#127707" class="date">10-Oct-2022 05:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Keep in mind that setValue won't work for readonly properties.&nbsp; <br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">class </span><span class="default">Person<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">__construct</span><span class="keyword">(private readonly </span><span class="default">int $age</span><span class="keyword">) {}<br />
}<br />
<br />
</span><span class="default">$someOldPerson </span><span class="keyword">= new </span><span class="default">Person</span><span class="keyword">(</span><span class="default">80</span><span class="keyword">);<br />
<br />
</span><span class="default">$reflection </span><span class="keyword">= new </span><span class="default">ReflectionProperty</span><span class="keyword">(</span><span class="default">$someOldPerson</span><span class="keyword">, </span><span class="string">'age'</span><span class="keyword">);<br />
</span><span class="default">$reflection</span><span class="keyword">-&gt;</span><span class="default">setValue</span><span class="keyword">(</span><span class="default">$someOldPerson</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">); </span><span class="comment">// Fatal error: Uncaught Error: Cannot modify readonly property Person::$age</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="104550""></a>
  <div class="note">
   <strong class="user">me at ircmaxell dot om</strong>
   <a href="#104550" class="date">22-Jun-2011 09:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You can use ReflectionProperty::setValue to set the value on static properties as well as regular instance properties.&nbsp; Simply pass null in place of the instance:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">Foo </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; protected static </span><span class="default">$bar </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; public static function </span><span class="default">sayBar</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="default">self</span><span class="keyword">::</span><span class="default">$bar</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">$r </span><span class="keyword">= new </span><span class="default">ReflectionProperty</span><span class="keyword">(</span><span class="string">'Foo'</span><span class="keyword">, </span><span class="string">'bar'</span><span class="keyword">);<br />
</span><span class="default">$r</span><span class="keyword">-&gt;</span><span class="default">setAccessible</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br />
</span><span class="default">$r</span><span class="keyword">-&gt;</span><span class="default">setValue</span><span class="keyword">(</span><span class="default">null</span><span class="keyword">, </span><span class="string">'foo'</span><span class="keyword">);<br />
<br />
</span><span class="default">Foo</span><span class="keyword">::</span><span class="default">sayBar</span><span class="keyword">(); </span><span class="comment">// "foo"<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
