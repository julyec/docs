<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=UTF-8">
  <title>The SoapHeader class</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="soapfault.tostring.html">? SoapFault::__toString</a></li>
      <li style="float: right;"><a href="soapheader.construct.html">SoapHeader::__construct ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="book.soap.html">SOAP</a></li>
    <li>The SoapHeader class</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="class.soapheader" class="reference">

 <h1 class="title">The SoapHeader class</h1>
 

 <div class="partintro"><p class="verinfo">(PHP 5, PHP 7, PHP 8)</p>


  <div class="section" id="soapheader.intro">
   <h2 class="title">简介</h2>
   <p class="para">
    Represents a SOAP header.
   </p>
  </div>


  <div class="section" id="soapheader.synopsis">
   <h2 class="title">类摘要</h2>


   <div class="classsynopsis">
    <span class="ooclass">
     <strong class="classname"></strong>
    </span>

    <div class="classsynopsisinfo">
     <span class="ooclass">
      <span class="modifier">class</span> <strong class="classname">SoapHeader</strong>
     </span>
     {</div>

    <div class="classsynopsisinfo classsynopsisinfo_comment">/* 属性 */</div>
    <div class="fieldsynopsis">
     <span class="modifier">public</span>
     <span class="type">string</span>
      <var class="varname"><a href="class.soapheader.html#soapheader.props.namespace">$<var class="varname">namespace</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="type">string</span>
      <var class="varname"><a href="class.soapheader.html#soapheader.props.name">$<var class="varname">name</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="type"><a href="language.types.declarations.html#language.types.declarations.mixed" class="type mixed">mixed</a></span>
      <var class="varname"><a href="class.soapheader.html#soapheader.props.data">$<var class="varname">data</var></a></var><span class="initializer"> = null</span>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="type">bool</span>
      <var class="varname"><a href="class.soapheader.html#soapheader.props.mustunderstand">$<var class="varname">mustUnderstand</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="type"><span class="type">string</span>|<span class="type">int</span>|<span class="type">null</span></span>
      <var class="varname"><a href="class.soapheader.html#soapheader.props.actor">$<var class="varname">actor</var></a></var>;</div>


    <div class="classsynopsisinfo classsynopsisinfo_comment">/* 方法 */</div>
    <div class="constructorsynopsis dc-description">
   <span class="modifier">public</span> <span class="methodname"><a href="soapheader.construct.html" class="methodname">__construct</a></span>(<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">string</span> <code class="parameter">$namespace</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">string</span> <code class="parameter">$name</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type"><a href="language.types.declarations.html#language.types.declarations.mixed" class="type mixed">mixed</a></span> <code class="parameter">$data</code><span class="initializer"> = ?</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">bool</span> <code class="parameter">$mustunderstand</code><span class="initializer"> = ?</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">string</span> <code class="parameter">$actor</code><span class="initializer"> = ?</span></span><br>)</div>

   }</div>

  </div>

  <div class="section" id="soapheader.props">
   <h2 class="title">属性</h2>
   <dl>
    
     <dt id="soapheader.props.actor"><var class="varname">actor</var></dt>

     <dd>

      <p class="para">
      </p>
     </dd>

    
    
     <dt id="soapheader.props.data"><var class="varname">data</var></dt>

     <dd>

      <p class="para">
      </p>
     </dd>

    
    
     <dt id="soapheader.props.mustunderstand"><var class="varname">mustUnderstand</var></dt>

     <dd>

      <p class="para">
      </p>
     </dd>

    
    
     <dt id="soapheader.props.name"><var class="varname">name</var></dt>

     <dd>

      <p class="para">
      </p>
     </dd>

    
    
     <dt id="soapheader.props.namespace"><var class="varname">namespace</var></dt>

     <dd>

      <p class="para">
      </p>
     </dd>

    
   </dl>

  </div>
 </div>

 







<h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="soapheader.construct.html">SoapHeader::__construct</a> &mdash; SoapHeader constructor</li></ul>
</div>
<div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="128630""></a>
  <div class="note">
   <strong class="user">mixmaster1413 at gmail dot com</strong>
   <a href="#128630" class="date">22-Jun-2023 02:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Something I came across that I feel should be noted here is if you come across the error "cannot be processed at the receiver, due to an addressfilter mismatch at the endpointdispatcher. check that the sender and receiver's endpointaddresses agree." and you are absolutely sure your protocols and the service URL matches, send 'To' SoapHeader. <br />
<br />
$soapHeaders = array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; new \SoapHeader('<a href="http://www.w3.org/2005/08/addressing" rel="nofollow" target="_blank">http://www.w3.org/2005/08/addressing</a>', 'Action', 'your-action', true),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; new \SoapHeader('<a href="http://www.w3.org/2005/08/addressing" rel="nofollow" target="_blank">http://www.w3.org/2005/08/addressing</a>', 'To', 'your-service-endpoint-url')<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; );<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $soapClient-&gt;__setSoapHeaders($soapHeaders);</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="123757""></a>
  <div class="note">
   <strong class="user">ericvaneldik at gmail dot com</strong>
   <a href="#123757" class="date">08-Apr-2019 07:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to create an soap header wihtout namespace and without an item key value setup, you can use SoapVar<br />
<br />
To get this:<br />
&lt;SOAP-ENV:Header&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;IdentityHeader&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; &lt;SessionID&gt;123456789&lt;/SessionID&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;/IdentityHeader&gt;<br />
&nbsp; &lt;/SOAP-ENV:Header&gt;<br />
<br />
you can use this php code:<br />
<span class="default">&lt;?php<br />
$headerVar </span><span class="keyword">= new </span><span class="default">SoapVar</span><span class="keyword">(</span><span class="string">'&lt;IdentityHeader&gt;&lt;SessionID&gt;123456789&lt;/SessionID&gt;&lt;/IdentityHeader&gt;'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">XSD_ANYXML</span><span class="keyword">);<br />
</span><span class="default">$header </span><span class="keyword">= new </span><span class="default">SoapHeader</span><span class="keyword">(</span><span class="string">'<a href="http://tempuri.org/" rel="nofollow" target="_blank">http://tempuri.org/</a>'</span><span class="keyword">,</span><span class="string">'RequestParams'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$headerVar</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="118986""></a>
  <div class="note">
   <strong class="user">abdul dot rashid at paytabs dot co</strong>
   <a href="#118986" class="date">13-Mar-2016 10:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just to add some note regarding his john at jtresponse dot co dot uk <br />
<br />
In PHP you can try following code to avoid the &lt;item&gt;&lt;key/&gt;<br />
<br />
$Auth = new stdClass();<br />
$Auth-&gt;SystemId = "DATA";<br />
$Auth-&gt;UserName = "USERNAME";<br />
$Auth-&gt;Password = "PASSWORD";<br />
<br />
$header = new SoapHeader('NAMESPACE','Auth',$Auth,false);<br />
$soapClient-&gt;__setSoapHeaders($header);<br />
<br />
&nbsp; &lt;SOAP-ENV:Header&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;ns1:Auth&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; &lt;ns1:SystemId&gt;DATA&lt;/ns1:SystemId&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; &lt;ns1:UserName&gt;USERNAME&lt;/ns1:UserName&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; &lt;ns1:Password&gt;PASSWORD&lt;/ns1:Password&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;/ns1:Auth&gt;<br />
&nbsp; &lt;/SOAP-ENV:Header&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="117594""></a>
  <div class="note">
   <strong class="user">voroks at logics dot net dot au</strong>
   <a href="#117594" class="date">03-Jul-2015 12:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Example by john at jtresponse dot co dot uk does miss one important point: to be able to add attributes they must be mentioned in WSDL. If they not exist in WSDL they WILL NOT appear as attributes but rather &lt;item&gt;&lt;key/&gt;&lt;value/&gt;&lt;/item&gt; elements.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107889""></a>
  <div class="note">
   <strong class="user">john at jtresponse dot co dot uk</strong>
   <a href="#107889" class="date">13-Mar-2012 01:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
None of the examples really do it for me.<br />
Note: you should NOT need to hard-code any XML.<br />
<br />
Here is an example of creating a nested header and including a parameter.<br />
<br />
$client = new SoapClient(WSDL,array());<br />
<br />
$auth = array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 'UserName'=&gt;'USERNAME',<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 'Password'=&gt;'PASSWORD',<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 'SystemId'=&gt; array('_'=&gt;'DATA','Param'=&gt;'PARAM'),<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; );<br />
&nbsp; $header = new SoapHeader('NAMESPACE','Auth',$auth,false);<br />
&nbsp; $client-&gt;__setSoapHeaders($header);<br />
<br />
Gives the following header XML:<br />
<br />
&nbsp; &lt;SOAP-ENV:Header&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;ns1:Auth&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; &lt;ns1:SystemId Param="PARAM"&gt;DATA&lt;/ns1:SystemId&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; &lt;ns1:UserName&gt;USERNAME&lt;/ns1:UserName&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; &lt;ns1:Password&gt;PASSWORD&lt;/ns1:Password&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;/ns1:Auth&gt;<br />
&nbsp; &lt;/SOAP-ENV:Header&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
