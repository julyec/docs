<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=UTF-8">
  <title>获取浏览器具有的功能</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.exit.html">? exit</a></li>
      <li style="float: right;"><a href="function.halt-compiler.html">__halt_compiler ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.misc.html">杂项 函数</a></li>
    <li>获取浏览器具有的功能</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.get-browser" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">get_browser</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">get_browser</span> &mdash; <span class="dc-title">获取浏览器具有的功能</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.get-browser-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>get_browser</strong></span>(<span class="methodparam"><span class="type">?</span><span class="type"><span class="type">string</span><span class="type"></span></span> <code class="parameter">$user_agent</code><span class="initializer"> = <strong><code>null</code></strong></span></span>, <span class="methodparam"><span class="type">bool</span> <code class="parameter">$return_array</code><span class="initializer"> = <strong><code>false</code></strong></span></span>): <span class="type"><span class="type">object</span>|<span class="type">array</span>|<span class="type"><span class="type false">false</span></span></span></div>

  <p class="para rdfs-comment">
   通过查找 <var class="filename">browscap.ini</var> 文件中的浏览器信息，尝试检测用户的浏览器所具有的功能。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.get-browser-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">user_agent</code></dt>

     <dd>

      <p class="para">
       要分析的用户代理。默认使用HTTP头中User-Agent的值，不过，你可以通过传递该参数改变User-Agent。(比如查找另一个浏览器的信息) 
      </p>
      <p class="para">
       你可以传递一个 <strong><code>null</code></strong> 来忽略该参数。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">return_array</code></dt>

     <dd>

      <p class="para">
       如果设置为 <strong><code>true</code></strong>，该函数会返回一个 <span class="type">array</span>，而不是 <span class="type">object</span>。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.get-browser-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   信息会以包含一系列数据的数组或者对象返回。例如：浏览器的主版本号、次版本号和ID字符串；框架、JavaScript、cookies等功能是否支持 <strong><code>true</code></strong>/<strong><code>false</code></strong> 的值。
  </p>
  <p class="para">
   <code class="literal">cookies</code> 的值仅意味着浏览器是否具有接收cookies的功能，不代表用户是否已允许启用cookies。
   测试的唯一办法，只有通过 <span class="function"><a href="function.setcookie.html" class="function">setcookie()</a></span> 设置一个cookie，刷新页面并检测该cookie的值。
  </p>
  <p class="para">
    当无法检索到信息时返回 <strong><code>false</code></strong>，比如未设置 <var class="filename">php.ini</var> 中的
    <a href="misc.configuration.html#ini.browscap" class="link">browscap</a> 配置项。
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.get-browser-examples">
  <h3 class="title">示例</h3>
  <p class="para">
   <div class="example" id="">
    <p><strong>Example #1 列出所有用户浏览器的信息</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">echo </span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">'HTTP_USER_AGENT'</span><span style="color: #007700">] . </span><span style="color: #DD0000">"\n\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$browser </span><span style="color: #007700">= </span><span style="color: #0000BB">get_browser</span><span style="color: #007700">(</span><span style="color: #0000BB">null</span><span style="color: #007700">, </span><span style="color: #0000BB">true</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$browser</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上示例的输出类似于：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7) Gecko/20040803 Firefox/0.9.3

Array
(
    [browser_name_regex] =&gt; ^mozilla/5\.0 (windows; .; windows nt 5\.1; .*rv:.*) gecko/.* firefox/0\.9.*$
    [browser_name_pattern] =&gt; Mozilla/5.0 (Windows; ?; Windows NT 5.1; *rv:*) Gecko/* Firefox/0.9*
    [parent] =&gt; Firefox 0.9
    [platform] =&gt; WinXP
    [browser] =&gt; Firefox
    [version] =&gt; 0.9
    [majorver] =&gt; 0
    [minorver] =&gt; 9
    [cssversion] =&gt; 2
    [frames] =&gt; 1
    [iframes] =&gt; 1
    [tables] =&gt; 1
    [cookies] =&gt; 1
    [backgroundsounds] =&gt;
    [vbscript] =&gt;
    [javascript] =&gt; 1
    [javaapplets] =&gt; 1
    [activexcontrols] =&gt;
    [cdf] =&gt;
    [aol] =&gt;
    [beta] =&gt; 1
    [win16] =&gt;
    [crawler] =&gt;
    [stripper] =&gt;
    [wap] =&gt;
    [netclr] =&gt;
)
</pre></div>
    </div>
   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.get-browser-notes">
  <h3 class="title">注释</h3>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <p class="para">
    为了能让该函数运作，在 <var class="filename">php.ini</var> 中配置的 <a href="misc.configuration.html#ini.browscap" class="link">browscap</a> 必须指向 <var class="filename">browscap.ini</var> 文件的正确位置。
   </p>
   <p class="para">
    <var class="filename">browscap.ini</var> 并未内置在PHP中，不过你可以在这里找到最新的 <a href="http://browscap.org/" class="link external" title="Link : http://browscap.org/">&raquo;&nbsp;php_browscap.ini</a>。
   </p>
   <p class="para">
    <var class="filename">browscap.ini</var> 包含的诸多浏览器信息依赖于用户更新该数据库。该文件的格式不言自明。
   </p>
  </p></blockquote>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="126797""></a>
  <div class="note">
   <strong class="user">tom at tgibbons dot com</strong>
   <a href="#126797" class="date">24-Jan-2022 02:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
PHP cron script to automatically update browscap.ini. It compares version numbers to determine if update is needed:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp; &nbsp; &nbsp; $eol</span><span class="keyword">=</span><span class="string">"\r\n"</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//set end of line - cron<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$fileurl </span><span class="keyword">= </span><span class="string">"https://browscap.org/stream?q=PHP_BrowsCapINI"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$verurl </span><span class="keyword">= </span><span class="string">"https://browscap.org/version-number"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$file </span><span class="keyword">= </span><span class="string">"/path/to/browscap.ini"</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="comment">//Find current version<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$fp </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">, </span><span class="string">"r+"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; while ((</span><span class="default">$line </span><span class="keyword">= </span><span class="default">stream_get_line</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">, </span><span class="default">1024 </span><span class="keyword">* </span><span class="default">1024</span><span class="keyword">, </span><span class="string">"\n"</span><span class="keyword">)) !== </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$line</span><span class="keyword">,</span><span class="string">"Version="</span><span class="keyword">)===</span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; list(</span><span class="default">$temp</span><span class="keyword">, </span><span class="default">$curver</span><span class="keyword">) = </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"="</span><span class="keyword">,</span><span class="default">$line</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; echo(</span><span class="string">"Current browscap.ini file version: " </span><span class="keyword">. </span><span class="default">$curver</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="comment">//Get browscap.org current version<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$newver </span><span class="keyword">= </span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="default">$verurl</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; echo(</span><span class="default">$eol </span><span class="keyword">. </span><span class="string">"New browscap.ini file version: " </span><span class="keyword">. </span><span class="default">$newver</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="comment">//Update if new version available<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="keyword">if(</span><span class="default">$newver </span><span class="keyword">&gt; </span><span class="default">$curver</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">file_put_contents</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">, </span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="default">$fileurl</span><span class="keyword">))) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo(</span><span class="default">$eol </span><span class="keyword">. </span><span class="string">"browscap.ini has been updated!"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo(</span><span class="default">$eol </span><span class="keyword">. </span><span class="string">"browscap.ini update failed!"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo(</span><span class="default">$eol </span><span class="keyword">. </span><span class="string">"browscap.ini is up to date!"</span><span class="keyword">); <br />
&nbsp;&nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; echo(</span><span class="default">$eol </span><span class="keyword">. </span><span class="string">"End of Cron job." </span><span class="keyword">. </span><span class="default">$eol</span><span class="string">");<br />
?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="123473""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#123473" class="date">28-Dec-2018 12:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Follow up to Francesco R's post from 2016.<br />
<br />
His function works for most human traffic; added a few lines to cover the most common bot traffic. Also fixed issue with function failing to detect strings at position 0 due to strpos behavior.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// Function written and tested December, 2018<br />
</span><span class="keyword">function </span><span class="default">get_browser_name</span><span class="keyword">(</span><span class="default">$user_agent</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Make case insensitive.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$t </span><span class="keyword">= </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$user_agent</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// If the string *starts* with the string, strpos returns 0 (i.e., FALSE). Do a ghetto hack and start with a space.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // "[strpos()] may return Boolean FALSE, but may also return a non-Boolean value which evaluates to FALSE."<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //&nbsp; &nbsp;&nbsp; <a href="http://php.net/manual/en/function.strpos.php" rel="nofollow" target="_blank">http://php.net/manual/en/function.strpos.php</a><br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$t </span><span class="keyword">= </span><span class="string">" " </span><span class="keyword">. </span><span class="default">$t</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Humans / Regular Users&nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if&nbsp; &nbsp;&nbsp; (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$t</span><span class="keyword">, </span><span class="string">'opera'&nbsp; &nbsp;&nbsp; </span><span class="keyword">) || </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$t</span><span class="keyword">, </span><span class="string">'opr/'</span><span class="keyword">)&nbsp; &nbsp;&nbsp; ) return </span><span class="string">'Opera'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; elseif (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$t</span><span class="keyword">, </span><span class="string">'edge'&nbsp; &nbsp; &nbsp; </span><span class="keyword">)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ) return </span><span class="string">'Edge'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; elseif (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$t</span><span class="keyword">, </span><span class="string">'chrome'&nbsp; &nbsp; </span><span class="keyword">)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ) return </span><span class="string">'Chrome'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; elseif (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$t</span><span class="keyword">, </span><span class="string">'safari'&nbsp; &nbsp; </span><span class="keyword">)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ) return </span><span class="string">'Safari'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; elseif (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$t</span><span class="keyword">, </span><span class="string">'firefox'&nbsp;&nbsp; </span><span class="keyword">)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ) return </span><span class="string">'Firefox'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; elseif (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$t</span><span class="keyword">, </span><span class="string">'msie'&nbsp; &nbsp; &nbsp; </span><span class="keyword">) || </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$t</span><span class="keyword">, </span><span class="string">'trident/7'</span><span class="keyword">)) return </span><span class="string">'Internet Explorer'</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Search Engines&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">elseif (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$t</span><span class="keyword">, </span><span class="string">'google'&nbsp; &nbsp; </span><span class="keyword">)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ) return </span><span class="string">'[Bot] Googlebot'&nbsp;&nbsp; </span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; elseif (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$t</span><span class="keyword">, </span><span class="string">'bing'&nbsp; &nbsp; &nbsp; </span><span class="keyword">)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ) return </span><span class="string">'[Bot] Bingbot'&nbsp; &nbsp;&nbsp; </span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; elseif (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$t</span><span class="keyword">, </span><span class="string">'slurp'&nbsp; &nbsp;&nbsp; </span><span class="keyword">)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ) return </span><span class="string">'[Bot] Yahoo! Slurp'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; elseif (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$t</span><span class="keyword">, </span><span class="string">'duckduckgo'</span><span class="keyword">)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ) return </span><span class="string">'[Bot] DuckDuckBot' </span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; elseif (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$t</span><span class="keyword">, </span><span class="string">'baidu'&nbsp; &nbsp;&nbsp; </span><span class="keyword">)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ) return </span><span class="string">'[Bot] Baidu'&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; elseif (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$t</span><span class="keyword">, </span><span class="string">'yandex'&nbsp; &nbsp; </span><span class="keyword">)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ) return </span><span class="string">'[Bot] Yandex'&nbsp; &nbsp; &nbsp; </span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; elseif (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$t</span><span class="keyword">, </span><span class="string">'sogou'&nbsp; &nbsp;&nbsp; </span><span class="keyword">)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ) return </span><span class="string">'[Bot] Sogou'&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; elseif (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$t</span><span class="keyword">, </span><span class="string">'exabot'&nbsp; &nbsp; </span><span class="keyword">)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ) return </span><span class="string">'[Bot] Exabot'&nbsp; &nbsp; &nbsp; </span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; elseif (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$t</span><span class="keyword">, </span><span class="string">'msn'&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ) return </span><span class="string">'[Bot] MSN'&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Common Tools and Bots<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">elseif (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$t</span><span class="keyword">, </span><span class="string">'mj12bot'&nbsp;&nbsp; </span><span class="keyword">)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ) return </span><span class="string">'[Bot] Majestic'&nbsp; &nbsp;&nbsp; </span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; elseif (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$t</span><span class="keyword">, </span><span class="string">'ahrefs'&nbsp; &nbsp; </span><span class="keyword">)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ) return </span><span class="string">'[Bot] Ahrefs'&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; elseif (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$t</span><span class="keyword">, </span><span class="string">'semrush'&nbsp;&nbsp; </span><span class="keyword">)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ) return </span><span class="string">'[Bot] SEMRush'&nbsp; &nbsp; &nbsp; </span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; elseif (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$t</span><span class="keyword">, </span><span class="string">'rogerbot'&nbsp; </span><span class="keyword">) || </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$t</span><span class="keyword">, </span><span class="string">'dotbot'</span><span class="keyword">)&nbsp;&nbsp; ) return </span><span class="string">'[Bot] Moz or OpenSiteExplorer'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; elseif (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$t</span><span class="keyword">, </span><span class="string">'frog'&nbsp; &nbsp; &nbsp; </span><span class="keyword">) || </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$t</span><span class="keyword">, </span><span class="string">'screaming'</span><span class="keyword">)) return </span><span class="string">'[Bot] Screaming Frog'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Miscellaneous <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">elseif (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$t</span><span class="keyword">, </span><span class="string">'facebook'&nbsp; </span><span class="keyword">)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ) return </span><span class="string">'[Bot] Facebook'&nbsp; &nbsp;&nbsp; </span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; elseif (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$t</span><span class="keyword">, </span><span class="string">'pinterest' </span><span class="keyword">)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ) return </span><span class="string">'[Bot] Pinterest'&nbsp; &nbsp; </span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Check for strings commonly used in bot user agents&nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">elseif (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$t</span><span class="keyword">, </span><span class="string">'crawler' </span><span class="keyword">) || </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$t</span><span class="keyword">, </span><span class="string">'api'&nbsp; &nbsp; </span><span class="keyword">) ||<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$t</span><span class="keyword">, </span><span class="string">'spider'&nbsp; </span><span class="keyword">) || </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$t</span><span class="keyword">, </span><span class="string">'http'&nbsp;&nbsp; </span><span class="keyword">) ||<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$t</span><span class="keyword">, </span><span class="string">'bot'&nbsp; &nbsp;&nbsp; </span><span class="keyword">) || </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$t</span><span class="keyword">, </span><span class="string">'archive'</span><span class="keyword">) || <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$t</span><span class="keyword">, </span><span class="string">'info'&nbsp; &nbsp; </span><span class="keyword">) || </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$t</span><span class="keyword">, </span><span class="string">'data'&nbsp;&nbsp; </span><span class="keyword">)&nbsp; &nbsp; ) return </span><span class="string">'[Bot] Other'&nbsp;&nbsp; </span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="string">'Other (Unknown)'</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span>Post with more depth here:<br />
https://www.256kilobytes.com/content/show/1922/how-to-parse-a-user-agent-in-php-with-minimal-effort</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="122670""></a>
  <div class="note">
   <strong class="user">Jeff Williams</strong>
   <a href="#122670" class="date">26-Apr-2018 06:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To automatically update your browscap.ini file on linux servers, you can use this simple shell script:<br />
<br />
wget -O /etc/browscap.ini "<a href="http://browscap.org/stream?q=Full_PHP_BrowsCapINI" rel="nofollow" target="_blank">http://browscap.org/stream?q=Full_PHP_BrowsCapINI</a>"<br />
chmod 664 /etc/browscap.ini<br />
<br />
You can put it in the weekly cron job folder usually located in /etc/cron.weekly just don't forget to make the script executable (chmod 775 scriptname).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="122181""></a>
  <div class="note">
   <strong class="user">Konstantin Rozinov</strong>
   <a href="#122181" class="date">26-Dec-2017 05:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Since browser detection can be tricky and very slow, I compared a few packages.<br />
<br />
<a href="http://thadafinser.github.io/UserAgentParserComparison/v5/index.html" rel="nofollow" target="_blank">http://thadafinser.github.io/UserAgentParserComparison/v5/index.html</a><br />
<br />
https://github.com/sinergi/php-browser-detector<br />
https://github.com/WhichBrowser/Parser-PHP<br />
https://github.com/piwik/device-detector<br />
<a href="http://php.net/manual/en/function.get-browser.php" rel="nofollow" target="_blank">http://php.net/manual/en/function.get-browser.php</a><br />
<br />
Here are the results:<br />
<br />
User Agent: <br />
Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.84 Safari/537.36<br />
<br />
Sinergi Package<br />
---------------<br />
Chrome 63.0.3239.84 on Windows 10.0<br />
Took 0.0022480487823486 seconds.<br />
---------------<br />
<br />
WhichBrowser Package<br />
---------------<br />
Chrome 63 on Windows 10<br />
Took 0.021045207977295 seconds.<br />
---------------<br />
<br />
Piwik Package<br />
---------------<br />
Chrome 63.0 on Windows 10<br />
Took 0.079447031021118 seconds.<br />
---------------<br />
<br />
get_browser Package<br />
---------------<br />
Chrome 63.0 on Windows 10<br />
Took 0.09611701965332 seconds.<br />
---------------<br />
<br />
User Agent: <br />
Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:57.0) Gecko/20100101 Firefox/57.0<br />
<br />
Sinergi Package<br />
---------------<br />
Firefox 57.0 on Windows 10.0<br />
Took 0.0023159980773926 seconds.<br />
---------------<br />
<br />
WhichBrowser Package<br />
---------------<br />
Firefox 57.0 on Windows 10<br />
Took 0.019663095474243 seconds.<br />
---------------<br />
<br />
Piwik Package<br />
---------------<br />
Firefox 57.0 on Windows 10<br />
Took 0.079678058624268 seconds.<br />
---------------<br />
<br />
get_browser Package<br />
---------------<br />
Firefox 57.0 on Windows 10<br />
Took 0.02236008644104 seconds.<br />
---------------<br />
<br />
The consistent winner (by speed, not necessarily coverage) by far is:<br />
https://github.com/sinergi/php-browser-detector</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="122177""></a>
  <div class="note">
   <strong class="user">krozinov at gmail dot com</strong>
   <a href="#122177" class="date">26-Dec-2017 04:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As of PHP 7.0.15 and 7.1.1 and higher, get_browser() now performs much better - reportedly 100x faster.&nbsp; The Changelog, bug description, and solution are here:<br />
<br />
<a href="http://php.net/ChangeLog-7.php (search for get_browser(" rel="nofollow" target="_blank">http://php.net/ChangeLog-7.php (search for get_browser(</a>))<br />
https://bugs.php.net/bug.php?id=70490<br />
https://github.com/php/php-src/pull/2242</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="120489""></a>
  <div class="note">
   <strong class="user">The Digital Orchard</strong>
   <a href="#120489" class="date">20-Jan-2017 09:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Good news! The latest version of PHP has a performance fix for this function. It's reportedly now 100x faster. See the ChangeLog for specifics.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="119858""></a>
  <div class="note">
   <strong class="user">zed</strong>
   <a href="#119858" class="date">07-Sep-2016 10:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To complete Francesco R, I added the version of the navigator :<br />
<br />
function getNavigateur($user_agent)<br />
&nbsp;&nbsp;&nbsp; {<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(empty($user_agent)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return array('nav' =&gt; 'NC', 'name' =&gt; 'NC', 'version' =&gt; 'NC');<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $content_nav['name'] = 'Unknown';<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (strpos($user_agent, 'Opera') || strpos($user_agent, 'OPR/')) {<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $content_nav['name'] = 'Opera';<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (strpos($user_agent, 'OPR/')) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $content_nav['reel_name'] = 'OPR/';<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $content_nav['reel_name'] = 'Opera';<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; elseif (strpos($user_agent, 'Edge')) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $content_nav['name'] = $content_nav['reel_name'] = 'Edge';<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; elseif (strpos($user_agent, 'Chrome')) $content_nav['name'] = $content_nav['reel_name'] = 'Chrome';<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; elseif (strpos($user_agent, 'Safari')) $content_nav['name'] = $content_nav['reel_name'] = 'Safari';<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; elseif (strpos($user_agent, 'Firefox')) $content_nav['name'] = $content_nav['reel_name'] = 'Firefox';<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; elseif (strpos($user_agent, 'MSIE') || strpos($user_agent, 'Trident/7') || strpos($user_agent, 'Trident/7.0; rv:')) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $content_nav['name'] = 'Internet Explorer';<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (strpos($user_agent, 'Trident/7.0; rv:')) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $content_nav['reel_name'] = 'Trident/7.0; rv:';<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } elseif (strpos($user_agent, 'Trident/7')) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $content_nav['reel_name'] = 'Trident/7';<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $content_nav['reel_name'] = 'Opera';<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $pattern = '#' . $content_nav['reel_name'] . '\/*([0-9\.]*)#';<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $matches = array();<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(preg_match($pattern, $user_agent, $matches)) {<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $content_nav['version'] = $matches[1];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return $content_nav;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return array('name' =&gt; $content_nav['name'], 'version' =&gt; 'Inconnu');<br />
&nbsp;&nbsp;&nbsp; }</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="119332""></a>
  <div class="note">
   <strong class="user">Francesco R</strong>
   <a href="#119332" class="date">14-May-2016 01:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you ONLY need a very fast and simple function to detect the browser name (update to May 2016):<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">get_browser_name</span><span class="keyword">(</span><span class="default">$user_agent</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$user_agent</span><span class="keyword">, </span><span class="string">'Opera'</span><span class="keyword">) || </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$user_agent</span><span class="keyword">, </span><span class="string">'OPR/'</span><span class="keyword">)) return </span><span class="string">'Opera'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; elseif (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$user_agent</span><span class="keyword">, </span><span class="string">'Edge'</span><span class="keyword">)) return </span><span class="string">'Edge'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; elseif (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$user_agent</span><span class="keyword">, </span><span class="string">'Chrome'</span><span class="keyword">)) return </span><span class="string">'Chrome'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; elseif (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$user_agent</span><span class="keyword">, </span><span class="string">'Safari'</span><span class="keyword">)) return </span><span class="string">'Safari'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; elseif (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$user_agent</span><span class="keyword">, </span><span class="string">'Firefox'</span><span class="keyword">)) return </span><span class="string">'Firefox'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; elseif (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$user_agent</span><span class="keyword">, </span><span class="string">'MSIE'</span><span class="keyword">) || </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$user_agent</span><span class="keyword">, </span><span class="string">'Trident/7'</span><span class="keyword">)) return </span><span class="string">'Internet Explorer'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="string">'Other'</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">// Usage:<br />
<br />
</span><span class="keyword">echo </span><span class="default">get_browser_name</span><span class="keyword">(</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'HTTP_USER_AGENT'</span><span class="keyword">]);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
This function also resolves the trouble with Edge (that contains in the user agent the string "Safari" and "Chrome"), with Chrome (contains the string "Safari") and IE11 (that do not contains 'MSIE' like all other IE versions).<br />
<br />
Note that "strpos" is the fastest function to check a string (far better than "preg_match") and Opera + Edge + Chrome + Safari + Firefox + Internet Explorer are the most used browsers today (over 97%).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="118632""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#118632" class="date">12-Jan-2016 02:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function is too slow for todays needs.<br />
<br />
If you need browser / device / operating system detection, please try one of listed packages here: https://github.com/ThaDafinser/UserAgentParser</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="118628""></a>
  <div class="note">
   <strong class="user">p2 at eduardoruiz dot es</strong>
   <a href="#118628" class="date">12-Jan-2016 12:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
BE CAREFUL WITH THIS FUNCTION!!<br />
This function uses a lot of CPU and RAM on the whole server resources.<br />
Perhaps if you use this function a few times then no problem, but NOT if you use at any page request, or once per session.<br />
<br />
Also, this function doesn't work correctly and may returns wrong values, wildcards or empty, so it's not very useful for web statistics.<br />
<br />
The best way is to use preg_match for detect browser/platform.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="118503""></a>
  <div class="note">
   <strong class="user">jeremie dot legrand at komori-chambon dot fr</strong>
   <a href="#118503" class="date">16-Dec-2015 04:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be careful if you use the "Full" Browscap INI file in your php.ini config: I wondered why each Apache thread took 350MB RAM on my server until I changed the "Full" version by the "Lite" one (45MB to 0.7MB)<br />
<br />
Now, each thread takes only 16MB...<br />
So if it is enough for you, use the Lite version!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="117481""></a>
  <div class="note">
   <strong class="user">shashank</strong>
   <a href="#117481" class="date">17-Jun-2015 06:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As ruudrp had given the code <a href="http://php.net/manual/en/function.get-browser.php#101125, I have added code for Internet Explorer 11" rel="nofollow" target="_blank">http://php.net/manual/en/function.get-browser.php#101125, I have added code for Internet Explorer 11</a><br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">getBrowser</span><span class="keyword">() <br />
{ <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$u_agent </span><span class="keyword">= </span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'HTTP_USER_AGENT'</span><span class="keyword">]; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$bname </span><span class="keyword">= </span><span class="string">'Unknown'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$platform </span><span class="keyword">= </span><span class="string">'Unknown'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$version</span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//First get the platform?<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/linux/i'</span><span class="keyword">, </span><span class="default">$u_agent</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$platform </span><span class="keyword">= </span><span class="string">'linux'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; elseif (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/macintosh|mac os x/i'</span><span class="keyword">, </span><span class="default">$u_agent</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$platform </span><span class="keyword">= </span><span class="string">'mac'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; elseif (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/windows|win32/i'</span><span class="keyword">, </span><span class="default">$u_agent</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$platform </span><span class="keyword">= </span><span class="string">'windows'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Next get the name of the useragent yes seperately and for good reason<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/MSIE/i'</span><span class="keyword">,</span><span class="default">$u_agent</span><span class="keyword">) &amp;&amp; !</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/Opera/i'</span><span class="keyword">,</span><span class="default">$u_agent</span><span class="keyword">)) <br />
&nbsp;&nbsp;&nbsp; { <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$bname </span><span class="keyword">= </span><span class="string">'Internet Explorer'</span><span class="keyword">; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ub </span><span class="keyword">= </span><span class="string">"MSIE"</span><span class="keyword">; <br />
&nbsp;&nbsp;&nbsp; } <br />
&nbsp;&nbsp;&nbsp; elseif(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/Trident/i'</span><span class="keyword">,</span><span class="default">$u_agent</span><span class="keyword">)) <br />
&nbsp;&nbsp;&nbsp; { </span><span class="comment">// this condition is for IE11<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$bname </span><span class="keyword">= </span><span class="string">'Internet Explorer'</span><span class="keyword">; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ub </span><span class="keyword">= </span><span class="string">"rv"</span><span class="keyword">; <br />
&nbsp;&nbsp;&nbsp; } <br />
&nbsp;&nbsp;&nbsp; elseif(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/Firefox/i'</span><span class="keyword">,</span><span class="default">$u_agent</span><span class="keyword">)) <br />
&nbsp;&nbsp;&nbsp; { <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$bname </span><span class="keyword">= </span><span class="string">'Mozilla Firefox'</span><span class="keyword">; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ub </span><span class="keyword">= </span><span class="string">"Firefox"</span><span class="keyword">; <br />
&nbsp;&nbsp;&nbsp; } <br />
&nbsp;&nbsp;&nbsp; elseif(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/Chrome/i'</span><span class="keyword">,</span><span class="default">$u_agent</span><span class="keyword">)) <br />
&nbsp;&nbsp;&nbsp; { <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$bname </span><span class="keyword">= </span><span class="string">'Google Chrome'</span><span class="keyword">; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ub </span><span class="keyword">= </span><span class="string">"Chrome"</span><span class="keyword">; <br />
&nbsp;&nbsp;&nbsp; } <br />
&nbsp;&nbsp;&nbsp; elseif(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/Safari/i'</span><span class="keyword">,</span><span class="default">$u_agent</span><span class="keyword">)) <br />
&nbsp;&nbsp;&nbsp; { <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$bname </span><span class="keyword">= </span><span class="string">'Apple Safari'</span><span class="keyword">; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ub </span><span class="keyword">= </span><span class="string">"Safari"</span><span class="keyword">; <br />
&nbsp;&nbsp;&nbsp; } <br />
&nbsp;&nbsp;&nbsp; elseif(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/Opera/i'</span><span class="keyword">,</span><span class="default">$u_agent</span><span class="keyword">)) <br />
&nbsp;&nbsp;&nbsp; { <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$bname </span><span class="keyword">= </span><span class="string">'Opera'</span><span class="keyword">; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ub </span><span class="keyword">= </span><span class="string">"Opera"</span><span class="keyword">; <br />
&nbsp;&nbsp;&nbsp; } <br />
&nbsp;&nbsp;&nbsp; elseif(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/Netscape/i'</span><span class="keyword">,</span><span class="default">$u_agent</span><span class="keyword">)) <br />
&nbsp;&nbsp;&nbsp; { <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$bname </span><span class="keyword">= </span><span class="string">'Netscape'</span><span class="keyword">; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ub </span><span class="keyword">= </span><span class="string">"Netscape"</span><span class="keyword">; <br />
&nbsp;&nbsp;&nbsp; } <br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// finally get the correct version number<br />
&nbsp;&nbsp;&nbsp; // Added "|:"<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$known </span><span class="keyword">= array(</span><span class="string">'Version'</span><span class="keyword">, </span><span class="default">$ub</span><span class="keyword">, </span><span class="string">'other'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pattern </span><span class="keyword">= </span><span class="string">'#(?&lt;browser&gt;' </span><span class="keyword">. </span><span class="default">join</span><span class="keyword">(</span><span class="string">'|'</span><span class="keyword">, </span><span class="default">$known</span><span class="keyword">) .<br />
&nbsp;&nbsp; &nbsp; </span><span class="string">')[/|: ]+(?&lt;version&gt;[0-9.|a-zA-Z.]*)#'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if (!</span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">$u_agent</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// we have no matching number just continue<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">}<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// see how many we have<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$matches</span><span class="keyword">[</span><span class="string">'browser'</span><span class="keyword">]);<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$i </span><span class="keyword">!= </span><span class="default">1</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//we will have two since we are not using 'other' argument yet<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //see if version is before or after the name<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">strripos</span><span class="keyword">(</span><span class="default">$u_agent</span><span class="keyword">,</span><span class="string">"Version"</span><span class="keyword">) &lt; </span><span class="default">strripos</span><span class="keyword">(</span><span class="default">$u_agent</span><span class="keyword">,</span><span class="default">$ub</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$version</span><span class="keyword">= </span><span class="default">$matches</span><span class="keyword">[</span><span class="string">'version'</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$version</span><span class="keyword">= </span><span class="default">$matches</span><span class="keyword">[</span><span class="string">'version'</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$version</span><span class="keyword">= </span><span class="default">$matches</span><span class="keyword">[</span><span class="string">'version'</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// check if we have a number<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$version</span><span class="keyword">==</span><span class="default">null </span><span class="keyword">|| </span><span class="default">$version</span><span class="keyword">==</span><span class="string">""</span><span class="keyword">) {</span><span class="default">$version</span><span class="keyword">=</span><span class="string">"?"</span><span class="keyword">;}<br />
<br />
&nbsp;&nbsp;&nbsp; return array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'userAgent' </span><span class="keyword">=&gt; </span><span class="default">$u_agent</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'name'&nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="default">$bname</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'version'&nbsp;&nbsp; </span><span class="keyword">=&gt; </span><span class="default">$version</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'platform'&nbsp; </span><span class="keyword">=&gt; </span><span class="default">$platform</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'pattern'&nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="default">$pattern<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">);<br />
} <br />
<br />
</span><span class="comment">// now try it<br />
</span><span class="default">$ua</span><span class="keyword">=</span><span class="default">getBrowser</span><span class="keyword">();<br />
</span><span class="default">$yourbrowser</span><span class="keyword">= </span><span class="string">"Your browser: " </span><span class="keyword">. </span><span class="default">$ua</span><span class="keyword">[</span><span class="string">'name'</span><span class="keyword">] . </span><span class="string">" " </span><span class="keyword">. </span><span class="default">$ua</span><span class="keyword">[</span><span class="string">'version'</span><span class="keyword">] . </span><span class="string">" on " </span><span class="keyword">.</span><span class="default">$ua</span><span class="keyword">[</span><span class="string">'platform'</span><span class="keyword">] . </span><span class="string">" reports: &lt;br &gt;" </span><span class="keyword">. </span><span class="default">$ua</span><span class="keyword">[</span><span class="string">'userAgent'</span><span class="keyword">];<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$yourbrowser</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="115073""></a>
  <div class="note">
   <strong class="user">tim at digicol dot de</strong>
   <a href="#115073" class="date">22-May-2014 01:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be aware that loading php_browscap.ini via the browscap php.ini setting may consume a non-trivial amount of memory. Current versions are several MB in size (even the "lite" one) and can eat tens of MB of RAM in each PHP process. This happens even if you never call get_browser() since php_browscap.ini is loaded when PHP is starting up.<br />
<br />
Make sure to leave the browscap php.ini setting empty if you don't use get_browser() - maybe you only call it only from PHP Web pages, but not from PHP CLI code.<br />
<br />
I'd recommend comparing your processes' memory consumption with and without php_browscap.ini being loaded. If necesseray, consider creating your own stripped-down copy of php_browscap.ini with just the browsers that are important to you.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="104848""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#104848" class="date">11-Jul-2011 06:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For those of you using this function to target MSIE, a better idea maybe to use MSIE specific conditional comments. More info: &lt;<a href="http://msdn.microsoft.com/en-us/library/ms537512%28VS.85%29.aspx&gt;. " rel="nofollow" target="_blank">http://msdn.microsoft.com/en-us/library/ms537512%28VS.85%29.aspx&gt;. </a>
<br />

<br />
For example to indicate your disregard for users of MSIE 6 or earlier:
<br />

<br />
&lt;!--[if lt IE 7]&gt;It appears that you are using a &lt;em&gt;very&lt;/em&gt; old version of MS Internet Explorer (MSIE). If you seriously want to continue to use MSIE, at least &lt;a href="<a href="http://www.microsoft.com/windows/internet-explorer/" rel="nofollow" target="_blank">http://www.microsoft.com/windows/internet-explorer/</a>"&gt;upgrade&lt;/a&gt;.&lt;![endif]--&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101125""></a>
  <div class="note">
   <strong class="user">ruudrp at live dot nl</strong>
   <a href="#101125" class="date">28-Nov-2010 03:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To my surprise I found that none of the get_browser alternatives output the correct name / version combination that I was looking for using Opera or Chrome. They either give the wrong name eg Safari when in fact it should be Chrome and if the ua string includes a version number as with the latest versions of Chrome and Opera the wrong number is reported. So I took bits and pieces from the various examples and combined them and added a check for version. <br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">getBrowser</span><span class="keyword">() <br />
{ <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$u_agent </span><span class="keyword">= </span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'HTTP_USER_AGENT'</span><span class="keyword">]; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$bname </span><span class="keyword">= </span><span class="string">'Unknown'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$platform </span><span class="keyword">= </span><span class="string">'Unknown'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$version</span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//First get the platform?<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/linux/i'</span><span class="keyword">, </span><span class="default">$u_agent</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$platform </span><span class="keyword">= </span><span class="string">'linux'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; elseif (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/macintosh|mac os x/i'</span><span class="keyword">, </span><span class="default">$u_agent</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$platform </span><span class="keyword">= </span><span class="string">'mac'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; elseif (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/windows|win32/i'</span><span class="keyword">, </span><span class="default">$u_agent</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$platform </span><span class="keyword">= </span><span class="string">'windows'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Next get the name of the useragent yes seperately and for good reason<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/MSIE/i'</span><span class="keyword">,</span><span class="default">$u_agent</span><span class="keyword">) &amp;&amp; !</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/Opera/i'</span><span class="keyword">,</span><span class="default">$u_agent</span><span class="keyword">)) <br />
&nbsp;&nbsp;&nbsp; { <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$bname </span><span class="keyword">= </span><span class="string">'Internet Explorer'</span><span class="keyword">; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ub </span><span class="keyword">= </span><span class="string">"MSIE"</span><span class="keyword">; <br />
&nbsp;&nbsp;&nbsp; } <br />
&nbsp;&nbsp;&nbsp; elseif(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/Firefox/i'</span><span class="keyword">,</span><span class="default">$u_agent</span><span class="keyword">)) <br />
&nbsp;&nbsp;&nbsp; { <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$bname </span><span class="keyword">= </span><span class="string">'Mozilla Firefox'</span><span class="keyword">; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ub </span><span class="keyword">= </span><span class="string">"Firefox"</span><span class="keyword">; <br />
&nbsp;&nbsp;&nbsp; } <br />
&nbsp;&nbsp;&nbsp; elseif(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/Chrome/i'</span><span class="keyword">,</span><span class="default">$u_agent</span><span class="keyword">)) <br />
&nbsp;&nbsp;&nbsp; { <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$bname </span><span class="keyword">= </span><span class="string">'Google Chrome'</span><span class="keyword">; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ub </span><span class="keyword">= </span><span class="string">"Chrome"</span><span class="keyword">; <br />
&nbsp;&nbsp;&nbsp; } <br />
&nbsp;&nbsp;&nbsp; elseif(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/Safari/i'</span><span class="keyword">,</span><span class="default">$u_agent</span><span class="keyword">)) <br />
&nbsp;&nbsp;&nbsp; { <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$bname </span><span class="keyword">= </span><span class="string">'Apple Safari'</span><span class="keyword">; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ub </span><span class="keyword">= </span><span class="string">"Safari"</span><span class="keyword">; <br />
&nbsp;&nbsp;&nbsp; } <br />
&nbsp;&nbsp;&nbsp; elseif(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/Opera/i'</span><span class="keyword">,</span><span class="default">$u_agent</span><span class="keyword">)) <br />
&nbsp;&nbsp;&nbsp; { <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$bname </span><span class="keyword">= </span><span class="string">'Opera'</span><span class="keyword">; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ub </span><span class="keyword">= </span><span class="string">"Opera"</span><span class="keyword">; <br />
&nbsp;&nbsp;&nbsp; } <br />
&nbsp;&nbsp;&nbsp; elseif(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/Netscape/i'</span><span class="keyword">,</span><span class="default">$u_agent</span><span class="keyword">)) <br />
&nbsp;&nbsp;&nbsp; { <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$bname </span><span class="keyword">= </span><span class="string">'Netscape'</span><span class="keyword">; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ub </span><span class="keyword">= </span><span class="string">"Netscape"</span><span class="keyword">; <br />
&nbsp;&nbsp;&nbsp; } <br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// finally get the correct version number<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$known </span><span class="keyword">= array(</span><span class="string">'Version'</span><span class="keyword">, </span><span class="default">$ub</span><span class="keyword">, </span><span class="string">'other'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pattern </span><span class="keyword">= </span><span class="string">'#(?&lt;browser&gt;' </span><span class="keyword">. </span><span class="default">join</span><span class="keyword">(</span><span class="string">'|'</span><span class="keyword">, </span><span class="default">$known</span><span class="keyword">) .<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">')[/ ]+(?&lt;version&gt;[0-9.|a-zA-Z.]*)#'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if (!</span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">$u_agent</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// we have no matching number just continue<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// see how many we have<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$matches</span><span class="keyword">[</span><span class="string">'browser'</span><span class="keyword">]);<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$i </span><span class="keyword">!= </span><span class="default">1</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//we will have two since we are not using 'other' argument yet<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //see if version is before or after the name<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">strripos</span><span class="keyword">(</span><span class="default">$u_agent</span><span class="keyword">,</span><span class="string">"Version"</span><span class="keyword">) &lt; </span><span class="default">strripos</span><span class="keyword">(</span><span class="default">$u_agent</span><span class="keyword">,</span><span class="default">$ub</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$version</span><span class="keyword">= </span><span class="default">$matches</span><span class="keyword">[</span><span class="string">'version'</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$version</span><span class="keyword">= </span><span class="default">$matches</span><span class="keyword">[</span><span class="string">'version'</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$version</span><span class="keyword">= </span><span class="default">$matches</span><span class="keyword">[</span><span class="string">'version'</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// check if we have a number<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$version</span><span class="keyword">==</span><span class="default">null </span><span class="keyword">|| </span><span class="default">$version</span><span class="keyword">==</span><span class="string">""</span><span class="keyword">) {</span><span class="default">$version</span><span class="keyword">=</span><span class="string">"?"</span><span class="keyword">;}<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'userAgent' </span><span class="keyword">=&gt; </span><span class="default">$u_agent</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'name'&nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="default">$bname</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'version'&nbsp;&nbsp; </span><span class="keyword">=&gt; </span><span class="default">$version</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'platform'&nbsp; </span><span class="keyword">=&gt; </span><span class="default">$platform</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'pattern'&nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="default">$pattern<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">);<br />
} <br />
<br />
</span><span class="comment">// now try it<br />
</span><span class="default">$ua</span><span class="keyword">=</span><span class="default">getBrowser</span><span class="keyword">();<br />
</span><span class="default">$yourbrowser</span><span class="keyword">= </span><span class="string">"Your browser: " </span><span class="keyword">. </span><span class="default">$ua</span><span class="keyword">[</span><span class="string">'name'</span><span class="keyword">] . </span><span class="string">" " </span><span class="keyword">. </span><span class="default">$ua</span><span class="keyword">[</span><span class="string">'version'</span><span class="keyword">] . </span><span class="string">" on " </span><span class="keyword">.</span><span class="default">$ua</span><span class="keyword">[</span><span class="string">'platform'</span><span class="keyword">] . </span><span class="string">" reports: &lt;br &gt;" </span><span class="keyword">. </span><span class="default">$ua</span><span class="keyword">[</span><span class="string">'userAgent'</span><span class="keyword">];<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$yourbrowser</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76614""></a>
  <div class="note">
   <strong class="user">mike at mike-griffiths dot co dot uk</strong>
   <a href="#76614" class="date">23-Jul-2007 02:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You should not rely on just this for cross-browser compatibility issues.&nbsp; Good practice would be to include HTML if-statements for IE stylesheets as well as dynamically checking the browser type.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="41008""></a>
  <div class="note">
   <strong class="user">max at phpexpert dot de</strong>
   <a href="#41008" class="date">26-Mar-2004 07:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be aware of the fact that this function shows what a specific browser might be able to show, but NOT what the user has turned on/off.<br />
<br />
So maybe this function tells you that the browser is abel to to javascript even when javascript is turned off by the user.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
