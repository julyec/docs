<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=UTF-8">
  <title>根据指定格式解析输入的字符</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.sprintf.html">? sprintf</a></li>
      <li style="float: right;"><a href="function.str-contains.html">str_contains ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.strings.html">字符串 函数</a></li>
    <li>根据指定格式解析输入的字符</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.sscanf" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">sscanf</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.0.1, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">sscanf</span> &mdash; <span class="dc-title">根据指定格式解析输入的字符</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.sscanf-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>sscanf</strong></span>(<span class="methodparam"><span class="type">string</span> <code class="parameter">$string</code></span>, <span class="methodparam"><span class="type">string</span> <code class="parameter">$format</code></span>, <span class="methodparam"><span class="type"><a href="language.types.declarations.html#language.types.declarations.mixed" class="type mixed">mixed</a></span> <code class="parameter reference">&...$vars</code></span>): <span class="type"><span class="type">array</span>|<span class="type">int</span>|<span class="type">null</span></span></div>

  <p class="para rdfs-comment">
   <span class="function"><strong>sscanf()</strong></span> 函数输入类似 <span class="function"><a href="function.printf.html" class="function">printf()</a></span>。<span class="function"><strong>sscanf()</strong></span>
   读取字符串 <code class="parameter">string</code>，然后根据指定格式 <code class="parameter">format</code> 解析。
  </p>
  <p class="para">
   指定的格式字符串中的任意空白匹配输入字符串的任意空白。也就是说即使是格式字符串中的一个制表符（<code class="literal">\t</code>）也能匹配输入字符串中的单个空白字符。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.sscanf-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">string</code></dt>

     <dd>

      <p class="para">
       将要被解析的 <span class="type">string</span>。
      </p>
     </dd>

    
    

     <dt>
<code class="parameter">format</code></dt>

     <dd>

      <p class="para">
       <code class="parameter">string</code> 的格式解释，在 <span class="function"><a href="function.sprintf.html" class="function">sprintf()</a></span> 的文档中进行了描述，但有以下区别：
       <ul class="simplelist">
        <li class="member">
         函数不支持区域设置。
        </li>
        <li class="member">
         不支持 <code class="literal">F</code>、<code class="literal">g</code>、<code class="literal">G</code> 和 <code class="literal">b</code>。
        </li>
        <li class="member">
         <code class="literal">D</code> 代表十进制数字。
        </li>
        <li class="member">
         <code class="literal">i</code> stands for integer with base detection.
        </li>
        <li class="member">
         <code class="literal">n</code> 代表到目前为止处理的字符数。
        </li>
        <li class="member">
         <code class="literal">s</code> 在任何空白字符处停止阅读。
        </li>
        <li class="member">
         <code class="literal">*</code> 代替 <code class="literal">argnum$</code> 禁止分配此转换规范。
        </li>
       </ul>
      </p>
     </dd>

    

    
     <dt>
<code class="parameter">vars</code></dt>

     <dd>

      <p class="para">
       可选参数将以引用方式传入，它们的值将被设置为解析值。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>

 
 <div class="refsect1 returnvalues" id="refsect1-function.sscanf-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   如果仅传入了两个参数给这个函数，解析后的值作为数组返回。否则，如果传入可选参数，函数将返回赋值数量。可选参数必须通过引用传递。
  </p>
  <p class="para">
   如果 <code class="parameter">format</code> 要求的子字符串比 <code class="parameter">string</code>
   内可用的子字符串多，则返回 <strong><code>null</code></strong>。
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.sscanf-examples">
  <h3 class="title">示例</h3>
  <p class="para">
   <div class="example" id="">
    <p><strong>Example #1 <span class="function"><strong>sscanf()</strong></span> 示例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">// 获取序列号<br /></span><span style="color: #007700">list(</span><span style="color: #0000BB">$serial</span><span style="color: #007700">) = </span><span style="color: #0000BB">sscanf</span><span style="color: #007700">(</span><span style="color: #DD0000">"SN/2350001"</span><span style="color: #007700">, </span><span style="color: #DD0000">"SN/%d"</span><span style="color: #007700">);<br /></span><span style="color: #FF8000">// 和生产日期<br /></span><span style="color: #0000BB">$mandate </span><span style="color: #007700">= </span><span style="color: #DD0000">"January 01 2000"</span><span style="color: #007700">;<br />list(</span><span style="color: #0000BB">$month</span><span style="color: #007700">, </span><span style="color: #0000BB">$day</span><span style="color: #007700">, </span><span style="color: #0000BB">$year</span><span style="color: #007700">) = </span><span style="color: #0000BB">sscanf</span><span style="color: #007700">(</span><span style="color: #0000BB">$mandate</span><span style="color: #007700">, </span><span style="color: #DD0000">"%s %d %d"</span><span style="color: #007700">);<br />echo </span><span style="color: #DD0000">"Item </span><span style="color: #0000BB">$serial</span><span style="color: #DD0000"> was manufactured on: </span><span style="color: #0000BB">$year</span><span style="color: #DD0000">-" </span><span style="color: #007700">. </span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #0000BB">$month</span><span style="color: #007700">, </span><span style="color: #0000BB">0</span><span style="color: #007700">, </span><span style="color: #0000BB">3</span><span style="color: #007700">) . </span><span style="color: #DD0000">"-</span><span style="color: #0000BB">$day</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   如果传递可选参数，函数将返回赋值的数量。
  </p>
  <p class="para">
   <div class="example" id="">
    <p><strong>Example #2 <span class="function"><strong>sscanf()</strong></span>&mdash;&mdash;使用可选参数</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">// 获取作者信息并生成 DocBook 实体<br /></span><span style="color: #0000BB">$auth </span><span style="color: #007700">= </span><span style="color: #DD0000">"24\tLewis Carroll"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$n </span><span style="color: #007700">= </span><span style="color: #0000BB">sscanf</span><span style="color: #007700">(</span><span style="color: #0000BB">$auth</span><span style="color: #007700">, </span><span style="color: #DD0000">"%d\t%s %s"</span><span style="color: #007700">, </span><span style="color: #0000BB">$id</span><span style="color: #007700">, </span><span style="color: #0000BB">$first</span><span style="color: #007700">, </span><span style="color: #0000BB">$last</span><span style="color: #007700">);<br />echo </span><span style="color: #DD0000">"&lt;author id='</span><span style="color: #0000BB">$id</span><span style="color: #DD0000">'&gt;<br />    &lt;firstname&gt;</span><span style="color: #0000BB">$first</span><span style="color: #DD0000">&lt;/firstname&gt;<br />    &lt;surname&gt;</span><span style="color: #0000BB">$last</span><span style="color: #DD0000">&lt;/surname&gt;<br />&lt;/author&gt;\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.sscanf-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.printf.html" class="function" rel="rdfs-seeAlso">printf()</a> - 输出格式化字符串</span></li>
    <li class="member"><span class="function"><a href="function.sprintf.html" class="function" rel="rdfs-seeAlso">sprintf()</a> - 返回格式化字符串</span></li>
    <li class="member"><span class="function"><a href="function.fprintf.html" class="function" rel="rdfs-seeAlso">fprintf()</a> - 将格式化后的字符串写入到流</span></li>
    <li class="member"><span class="function"><a href="function.vprintf.html" class="function" rel="rdfs-seeAlso">vprintf()</a> - 输出格式化字符串</span></li>
    <li class="member"><span class="function"><a href="function.vsprintf.html" class="function" rel="rdfs-seeAlso">vsprintf()</a> - 返回格式化字符串</span></li>
    <li class="member"><span class="function"><a href="function.vfprintf.html" class="function" rel="rdfs-seeAlso">vfprintf()</a> - 将格式化字符串写入流</span></li>
    <li class="member"><span class="function"><a href="function.fscanf.html" class="function" rel="rdfs-seeAlso">fscanf()</a> - 从文件中格式化输入</span></li>
    <li class="member"><span class="function"><a href="function.number-format.html" class="function" rel="rdfs-seeAlso">number_format()</a> - 以千位分隔符方式格式化一个数字</span></li>
    <li class="member"><span class="function"><a href="function.date.html" class="function" rel="rdfs-seeAlso">date()</a> - 格式化 Unix 时间戳</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="125224""></a>
  <div class="note">
   <strong class="user">Philo</strong>
   <a href="#125224" class="date">28-Jul-2020 10:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It should also be noted that when used with sscanf both x and X produce the same output (i.e. they are case-insensitive).<br />
<br />
<span class="default">&lt;?php<br />
var_dump</span><span class="keyword">(</span><span class="default">sscanf</span><span class="keyword">(</span><span class="string">"0xdead|0XDEAD"</span><span class="keyword">, </span><span class="string">"%X|%x"</span><span class="keyword">)); </span><span class="comment">// works</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="110143""></a>
  <div class="note">
   <strong class="user">Victor</strong>
   <a href="#110143" class="date">23-Sep-2012 10:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
One thing to note: unlike C/C++, a variable %n is assigned to will be counted in the return value.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106630""></a>
  <div class="note">
   <strong class="user">nmmm at nmmm dot nu</strong>
   <a href="#106630" class="date">23-Nov-2011 05:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is more like C/C++ example, but works on PHP too.
<br />

<br />
<span class="default">&lt;?php
<br />
$qs </span><span class="keyword">= </span><span class="string">"index.php?id=34&amp;name=john"</span><span class="keyword">;
<br />

<br />
</span><span class="default">print_r</span><span class="keyword">(&nbsp;&nbsp; </span><span class="default">sscanf</span><span class="keyword">(</span><span class="default">$qs</span><span class="keyword">, </span><span class="string">"%[^?]?%[^?]"</span><span class="keyword">)&nbsp;&nbsp; );
<br />

<br />
</span><span class="default">$qs </span><span class="keyword">= </span><span class="string">"id=34&amp;name=john"</span><span class="keyword">;
<br />

<br />
</span><span class="default">print_r</span><span class="keyword">(&nbsp;&nbsp; </span><span class="default">sscanf</span><span class="keyword">(</span><span class="default">$qs</span><span class="keyword">, </span><span class="string">"id=%[^&amp;]&amp;name=%[^&amp;]"</span><span class="keyword">)&nbsp;&nbsp; );
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86512""></a>
  <div class="note">
   <strong class="user">Igor Feghali</strong>
   <a href="#86512" class="date">22-Oct-2008 10:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
parses an input string with fixed field sizes that contains data with spaces:<br />
<br />
<span class="default">&lt;?php<br />
$result </span><span class="keyword">= </span><span class="default">sscanf</span><span class="keyword">(</span><span class="string">"&nbsp; Vendor: My Vendo Model: Super Model Foo&nbsp; Rev: 1234"</span><span class="keyword">,&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'&nbsp; Vendor: %8[ -~] Model: %16[ -~] Rev: %4c'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$vendor</span><span class="keyword">, </span><span class="default">$model</span><span class="keyword">, </span><span class="default">$rev</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
$vendor =&gt; My Vendo<br />
$model =&gt; Super Model Foo <br />
$rev =&gt; 1234</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85069""></a>
  <div class="note">
   <strong class="user">leg</strong>
   <a href="#85069" class="date">13-Aug-2008 09:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
@mikewillitsgmail.com:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$out </span><span class="keyword">= </span><span class="default">sscanf</span><span class="keyword">(</span><span class="string">'file_name.gif'</span><span class="keyword">, </span><span class="string">'file_%[^.].%s'</span><span class="keyword">, </span><span class="default">$fpart1</span><span class="keyword">, </span><span class="default">$fpart2</span><span class="keyword">);<br />
<br />
echo </span><span class="string">'&lt;pre&gt;'</span><span class="keyword">;<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$fpart1</span><span class="keyword">);<br />
echo </span><span class="string">'&lt;hr /&gt;'</span><span class="keyword">;<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$fpart2</span><span class="keyword">);<br />
echo </span><span class="string">'&lt;/pre&gt;'</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
output:<br />
<br />
name<br />
-<br />
gif<br />
<br />
The "^." part avoid the first searched string to be too greedy. But doesn't protect you against an "file_test.name.gif" input, with bad results!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81842""></a>
  <div class="note">
   <strong class="user">mikewillitsgmail.com</strong>
   <a href="#81842" class="date">15-Mar-2008 11:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
FYI - if you are trying to scan from a string which contains a filename with extension. For instance:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$out </span><span class="keyword">= </span><span class="default">sscanf</span><span class="keyword">(</span><span class="string">'file_name.gif'</span><span class="keyword">, </span><span class="string">'file_%s.%s'</span><span class="keyword">, </span><span class="default">$fpart1</span><span class="keyword">, </span><span class="default">$fpart2</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
The scanned string in the $fpart1 parameter turns out to be 'name.gif' and $fpart2 will be NULL.<br />
<br />
To get around this you can simply replace the "." with a space or another "white-space like" string sequence.<br />
<br />
I didn't see any other comments on regarding string literals which contain a '.' so I thought I'd mention it. The subtle characteristics of having "white-space delimited" content I think can be a source of usage contention. Obviously, another way to go is regular expressions in this instance, but for newer users this may be helpful.<br />
<br />
Just in case someone else spent 10 minutes of frustration like I did. This was seen on PHP Version 5.2.3-1ubuntu6.3.<br />
<br />
Searching the bug reports shows another users misunderstanding: <a href="http://bugs.php.net/bug.php?id=7793" rel="nofollow" target="_blank">http://bugs.php.net/bug.php?id=7793</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="68565""></a>
  <div class="note">
   <strong class="user">anonymouse</strong>
   <a href="#68565" class="date">01-Aug-2006 09:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I've seen several examples of people using brackets to define what look like regexp character classes. In my limited testing I don't think they are genuine character classes but they seem to be similar.<br />
<br />
My task was to use sscanf() to parse an array of strings with the format:<br />
<br />
number SPACE string_which_may_also_have_spaces<br />
<br />
The normal %s conversion command treats spaces as some kind of delimiter. So, you can get the strings if you know beforehand how many "words" there will be. But, my input was variable.<br />
<br />
Here's what I came up with: (note use of the dollar-sign 'end of string' hidden delimiter)<br />
<br />
sscanf($string_to_parse,'%d %[^$]s',$num,$text);<br />
<br />
This conversion command says "look for an integer, then a space, then any string up to the end of the string"</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="63526""></a>
  <div class="note">
   <strong class="user">skeltoac</strong>
   <a href="#63526" class="date">22-Mar-2006 08:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To parse a line from an Apache access log in common format:<br />
<br />
<span class="default">&lt;?php<br />
$log </span><span class="keyword">= array();<br />
</span><span class="default">$n </span><span class="keyword">= </span><span class="default">sscanf</span><span class="keyword">(</span><span class="default">trim</span><span class="keyword">(</span><span class="default">$line</span><span class="keyword">), </span><span class="string">'%s %s %s [%[^]]] "%s %s %[^"]" %d %s "%[^"]" "%[^"]"'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$log</span><span class="keyword">[</span><span class="string">'ip'</span><span class="keyword">],<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$log</span><span class="keyword">[</span><span class="string">'client'</span><span class="keyword">],<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$log</span><span class="keyword">[</span><span class="string">'user'</span><span class="keyword">],<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$log</span><span class="keyword">[</span><span class="string">'time'</span><span class="keyword">],<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$log</span><span class="keyword">[</span><span class="string">'method'</span><span class="keyword">],<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$log</span><span class="keyword">[</span><span class="string">'uri'</span><span class="keyword">],<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$log</span><span class="keyword">[</span><span class="string">'prot'</span><span class="keyword">],<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$log</span><span class="keyword">[</span><span class="string">'code'</span><span class="keyword">],<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$log</span><span class="keyword">[</span><span class="string">'bytes'</span><span class="keyword">],<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$log</span><span class="keyword">[</span><span class="string">'ref'</span><span class="keyword">],<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$log</span><span class="keyword">[</span><span class="string">'agent'</span><span class="keyword">]<br />
);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="56076""></a>
  <div class="note">
   <strong class="user">Brainiac361</strong>
   <a href="#56076" class="date">22-Aug-2005 01:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The %[^[]]-trick may seem to work, but it doesn't!<br />
<br />
What happens is that sscanf will simply match any characters but an opening square bracket (which is rather rare and that's why it might just seem to work).<br />
But even worse it will expect a ]-character next and continue to match anything.<br />
<br />
Now what you can do is make sscanf look for any character but a character that is really never used... a good choice is the linebreak "%[^\\n]", especially in combination with fscanf.<br />
<br />
What you can also do is copy and paste any unused ascii character like #001 or something.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54785""></a>
  <div class="note">
   <strong class="user">joshmckenneyATgmailDOT(0{</strong>
   <a href="#54785" class="date">14-Jul-2005 03:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
added country code (1) to phone number function:<br />
<br />
function formatPhone($phone) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; if (empty($phone)) return "";<br />
&nbsp;&nbsp; &nbsp; &nbsp; if (strlen($phone) == 7)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sscanf($phone, "%3s%4s", $prefix, $exchange);<br />
&nbsp;&nbsp; &nbsp; &nbsp; else if (strlen($phone) == 10)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sscanf($phone, "%3s%3s%4s", $area, $prefix, $exchange);<br />
&nbsp;&nbsp; &nbsp; &nbsp; else if (strlen($phone) &gt; 10)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(substr($phone,0,1)=='1') {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sscanf($phone, "%1s%3s%3s%4s", $country, $area, $prefix, $exchange);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sscanf($phone, "%3s%3s%4s%s", $area, $prefix, $exchange, $extension);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return "unknown phone format: $phone";<br />
&nbsp;&nbsp; &nbsp; &nbsp; $out = "";<br />
&nbsp;&nbsp; &nbsp; &nbsp; $out .= isset($country) ? $country.' ' : '';<br />
&nbsp;&nbsp; &nbsp; &nbsp; $out .= isset($area) ? '(' . $area . ') ' : '';<br />
&nbsp;&nbsp; &nbsp; &nbsp; $out .= $prefix . '-' . $exchange;<br />
&nbsp;&nbsp; &nbsp; &nbsp; $out .= isset($extension) ? ' x' . $extension : '';<br />
&nbsp;&nbsp; &nbsp; &nbsp; return $out;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="53890""></a>
  <div class="note">
   <strong class="user">Vincent Jansen</strong>
   <a href="#53890" class="date">16-Jun-2005 01:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you just wants filter out information between two parts of a string, i used the following, it works better for me then the sscanf function. <br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">scanstr</span><span class="keyword">(</span><span class="default">$zoekstr</span><span class="keyword">,</span><span class="default">$part1</span><span class="keyword">,</span><span class="default">$part2</span><span class="keyword">) {<br />
</span><span class="default">$firstpos</span><span class="keyword">=</span><span class="default">strpos </span><span class="keyword">(</span><span class="default">$zoekstr</span><span class="keyword">, </span><span class="default">$part1</span><span class="keyword">)+</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$part1</span><span class="keyword">);<br />
</span><span class="default">$lastpos</span><span class="keyword">=</span><span class="default">strpos </span><span class="keyword">(</span><span class="default">$zoekstr</span><span class="keyword">, </span><span class="default">$part2</span><span class="keyword">);<br />
</span><span class="default">$scanresult</span><span class="keyword">=</span><span class="default">substr </span><span class="keyword">(</span><span class="default">$zoekstr</span><span class="keyword">, </span><span class="default">$firstpos</span><span class="keyword">, </span><span class="default">$lastpos</span><span class="keyword">-</span><span class="default">$firstpos</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return(</span><span class="default">$scanresult</span><span class="keyword">);<br />
}<br />
echo </span><span class="default">scanstr </span><span class="keyword">(</span><span class="string">"var1=hello&amp;var2=test&amp;var3=more"</span><span class="keyword">,</span><span class="string">"var2="</span><span class="keyword">,</span><span class="string">"&amp;var3"</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="49713""></a>
  <div class="note">
   <strong class="user">codeslinger at compsalot dot com</strong>
   <a href="#49713" class="date">06-Feb-2005 06:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Security Note:<br />
<br />
Although it is a very powerful technique, keep in mind that it is easily deceived.<br />
<br />
Many successful exploits have been based on scanf attacks.&nbsp; It should not be used on untrusted input without a lot of additional validation.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="30636""></a>
  <div class="note">
   <strong class="user">marcus at synchromedia dot co dot uk</strong>
   <a href="#30636" class="date">24-Mar-2003 09:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In PHP &gt;= 4.3.0, if you use additional reference parameters, you will get this warning:<br />
<br />
PHP Warning:&nbsp; Call-time pass-by-reference has been deprecated - argument passed by value<br />
<br />
This clearly has the potential to cause unexpected consequences (vars left empty), and will break existing code. So don't do it! These docs need updating to say this too.<br />
<br />
The syntax:<br />
<br />
&nbsp;&nbsp;&nbsp; list($a, $b) = sscanf("hello world", "%s %s");<br />
<br />
will work as expected, and doesn't seem to cause any problems with Apache that I've noticed.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="26996""></a>
  <div class="note">
   <strong class="user">sbarnum.pointsystems@com</strong>
   <a href="#26996" class="date">19-Nov-2002 07:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
More fun with phones!&nbsp; This assumes that the phone number is 10 digits, with only numeric data, but it would be easy to check the length of the string first.<br />
<br />
function formatPhone($phone) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (empty($phone)) return "";<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; sscanf($phone, "%3d%3d%4d", $area, $prefix, $exchange);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $out = @$area ? "($area) " : "";<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $out .= $prefix . '-' . $exchange;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return $out;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="25190""></a>
  <div class="note">
   <strong class="user">jon at fuck dot org</strong>
   <a href="#25190" class="date">13-Sep-2002 11:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
this function is a great way to get integer rgb values from the html equivalent hex.<br />
<br />
list($r, $g, $b) = sscanf('00ccff', '%2x%2x%2x');</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="19430""></a>
  <div class="note">
   <strong class="user">elgabos at umail dot ucsb dot edu</strong>
   <a href="#19430" class="date">27-Feb-2002 03:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
After playing around with this for a while, I found that if you use %[^[]] instead of %s (since php has problems with spaces when using %s) it works nicely. <br />
<br />
For those that aren't familiar with regular expressions, %[^[]] basically matches anything that isn't nothing.<br />
<br />
Hope this helps. - Gabe</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="16041""></a>
  <div class="note">
   <strong class="user">narainsbrain at yahoo dot com</strong>
   <a href="#16041" class="date">14-Oct-2001 03:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
apparently, sscanf always splits at spaces, even if spaces are not specified in the format. consider this script:
<br />

<br />
<span class="default">&lt;?php
<br />
$str </span><span class="keyword">= </span><span class="string">"This is a\tsentence with\ttabs"</span><span class="keyword">;
<br />
</span><span class="default">$scanned </span><span class="keyword">= </span><span class="default">sscanf</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="string">"%s\t%s\t%s"</span><span class="keyword">);
<br />
echo </span><span class="default">join</span><span class="keyword">(</span><span class="string">" : "</span><span class="keyword">, </span><span class="default">$scanned</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
this echoes "This : is : a", not the expected "This is a : sentence with : tabs."
<br />
this behaviour is fine if your strings don't contain spaces, but if they do you'd be better off using explode().</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="8420""></a>
  <div class="note">
   <strong class="user">clcollie at mindspring dot com</strong>
   <a href="#8420" class="date">12-Sep-2000 04:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Actually sscanf()_always_ returns an array if you specify less return variables than format specifiers. i may change this to return a scalar if only a single format specifier exists.
<br />
&nbsp; Note that sscanf() is (almost) the complete functional equivalent of its "C" counterpart, so you can do the following to get the expected effect :
<br />

<br />
&nbsp;&nbsp; sscanf("SN/2350001","SN/%d",&amp;$serial)
<br />

<br />
The array return was a nicety for PHP.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
