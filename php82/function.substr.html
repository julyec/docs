<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=UTF-8">
  <title>返回字符串的子串</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.substr-replace.html">? substr_replace</a></li>
      <li style="float: right;"><a href="function.trim.html">trim ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.strings.html">字符串 函数</a></li>
    <li>返回字符串的子串</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.substr" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">substr</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">substr</span> &mdash; <span class="dc-title">返回字符串的子串</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.substr-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>substr</strong></span>(<span class="methodparam"><span class="type">string</span> <code class="parameter">$string</code></span>, <span class="methodparam"><span class="type">int</span> <code class="parameter">$offset</code></span>, <span class="methodparam"><span class="type">?</span><span class="type"><span class="type">int</span><span class="type"></span></span> <code class="parameter">$length</code><span class="initializer"> = <strong><code>null</code></strong></span></span>): <span class="type">string</span></div>

  <p class="para rdfs-comment">
   返回字符串 <code class="parameter">string</code> 由 <code class="parameter">offset</code> 和 <code class="parameter">length</code> 参数指定的子字符串。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.substr-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">string</code></dt>

     <dd>

      <p class="para">
       输入字符串。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">offset</code></dt>

     <dd>

      <p class="para">
       如果 <code class="parameter">offset</code> 是非负数，返回的字符串将从 <code class="parameter">string</code> 的 <code class="parameter">offset</code> 位置开始，从 0 开始计算。例如，在字符串 "<code class="literal">abcdef</code>" 中，在位置 <code class="literal">0</code> 的字符是 "<code class="literal">a</code>"，位置 <code class="literal">2</code> 的字符串是 "<code class="literal">c</code>" 等等。
      </p>
      <p class="para">
       如果 <code class="parameter">offset</code> 是负数，返回的字符串将从 <code class="parameter">string</code> 结尾处向前数第 <code class="parameter">offset</code> 个字符开始。
      </p>
      <p class="para">
       如果 <code class="parameter">string</code> 的长度小于 <code class="parameter">offset</code>，将返回空字符串。
      </p>
      <p class="para">
       <div class="example" id="">
        <p><strong>Example #1 使用负数 <code class="parameter">offset</code></strong></p>
        <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$rest </span><span style="color: #007700">= </span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #DD0000">"abcdef"</span><span style="color: #007700">, -</span><span style="color: #0000BB">1</span><span style="color: #007700">);    </span><span style="color: #FF8000">// 返回 "f"<br /></span><span style="color: #0000BB">$rest </span><span style="color: #007700">= </span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #DD0000">"abcdef"</span><span style="color: #007700">, -</span><span style="color: #0000BB">2</span><span style="color: #007700">);    </span><span style="color: #FF8000">// 返回 "ef"<br /></span><span style="color: #0000BB">$rest </span><span style="color: #007700">= </span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #DD0000">"abcdef"</span><span style="color: #007700">, -</span><span style="color: #0000BB">3</span><span style="color: #007700">, </span><span style="color: #0000BB">1</span><span style="color: #007700">); </span><span style="color: #FF8000">// 返回 "d"<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
        </div>

       </div>
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">length</code></dt>

     <dd>

      <p class="para">
       如果提供了正数的 <code class="parameter">length</code>，返回的字符串将从 <code class="parameter">offset</code> 处开始最多包括 <code class="parameter">length</code> 个字符（取决于 <code class="parameter">string</code> 的长度）。
      </p>
      <p class="para">
       如果提供了负数的 <code class="parameter">length</code>，那么 <code class="parameter">string</code> 末尾处的 <code class="parameter">length</code> 个字符将会被省略（若 <code class="parameter">offset</code> 是负数则从字符串尾部算起）。如果 <code class="parameter">offset</code> 不在这段文本中，那么将返回空字符串。
      </p>
      <p class="para">
       如果提供了值为 <code class="literal">0</code> 的 <code class="parameter">length</code>，那么将返回一个空字符串。
      </p>
      <p class="para">
       如果忽略 <code class="parameter">length</code> 或为 <strong><code>null</code></strong>，返回的子字符串将从 <code class="parameter">offset</code> 位置开始直到字符串结尾。
      </p>
      <div class="example" id="">
       <p><strong>Example #2 使用负数 <code class="parameter">length</code></strong></p>
       <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$rest </span><span style="color: #007700">= </span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #DD0000">"abcdef"</span><span style="color: #007700">, </span><span style="color: #0000BB">0</span><span style="color: #007700">, -</span><span style="color: #0000BB">1</span><span style="color: #007700">);  </span><span style="color: #FF8000">// 返回 "abcde"<br /></span><span style="color: #0000BB">$rest </span><span style="color: #007700">= </span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #DD0000">"abcdef"</span><span style="color: #007700">, </span><span style="color: #0000BB">2</span><span style="color: #007700">, -</span><span style="color: #0000BB">1</span><span style="color: #007700">);  </span><span style="color: #FF8000">// 返回 "cde"<br /></span><span style="color: #0000BB">$rest </span><span style="color: #007700">= </span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #DD0000">"abcdef"</span><span style="color: #007700">, </span><span style="color: #0000BB">4</span><span style="color: #007700">, -</span><span style="color: #0000BB">4</span><span style="color: #007700">);  </span><span style="color: #FF8000">// 返回 ""; 在 PHP 8.0.0 之前，返回 false<br /></span><span style="color: #0000BB">$rest </span><span style="color: #007700">= </span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #DD0000">"abcdef"</span><span style="color: #007700">, -</span><span style="color: #0000BB">3</span><span style="color: #007700">, -</span><span style="color: #0000BB">1</span><span style="color: #007700">); </span><span style="color: #FF8000">// 返回 "de"<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
       </div>

      </div>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.substr-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   返回提取的 <code class="parameter">string</code> 部分或者空字符串。
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.substr-changelog">
  <h3 class="title">更新日志</h3>
  <table class="doctable informaltable">
   
    <thead>
     <tr>
      <th>版本</th>
      <th>说明</th>
     </tr>

    </thead>

    <tbody class="tbody">
     <tr>
      <td>8.0.0</td>
      <td>
       现在 <code class="parameter">length</code> 允许为 null。当 <code class="parameter">length</code>
       显式设置为 <strong><code>null</code></strong> 时，函数返回在字符串末尾结束的子字符串，而之前将返回空字符串。
      </td>
     </tr>

     <tr>
      <td>8.0.0</td>
      <td>
       函数将返回空字符串, 在此之前返回 <strong><code>false</code></strong>。
      </td>
     </tr>

    </tbody>
   
  </table>

 </div>


 <div class="refsect1 examples" id="refsect1-function.substr-examples">
  <h3 class="title">示例</h3>
  <p class="para">
   <div class="example" id="">
    <p><strong>Example #3 <span class="function"><strong>substr()</strong></span> 基本用法</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">echo </span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #DD0000">'abcdef'</span><span style="color: #007700">, </span><span style="color: #0000BB">1</span><span style="color: #007700">);     </span><span style="color: #FF8000">// bcdef<br /></span><span style="color: #007700">echo </span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #DD0000">"abcdef"</span><span style="color: #007700">, </span><span style="color: #0000BB">1</span><span style="color: #007700">, </span><span style="color: #0000BB">null</span><span style="color: #007700">); </span><span style="color: #FF8000">// bcdef; 在 PHP 8.0.0 之前，返回空字符串<br /></span><span style="color: #007700">echo </span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #DD0000">'abcdef'</span><span style="color: #007700">, </span><span style="color: #0000BB">1</span><span style="color: #007700">, </span><span style="color: #0000BB">3</span><span style="color: #007700">);  </span><span style="color: #FF8000">// bcd<br /></span><span style="color: #007700">echo </span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #DD0000">'abcdef'</span><span style="color: #007700">, </span><span style="color: #0000BB">0</span><span style="color: #007700">, </span><span style="color: #0000BB">4</span><span style="color: #007700">);  </span><span style="color: #FF8000">// abcd<br /></span><span style="color: #007700">echo </span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #DD0000">'abcdef'</span><span style="color: #007700">, </span><span style="color: #0000BB">0</span><span style="color: #007700">, </span><span style="color: #0000BB">8</span><span style="color: #007700">);  </span><span style="color: #FF8000">// abcdef<br /></span><span style="color: #007700">echo </span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #DD0000">'abcdef'</span><span style="color: #007700">, -</span><span style="color: #0000BB">1</span><span style="color: #007700">, </span><span style="color: #0000BB">1</span><span style="color: #007700">); </span><span style="color: #FF8000">// f<br /><br />// 访问字符串中的单个字符<br />// 也可以使用中括号<br /></span><span style="color: #0000BB">$string </span><span style="color: #007700">= </span><span style="color: #DD0000">'abcdef'</span><span style="color: #007700">;<br />echo </span><span style="color: #0000BB">$string</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">];                 </span><span style="color: #FF8000">// a<br /></span><span style="color: #007700">echo </span><span style="color: #0000BB">$string</span><span style="color: #007700">[</span><span style="color: #0000BB">3</span><span style="color: #007700">];                 </span><span style="color: #FF8000">// d<br /></span><span style="color: #007700">echo </span><span style="color: #0000BB">$string</span><span style="color: #007700">[</span><span style="color: #0000BB">strlen</span><span style="color: #007700">(</span><span style="color: #0000BB">$string</span><span style="color: #007700">)-</span><span style="color: #0000BB">1</span><span style="color: #007700">]; </span><span style="color: #FF8000">// f<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>   
   <div class="example" id="">
    <p><strong>Example #4 <span class="function"><strong>substr()</strong></span> casting behaviour</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">class </span><span style="color: #0000BB">apple </span><span style="color: #007700">{<br />    public function </span><span style="color: #0000BB">__toString</span><span style="color: #007700">() {<br />        return </span><span style="color: #DD0000">"green"</span><span style="color: #007700">;<br />    }<br />}<br /><br />echo </span><span style="color: #DD0000">"1) "</span><span style="color: #007700">.</span><span style="color: #0000BB">var_export</span><span style="color: #007700">(</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #DD0000">"pear"</span><span style="color: #007700">, </span><span style="color: #0000BB">0</span><span style="color: #007700">, </span><span style="color: #0000BB">2</span><span style="color: #007700">), </span><span style="color: #0000BB">true</span><span style="color: #007700">).</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br />echo </span><span style="color: #DD0000">"2) "</span><span style="color: #007700">.</span><span style="color: #0000BB">var_export</span><span style="color: #007700">(</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #0000BB">54321</span><span style="color: #007700">, </span><span style="color: #0000BB">0</span><span style="color: #007700">, </span><span style="color: #0000BB">2</span><span style="color: #007700">), </span><span style="color: #0000BB">true</span><span style="color: #007700">).</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br />echo </span><span style="color: #DD0000">"3) "</span><span style="color: #007700">.</span><span style="color: #0000BB">var_export</span><span style="color: #007700">(</span><span style="color: #0000BB">substr</span><span style="color: #007700">(new </span><span style="color: #0000BB">apple</span><span style="color: #007700">(), </span><span style="color: #0000BB">0</span><span style="color: #007700">, </span><span style="color: #0000BB">2</span><span style="color: #007700">), </span><span style="color: #0000BB">true</span><span style="color: #007700">).</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br />echo </span><span style="color: #DD0000">"4) "</span><span style="color: #007700">.</span><span style="color: #0000BB">var_export</span><span style="color: #007700">(</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #0000BB">true</span><span style="color: #007700">, </span><span style="color: #0000BB">0</span><span style="color: #007700">, </span><span style="color: #0000BB">1</span><span style="color: #007700">), </span><span style="color: #0000BB">true</span><span style="color: #007700">).</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br />echo </span><span style="color: #DD0000">"5) "</span><span style="color: #007700">.</span><span style="color: #0000BB">var_export</span><span style="color: #007700">(</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #0000BB">false</span><span style="color: #007700">, </span><span style="color: #0000BB">0</span><span style="color: #007700">, </span><span style="color: #0000BB">1</span><span style="color: #007700">), </span><span style="color: #0000BB">true</span><span style="color: #007700">).</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br />echo </span><span style="color: #DD0000">"6) "</span><span style="color: #007700">.</span><span style="color: #0000BB">var_export</span><span style="color: #007700">(</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #DD0000">""</span><span style="color: #007700">, </span><span style="color: #0000BB">0</span><span style="color: #007700">, </span><span style="color: #0000BB">1</span><span style="color: #007700">), </span><span style="color: #0000BB">true</span><span style="color: #007700">).</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br />echo </span><span style="color: #DD0000">"7) "</span><span style="color: #007700">.</span><span style="color: #0000BB">var_export</span><span style="color: #007700">(</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #0000BB">1.2e3</span><span style="color: #007700">, </span><span style="color: #0000BB">0</span><span style="color: #007700">, </span><span style="color: #0000BB">4</span><span style="color: #007700">), </span><span style="color: #0000BB">true</span><span style="color: #007700">).</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上示例会输出：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
1) &#039;pe&#039;
2) &#039;54&#039;
3) &#039;gr&#039;
4) &#039;1&#039;
5) &#039;&#039;
6) &#039;&#039;
7) &#039;1200&#039;
</pre></div>
    </div>
   </div>
   <div class="example" id="">
   <p><strong>Example #5 无效字符范围</strong></p>
   <div class="example-contents"><p>
    如果请求的字符范围无效, <span class="function"><strong>substr()</strong></span> 从 
    PHP 8.0.0 开始返回空字符串；在此之前返回 <strong><code>false</code></strong> 。
    </p></div>
   <div class="example" id="">
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #DD0000">'a'</span><span style="color: #007700">, </span><span style="color: #0000BB">2</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上示例在 PHP 8 中的输出：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
string(0) &quot;&quot;
</pre></div>
    </div>
    <div class="example-contents"><p>以上示例在 PHP 7 中的输出：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
bool(false)
</pre></div>
    </div>
   </div>
   </div>   
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.substr-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.strrchr.html" class="function" rel="rdfs-seeAlso">strrchr()</a> - 查找指定字符在字符串中的最后一次出现</span></li>
    <li class="member"><span class="function"><a href="function.substr-replace.html" class="function" rel="rdfs-seeAlso">substr_replace()</a> - 替换字符串的子串</span></li>
    <li class="member"><span class="function"><a href="function.preg-match.html" class="function" rel="rdfs-seeAlso">preg_match()</a> - 执行匹配正则表达式</span></li>
    <li class="member"><span class="function"><a href="function.trim.html" class="function" rel="rdfs-seeAlso">trim()</a> - 去除字符串首尾处的空白字符（或者其他字符）</span></li>
    <li class="member"><span class="function"><a href="function.mb-substr.html" class="function" rel="rdfs-seeAlso">mb_substr()</a> - 获取部分字符串</span></li>
    <li class="member"><span class="function"><a href="function.wordwrap.html" class="function" rel="rdfs-seeAlso">wordwrap()</a> - 打断字符串为指定数量的字串</span></li>
    <li class="member"><a href="language.types.string.html#language.types.string.substr" class="link">字符串访问和修改</a></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="126137""></a>
  <div class="note">
   <strong class="user">robinhood70 at live dot ca</strong>
   <a href="#126137" class="date">04-Jun-2021 05:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Prior to PHP 8, specifying length with zero-length strings or non-string values as input can produce potentially unexpected results.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">foreach ([</span><span class="string">'normal'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">, </span><span class="default">false</span><span class="keyword">, </span><span class="default">NULL</span><span class="keyword">] as </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">gettype</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">)) . </span><span class="string">' ' </span><span class="keyword">. </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="comment">/*<br />
string normal<br />
boolean<br />
string 1<br />
boolean<br />
boolean<br />
*/<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="124353""></a>
  <div class="note">
   <strong class="user">man13or at hotmail dot fr</strong>
   <a href="#124353" class="date">30-Oct-2019 08:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Shortcuts :<br />
<br />
Getting the first character of a string<br />
substr($string, 1)<br />
<br />
Getting the last character of a string<br />
substr($string, -1)<br />
<br />
Remove the first character of a string<br />
substr($string,1)<br />
<br />
Remove the last character of a string<br />
substr($string, 0, -1)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="121873""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#121873" class="date">15-Nov-2017 01:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be aware of a slight inconsistency between substr and mb_substr<br />
<br />
mb_substr("", 4);&nbsp; &nbsp; &nbsp; returns empty string<br />
<br />
substr("", 4);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; returns boolean false<br />
<br />
tested in PHP 7.1.11 (Fedora 26) and PHP 5.4.16 (CentOS 7.4)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="119852""></a>
  <div class="note">
   <strong class="user">m.m.j.kronenburg</strong>
   <a href="#119852" class="date">06-Sep-2016 10:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">/**<br />
&nbsp; * Returns and extracts the portion of string specified by the<br />
&nbsp; * start and length parameters from the original string.<br />
&nbsp; *<br />
&nbsp; * This function is simulair to function substr() except that it<br />
&nbsp; * removes the substring from the orignal string <br />
&nbsp; * (passed by reference).<br />
&nbsp; *<br />
&nbsp; * @param string $string&nbsp; &nbsp; &nbsp; The input string.<br />
&nbsp; * @param integer $start&nbsp; &nbsp; &nbsp; The start position (see substr() for<br />
&nbsp; *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; explanation).<br />
&nbsp; * @param integer $length&nbsp; &nbsp;&nbsp; The length (see substr()<br />
&nbsp; *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for explanation).<br />
&nbsp; * @return mixed&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; The substring or FALSE (see substr() <br />
&nbsp; *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for explanation).<br />
&nbsp; **/<br />
</span><span class="keyword">function </span><span class="default">substrex</span><span class="keyword">(&amp;</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">, </span><span class="default">$length </span><span class="keyword">= </span><span class="default">PHP_INT_MAX</span><span class="keyword">)<br />
{<br />
&nbsp; if(</span><span class="default">$start </span><span class="keyword">&gt; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">)) { return </span><span class="default">false</span><span class="keyword">; }<br />
&nbsp; if(empty(</span><span class="default">$length</span><span class="keyword">))&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; { return </span><span class="string">''</span><span class="keyword">; }<br />
&nbsp; if(</span><span class="default">$start </span><span class="keyword">&lt; </span><span class="default">0</span><span class="keyword">) { </span><span class="default">$start </span><span class="keyword">= </span><span class="default">max</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">$start </span><span class="keyword">+ </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">)); }<br />
&nbsp; </span><span class="default">$end </span><span class="keyword">= (</span><span class="default">$length </span><span class="keyword">&lt; </span><span class="default">0</span><span class="keyword">) ? <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">) + </span><span class="default">$length </span><span class="keyword">: <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">min</span><span class="keyword">(</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">), </span><span class="default">$start </span><span class="keyword">+ </span><span class="default">$length</span><span class="keyword">);<br />
&nbsp; if(</span><span class="default">$end </span><span class="keyword">&lt; </span><span class="default">$start</span><span class="keyword">) { return </span><span class="default">false</span><span class="keyword">; }<br />
&nbsp; </span><span class="default">$length </span><span class="keyword">= </span><span class="default">$end </span><span class="keyword">- </span><span class="default">$start</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$substr </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">, </span><span class="default">$length</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$string </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">).</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$end</span><span class="keyword">);&nbsp; <br />
&nbsp; return </span><span class="default">$substr</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="115142""></a>
  <div class="note">
   <strong class="user">Nadeem</strong>
   <a href="#115142" class="date">03-Jun-2014 08:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Truncate a float number. Similar to the Excel trunc function.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">truncate_number</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">,</span><span class="default">$decimals</span><span class="keyword">=</span><span class="default">2</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$number</span><span class="keyword">=array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$number</span><span class="keyword">=</span><span class="default">explode</span><span class="keyword">(</span><span class="string">"."</span><span class="keyword">,</span><span class="default">$val</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$number</span><span class="keyword">)&gt;</span><span class="default">1</span><span class="keyword">){<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">$number</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] . </span><span class="string">"." </span><span class="keyword">. </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$number</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">],</span><span class="default">0</span><span class="keyword">,</span><span class="default">$decimals</span><span class="keyword">);&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">$val</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; unset(</span><span class="default">$number</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;&nbsp; &nbsp; <br />
}<br />
<br />
echo </span><span class="default">truncate_number</span><span class="keyword">(</span><span class="default">99.123456</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">); </span><span class="comment">//result = 99.12<br />
</span><span class="keyword">echo </span><span class="default">truncate_number</span><span class="keyword">(</span><span class="default">99.123456</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">); </span><span class="comment">//result = 99.12345<br />
</span><span class="keyword">echo </span><span class="default">truncate_number</span><span class="keyword">(</span><span class="default">99.123456</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">); </span><span class="comment">//result = 99.1<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114219""></a>
  <div class="note">
   <strong class="user">fatihmertdogancan at hotmail dot com</strong>
   <a href="#114219" class="date">26-Jan-2014 08:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
[English]<br />
I created python similar accesing list or string with php substr &amp; strrev functions.<br />
<br />
Use: str($string,$pattern)<br />
<br />
About the python pattern,<br />
<a href="http://docs.python.org/release/1.5.1p1/tut/strings.html" rel="nofollow" target="_blank">http://docs.python.org/release/1.5.1p1/tut/strings.html</a><br />
<a href="http://effbot.org/zone/python-list.htm" rel="nofollow" target="_blank">http://effbot.org/zone/python-list.htm</a><br />
<br />
About of pattern structures<br />
[start:stop:step]<br />
<br />
Example,<br />
<span class="default">&lt;?php<br />
$s </span><span class="keyword">= </span><span class="string">"fatihmertdogancan"</span><span class="keyword">;<br />
echo </span><span class="default">str</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="string">"1:9:-2"</span><span class="keyword">);<br />
echo </span><span class="string">"&lt;br/&gt;"</span><span class="keyword">;<br />
echo </span><span class="default">str</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="string">"1:-3:-2"</span><span class="keyword">);<br />
echo </span><span class="string">"&lt;br/&gt;"</span><span class="keyword">;<br />
echo </span><span class="default">str</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="string">"1:-11:-5"</span><span class="keyword">);<br />
echo </span><span class="string">"&lt;br/&gt;"</span><span class="keyword">;<br />
echo </span><span class="default">str</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="string">"1:9:4"</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Output,<br />
thetoacn<br />
eht<br />
aom<br />
htan<br />
<br />
This is function phpfiddle link: <a href="http://phpfiddle.org/main/code/e82-y5d" rel="nofollow" target="_blank">http://phpfiddle.org/main/code/e82-y5d</a><br />
<br />
or source;<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">str</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">$pattern</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//[start:stop:step]<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //pattern -&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ([-]?[0-9]*|\s):([-]?[0-9]*|\s):([-]?[0-9]*|\s)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"/([-]?[0-9]*|\s?):([-]?[0-9]*|\s?):?([-]?[0-9]*|\s?)/"</span><span class="keyword">, </span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">$yakala</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$start </span><span class="keyword">= </span><span class="default">$yakala</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$stop </span><span class="keyword">= </span><span class="default">$yakala</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$step </span><span class="keyword">= </span><span class="default">$yakala</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(empty(</span><span class="default">$start</span><span class="keyword">) &amp;&amp; empty(</span><span class="default">$stop</span><span class="keyword">) &amp;&amp; </span><span class="default">$step </span><span class="keyword">== </span><span class="string">"-1"</span><span class="keyword">){</span><span class="comment">//istisna durum<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">strrev</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }else if(empty(</span><span class="default">$start</span><span class="keyword">) &amp;&amp; empty(</span><span class="default">$stop</span><span class="keyword">) &amp;&amp; isset(</span><span class="default">$step</span><span class="keyword">)){</span><span class="comment">//istisna durum<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rev </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$yeni </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$step</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] == </span><span class="string">"-" </span><span class="keyword">&amp;&amp; </span><span class="default">$stop </span><span class="keyword">!= </span><span class="string">"-1"</span><span class="keyword">){</span><span class="default">$rev </span><span class="keyword">= </span><span class="string">"VAR"</span><span class="keyword">;}<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$atla </span><span class="keyword">= </span><span class="default">abs</span><span class="keyword">(</span><span class="default">$step</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt;= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">$i</span><span class="keyword">*</span><span class="default">$atla</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(isset(</span><span class="default">$str</span><span class="keyword">[</span><span class="default">$offset</span><span class="keyword">])){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$yeni </span><span class="keyword">= </span><span class="default">$yeni</span><span class="keyword">.</span><span class="default">$str</span><span class="keyword">[</span><span class="default">$offset</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$rev </span><span class="keyword">!= </span><span class="string">"VAR"</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$yeni</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//"hepsi bo?, step dolu o da +";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">strrev</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$yeni</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//"hepsi bo?, step dolu o da -";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(empty(</span><span class="default">$start</span><span class="keyword">) &amp;&amp; empty(</span><span class="default">$stop</span><span class="keyword">) &amp;&amp; empty(</span><span class="default">$step</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$str</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//"hepsi bo?";<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}else if(empty(</span><span class="default">$start</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(isset(</span><span class="default">$stop</span><span class="keyword">) &amp;&amp; empty(</span><span class="default">$step</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rev </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$stop</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] == </span><span class="string">"-"</span><span class="keyword">){</span><span class="default">$rev </span><span class="keyword">= </span><span class="string">"VAR"</span><span class="keyword">;}<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$rev </span><span class="keyword">!= </span><span class="string">"VAR"</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$stop</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//"start ve step bo?, stop dolu"<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">strrev</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$stop</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//"start ve step bo?, stop -1";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }else if(isset(</span><span class="default">$stop</span><span class="keyword">) &amp;&amp; isset(</span><span class="default">$step</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rev </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$stop</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] == </span><span class="string">"-"</span><span class="keyword">){</span><span class="default">$rev </span><span class="keyword">= </span><span class="string">"VAR"</span><span class="keyword">;}<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$yeni </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$step </span><span class="keyword">== </span><span class="default">1</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$rev </span><span class="keyword">!= </span><span class="string">"VAR"</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$str</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//"start bo?, stop ve step dolu, step 1";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">strrev</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">abs</span><span class="keyword">(</span><span class="default">$stop</span><span class="keyword">))); </span><span class="comment">//abs -&gt; mutlak de?er (-5 = 5)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //"start bo?, stop -, step dolu, step 1";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$atla </span><span class="keyword">= </span><span class="default">abs</span><span class="keyword">(</span><span class="default">$step</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt;= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">$i</span><span class="keyword">*</span><span class="default">$atla</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(isset(</span><span class="default">$str</span><span class="keyword">[</span><span class="default">$offset</span><span class="keyword">])){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$yeni </span><span class="keyword">= </span><span class="default">$yeni</span><span class="keyword">.</span><span class="default">$str</span><span class="keyword">[</span><span class="default">$offset</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$rev </span><span class="keyword">!= </span><span class="string">"VAR"</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$yeni</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$stop</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//"start bo?, step ve stop dolu";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">strrev</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$yeni</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">abs</span><span class="keyword">(</span><span class="default">$stop</span><span class="keyword">)));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//"start bo?, step ve stop -";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//start bo? de?ilse<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}else if(!empty(</span><span class="default">$start</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(isset(</span><span class="default">$stop</span><span class="keyword">) &amp;&amp; empty(</span><span class="default">$step</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rev </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$stop</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] == </span><span class="string">"-"</span><span class="keyword">){</span><span class="default">$rev </span><span class="keyword">= </span><span class="string">"VAR"</span><span class="keyword">;}<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$rev </span><span class="keyword">!= </span><span class="string">"VAR"</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">$start</span><span class="keyword">,</span><span class="default">$stop</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//return "step bo?, start ve stop dolu";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">strrev</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">abs</span><span class="keyword">(</span><span class="default">$stop</span><span class="keyword">)));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//"step bo?, start ve stop dolu, stop -";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }else if(isset(</span><span class="default">$stop</span><span class="keyword">) &amp;&amp; isset(</span><span class="default">$step</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//hepsi dolu<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rev </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$stop</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] == </span><span class="string">"-"</span><span class="keyword">){</span><span class="default">$rev </span><span class="keyword">= </span><span class="string">"VAR"</span><span class="keyword">;}<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$yeni </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$step </span><span class="keyword">== </span><span class="default">1</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$rev </span><span class="keyword">!= </span><span class="string">"VAR"</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">$start</span><span class="keyword">,</span><span class="default">$stop</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//"hepsi dolu, step 1";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">$start</span><span class="keyword">,</span><span class="default">abs</span><span class="keyword">(</span><span class="default">$stop</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//"hepsi dolu, step 1, stop -";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$stop</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] == </span><span class="string">"-"</span><span class="keyword">){</span><span class="default">$rev </span><span class="keyword">= </span><span class="string">"VAR"</span><span class="keyword">;}<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$atla </span><span class="keyword">= </span><span class="default">abs</span><span class="keyword">(</span><span class="default">$step</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt;= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">$i</span><span class="keyword">*</span><span class="default">$atla</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(isset(</span><span class="default">$str</span><span class="keyword">[</span><span class="default">$offset</span><span class="keyword">])){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$yeni </span><span class="keyword">= </span><span class="default">$yeni</span><span class="keyword">.</span><span class="default">$str</span><span class="keyword">[</span><span class="default">$offset</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$rev </span><span class="keyword">!= </span><span class="string">"VAR"</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$yeni</span><span class="keyword">,</span><span class="default">$start</span><span class="keyword">,</span><span class="default">$stop</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//"hepsi dolu";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">strrev</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$yeni</span><span class="keyword">,</span><span class="default">$start</span><span class="keyword">,</span><span class="default">abs</span><span class="keyword">(</span><span class="default">$stop</span><span class="keyword">)));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//"hepsi dolu, stop -";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
Good works..</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113718""></a>
  <div class="note">
   <strong class="user">greg at apparel dot com</strong>
   <a href="#113718" class="date">20-Nov-2013 05:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Coming to PHP from classic ASP I am used to the Left() and Right() functions built into ASP so I did a quick PHPversion. hope these help someone else making the switch<br />
<br />
function left($str, $length) {<br />
&nbsp;&nbsp;&nbsp; return substr($str, 0, $length);<br />
}<br />
<br />
function right($str, $length) {<br />
&nbsp;&nbsp;&nbsp; return substr($str, -$length);<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112707""></a>
  <div class="note">
   <strong class="user">biohazard dot ge at gmail dot com</strong>
   <a href="#112707" class="date">15-Jul-2013 02:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
may be by following functions will be easier to extract the needed sub parts from a string:<br />
<br />
<span class="default">&lt;?php<br />
after </span><span class="keyword">(</span><span class="string">'@'</span><span class="keyword">, </span><span class="string">'biohazard@online.ge'</span><span class="keyword">);<br />
</span><span class="comment">//returns 'online.ge'<br />
//from the first occurrence of '@'<br />
<br />
</span><span class="default">before </span><span class="keyword">(</span><span class="string">'@'</span><span class="keyword">, </span><span class="string">'biohazard@online.ge'</span><span class="keyword">);<br />
</span><span class="comment">//returns 'biohazard'<br />
//from the first occurrence of '@'<br />
<br />
</span><span class="default">between </span><span class="keyword">(</span><span class="string">'@'</span><span class="keyword">, </span><span class="string">'.'</span><span class="keyword">, </span><span class="string">'biohazard@online.ge'</span><span class="keyword">);<br />
</span><span class="comment">//returns 'online'<br />
//from the first occurrence of '@'<br />
<br />
</span><span class="default">after_last </span><span class="keyword">(</span><span class="string">'['</span><span class="keyword">, </span><span class="string">'sin[90]*cos[180]'</span><span class="keyword">);<br />
</span><span class="comment">//returns '180]'<br />
//from the last occurrence of '['<br />
<br />
</span><span class="default">before_last </span><span class="keyword">(</span><span class="string">'['</span><span class="keyword">, </span><span class="string">'sin[90]*cos[180]'</span><span class="keyword">);<br />
</span><span class="comment">//returns 'sin[90]*cos['<br />
//from the last occurrence of '['<br />
<br />
</span><span class="default">between_last </span><span class="keyword">(</span><span class="string">'['</span><span class="keyword">, </span><span class="string">']'</span><span class="keyword">, </span><span class="string">'sin[90]*cos[180]'</span><span class="keyword">);<br />
</span><span class="comment">//returns '180'<br />
//from the last occurrence of '['<br />
</span><span class="default">?&gt;<br />
</span><br />
here comes the source:<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">after </span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">, </span><span class="default">$inthat</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">is_bool</span><span class="keyword">(</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$inthat</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">)))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$inthat</span><span class="keyword">, </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$inthat</span><span class="keyword">,</span><span class="default">$this</span><span class="keyword">)+</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; };<br />
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">after_last </span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">, </span><span class="default">$inthat</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">is_bool</span><span class="keyword">(</span><span class="default">strrevpos</span><span class="keyword">(</span><span class="default">$inthat</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">)))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$inthat</span><span class="keyword">, </span><span class="default">strrevpos</span><span class="keyword">(</span><span class="default">$inthat</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">)+</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; };<br />
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">before </span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">, </span><span class="default">$inthat</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$inthat</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$inthat</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; };<br />
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">before_last </span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">, </span><span class="default">$inthat</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$inthat</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">strrevpos</span><span class="keyword">(</span><span class="default">$inthat</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; };<br />
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">between </span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">, </span><span class="default">$that</span><span class="keyword">, </span><span class="default">$inthat</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">before </span><span class="keyword">(</span><span class="default">$that</span><span class="keyword">, </span><span class="default">after</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">, </span><span class="default">$inthat</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; };<br />
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">between_last </span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">, </span><span class="default">$that</span><span class="keyword">, </span><span class="default">$inthat</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; return </span><span class="default">after_last</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">, </span><span class="default">before_last</span><span class="keyword">(</span><span class="default">$that</span><span class="keyword">, </span><span class="default">$inthat</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; };<br />
<br />
</span><span class="comment">// use strrevpos function in case your php version does not include it<br />
</span><span class="keyword">function </span><span class="default">strrevpos</span><span class="keyword">(</span><span class="default">$instr</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$rev_pos </span><span class="keyword">= </span><span class="default">strpos </span><span class="keyword">(</span><span class="default">strrev</span><span class="keyword">(</span><span class="default">$instr</span><span class="keyword">), </span><span class="default">strrev</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$rev_pos</span><span class="keyword">===</span><span class="default">false</span><span class="keyword">) return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; else return </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$instr</span><span class="keyword">) - </span><span class="default">$rev_pos </span><span class="keyword">- </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">);<br />
};<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="111133""></a>
  <div class="note">
   <strong class="user">pugazhenthi k</strong>
   <a href="#111133" class="date">18-Jan-2013 09:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?Php <br />
<br />
</span><span class="comment">### SUB STRING&nbsp; BY WORD USING substr() and strpos()&nbsp; #####<br />
<br />
### THIS SCRIPT WILL RETURN PART OF STRING&nbsp; WITHOUT WORD BREAK ###<br />
<br />
</span><span class="default">$description </span><span class="keyword">= </span><span class="default">'your description here your description here your description here your description here your description here your description here your description hereyour description here your description here'&nbsp; </span><span class="comment">// your description here .<br />
<br />
</span><span class="default">$no_letter </span><span class="keyword">= </span><span class="default">30 </span><span class="keyword">;<br />
<br />
if(</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$desctiption</span><span class="keyword">) &gt; </span><span class="default">30 </span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp; &nbsp; echo </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$description</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$description</span><span class="keyword">,</span><span class="default">' '</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">));&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//strpos to find ' ' after 30 characters.<br />
</span><span class="keyword">}<br />
else {<br />
&nbsp;&nbsp; &nbsp; echo </span><span class="default">$description</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="109046""></a>
  <div class="note">
   <strong class="user">pheagey at gmail dot com</strong>
   <a href="#109046" class="date">15-Jun-2012 02:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Using a 0 as the last parameter for substr().
<br />

<br />
As per examples
<br />
<span class="default">&lt;?php $var </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$var</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">); </span><span class="default">?&gt;
<br />
</span>
<br />
works no problem. However 
<br />
<span class="default">&lt;?php $var </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$var</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">); </span><span class="default">?&gt;
<br />
</span>
<br />
will get you nothing. Just a quick heads up</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="104805""></a>
  <div class="note">
   <strong class="user">leon weidauer</strong>
   <a href="#104805" class="date">08-Jul-2011 01:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When using a value of a wrong type as second parameter , substr() does not return FALSE but NULL although the docs say, it should return FALSE on error.<br />
<br />
Prior to PHP 5.3, substr() tries to cast the second parameter to int and doesn't throw any errors. Since PHP 5.3 a warning is thrown.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="103843""></a>
  <div class="note">
   <strong class="user">Quicker</strong>
   <a href="#103843" class="date">06-May-2011 04:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you need to parse utf-8 strings char by char, try this one:
<br />

<br />
<span class="default">&lt;?php
<br />
&nbsp;&nbsp; &nbsp; $utf8marker</span><span class="keyword">=</span><span class="default">chr</span><span class="keyword">(</span><span class="default">128</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$count</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; while(isset(</span><span class="default">$string</span><span class="keyword">{</span><span class="default">$count</span><span class="keyword">})){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; if(</span><span class="default">$string</span><span class="keyword">{</span><span class="default">$count</span><span class="keyword">}&gt;=</span><span class="default">$utf8marker</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$parsechar</span><span class="keyword">=</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$count</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$count</span><span class="keyword">+=</span><span class="default">2</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; } else {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$parsechar</span><span class="keyword">=</span><span class="default">$string</span><span class="keyword">{</span><span class="default">$count</span><span class="keyword">};
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$count</span><span class="keyword">++;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="comment">/* do what you like with parsechar ... , eg.:*/&nbsp; </span><span class="keyword">echo </span><span class="default">$parsechar</span><span class="keyword">.</span><span class="string">"&lt;BR&gt;\r\n"</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; }
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
- it works without mb_substr
<br />
- it is fast, because it grabs characters based on indexes&nbsp; when possible and avoids any count and split functions</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="103143""></a>
  <div class="note">
   <strong class="user">slow at acedsl dot com</strong>
   <a href="#103143" class="date">28-Mar-2011 01:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Anyone coming from the Python world will be accustomed to making substrings by using a "slice index" on a string.&nbsp; The following function emulates basic Python string slice behavior. (A more elaborate version could be made to support array input as well as string, and the optional third "step" argument.)<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">py_slice</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="default">$slice</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$arg </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">':'</span><span class="keyword">, </span><span class="default">$slice</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$start </span><span class="keyword">= </span><span class="default">intval</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$start </span><span class="keyword">&lt; </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$start </span><span class="keyword">+= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">) === </span><span class="default">1</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">trim</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]) === </span><span class="string">''</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$end </span><span class="keyword">= </span><span class="default">intval</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]);<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$end </span><span class="keyword">&lt; </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$end </span><span class="keyword">+= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">, </span><span class="default">$end </span><span class="keyword">- </span><span class="default">$start</span><span class="keyword">);<br />
}<br />
<br />
print </span><span class="default">py_slice</span><span class="keyword">(</span><span class="string">'abcdefg'</span><span class="keyword">, </span><span class="string">'2'</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br />
print </span><span class="default">py_slice</span><span class="keyword">(</span><span class="string">'abcdefg'</span><span class="keyword">, </span><span class="string">'2:4'</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br />
print </span><span class="default">py_slice</span><span class="keyword">(</span><span class="string">'abcdefg'</span><span class="keyword">, </span><span class="string">'2:'</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br />
print </span><span class="default">py_slice</span><span class="keyword">(</span><span class="string">'abcdefg'</span><span class="keyword">, </span><span class="string">':4'</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br />
print </span><span class="default">py_slice</span><span class="keyword">(</span><span class="string">'abcdefg'</span><span class="keyword">, </span><span class="string">':-3'</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br />
print </span><span class="default">py_slice</span><span class="keyword">(</span><span class="string">'abcdefg'</span><span class="keyword">, </span><span class="string">'-3:'</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
The $slice parameter can be a single character index, or a range separated by a colon. The start of the range is inclusive and the end is exclusive, which may be&nbsp; counterintuitive. (Eg, py_slice('abcdefg', '2:4') yields 'cd' not 'cde'). A negative range value means to count from the end of the string instead of the beginning. Both the start and end of the range may be omitted; the start defaults to 0 and the end defaults to the total length of the input.<br />
<br />
The output from the examples:<br />
c<br />
cd<br />
cdefg<br />
abcd<br />
abcd<br />
efg</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101863""></a>
  <div class="note">
   <strong class="user">nikolai dot wuestemann at t-online dot de</strong>
   <a href="#101863" class="date">14-Jan-2011 08:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to have a string BETWEEN two strings, just use this function:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">get_between</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">, </span><span class="default">$end</span><span class="keyword">)
<br />
{
<br />
&nbsp; </span><span class="default">$substr </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$start</span><span class="keyword">)+</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">), (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">) - </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="default">$end</span><span class="keyword">))*(-</span><span class="default">1</span><span class="keyword">));
<br />
&nbsp; return </span><span class="default">$substr</span><span class="keyword">;
<br />
}
<br />

<br />
</span><span class="comment">//Example:
<br />

<br />
</span><span class="default">$string </span><span class="keyword">= </span><span class="string">"123456789"</span><span class="keyword">;
<br />
</span><span class="default">$a </span><span class="keyword">= </span><span class="string">"12"</span><span class="keyword">;
<br />
</span><span class="default">$b </span><span class="keyword">= </span><span class="string">"9"</span><span class="keyword">;
<br />

<br />
echo </span><span class="default">get_between</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">);
<br />

<br />
</span><span class="comment">//Output:
<br />
//345678
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100678""></a>
  <div class="note">
   <strong class="user">Cristianlf</strong>
   <a href="#100678" class="date">29-Oct-2010 02:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I needed a function like lpad from oracle, or right from SQL
<br />
&nbsp;then I use this code :
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">right</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$chars</span><span class="keyword">)
<br />
{
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$vright </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">)-</span><span class="default">$chars</span><span class="keyword">,</span><span class="default">$chars</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$vright</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; 
<br />
}
<br />

<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">right</span><span class="keyword">(</span><span class="string">'0r0j4152'</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Result: 
<br />
&nbsp;4152
<br />
------------------------------------------------
<br />
This function is really simple, I just wanted to share, maybe helps someone out there.&nbsp; 
<br />

<br />
regards,</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="95918""></a>
  <div class="note">
   <strong class="user">vnonov at gmail dot com / Viktor Nonov</strong>
   <a href="#95918" class="date">28-Jan-2010 10:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">//removes string from the end of other<br />
<br />
</span><span class="keyword">function </span><span class="default">removeFromEnd</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$stringToRemove</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$stringToRemoveLen </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$stringToRemove</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$stringLen </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">$stringLen </span><span class="keyword">- </span><span class="default">$stringToRemoveLen</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$out </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$out</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$string </span><span class="keyword">= </span><span class="string">'picture.jpg.jpg'</span><span class="keyword">;<br />
</span><span class="default">$string </span><span class="keyword">= </span><span class="default">removeFromEnd</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="string">'.jpg'</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92473""></a>
  <div class="note">
   <strong class="user">gkhelloworld at gmail dot com</strong>
   <a href="#92473" class="date">26-Jul-2009 03:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Shortens the filename and its expansion has seen.
<br />

<br />
<span class="default">&lt;?php
<br />
$file </span><span class="keyword">= </span><span class="string">"Hellothisfilehasmorethan30charactersandthisfayl.exe"</span><span class="keyword">;
<br />

<br />
function </span><span class="default">funclongwords</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">)
<br />
{
<br />
if (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">) &gt; </span><span class="default">30</span><span class="keyword">)
<br />
{
<br />
</span><span class="default">$vartypesf </span><span class="keyword">= </span><span class="default">strrchr</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">,</span><span class="string">"."</span><span class="keyword">);
<br />
</span><span class="default">$vartypesf_len </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$vartypesf</span><span class="keyword">);
<br />
</span><span class="default">$word_l_w </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">15</span><span class="keyword">);
<br />
</span><span class="default">$word_r_w </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">,-</span><span class="default">15</span><span class="keyword">);
<br />
</span><span class="default">$word_r_a </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$word_r_w</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,-</span><span class="default">$vartypesf_len</span><span class="keyword">);
<br />

<br />
return </span><span class="default">$word_l_w</span><span class="keyword">.</span><span class="string">"..."</span><span class="keyword">.</span><span class="default">$word_r_a</span><span class="keyword">.</span><span class="default">$vartypesf</span><span class="keyword">;
<br />
}
<br />
else
<br />
return </span><span class="default">$file</span><span class="keyword">;
<br />
}
<br />
</span><span class="comment">// RETURN: Hellothisfileha...andthisfayl.exe
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="91351""></a>
  <div class="note">
   <strong class="user">kaysar in ymail in com</strong>
   <a href="#91351" class="date">07-Jun-2009 11:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Drop extensions of a file (even from a file location string)<br />
<br />
<span class="default">&lt;?php<br />
<br />
$filename </span><span class="keyword">= </span><span class="string">"c:/some dir/abc defg. hi.jklmn"</span><span class="keyword">;<br />
<br />
echo </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, (</span><span class="default">strlen </span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">)) - (</span><span class="default">strlen </span><span class="keyword">(</span><span class="default">strrchr</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">,</span><span class="string">'.'</span><span class="keyword">))));<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
output: c:/some dir/abc defg. hi<br />
<br />
Hope it may help somebody like me.. (^_^)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90581""></a>
  <div class="note">
   <strong class="user">Andreas Bur (andreas dot buro at gmail dot com)</strong>
   <a href="#90581" class="date">29-Apr-2009 06:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For getting a substring of UTF-8 characters, I highly recommend mb_substr<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $utf8string </span><span class="keyword">= </span><span class="string">"cake???"</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$utf8string</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// output cake#<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">echo </span><span class="default">mb_substr</span><span class="keyword">(</span><span class="default">$utf8string</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">,</span><span class="string">'UTF-8'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//output cake?<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90369""></a>
  <div class="note">
   <strong class="user">webmaster at oehoeboeroe dot nl</strong>
   <a href="#90369" class="date">18-Apr-2009 02:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You might expect substr('123456', 6) to return an empty string. Instead it returns boolean FALSE.
<br />

<br />
This behavior should be mentioned in the Return Values section of the manual. Instead it is only mentioned in the Parameters section.
<br />

<br />
If you need an empty string instead of a boolean FALSE you should typecast the result to a string.
<br />

<br />
<span class="default">&lt;?php
<br />
$a </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="string">'123456'</span><span class="keyword">, </span><span class="default">6</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// equivalent to $a = FALSE
<br />
</span><span class="default">$a </span><span class="keyword">= (string) </span><span class="default">substr</span><span class="keyword">(</span><span class="string">'123456'</span><span class="keyword">, </span><span class="default">6</span><span class="keyword">);&nbsp;&nbsp; </span><span class="comment">// equivalent to $a = '';
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89762""></a>
  <div class="note">
   <strong class="user">link</strong>
   <a href="#89762" class="date">21-Mar-2009 05:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
And as always there is bound to be a bug:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">strlen_entities</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">preg_match_all</span><span class="keyword">(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'/((?:&amp;(?:#[0-9]{2,}|[a-z]{2,});)|(?:[^&amp;])|'</span><span class="keyword">.&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'(?:&amp;(?!\w;)))s'</span><span class="keyword">,</span><span class="default">$text</span><span class="keyword">,</span><span class="default">$textarray</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">count</span><span class="keyword">(</span><span class="default">$textarray</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);<br />
} <br />
function </span><span class="default">substr_entities</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">,</span><span class="default">$start</span><span class="keyword">,</span><span class="default">$limit</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$return </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">preg_match_all</span><span class="keyword">(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'/((?:&amp;(?:#[0-9]{2,}|[a-z]{2,});)|(?:[^&amp;])|'</span><span class="keyword">.&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'(?:&amp;(?!\w;)))s'</span><span class="keyword">,</span><span class="default">$text</span><span class="keyword">,</span><span class="default">$textarray</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$textarray </span><span class="keyword">= </span><span class="default">$textarray</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$numchars </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$textarray</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$start</span><span class="keyword">&gt;=</span><span class="default">$numchars</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$start</span><span class="keyword">&lt;</span><span class="default">0</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$start </span><span class="keyword">= (</span><span class="default">$numchars</span><span class="keyword">)+</span><span class="default">$start</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$start</span><span class="keyword">&gt;=</span><span class="default">0</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$limit</span><span class="keyword">==</span><span class="default">0</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$end</span><span class="keyword">=</span><span class="default">$numchars</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; elseif (</span><span class="default">$limit</span><span class="keyword">&gt;</span><span class="default">0</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$end </span><span class="keyword">= </span><span class="default">$start</span><span class="keyword">+(</span><span class="default">$limit</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$end </span><span class="keyword">= (</span><span class="default">$numchars</span><span class="keyword">)+</span><span class="default">$limit</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">$start</span><span class="keyword">;(</span><span class="default">$i</span><span class="keyword">&lt;=</span><span class="default">$end </span><span class="keyword">&amp;&amp; isset(</span><span class="default">$textarray</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]));</span><span class="default">$i</span><span class="keyword">++)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$return </span><span class="keyword">.= </span><span class="default">$textarray</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$return</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89747""></a>
  <div class="note">
   <strong class="user">link</strong>
   <a href="#89747" class="date">20-Mar-2009 07:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I created some functions for entity-safe splitting+lengthcounting:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">strlen_entities</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">preg_match_all</span><span class="keyword">(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'/((?:&amp;(?:#[0-9]{2,}|[a-z]{2,});)|(?:[^&amp;])|'</span><span class="keyword">.&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'(?:&amp;(?!\w;)))s'</span><span class="keyword">,</span><span class="default">$text</span><span class="keyword">,</span><span class="default">$textarray</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">count</span><span class="keyword">(</span><span class="default">$textarray</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);<br />
}&nbsp; <br />
function </span><span class="default">substr_entities</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">,</span><span class="default">$start</span><span class="keyword">,</span><span class="default">$limit</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$return </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">preg_match_all</span><span class="keyword">(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'/((?:&amp;(?:#[0-9]{2,}|[a-z]{2,});)|(?:[^&amp;])|'</span><span class="keyword">.&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'(?:&amp;(?!\w;)))s'</span><span class="keyword">,</span><span class="default">$text</span><span class="keyword">,</span><span class="default">$textarray</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$textarray </span><span class="keyword">= </span><span class="default">$textarray</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$numchars </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$textarray</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$start</span><span class="keyword">&gt;=</span><span class="default">$numchars</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$start</span><span class="keyword">&lt;</span><span class="default">0</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$start </span><span class="keyword">= (</span><span class="default">$numchars</span><span class="keyword">)+</span><span class="default">$start</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$start</span><span class="keyword">&gt;=</span><span class="default">0</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$limit</span><span class="keyword">==</span><span class="default">0</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$end</span><span class="keyword">=</span><span class="default">$numchars</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; elseif (</span><span class="default">$limit</span><span class="keyword">&gt;</span><span class="default">0</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$end </span><span class="keyword">= </span><span class="default">$start</span><span class="keyword">+(</span><span class="default">$limit</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$end </span><span class="keyword">= (</span><span class="default">$numchars</span><span class="keyword">)+</span><span class="default">$limit</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">$start</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;=</span><span class="default">$end</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$return </span><span class="keyword">.= </span><span class="default">$textarray</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$return</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86587""></a>
  <div class="note">
   <strong class="user">mar dot czapla at gmail dot com</strong>
   <a href="#86587" class="date">24-Oct-2008 02:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here we have gr8 function which simply convert ip address to a number using substr with negative offset.
<br />
You can need it if you want to compare some IP addresses converted to a numbers. 
<br />
For example when using ip2country, or eliminating same range of ip addresses from your website :D
<br />

<br />
<span class="default">&lt;?php
<br />

<br />
</span><span class="keyword">function </span><span class="default">ip2no</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">)
<br />
{&nbsp; &nbsp; 
<br />
&nbsp;&nbsp;&nbsp; list(</span><span class="default">$A</span><span class="keyword">,</span><span class="default">$B</span><span class="keyword">,</span><span class="default">$C</span><span class="keyword">,</span><span class="default">$D</span><span class="keyword">)&nbsp; &nbsp; =&nbsp; &nbsp; </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"."</span><span class="keyword">,</span><span class="default">$val</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; return 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">substr</span><span class="keyword">(</span><span class="string">"000"</span><span class="keyword">.</span><span class="default">$A</span><span class="keyword">,-</span><span class="default">3</span><span class="keyword">).
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">substr</span><span class="keyword">(</span><span class="string">"000"</span><span class="keyword">.</span><span class="default">$B</span><span class="keyword">,-</span><span class="default">3</span><span class="keyword">).
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">substr</span><span class="keyword">(</span><span class="string">"000"</span><span class="keyword">.</span><span class="default">$C</span><span class="keyword">,-</span><span class="default">3</span><span class="keyword">).
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">substr</span><span class="keyword">(</span><span class="string">"000"</span><span class="keyword">.</span><span class="default">$D</span><span class="keyword">,-</span><span class="default">3</span><span class="keyword">);
<br />
}
<br />

<br />
</span><span class="default">$min&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&nbsp; &nbsp; </span><span class="default">ip2no</span><span class="keyword">(</span><span class="string">"10.11.1.0"</span><span class="keyword">);
<br />
</span><span class="default">$max&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&nbsp; &nbsp; </span><span class="default">ip2no</span><span class="keyword">(</span><span class="string">"111.11.1.0"</span><span class="keyword">);
<br />
</span><span class="default">$visitor&nbsp; &nbsp; </span><span class="keyword">=&nbsp; &nbsp; </span><span class="default">ip2no</span><span class="keyword">(</span><span class="string">"105.1.20.200"</span><span class="keyword">);
<br />

<br />
if(</span><span class="default">$min</span><span class="keyword">&lt;</span><span class="default">$visitor </span><span class="keyword">&amp;&amp; </span><span class="default">$visitor</span><span class="keyword">&lt;</span><span class="default">$max</span><span class="keyword">)&nbsp; &nbsp; 
<br />
&nbsp;&nbsp;&nbsp; {&nbsp; &nbsp; echo </span><span class="string">'Welcome !'</span><span class="keyword">;&nbsp; &nbsp; }
<br />
else&nbsp; &nbsp; 
<br />
&nbsp;&nbsp;&nbsp; {&nbsp; &nbsp; echo </span><span class="string">'Get out of here !'</span><span class="keyword">;&nbsp; &nbsp; }
<br />

<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84907""></a>
  <div class="note">
   <strong class="user">post [at] jannik - zappe [dot] de</strong>
   <a href="#84907" class="date">05-Aug-2008 07:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just a little function to cut a string by the wanted amount. Works in both directions.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">cutString</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$amount </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">, </span><span class="default">$dir </span><span class="keyword">= </span><span class="string">"right"</span><span class="keyword">)<br />
{<br />
&nbsp; if((</span><span class="default">$n </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">)) &gt; </span><span class="default">0</span><span class="keyword">)<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$dir </span><span class="keyword">== </span><span class="string">"right"</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$start </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$end </span><span class="keyword">= </span><span class="default">$n</span><span class="keyword">-</span><span class="default">$amount</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; } elseif( </span><span class="default">$dir </span><span class="keyword">== </span><span class="string">"left"</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$start </span><span class="keyword">= </span><span class="default">$amount</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$end </span><span class="keyword">= </span><span class="default">$n</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">, </span><span class="default">$end</span><span class="keyword">);<br />
&nbsp; } else return </span><span class="default">false</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Enjoy ;)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81491""></a>
  <div class="note">
   <strong class="user">kriskra at gmail dot com</strong>
   <a href="#81491" class="date">29-Feb-2008 05:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The javascript charAt equivalent in php of felipe has a little bug. It's necessary to compare the type (implicit) aswell or the function returns a wrong result:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">charAt</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">$pos</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; return (</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">$pos</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">) !== </span><span class="default">false</span><span class="keyword">) ? </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">$pos</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">) : -</span><span class="default">1</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="77483""></a>
  <div class="note">
   <strong class="user">Petez</strong>
   <a href="#77483" class="date">31-Aug-2007 03:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I wanted to work out the fastest way to get the first few characters from a string, so I ran the following experiment to compare substr, direct string access and strstr:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/* substr access */<br />
</span><span class="default">beginTimer</span><span class="keyword">();<br />
for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">1500000</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$opening </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">11</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$opening </span><span class="keyword">== </span><span class="string">'Lorem ipsum'</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">$endtime1 </span><span class="keyword">= </span><span class="default">endTimer</span><span class="keyword">();<br />
<br />
</span><span class="comment">/* direct access */<br />
</span><span class="default">beginTimer</span><span class="keyword">();<br />
for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">1500000</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++){<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$string</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] == </span><span class="string">'L' </span><span class="keyword">&amp;&amp; </span><span class="default">$string</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] == </span><span class="string">'o' </span><span class="keyword">&amp;&amp; </span><span class="default">$string</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">] == </span><span class="string">'r' </span><span class="keyword">&amp;&amp; </span><span class="default">$string</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">] == </span><span class="string">'e' </span><span class="keyword">&amp;&amp; </span><span class="default">$string</span><span class="keyword">[</span><span class="default">4</span><span class="keyword">] == </span><span class="string">'m' </span><span class="keyword">&amp;&amp; </span><span class="default">$string</span><span class="keyword">[</span><span class="default">5</span><span class="keyword">] == </span><span class="string">' ' </span><span class="keyword">&amp;&amp; </span><span class="default">$string</span><span class="keyword">[</span><span class="default">6</span><span class="keyword">] == </span><span class="string">'i' </span><span class="keyword">&amp;&amp; </span><span class="default">$string</span><span class="keyword">[</span><span class="default">7</span><span class="keyword">] == </span><span class="string">'p' </span><span class="keyword">&amp;&amp; </span><span class="default">$string</span><span class="keyword">[</span><span class="default">8</span><span class="keyword">] == </span><span class="string">'s' </span><span class="keyword">&amp;&amp; </span><span class="default">$string</span><span class="keyword">[</span><span class="default">9</span><span class="keyword">] == </span><span class="string">'u' </span><span class="keyword">&amp;&amp; </span><span class="default">$string</span><span class="keyword">[</span><span class="default">10</span><span class="keyword">] == </span><span class="string">'m'</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">$endtime2 </span><span class="keyword">= </span><span class="default">endTimer</span><span class="keyword">();<br />
<br />
</span><span class="comment">/* strstr access */<br />
</span><span class="default">beginTimer</span><span class="keyword">();<br />
for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">1500000</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$opening </span><span class="keyword">= </span><span class="default">strstr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="string">'Lorem ipsum'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$opening </span><span class="keyword">== </span><span class="default">true</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">$endtime3 </span><span class="keyword">= </span><span class="default">endTimer</span><span class="keyword">();<br />
<br />
echo </span><span class="default">$endtime1</span><span class="keyword">.</span><span class="string">"\r\n"</span><span class="keyword">.</span><span class="default">$endtime2</span><span class="keyword">.</span><span class="string">"\r\n"</span><span class="keyword">.</span><span class="default">$endtime3</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
The string was 6 paragraphs of Lorem Ipsum, and I was trying match the first two words. The experiment was run 3 times and averaged. The results were:<br />
<br />
(substr) 3.24<br />
(direct access) 11.49<br />
(strstr) 4.96<br />
<br />
(With standard deviations 0.01, 0.02 and 0.04)<br />
<br />
THEREFORE substr is the fastest of the three methods for getting the first few letters of a string.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="70513""></a>
  <div class="note">
   <strong class="user">egingell at sisna dot com</strong>
   <a href="#70513" class="date">19-Oct-2006 03:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">/**<br />
&nbsp;* string substrpos(string $str, mixed $start [[, mixed $end], boolean $ignore_case])<br />
&nbsp;*<br />
&nbsp;* If $start is a string, substrpos will return the string from the position of the first occuring $start to $end<br />
&nbsp;*<br />
&nbsp;* If $end is a string, substrpos will return the string from $start to the position of the first occuring $end<br />
&nbsp;*<br />
&nbsp;* If the first character in (string) $start or (string) $end is '-', the last occuring string will be used.<br />
&nbsp;*<br />
&nbsp;* If $ignore_case is true, substrpos will not care about the case.<br />
&nbsp;* If $ignore_case is false (or anything that is not (boolean) true, the function will be case sensitive.<br />
&nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; Both of the above: only applies if either $start or $end are strings.<br />
&nbsp;*<br />
&nbsp;* echo substrpos('This is a string with 0123456789 numbers in it.', 5, '5');<br />
&nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; // Prints 'is a string with 01234';<br />
&nbsp;*<br />
&nbsp;* echo substrpos('This is a string with 0123456789 numbers in it.', '5', 5);<br />
&nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; // Prints '56789'<br />
&nbsp;*<br />
&nbsp;* echo substrpos('This is a string with 0123456789 numbers in it and two strings.', -60, '-string')<br />
&nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; // Prints 's is a string with 0123456789 numbers in it and two '<br />
&nbsp;*<br />
&nbsp;* echo substrpos('This is a string with 0123456789 numbers in it and two strings.', -60, '-STRING', true)<br />
&nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; // Prints 's is a string with 0123456789 numbers in it and two '<br />
&nbsp;*<br />
&nbsp;* echo substrpos('This is a string with 0123456789 numbers in it and two strings.', -60, '-STRING', false)<br />
&nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; // Prints 's is a string with 0123456789 numbers in it and two strings.'<br />
&nbsp;*<br />
&nbsp;* Warnings:<br />
&nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; Since $start and $end both take either a string or an integer:<br />
&nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; If the character or string you are searching $str for is a number, pass it as a quoted string.<br />
&nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; If $end is (integer) 0, an empty string will be returned.<br />
&nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; Since this function takes negative strings ('-search_string'):<br />
&nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; If the string your using in $start or $end is a '-' or begins with a '-' escape it with a '\'.<br />
&nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; This only applies to the *first* character of $start or $end.<br />
&nbsp;*/<br />
<br />
// Define stripos() if not defined (PHP &lt; 5).<br />
</span><span class="keyword">if (!</span><span class="default">is_callable</span><span class="keyword">(</span><span class="string">"stripos"</span><span class="keyword">)) {<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">stripos</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">), </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">), </span><span class="default">$offset</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
function </span><span class="default">substrpos</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">, </span><span class="default">$end </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">, </span><span class="default">$ignore_case </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Use variable functions<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$ignore_case </span><span class="keyword">=== </span><span class="default">true</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$strpos </span><span class="keyword">= </span><span class="string">'stripos'</span><span class="keyword">; </span><span class="comment">// stripos() is included above in case it's not defined (PHP &lt; 5).<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">} else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$strpos </span><span class="keyword">= </span><span class="string">'strpos'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// If end is false, set it to the length of $str<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$end </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$end </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// If $start is a string do what's needed to make it an integer position for substr().<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$start</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// If $start begins with '-' start processing until there's no more matches and use the last one found.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$start</span><span class="keyword">{</span><span class="default">0</span><span class="keyword">} == </span><span class="string">'-'</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Strip off the '-'<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$start </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$start</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$found </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; while((</span><span class="default">$curr_pos </span><span class="keyword">= </span><span class="default">$strpos</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">)) !== </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$found </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">$curr_pos </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$found </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">-= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// If $start begins with '\-', strip off the '\'.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$start</span><span class="keyword">{</span><span class="default">0</span><span class="keyword">} . </span><span class="default">$start</span><span class="keyword">{</span><span class="default">1</span><span class="keyword">} == </span><span class="string">'\-'</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$start </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$start</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">$strpos</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$start </span><span class="keyword">= </span><span class="default">$pos </span><span class="keyword">!== </span><span class="default">false </span><span class="keyword">? </span><span class="default">$pos </span><span class="keyword">: </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Chop the string from $start to strlen($str).<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// If $end is a string, do exactly what was done to $start, above.<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$end</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$end</span><span class="keyword">{</span><span class="default">0</span><span class="keyword">} == </span><span class="string">'-'</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$end </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$end</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$found </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; while((</span><span class="default">$curr_pos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$end</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">)) !== </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$found </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">$curr_pos </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$found </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">-= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$end</span><span class="keyword">{</span><span class="default">0</span><span class="keyword">} . </span><span class="default">$end</span><span class="keyword">{</span><span class="default">1</span><span class="keyword">} == </span><span class="string">'\-'</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$end </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$end</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">$strpos</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$end</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$end </span><span class="keyword">= </span><span class="default">$pos </span><span class="keyword">!== </span><span class="default">false </span><span class="keyword">? </span><span class="default">$pos </span><span class="keyword">: </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Since $str has already been chopped at $start, we can pass 0 as the new $start for substr()<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$end</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="60548""></a>
  <div class="note">
   <strong class="user">Bradley from California</strong>
   <a href="#60548" class="date">10-Jan-2006 01:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Add on to (a function originally written by) "Matias from Argentina": str_format_number function.
<br />

<br />
Just added handling of $String shorter then $Format by adding a side to start the fill and a string length to the while loop.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">str_format_number</span><span class="keyword">(</span><span class="default">$String</span><span class="keyword">, </span><span class="default">$Format</span><span class="keyword">, </span><span class="default">$Start </span><span class="keyword">= </span><span class="string">'left'</span><span class="keyword">){
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//If we want to fill from right to left incase string is shorter then format
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$Start </span><span class="keyword">== </span><span class="string">'right'</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$String </span><span class="keyword">= </span><span class="default">strrev</span><span class="keyword">(</span><span class="default">$String</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$Format </span><span class="keyword">= </span><span class="default">strrev</span><span class="keyword">(</span><span class="default">$Format</span><span class="keyword">); 
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$Format </span><span class="keyword">== </span><span class="string">''</span><span class="keyword">) return </span><span class="default">$String</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$String </span><span class="keyword">== </span><span class="string">''</span><span class="keyword">) return </span><span class="default">$String</span><span class="keyword">;&nbsp; &nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$Result </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$FormatPos </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$StringPos </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; while ((</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$Format</span><span class="keyword">) - </span><span class="default">1</span><span class="keyword">) &gt;= </span><span class="default">$FormatPos </span><span class="keyword">&amp;&amp; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$String</span><span class="keyword">) &gt; </span><span class="default">$StringPos</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//If its a number =&gt; stores it
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$Format</span><span class="keyword">, </span><span class="default">$FormatPos</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">))) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$Result </span><span class="keyword">.= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$String</span><span class="keyword">, </span><span class="default">$StringPos</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$StringPos</span><span class="keyword">++;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//If it is not a number =&gt; stores the caracter
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">} else {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$Result </span><span class="keyword">.= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$Format</span><span class="keyword">, </span><span class="default">$FormatPos</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//Next caracter at the mask.
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$FormatPos</span><span class="keyword">++;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$Start </span><span class="keyword">== </span><span class="string">'right'</span><span class="keyword">) </span><span class="default">$Result </span><span class="keyword">= </span><span class="default">strrev</span><span class="keyword">(</span><span class="default">$Result</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$Result</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="55107""></a>
  <div class="note">
   <strong class="user">frank at jkelloggs dot dk</strong>
   <a href="#55107" class="date">25-Jul-2005 02:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Regarding the utf8_substr function from lmak: The pattern '/./u' doesn't match newline characters. This means that the substring from 0 to the total length of the string will miss the number of characters in the end matching the number of newlines in the string. To fix this one can add the s modifier (PCRE_DOTALL) in the pattern:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">utf8_substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">$start</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp; </span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="string">"/./su"</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">, </span><span class="default">$ar</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; if(</span><span class="default">func_num_args</span><span class="keyword">() &gt;= </span><span class="default">3</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$end </span><span class="keyword">= </span><span class="default">func_get_arg</span><span class="keyword">(</span><span class="default">2</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; return </span><span class="default">join</span><span class="keyword">(</span><span class="string">""</span><span class="keyword">,</span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">$ar</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">],</span><span class="default">$start</span><span class="keyword">,</span><span class="default">$end</span><span class="keyword">));<br />
&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; return </span><span class="default">join</span><span class="keyword">(</span><span class="string">""</span><span class="keyword">,</span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">$ar</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">],</span><span class="default">$start</span><span class="keyword">));<br />
&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54281""></a>
  <div class="note">
   <strong class="user">php_net at thomas dot trella dot de</strong>
   <a href="#54281" class="date">29-Jun-2005 08:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I needed to cut a string after x chars at a&nbsp; html converted utf-8 text (for example Japanese text like &amp;#23344;&amp;#35632;&amp;#24368;&amp;#33072;&amp;#27440;&amp;#32591;). <br />
The problem was, the different length of the signs, so I wrote the following function to handle that.<br />
Perhaps it helps.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">html_cutstr </span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$len</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; if (!</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/\&amp;#[0-9]*;.*/i'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rVal </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$len</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$chars </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$start </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$chars </span><span class="keyword">&gt;= </span><span class="default">$len</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; break;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$str_tmp </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">-</span><span class="default">$start</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/\&amp;#[0-9]*;.*/i'</span><span class="keyword">, </span><span class="default">$str_tmp</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$chars</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$start </span><span class="keyword">= </span><span class="default">$i</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$rVal </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">) &gt; </span><span class="default">$start</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$rVal </span><span class="keyword">.= </span><span class="string">" ..."</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$rVal</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="53639""></a>
  <div class="note">
   <strong class="user">ivanhoe011 at gmail dot com</strong>
   <a href="#53639" class="date">07-Jun-2005 08:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you need just a single character from the string you don't need to use substr(), just use curly braces notation:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// both lines will output the 3rd character<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">echo </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$my_string</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$my_string</span><span class="keyword">{</span><span class="default">2</span><span class="keyword">};&nbsp; <br />
</span><span class="default">?&gt;<br />
</span><br />
curly braces syntax is faster and more readable IMHO..</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="53605""></a>
  <div class="note">
   <strong class="user">rob NOSPAM at clancentric dot net</strong>
   <a href="#53605" class="date">07-Jun-2005 03:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I have developed a function with a similar outcome to jay's
<br />

<br />
Checks if the last character is or isnt a space. (does it the normal way if it is)
<br />
It explodes the string into an array of seperate works, the effect is... it chops off anything after and including the last space.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">limit_string</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$charlimit</span><span class="keyword">)
<br />
{
<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$charlimit</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">) != </span><span class="string">' '</span><span class="keyword">)
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$string </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="string">'0'</span><span class="keyword">,</span><span class="default">$charlimit</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">,</span><span class="default">$string</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_pop</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$new_string </span><span class="keyword">= </span><span class="default">implode</span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">,</span><span class="default">$array</span><span class="keyword">);
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$new_string</span><span class="keyword">.</span><span class="string">'...'</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; else
<br />
&nbsp;&nbsp;&nbsp; {&nbsp; &nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="string">'0'</span><span class="keyword">,</span><span class="default">$charlimit</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">).</span><span class="string">'...'</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="53199""></a>
  <div class="note">
   <strong class="user">bleakwind at msn dot com</strong>
   <a href="#53199" class="date">25-May-2005 10:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This returns the portion of str specified by the start and length parameters..<br />
It can performs multi-byte safe on number of characters. like mb_strcut() ...<br />
<br />
Note:<br />
1.Use it like this bite_str(string str, int start, int length [,byte of on string]);<br />
2.First character's position is 0. Second character position is 1, and so on...<br />
3.$byte is one character length of your encoding, For example: utf-8 is "3", gb2312 and big5 is "2"...you can use the function strlen() get it... <br />
Enjoy it :) ...<br />
<br />
--- Bleakwind<br />
QQ:940641<br />
<a href="http://www.weaverdream.com" rel="nofollow" target="_blank">http://www.weaverdream.com</a><br />
<br />
PS:I'm sorry my english is too poor... :( <br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// String intercept By Bleakwind<br />
// utf-8:$byte=3 | gb2312:$byte=2 | big5:$byte=2<br />
</span><span class="keyword">function </span><span class="default">bite_str</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">, </span><span class="default">$len</span><span class="keyword">, </span><span class="default">$byte</span><span class="keyword">=</span><span class="default">3</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str&nbsp; &nbsp;&nbsp; </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$count&nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str_len </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$str_len</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ((</span><span class="default">$count</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">-</span><span class="default">$start</span><span class="keyword">)&gt;</span><span class="default">$len</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$str&nbsp; </span><span class="keyword">.= </span><span class="string">"..."</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } elseif ((</span><span class="default">ord</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">)) &lt;= </span><span class="default">128</span><span class="keyword">) &amp;&amp; (</span><span class="default">$count </span><span class="keyword">&lt; </span><span class="default">$start</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$count</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } elseif ((</span><span class="default">ord</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">)) &gt; </span><span class="default">128</span><span class="keyword">) &amp;&amp; (</span><span class="default">$count </span><span class="keyword">&lt; </span><span class="default">$start</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$count </span><span class="keyword">= </span><span class="default">$count</span><span class="keyword">+</span><span class="default">2</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i&nbsp; &nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">$i</span><span class="keyword">+</span><span class="default">$byte</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } elseif ((</span><span class="default">ord</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">)) &lt;= </span><span class="default">128</span><span class="keyword">) &amp;&amp; (</span><span class="default">$count </span><span class="keyword">&gt;= </span><span class="default">$start</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$str&nbsp; </span><span class="keyword">.= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$count</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } elseif ((</span><span class="default">ord</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">)) &gt; </span><span class="default">128</span><span class="keyword">) &amp;&amp; (</span><span class="default">$count </span><span class="keyword">&gt;= </span><span class="default">$start</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$str&nbsp; </span><span class="keyword">.= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">,</span><span class="default">$byte</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$count </span><span class="keyword">= </span><span class="default">$count</span><span class="keyword">+</span><span class="default">2</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i&nbsp; &nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">$i</span><span class="keyword">+</span><span class="default">$byte</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$str</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">// Test<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="string">"123456?????123456?????123456???????"</span><span class="keyword">;<br />
for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">30</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++){<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"&lt;br&gt;"</span><span class="keyword">.</span><span class="default">bite_str</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">,</span><span class="default">20</span><span class="keyword">);&nbsp; &nbsp; <br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="52893""></a>
  <div class="note">
   <strong class="user">fanfatal at fanfatal dot pl</strong>
   <a href="#52893" class="date">16-May-2005 11:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hmm ... this is a script I wrote, whitch is very similar to substr, but it isn't takes html and bbcode for counting and it takes portion of string and show avoided (html &amp; bbcode) tags too ;] 
<br />
Specially usefull for show part of serach result included html and bbcode tags
<br />

<br />
<span class="default">&lt;?php
<br />

<br />
</span><span class="comment">/**
<br />
&nbsp;* string csubstr ( string string, int start [, int length] )
<br />
&nbsp;*
<br />
&nbsp;* @author FanFataL
<br />
&nbsp;* @param string string
<br />
&nbsp;* @param int start
<br />
&nbsp;* @param [int length]
<br />
&nbsp;* @return string
<br />
&nbsp;*/
<br />
</span><span class="keyword">function </span><span class="default">csubstr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">, </span><span class="default">$length</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pattern </span><span class="keyword">= </span><span class="string">'/(\[\w+[^\]]*?\]|\[\/\w+\]|&lt;\w+[^&gt;]*?&gt;|&lt;\/\w+&gt;)/i'</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$clean </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">chr</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">), </span><span class="default">$string</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; if(!</span><span class="default">$length</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$clean</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; else {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$clean</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">, </span><span class="default">$length</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$clean</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">, </span><span class="default">$length </span><span class="keyword">+ </span><span class="default">substr_count</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">chr</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">)));
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pattern </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">),</span><span class="string">'(.*?)'</span><span class="keyword">,</span><span class="default">preg_quote</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">));
<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/'</span><span class="keyword">.</span><span class="default">$pattern</span><span class="keyword">.</span><span class="string">'/is'</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">, </span><span class="default">$matched</span><span class="keyword">))
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$matched</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$string</span><span class="keyword">;
<br />
}
<br />

<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Using this is similar to simple substr.
<br />

<br />
Greatings ;]
<br />
...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="51144""></a>
  <div class="note">
   <strong class="user">woutermb at gmail dot com</strong>
   <a href="#51144" class="date">21-Mar-2005 11:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Well this is a script I wrote, what it does is chop up long words with malicious meaning into several parts. This way, a chat in a table will not get stretched anymore.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">text</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$limit</span><span class="keyword">=</span><span class="default">20</span><span class="keyword">,</span><span class="default">$chop</span><span class="keyword">=</span><span class="default">10</span><span class="keyword">){<br />
<br />
</span><span class="default">$text </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">" "</span><span class="keyword">,</span><span class="default">$string</span><span class="keyword">);<br />
while(list(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">) = </span><span class="default">each</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">)){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$length </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$length </span><span class="keyword">&gt;=</span><span class="default">20</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;=</span><span class="default">$length</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">+=</span><span class="default">10</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$new </span><span class="keyword">.= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$new </span><span class="keyword">.= </span><span class="string">" "</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$post </span><span class="keyword">.= </span><span class="default">$new</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; elseif(</span><span class="default">$length </span><span class="keyword">&lt;=</span><span class="default">15</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$post </span><span class="keyword">.= </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$post </span><span class="keyword">.= </span><span class="string">" "</span><span class="keyword">;<br />
}<br />
return(</span><span class="default">$post</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="comment">// for example, this would return:<br />
</span><span class="default">$output </span><span class="keyword">= </span><span class="default">text</span><span class="keyword">(</span><span class="string">"Well this text doesn't get cut up, yet thisssssssssssssssssssssssss one does."</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">);<br />
<br />
echo(</span><span class="default">$output</span><span class="keyword">); </span><span class="comment">// "Well this text doesn't get cup up, yet thiss sssss sssss sssss sssss sss one does."<br />
</span><span class="default">?&gt;<br />
</span><br />
I hope it was useful.. :)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="50915""></a>
  <div class="note">
   <strong class="user">steve at unicycle dot co dot nz</strong>
   <a href="#50915" class="date">13-Mar-2005 09:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To quickly trim an optional trailing slash off the end of a path name:<br />
<br />
if (substr( $path, -1 ) == '/') $path = substr( $path, 0, -1 );</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
