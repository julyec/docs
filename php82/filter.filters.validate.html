<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=UTF-8">
  <title>验证过滤器</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="filter.filters.html">? 过滤器类型</a></li>
      <li style="float: right;"><a href="filter.filters.sanitize.html">清理过滤器 ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="filter.filters.html">过滤器类型</a></li>
    <li>验证过滤器</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="filter.filters.validate" class="section">
  <h2 class="title">验证过滤器</h2>
   <p class="para">
    <table class="doctable table">
     <caption><strong>用于验证的过滤器列表</strong></caption>
     
      <thead>
       <tr>
        <th>ID</th>
        <th>名称</th>
        <th>选项</th>
        <th>flag</th>
        <th>说明</th>
       </tr>

      </thead>

      <tbody class="tbody">
       <tr>
        <td>
         <strong><code>FILTER_VALIDATE_BOOLEAN</code></strong>、<strong><code>FILTER_VALIDATE_BOOL</code></strong>
        </td>
        <td>&quot;boolean&quot;</td>
        <td>
         <code class="parameter">default</code>
        </td>
        <td>
          <strong><code>FILTER_NULL_ON_FAILURE</code></strong>
        </td>
        <td>
         <p class="para">
          &quot;1&quot;、&quot;true&quot;、&quot;on&quot; 和 &quot;yes&quot; 时返回 <strong><code>true</code></strong>，否则返回 <strong><code>false</code></strong>。
         </p>
         <p class="para">
          如果设置了 <strong><code>FILTER_NULL_ON_FAILURE</code></strong>，仅当 &quot;0&quot;、&quot;false&quot;、&quot;off&quot;、&quot;no&quot;
          和 &quot;&quot; 时才会返回 <strong><code>false</code></strong>，其它非布尔值都会返回 <strong><code>null</code></strong>。
         </p>
         <p class="para">
          字符串在对比前会使用 <span class="function"><a href="function.trim.html" class="function">trim()</a></span> 修剪。
         </p>
        </td>
       </tr>

       <tr>
        <td><strong><code>FILTER_VALIDATE_DOMAIN</code></strong></td>
        <td>&quot;validate_domain&quot;</td>
        <td>
         <code class="parameter">default</code>
        </td>
        <td>
         <strong><code>FILTER_FLAG_HOSTNAME</code></strong>、<strong><code>FILTER_NULL_ON_FAILURE</code></strong>
        </td>
        <td>
         <p class="para">
          验证域名标签的长度是否有效。
         </p>
         <p class="para">
          根据 RFC 1034、RFC 1035、RFC 952、RFC 1123、RFC 2732、RFC 2181 和 RFC 1123 的规范验证域名。可选的 flag
          <strong><code>FILTER_FLAG_HOSTNAME</code></strong> 会添加验证主机名的能力（它们必须以字母数字字符开头，并且只能包含字母数字字符或连字符）。
         </p>
        </td>
       </tr>

       <tr>
        <td><strong><code>FILTER_VALIDATE_EMAIL</code></strong></td>
        <td>&quot;validate_email&quot;</td>
        <td>
         <code class="parameter">default</code>
        </td>
        <td>
         <strong><code>FILTER_FLAG_EMAIL_UNICODE</code></strong>、<strong><code>FILTER_NULL_ON_FAILURE</code></strong>
        </td>
        <td>
         <p class="para">
          验证值是否是有效的电子邮件地址。
         </p>
         <p class="para">
          一般情况下，这将根据 <a href="http://www.faqs.org/rfcs/rfc822" class="link external" title="Link : http://www.faqs.org/rfcs/rfc822">&raquo;&nbsp;RFC 822</a> 对电子邮件地址进行验证，使用
          <code class="literal">addr-spec</code> 语法，并且不支持注释、空白折叠和无点域名的例外情况。
         </p>
        </td>
       </tr>

       <tr>
        <td><strong><code>FILTER_VALIDATE_FLOAT</code></strong></td>
        <td>&quot;float&quot;</td>
        <td>
         <code class="parameter">default</code>、<code class="parameter">decimal</code>、<code class="parameter">min_range</code>、<code class="parameter">max_range</code>
        </td>
        <td>
         <strong><code>FILTER_FLAG_ALLOW_THOUSAND</code></strong>、<strong><code>FILTER_NULL_ON_FAILURE</code></strong>
        </td>
        <td>
         <p class="para">
          将值作为浮点数验证，并且可选择在指定范围内进行验证，在验证成功后将其转换为浮点数。
         </p>
         <p class="para">
          字符串在对比前会使用 <span class="function"><a href="function.trim.html" class="function">trim()</a></span> 修剪。
         </p>
        </td>
       </tr>

       <tr>
        <td><strong><code>FILTER_VALIDATE_INT</code></strong></td>
        <td>&quot;int&quot;</td>
        <td>
         <code class="parameter">default</code>、<code class="parameter">min_range</code>、<code class="parameter">max_range</code>
        </td>
        <td>
         <strong><code>FILTER_FLAG_ALLOW_OCTAL</code></strong>、<strong><code>FILTER_FLAG_ALLOW_HEX</code></strong>、<strong><code>FILTER_NULL_ON_FAILURE</code></strong>
        </td>
        <td>
         <p class="para">
          将值作为整数验证，并且可选择在指定范围内进行验证，在验证成功后将其转换为整数。
         </p>
         <p class="para">
          字符串在对比前会使用 <span class="function"><a href="function.trim.html" class="function">trim()</a></span> 修剪。
         </p>
        </td>
       </tr>

       <tr>
        <td><strong><code>FILTER_VALIDATE_IP</code></strong></td>
        <td>&quot;validate_ip&quot;</td>
        <td>
         <code class="parameter">default</code>
        </td>
        <td>
         <strong><code>FILTER_FLAG_IPV4</code></strong>、<strong><code>FILTER_FLAG_IPV6</code></strong>、<strong><code>FILTER_FLAG_NO_PRIV_RANGE</code></strong>、<strong><code>FILTER_FLAG_NO_RES_RANGE</code></strong>、<strong><code>FILTER_FLAG_GLOBAL_RANGE</code></strong>、<strong><code>FILTER_NULL_ON_FAILURE</code></strong>
        </td>
        <td>
         将值作为 IP 地址验证，可选择仅验证 IPv4、IPv6 或不验证私有、保留范围。
        </td>
       </tr>

       <tr>
        <td><strong><code>FILTER_VALIDATE_MAC</code></strong></td>
        <td>&quot;validate_mac_address&quot;</td>
        <td>
         <code class="parameter">default</code>
        </td>
        <td>
         <strong><code>FILTER_NULL_ON_FAILURE</code></strong>
        </td>
        <td>将值作为 MAC 地址验证。</td>
       </tr>

       <tr>
        <td><strong><code>FILTER_VALIDATE_REGEXP</code></strong></td>
        <td>&quot;validate_regexp&quot;</td>
        <td>
         <code class="parameter">default</code>、<code class="parameter">regexp</code>
        </td>
        <td>
         <strong><code>FILTER_NULL_ON_FAILURE</code></strong>
        </td>
        <td>
         根据 <code class="parameter">regexp</code>（<a href="book.pcre.html" class="link">Perl 兼容</a>的正则表达式）验证值。
        </td>
       </tr>

       <tr>
        <td><strong><code>FILTER_VALIDATE_URL</code></strong></td>
        <td>&quot;validate_url&quot;</td>
        <td>
         <code class="parameter">default</code>
        </td>
        <td>
         <strong><code>FILTER_FLAG_SCHEME_REQUIRED</code></strong>、<strong><code>FILTER_FLAG_HOST_REQUIRED</code></strong>、<strong><code>FILTER_FLAG_PATH_REQUIRED</code></strong>、<strong><code>FILTER_FLAG_QUERY_REQUIRED</code></strong>、<strong><code>FILTER_NULL_ON_FAILURE</code></strong>
        </td>
        <td>
         验证值是否为 URL（根据 <a href="http://www.faqs.org/rfcs/rfc2396" class="link external" title="Link : http://www.faqs.org/rfcs/rfc2396">&raquo;&nbsp;http://www.faqs.org/rfcs/rfc2396</a>），并可选择验证 URL 所需的组件。请注意，有效的
         URL 可能不会指定 HTTP 协议（<code class="literal">http://</code>），因此可能需要进一步验证以确定 URL 是否使用了期望的协议，如 <code class="literal">ssh://</code>
         或<code class="literal">mailto:</code>。请注意，该函数只会认为 ASCII 编码的 URL 是有效的；国际化域名（包含非 ASCII 字符）将无法通过验证。
        </td>
       </tr>

      </tbody>
     
    </table>

   </p>
   <blockquote class="note"><p><strong class="note">Note</strong>: 
    <p class="para">
     当将 <code class="parameter">default</code> 设置到选项，如果值未通过验证，将使用 <code class="parameter">default</code> 的值。
    </p>
   </p></blockquote>

  <div class="simplesect">
   <h3 class="title">更新日志</h3>
   <p class="para">
    <table class="doctable informaltable">
     
      <thead>
       <tr>
        <th>版本</th>
        <th>说明</th>
       </tr>

      </thead>

      <tbody class="tbody">
       <tr>
        <td>8.0.0</td>
        <td>
         <strong><code>FILTER_VALIDATE_URL</code></strong> 过滤器移除 <strong><code>FILTER_FLAG_SCHEME_REQUIRED</code></strong>
         和 <strong><code>FILTER_FLAG_HOST_REQUIRED</code></strong> flag。
         <code class="literal">scheme</code> 和 <code class="literal">host</code> 始终（一直以来）必需。
        </td>
       </tr>

       <tr>
        <td>8.0.0</td>
        <td>
         新增 <strong><code>FILTER_VALIDATE_BOOL</code></strong> 作为 <strong><code>FILTER_VALIDATE_BOOLEAN</code></strong>
         的别名。优先使用 <strong><code>FILTER_VALIDATE_BOOL</code></strong>。
        </td>
       </tr>

       <tr>
        <td>7.4.0</td>
        <td>
         <strong><code>FILTER_VALIDATE_FLOAT</code></strong> 新增 <code class="parameter">min_range</code> 和 <code class="parameter">max_range</code> 选项。
        </td>
       </tr>

       <tr>
        <td>7.0.0</td>
        <td>
         新增 <strong><code>FILTER_FLAG_HOSTNAME</code></strong> 和 <strong><code>FILTER_VALIDATE_DOMAIN</code></strong>。
        </td>
       </tr>

      </tbody>
     
    </table>

   </p>
  </div>

 </div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="127922""></a>
  <div class="note">
   <strong class="user">Andrew Rump</strong>
   <a href="#127922" class="date">13-Nov-2022 08:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
FILTER_VALIDATE_URL do not support IDN in any form, i.e., neither r?dgr?d.dk nor xn--rdgrd-vuad.dk even though the domain is active.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="126903""></a>
  <div class="note">
   <strong class="user">holger dot ahrens at rittec dot de</strong>
   <a href="#126903" class="date">07-Mar-2022 08:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
FILTER_VALIDATE_FLOAT Security Risk CVE-2021-21708 High Risk from <br />
<br />
Warning from MITRE Corporation, Common Vulnerabilities and Exposures:<br />
<br />
In PHP versions 7.4.x below 7.4.28, 8.0.x below 8.0.16, and 8.1.x below 8.1.3, when using filter functions with FILTER_VALIDATE_FLOAT filter and min/max limits, if the filter fails, there is a possibility to trigger use of allocated memory after free, which can result it crashes, and potentially in overwrite of other memory chunks and RCE. This issue affects: code that uses FILTER_VALIDATE_FLOAT with min/max limits.<br />
<br />
(Source: https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-21708)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="126576""></a>
  <div class="note">
   <strong class="user">boan at jfmedier dot dk</strong>
   <a href="#126576" class="date">11-Nov-2021 09:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that some flags are removed in PHP 8. E.g. FILTER_FLAG_HOST_REQUIRED</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="125006""></a>
  <div class="note">
   <strong class="user">andrew dot purkett at gmail dot com</strong>
   <a href="#125006" class="date">13-May-2020 05:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Please note that the FILTER_FLAG_NO_PRIV_RANGE flag does not exclude IPv4 private addresses in the IPv6 namespace, such as ::ffff:169.254.169.254.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="124979""></a>
  <div class="note">
   <strong class="user">carlosv775 at gmail dot com</strong>
   <a href="#124979" class="date">05-May-2020 07:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Looks like FILTER_VALIDATE_DOMAIN isn't available on PHP &lt; 7:<br />
<br />
https://3v4l.org/eOPLM</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="124876""></a>
  <div class="note">
   <strong class="user">MR Yekta</strong>
   <a href="#124876" class="date">02-Apr-2020 10:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
since php 7.4 <br />
you can use these 3 beautiful conditions for from validation for validation less, great or in range<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;* less_than_equal_to<br />
&nbsp;*/<br />
</span><span class="default">$x </span><span class="keyword">= </span><span class="default">50</span><span class="keyword">;<br />
if (</span><span class="default">filter_var</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_FLOAT</span><span class="keyword">, [</span><span class="string">"options" </span><span class="keyword">=&gt; [</span><span class="string">"max_range" </span><span class="keyword">=&gt; </span><span class="default">100</span><span class="keyword">]]) !== </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"result : </span><span class="default">$x</span><span class="string"> is less than OR equal to 100"</span><span class="keyword">;<br />
} else {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"result : </span><span class="default">$x</span><span class="string"> is NOT less than OR equal to 100"</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span>result : 50 is less than OR equal to 100<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;* greater_than_equal_to <br />
&nbsp;*/<br />
</span><span class="default">$x </span><span class="keyword">= </span><span class="default">50</span><span class="keyword">;<br />
if (</span><span class="default">filter_var</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_FLOAT</span><span class="keyword">, [</span><span class="string">"options" </span><span class="keyword">=&gt; [</span><span class="string">"min_range" </span><span class="keyword">=&gt; </span><span class="default">100</span><span class="keyword">]]) !== </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"result : </span><span class="default">$x</span><span class="string"> is greater than OR equal to 100"</span><span class="keyword">;<br />
} else {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"result : </span><span class="default">$x</span><span class="string"> is NOT greater than OR equal to 100"</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span>result : 50 is NOT greater than OR equal to 100<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;* less_than_equal_to &amp;&amp; greater_than_equal_to<br />
&nbsp;*/<br />
</span><span class="default">$x </span><span class="keyword">= </span><span class="default">50</span><span class="keyword">;<br />
if (</span><span class="default">filter_var</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_FLOAT</span><span class="keyword">, [</span><span class="string">"options" </span><span class="keyword">=&gt; [</span><span class="string">"min_range" </span><span class="keyword">=&gt; </span><span class="default">0 </span><span class="keyword">, </span><span class="string">"max_range"</span><span class="keyword">=&gt; </span><span class="default">100</span><span class="keyword">]]) !== </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"result : </span><span class="default">$x</span><span class="string"> is in range of 0 to 100"</span><span class="keyword">;<br />
} else {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"result : </span><span class="default">$x</span><span class="string"> in NOT range of 0 to 100"</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span>result : 50 is in range of 0 to 100</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="124109""></a>
  <div class="note">
   <strong class="user">Vee W.</strong>
   <a href="#124109" class="date">12-Aug-2019 10:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
`FILTER_FLAG_EMAIL_UNICODE` was added in PHP 7.1</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="122336""></a>
  <div class="note">
   <strong class="user">gee2711 at googlemail dot com</strong>
   <a href="#122336" class="date">30-Jan-2018 06:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
FILTER_FLAG_QUERY_REQUIRED is failing URLs that are encoded e.g.<br />
<br />
<a href="http://example.com/page.php?q=growing+big" rel="nofollow" target="_blank">http://example.com/page.php?q=growing+big</a><br />
<br />
Fails whilst<br />
<br />
<a href="http://example.com/page.php?q=big" rel="nofollow" target="_blank">http://example.com/page.php?q=big</a><br />
<br />
So anything more than one word encoded fails.<br />
<br />
Tested on PHP version 7.1</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="121047""></a>
  <div class="note">
   <strong class="user">luca at accomazzi dot net</strong>
   <a href="#121047" class="date">04-May-2017 02:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A word to the wise regarding floats.<br />
<br />
$t = '312041.25 &amp;euro; instead of 896.70 &amp;euro;';<br />
echo filter_var ($t, FILTER_SANITIZE_NUMBER_FLOAT, FILTER_FLAG_ALLOW_FRACTION);<br />
<br />
will return<br />
312041.25896.70<br />
which is likely not what you were expecting. In 2007 someone suggested it's not acceptable (see https://bugs.php.net/bug.php?id=40156&amp;edit=2) but it was flagged "not a bug" because these kind of filters are only supposed to filter out illegal characters.<br />
Of course if you were to use FILTER_VALIDATE_FLOAT it would just return that the input is not valid.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="119528""></a>
  <div class="note">
   <strong class="user">kizge</strong>
   <a href="#119528" class="date">30-Jun-2016 08:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
FILTER_VALIDATE_INT first casts its value to string which produces unexpected result for bool and float (https://bugs.php.net/bug.php?id=72490):<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">// Prints int(1).<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">filter_var</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_INT</span><span class="keyword">));<br />
<br />
</span><span class="comment">// ...but this prints bool(false).<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">filter_var</span><span class="keyword">(</span><span class="default">false</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_INT</span><span class="keyword">));<br />
<br />
</span><span class="comment">// --------<br />
<br />
// Prints bool(false).<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">filter_var</span><span class="keyword">(</span><span class="default">1.1</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_INT</span><span class="keyword">));<br />
<br />
</span><span class="comment">// ...but this prints int(0).<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">filter_var</span><span class="keyword">(</span><span class="default">0.0</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_INT</span><span class="keyword">));<br />
<br />
</span><span class="comment">// ...but this again is bool(false).<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">filter_var</span><span class="keyword">(</span><span class="string">'0.0'</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_INT</span><span class="keyword">));<br />
<br />
</span><span class="comment">// Also bool(false).<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">filter_var</span><span class="keyword">(</span><span class="string">'-0.0'</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_INT</span><span class="keyword">));<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Live sample: https://3v4l.org/CZW0W<br />
<br />
The docs are not clear on how exactly this casting affects the result for certain input values.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="118591""></a>
  <div class="note">
   <strong class="user">sebastian dot piskorski at gmail dot com</strong>
   <a href="#118591" class="date">05-Jan-2016 12:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
FILTER_VALIDATE_EMAIL not only doesn't support whitespace folding and comments. It only checks Addr-spec part of email address. Otherwise it should mark such address as valid: 'Test Example &lt;test@example.com&gt;' because it is valid according to RFC 822.<br />
<br />
Also address "test@localhost" should be valid. Which is mentioned in another note.<br />
<br />
You can test it with this code:<br />
<span class="default">&lt;?php<br />
<br />
$emails </span><span class="keyword">= array(<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'Test Example &lt;test@example.com&gt;'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'test@localhost'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'test@localhost.com'<br />
</span><span class="keyword">);<br />
<br />
foreach (</span><span class="default">$emails </span><span class="keyword">as </span><span class="default">$email</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; echo (</span><span class="default">filter_var</span><span class="keyword">(</span><span class="default">$email</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_EMAIL</span><span class="keyword">)) ? <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"[+] Email '</span><span class="default">$email</span><span class="string">' is valid\n" </span><span class="keyword">: <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"[-] Email '</span><span class="default">$email</span><span class="string">' is NOT valid\n"</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Output for PHP 5.3.21 - 7.0.1 :<br />
[-] Email 'Test Example &lt;test@example.com&gt;' is NOT valid<br />
[-] Email 'test@localhost' is NOT valid<br />
[+] Email 'test@localhost.com' is valid</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="118383""></a>
  <div class="note">
   <strong class="user">rsnell at usgs dot gov</strong>
   <a href="#118383" class="date">25-Nov-2015 05:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that if using FILTER_NULL_ON_FAILURE as a flag with the FILTER_VALIDATE_BOOLEAN id then NULL is no longer returned if the variable name is not set in the external variable array. It will instead return FALSE. In the description is says that when using the FILTER_NULL_ON_FAILURE flag that ' FALSE is returned only for "0", "false", "off", "no", and ""' an makes no mention of this additional state that can also return false. The behavior is mentioned on the filter_input documentation page under Return Values but that is not overly helpful if one is just looking here.<br />
<br />
If FILTER_NULL_ON_FAILURE is not used then NULL is returned when the variable name is not set in the external variable array, TRUE is returned for "1", "true", "on" and "yes" and FALSE is returned for everything else.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="117950""></a>
  <div class="note">
   <strong class="user">Lech</strong>
   <a href="#117950" class="date">05-Sep-2015 08:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The description for FILTER_VALIDATE_URL seems incorrect/misleading. "Beware a valid URL may not specify the HTTP protocol" implies a valid URL cannot specify the HTTP protocol. I think "Beware a valid URL need not specify..." would be better.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="117425""></a>
  <div class="note">
   <strong class="user">Wrinkled Cheese</strong>
   <a href="#117425" class="date">09-Jun-2015 03:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When validating a URL, as documented, the protocol is not validated.&nbsp; However, it is required to be present.<br />
<br />
For example:<br />
<br />
I don't expect a protocol to be present.&nbsp; To validate expected input I have to add a "protocol" as a prefix, and return true or false, and further validate the input.<br />
<br />
$r = filter_var(''this.doesnt.matter.so.why.is.it.required://'.$host, FILTER_VALIDATE_URL);<br />
return ($r != '' &amp;&amp; $r !== false) ? true : false;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="117387""></a>
  <div class="note">
   <strong class="user">Darth Killer</strong>
   <a href="#117387" class="date">02-Jun-2015 08:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Contrary to what documentation implies, the FILTER_NULL_ON_FAILURE seem to affect any validation filter, not just FILTER_VALIDATE_BOOLEAN. I've been using that since PHP 5.2, and as of PHP 5.6.8 it still works. I have no clue if it's a blug or if it is as intended, in which case the documentation needs to be fixed.<br />
<br />
When the flag is used on a validation filter other than FILTER_VALIDATE_BOOLEAN, as expected the filter will return NULL instead of FALSE upon failure. This is quite useful when filtering a POST form with filter_input_array(), where you don't want to check what field is invalid and what field is missing. Just check if NULL is among the returned elements and you're done.<br />
<br />
<span class="default">&lt;?php<br />
$definition </span><span class="keyword">= array(<br />
&nbsp;&nbsp; </span><span class="string">'login' </span><span class="keyword">=&gt; array(<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="string">'filter' </span><span class="keyword">=&gt; </span><span class="default">FILTER_VALIDATE_STRING</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="string">'flags' </span><span class="keyword">=&gt; </span><span class="default">FILTER_NULL_ON_FAILURE<br />
&nbsp;&nbsp; </span><span class="keyword">),<br />
&nbsp;&nbsp; </span><span class="string">'pwd' </span><span class="keyword">=&gt; </span><span class="default">FILTER_UNSAFE_RAW<br />
</span><span class="keyword">);<br />
</span><span class="default">$form_data </span><span class="keyword">= </span><span class="default">filter_input_array</span><span class="keyword">(</span><span class="default">INPUT_POST</span><span class="keyword">, </span><span class="default">$definition</span><span class="keyword">);<br />
if(</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">null</span><span class="keyword">, </span><span class="default">$form_data</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">)) {<br />
&nbsp;&nbsp; </span><span class="comment">// invalid form<br />
</span><span class="keyword">} else {<br />
&nbsp;&nbsp; </span><span class="comment">// valid form, let's proceed<br />
</span><span class="keyword">}<br />
</span><span class="default">?&gt;<br />
</span><br />
Of course, if you want more precise error messages that approach won't work. But it's still good to know, i believe.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="117347""></a>
  <div class="note">
   <strong class="user">Luuk</strong>
   <a href="#117347" class="date">25-May-2015 10:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
@2:<br />
$value = " 0 ";<br />
$filtered = filter_var($value, FILTER_VALIDATE_INT);<br />
if($filtered || $filtered === 0)<br />
{<br />
&nbsp;&nbsp;&nbsp; // validated as an int<br />
} <br />
<br />
I think next code is better:<br />
<br />
$value = "0";<br />
if(filter_var($value, FILTER_VALIDATE_INT) !== false)<br />
{<br />
&nbsp; .....</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="117330""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#117330" class="date">22-May-2015 08:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
FILTER_VALIDATE_FLOAT, decimal option mean decimal notation['.', ','].</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="116961""></a>
  <div class="note">
   <strong class="user">maruerru at gmail dot com</strong>
   <a href="#116961" class="date">26-Mar-2015 11:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Often I see some code like the following:<br />
$value = "12";<br />
if( filter_var($value, FILTER_VALIDATE_INT) )<br />
{<br />
&nbsp;&nbsp;&nbsp; // validated as an int<br />
}<br />
<br />
The above works as intended, except when $value is "0". In the above case it will be interpreted as FALSE.<br />
<br />
For the correct behavior,&nbsp; you have not only to check if it is equal (==) to false, but also identic (===) to FALSE:<br />
$value = " 0 ";<br />
if( filter_var($value, FILTER_VALIDATE_INT)&nbsp; === FALSE )<br />
{<br />
&nbsp;&nbsp;&nbsp; // validated as an int<br />
}<br />
<br />
I hope, I could help.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="116924""></a>
  <div class="note">
   <strong class="user">bryanwayb at gmail dot com</strong>
   <a href="#116924" class="date">22-Mar-2015 04:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It's good to remember that using filter_var is primarily for filtering input values when doing boolean logic comparisons. Take the following:<br />
<br />
$value = "12";<br />
if(filter_var($value, FILTER_VALIDATE_INT))<br />
{<br />
&nbsp;&nbsp;&nbsp; // validated as an int<br />
}<br />
<br />
The above works as intended, except when $value = "0". In which case filter_var returns a 0, aka false when used as a boolean.<br />
<br />
For the correct behavior, do a zero check.<br />
<br />
$value = " 0 ";<br />
$filtered = filter_var($value, FILTER_VALIDATE_INT);<br />
if($filtered || $filtered === 0)<br />
{<br />
&nbsp;&nbsp;&nbsp; // validated as an int<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113306""></a>
  <div class="note">
   <strong class="user">Bastien</strong>
   <a href="#113306" class="date">24-Sep-2013 08:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Rejection of so-called partial domains because of "missing" dot is not following section 2.3.5 of RFC 5321.<br />
<br />
It says FQDNs are permitted, and com, org, or va are (well, may be) valids FQDNs. It depends on DNS, not on syntax.<br />
<br />
Some TDLs (although few of them) have MX RRs, the for example "abuse@va" is correct.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="111692""></a>
  <div class="note">
   <strong class="user">rowan dot collins at gmail dot com</strong>
   <a href="#111692" class="date">17-Mar-2013 08:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Regarding "partial" addresses with no . in the domain part, a comment in the source code (in ext/filter/logical_filters.c) justifies this rejection thus:<br />
<br />
&nbsp;&nbsp; &nbsp; * The regex below is based on a regex by Michael Rushton.<br />
&nbsp;&nbsp; &nbsp; * However, it is not identical.&nbsp; I changed it to only consider routeable<br />
&nbsp;&nbsp; &nbsp; * addresses as valid.&nbsp; Michael's regex considers a@b a valid address<br />
&nbsp;&nbsp; &nbsp; * which conflicts with section 2.3.5 of RFC 5321 which states that:<br />
&nbsp;&nbsp; &nbsp; *<br />
&nbsp;&nbsp; &nbsp; *&nbsp;&nbsp; Only resolvable, fully-qualified domain names (FQDNs) are permitted<br />
&nbsp;&nbsp; &nbsp; *&nbsp;&nbsp; when domain names are used in SMTP.&nbsp; In other words, names that can<br />
&nbsp;&nbsp; &nbsp; *&nbsp;&nbsp; be resolved to MX RRs or address (i.e., A or AAAA) RRs (as discussed<br />
&nbsp;&nbsp; &nbsp; *&nbsp;&nbsp; in Section 5) are permitted, as are CNAME RRs whose targets can be<br />
&nbsp;&nbsp; &nbsp; *&nbsp;&nbsp; resolved, in turn, to MX or address RRs.&nbsp; Local nicknames or<br />
&nbsp;&nbsp; &nbsp; *&nbsp;&nbsp; unqualified names MUST NOT be used.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="110411""></a>
  <div class="note">
   <strong class="user">boy at relaxnow dot nl</strong>
   <a href="#110411" class="date">19-Oct-2012 02:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
FILTER_VALIDATE_URL does not work with URNs, examples of valid URIs according to RFC3986 and if they are accepted by FILTER_VALIDATE_URL:
<br />

<br />
[PASS] <a href="ftp://ftp.is.co.za.example.org/rfc/rfc1808.txt" rel="nofollow" target="_blank">ftp://ftp.is.co.za.example.org/rfc/rfc1808.txt</a>
<br />
[PASS] gopher://spinaltap.micro.umn.example.edu/00/Weather/California/Los%20Angeles
<br />
[PASS] <a href="http://www.math.uio.no.example.net/faq/compression-faq/part1.html" rel="nofollow" target="_blank">http://www.math.uio.no.example.net/faq/compression-faq/part1.html</a>
<br />
[PASS] <a href="mailto:mduerst@ifi.unizh.example.gov" rel="nofollow" target="_blank">mailto:mduerst@ifi.unizh.example.gov</a>
<br />
[PASS] news:comp.infosystems.www.servers.unix
<br />
[PASS] telnet://melvyl.ucop.example.edu/
<br />
[PASS] <a href="http://www.ietf.org/rfc/rfc2396.txt" rel="nofollow" target="_blank">http://www.ietf.org/rfc/rfc2396.txt</a>
<br />
[PASS] ldap://[2001:db8::7]/c=GB?objectClass?one
<br />
[PASS] <a href="mailto:John.Doe@example.com" rel="nofollow" target="_blank">mailto:John.Doe@example.com</a>
<br />
[PASS] news:comp.infosystems.www.servers.unix
<br />
[FAIL] tel:+1-816-555-1212
<br />
[PASS] telnet://192.0.2.16:80/
<br />
[FAIL] urn:oasis:names:specification:docbook:dtd:xml:4.1.2</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="108551""></a>
  <div class="note">
   <strong class="user">bee kay two at em ee dot com</strong>
   <a href="#108551" class="date">06-May-2012 04:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Notably missing is a way to validate text entry as printable,<br />
printable multiline,<br />
or printable and safe (tag free)<br />
<br />
FILTER_VALIDATE_TEXT, which validates no special characters<br />
perhaps with FILTER_FLAG_ALLOW_NEWLINE<br />
and FILTER_FLAG_NOTAG to disallow tag starters</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="103334""></a>
  <div class="note">
   <strong class="user">php at sethsyberg dot com</strong>
   <a href="#103334" class="date">07-Apr-2011 01:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When validating floats, you must use the Identical/Not identical operators for proper validation of zeros:<br />
<br />
This will not work as expected:<br />
<span class="default">&lt;?php<br />
$x </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
if (!</span><span class="default">filter_var</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_FLOAT</span><span class="keyword">)) {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"</span><span class="default">$x</span><span class="string"> is a valid float"</span><span class="keyword">;<br />
} else {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"</span><span class="default">$x</span><span class="string"> is NOT a valid float"</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
This will work as expected:<br />
<span class="default">&lt;?php<br />
$x </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
if (</span><span class="default">filter_var</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_FLOAT</span><span class="keyword">)!== </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"</span><span class="default">$x</span><span class="string"> is a valid float"</span><span class="keyword">;<br />
} else {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"</span><span class="default">$x</span><span class="string"> is NOT a valid float"</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102398""></a>
  <div class="note">
   <strong class="user">php dot net at piskvor dot org</strong>
   <a href="#102398" class="date">11-Feb-2011 08:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
FILTER_VALIDATE_EMAIL is discarding valid e-mail addresses containing IDN. Since there are real, live IDNs on the Internet, that means the filtered output is too strict, leading to false negatives.<br />
<br />
Punycode-encoded IDN addresses pass the filter correctly; so before checking for validity, it is necessary to convert the e-mail address to punycode.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101693""></a>
  <div class="note">
   <strong class="user">Clifton</strong>
   <a href="#101693" class="date">05-Jan-2011 08:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
FILTER_VALIDATE_EMAIL does NOT allow incomplete e-mail addresses to be validated as mentioned by Tomas.
<br />

<br />
Using the following code:
<br />

<br />
<span class="default">&lt;?php
<br />
$email </span><span class="keyword">= </span><span class="string">"clifton@example"</span><span class="keyword">; </span><span class="comment">//Note the .com missing
<br />
</span><span class="keyword">echo </span><span class="string">"PHP Version: "</span><span class="keyword">.</span><span class="default">phpversion</span><span class="keyword">().</span><span class="string">'&lt;br&gt;'</span><span class="keyword">;
<br />
if(</span><span class="default">filter_var</span><span class="keyword">(</span><span class="default">$email</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_EMAIL</span><span class="keyword">)){
<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$email</span><span class="keyword">.</span><span class="string">'&lt;br&gt;'</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">filter_var</span><span class="keyword">(</span><span class="default">$email</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_EMAIL</span><span class="keyword">));
<br />
}else{
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">filter_var</span><span class="keyword">(</span><span class="default">$email</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_EMAIL</span><span class="keyword">));&nbsp; &nbsp; 
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Returns:
<br />
PHP Version: 5.2.14 //On MY server, may be different depending on which version you have installed.
<br />
bool(false)
<br />

<br />
While the following code:
<br />

<br />
<span class="default">&lt;?php
<br />
$email </span><span class="keyword">= </span><span class="string">"clifton@example.com"</span><span class="keyword">; </span><span class="comment">//Note the .com added
<br />
</span><span class="keyword">echo </span><span class="string">"PHP Version: "</span><span class="keyword">.</span><span class="default">phpversion</span><span class="keyword">().</span><span class="string">'&lt;br&gt;'</span><span class="keyword">;
<br />
if(</span><span class="default">filter_var</span><span class="keyword">(</span><span class="default">$email</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_EMAIL</span><span class="keyword">)){
<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$email</span><span class="keyword">.</span><span class="string">'&lt;br&gt;'</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">filter_var</span><span class="keyword">(</span><span class="default">$email</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_EMAIL</span><span class="keyword">));
<br />
}else{
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">filter_var</span><span class="keyword">(</span><span class="default">$email</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_EMAIL</span><span class="keyword">));&nbsp; &nbsp; 
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Returns:
<br />
PHP Version: 5.2.14 //On MY server, may be different depending on which version you have installed.
<br />
clifton@example.com
<br />
string(16) "clifton@example.com"
<br />

<br />
This feature is only available for PHP Versions (PHP 5 &gt;= 5.2.0) according to documentation. So make sure your version is correct.
<br />

<br />
Cheers,
<br />
Clifton</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
