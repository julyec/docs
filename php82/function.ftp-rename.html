<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=UTF-8">
  <title>更改 FTP 服务器上的文件或目录名</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.ftp-rawlist.html">? ftp_rawlist</a></li>
      <li style="float: right;"><a href="function.ftp-rmdir.html">ftp_rmdir ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.ftp.html">FTP 函数</a></li>
    <li>更改 FTP 服务器上的文件或目录名</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.ftp-rename" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">ftp_rename</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">ftp_rename</span> &mdash; <span class="dc-title">更改 FTP 服务器上的文件或目录名</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.ftp-rename-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>ftp_rename</strong></span>(<span class="methodparam"><span class="type"><a href="class.ftp-connection.html" class="type FTP\Connection">FTP\Connection</a></span> <code class="parameter">$ftp</code></span>, <span class="methodparam"><span class="type">string</span> <code class="parameter">$from</code></span>, <span class="methodparam"><span class="type">string</span> <code class="parameter">$to</code></span>): <span class="type">bool</span></div>

  <p class="para rdfs-comment">
   <span class="function"><strong>ftp_rename()</strong></span> 将 FTP 服务器上的一个文件或目录改名。
  </p>
 </div>

 <div class="refsect1 parameters" id="refsect1-function.ftp-rename-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">ftp</code></dt>

     <dd>

       <p class="para"><span class="classname"><a href="class.ftp-connection.html" class="classname">FTP\Connection</a></span> 实例。</p>
     </dd>

    
    
     <dt>
<code class="parameter">from</code></dt>

     <dd>

      <p class="para">
       原来的文件／目录名。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">to</code></dt>

     <dd>

      <p class="para">
       新名字。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.ftp-rename-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   成功时返回 <strong><code>true</code></strong>， 或者在失败时返回 <strong><code>false</code></strong>。 失败时（比如试图重命名一个不存在的文件）将会抛出一个 <code class="literal">E_WARNING</code> 错误信息。
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.ftp-rename-changelog">
  <h3 class="title">更新日志</h3>
  <table class="doctable informaltable">
   
    <thead>
     <tr>
      <th>版本</th>
      <th>说明</th>
     </tr>

    </thead>

    <tbody class="tbody">
     <tr>
 <td>8.1.0</td>
 <td>
  现在 <code class="parameter">ftp</code> 参数接受 <span class="classname"><a href="class.ftp-connection.html" class="classname">FTP\Connection</a></span>
  实例，之前接受 <a href="language.types.resource.html" class="link">资源(resource)</a>。
 </td>
</tr>

    </tbody>
   
  </table>

 </div>

 
 <div class="refsect1 examples" id="refsect1-function.ftp-rename-examples">
  <h3 class="title">示例</h3>
  <p class="para">
   <div class="example" id="">
    <p><strong>Example #1 <span class="function"><strong>ftp_rename()</strong></span> 例子</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$old_file </span><span style="color: #007700">= </span><span style="color: #DD0000">'somefile.txt.bak'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$new_file </span><span style="color: #007700">= </span><span style="color: #DD0000">'somefile.txt'</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">// set up basic connection<br /></span><span style="color: #0000BB">$ftp </span><span style="color: #007700">= </span><span style="color: #0000BB">ftp_connect</span><span style="color: #007700">(</span><span style="color: #0000BB">$ftp_server</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// login with username and password<br /></span><span style="color: #0000BB">$login_result </span><span style="color: #007700">= </span><span style="color: #0000BB">ftp_login</span><span style="color: #007700">(</span><span style="color: #0000BB">$ftp</span><span style="color: #007700">, </span><span style="color: #0000BB">$ftp_user_name</span><span style="color: #007700">, </span><span style="color: #0000BB">$ftp_user_pass</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// try to rename $old_file to $new_file<br /></span><span style="color: #007700">if (</span><span style="color: #0000BB">ftp_rename</span><span style="color: #007700">(</span><span style="color: #0000BB">$ftp</span><span style="color: #007700">, </span><span style="color: #0000BB">$old_file</span><span style="color: #007700">, </span><span style="color: #0000BB">$new_file</span><span style="color: #007700">)) {<br /> echo </span><span style="color: #DD0000">"successfully renamed </span><span style="color: #0000BB">$old_file</span><span style="color: #DD0000"> to </span><span style="color: #0000BB">$new_file</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br />} else {<br /> echo </span><span style="color: #DD0000">"There was a problem while renaming </span><span style="color: #0000BB">$old_file</span><span style="color: #DD0000"> to </span><span style="color: #0000BB">$new_file</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #FF8000">// close the connection<br /></span><span style="color: #0000BB">ftp_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$ftp</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="79769""></a>
  <div class="note">
   <strong class="user">alishahnovin at hotmail dot com</strong>
   <a href="#79769" class="date">11-Dec-2007 07:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You want to make sure you check the existence of the new name before renaming files, because otherwise you could risk losing files. Just do a simple check with ftp_size with the new name. If it's !=-1, you're going to want to throw some kind of error, otherwise you'll be losing a file...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73049""></a>
  <div class="note">
   <strong class="user">aventaria at hotmxxx dot com</strong>
   <a href="#73049" class="date">07-Feb-2007 04:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function isn't only able to rename files, but also folders. And it is not only able to rename them, but also move them, and, in the case of folders, their contents as well (so folders don't have to be empty to move). For example:<br />
<br />
<span class="default">&lt;?php<br />
ftp_rename</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">, </span><span class="string">"./dir1/dir2/"</span><span class="keyword">, </span><span class="string">"./dir3/"</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Now the folder dir2 (which prevously was in folder dir1) has moved to the same folder as dir1, and it has kept its original contents (the content just moved along).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="71392""></a>
  <div class="note">
   <strong class="user">Hazem dot Khaled at gmail dot com</strong>
   <a href="#71392" class="date">26-Nov-2006 07:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
to rename the file or folder you should use ftp_chdir to select the current directory on ftp server or you should write the full path to file in old name and in new name<br />
<br />
Ex. 1<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// open the folder that have the file<br />
</span><span class="default">ftp_chdir</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">, </span><span class="string">'/www/ftp-filemanager/'</span><span class="keyword">);<br />
<br />
</span><span class="comment">// rename the file<br />
</span><span class="default">ftp_rename</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">, </span><span class="string">'file1.jpg'</span><span class="keyword">, </span><span class="string">'new_name_4_file.jpg'</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
or write full path Ex. 2<br />
&lt;?<br />
// rename the file<br />
ftp_rename($conn_id, '/www/ftp-filemanager/file1.jpg', '/www/ftp-filemanager/new_name_4_file.jpg');<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="27096""></a>
  <div class="note">
   <strong class="user">Hugo locobyte at hotmail dot NO_SPAM dot com</strong>
   <a href="#27096" class="date">22-Nov-2002 12:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Using "ftp_rename" to move files to other directories on server ftp<br />
..<br />
...<br />
if(ftp_rename($conn_ftp, $xfiles[$i], "./dirx/".$xfiles[$i])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; echo "File $xfiles[$i] moved to ./dirx";<br />
} else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; echo "ERROR!!!. The file could not be moved";<br />
}<br />
...<br />
..<br />
#--&gt;&gt;h2m,&nbsp; bye</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
