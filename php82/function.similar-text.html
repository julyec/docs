<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=UTF-8">
  <title>计算两个字符串的相似度</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.sha1.html">? sha1</a></li>
      <li style="float: right;"><a href="function.soundex.html">soundex ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.strings.html">字符串 函数</a></li>
    <li>计算两个字符串的相似度</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.similar-text" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">similar_text</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">similar_text</span> &mdash; <span class="dc-title">计算两个字符串的相似度</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.similar-text-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>similar_text</strong></span>(<span class="methodparam"><span class="type">string</span> <code class="parameter">$string1</code></span>, <span class="methodparam"><span class="type">string</span> <code class="parameter">$string2</code></span>, <span class="methodparam"><span class="type">float</span> <code class="parameter reference">&$percent</code><span class="initializer"> = <strong><code>null</code></strong></span></span>): <span class="type">int</span></div>

  <p class="para rdfs-comment">
   两个字符串的相似程度计算依据 Programming Classics: Implementing the World&#039;s Best Algorithms by Oliver (ISBN 0-131-00413-1)  的描述进行。注意该实现没有使用 Oliver 虚拟码中的堆栈，但是却进行了递归调用，这个做法可能会导致整个过程变慢或变快。也请注意，该算法的复杂度是 O(N**3)，N 是最长字符串的长度。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.similar-text-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">string1</code></dt>

     <dd>

      <p class="para">
       第一个字符串。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">string2</code></dt>

     <dd>

      <p class="para">
       第二个字符串。
      </p>
      <blockquote class="note"><p><strong class="note">Note</strong>: 
       <p class="para">
        交换 <code class="parameter">string1</code> 和 <code class="parameter">string2</code>
        可能会产生不同的结果；请看下面的示例。
       </p>
      </p></blockquote> 
     </dd>

    
    
     <dt>
<code class="parameter">percent</code></dt>

     <dd>

      <p class="para">
       第三个参数通过引用传递，<span class="function"><strong>similar_text()</strong></span> 将以百分比计算相似度，通过将
       <span class="function"><strong>similar_text()</strong></span> 的结果除以指定字符串长度的平均值然后乘以 <code class="literal">100</code>。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.similar-text-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   返回在两个字符串中匹配字符的数量。
  </p>
  <p class="para">
   The number of matching characters is calculated by finding the longest first
   common substring, and then doing this for the prefixes and the suffixes,
   recursively. The lengths of all found common substrings are added.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.similar-text-examples">
  <h3 class="title">示例</h3>
  <div class="example" id="">
   <p><strong>Example #1 <span class="function"><strong>similar_text()</strong></span> 交换参数示例</strong></p>
   <div class="example-contents"><p>
    此示例展示了交换 <code class="parameter">string1</code> 和 <code class="parameter">string2</code>
    可能会产生不同的结果。
   </p></div>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$sim </span><span style="color: #007700">= </span><span style="color: #0000BB">similar_text</span><span style="color: #007700">(</span><span style="color: #DD0000">'bafoobar'</span><span style="color: #007700">, </span><span style="color: #DD0000">'barfoo'</span><span style="color: #007700">, </span><span style="color: #0000BB">$perc</span><span style="color: #007700">);<br />echo </span><span style="color: #DD0000">"similarity: </span><span style="color: #0000BB">$sim</span><span style="color: #DD0000"> (</span><span style="color: #0000BB">$perc</span><span style="color: #DD0000"> %)\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$sim </span><span style="color: #007700">= </span><span style="color: #0000BB">similar_text</span><span style="color: #007700">(</span><span style="color: #DD0000">'barfoo'</span><span style="color: #007700">, </span><span style="color: #DD0000">'bafoobar'</span><span style="color: #007700">, </span><span style="color: #0000BB">$perc</span><span style="color: #007700">);<br />echo </span><span style="color: #DD0000">"similarity: </span><span style="color: #0000BB">$sim</span><span style="color: #DD0000"> (</span><span style="color: #0000BB">$perc</span><span style="color: #DD0000"> %)\n"</span><span style="color: #007700">;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>以上示例的输出类似于：</p></div>
   <div class="example-contents screen">
<div class="cdata"><pre>
similarity: 5 (71.428571428571 %)
similarity: 3 (42.857142857143 %)
</pre></div>
   </div>
  </div>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.similar-text-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.levenshtein.html" class="function" rel="rdfs-seeAlso">levenshtein()</a> - 计算两个字符串之间的 Levenshtein 距离</span></li>
    <li class="member"><span class="function"><a href="function.soundex.html" class="function" rel="rdfs-seeAlso">soundex()</a> - Calculate the soundex key of a string</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="125738""></a>
  <div class="note">
   <strong class="user">pablo dot pazos at cabolabs dot com</strong>
   <a href="#125738" class="date">29-Jan-2021 03:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To calculate the percentage of similarity between two strings without depending on the order of the parameters and be case insensitive, I use this function based on levenshtein's distance:<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp; </span><span class="comment">// string similarity calculated using levenshtein<br />
&nbsp; </span><span class="keyword">static function </span><span class="default">similarity</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">)<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">1 </span><span class="keyword">- (</span><span class="default">levenshtein</span><span class="keyword">(</span><span class="default">strtoupper</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">), </span><span class="default">strtoupper</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">)) / </span><span class="default">max</span><span class="keyword">(</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">), </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">)));<br />
&nbsp; }<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
This will always return a number between 0 and 1, representing the percentage, for instance 0.8 represents 80% similar strings.<br />
<br />
If you want this to be case-sensitive, just remove the strtoupper() functions.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="125033""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#125033" class="date">21-May-2020 02:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
$result = similar_text ('ab', 'a', $percent);<br />
<br />
&gt; $percent: 66.666666666666671</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="118799""></a>
  <div class="note">
   <strong class="user">vasyl at vasyltech dot com</strong>
   <a href="#118799" class="date">08-Feb-2016 02:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Recursive algorithm usually is very elegant one. I found a way to get better precision without the recursion. Imagine two different (or same) length ribbons with letters on each. You simply shifting one ribbon to left till it matches the letter the first.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">similarity</span><span class="keyword">(</span><span class="default">$str1</span><span class="keyword">, </span><span class="default">$str2</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$len1 </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$len2 </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str2</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$max </span><span class="keyword">= </span><span class="default">max</span><span class="keyword">(</span><span class="default">$len1</span><span class="keyword">, </span><span class="default">$len2</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$similarity </span><span class="keyword">= </span><span class="default">$i </span><span class="keyword">= </span><span class="default">$j </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; while ((</span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$len1</span><span class="keyword">) &amp;&amp; isset(</span><span class="default">$str2</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$str1</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] == </span><span class="default">$str2</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">]) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$similarity</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$j</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } elseif (</span><span class="default">$len1 </span><span class="keyword">&lt; </span><span class="default">$len2</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$len1</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$j</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } elseif (</span><span class="default">$len1 </span><span class="keyword">&gt; </span><span class="default">$len2</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$len1</span><span class="keyword">--;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$j</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">round</span><span class="keyword">(</span><span class="default">$similarity </span><span class="keyword">/ </span><span class="default">$max</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="default">$str1 </span><span class="keyword">= </span><span class="string">'12345678901234567890'</span><span class="keyword">;<br />
</span><span class="default">$str2 </span><span class="keyword">= </span><span class="string">'12345678991234567890'</span><span class="keyword">;<br />
<br />
echo </span><span class="string">'Similarity: ' </span><span class="keyword">. (</span><span class="default">similarity</span><span class="keyword">(</span><span class="default">$str1</span><span class="keyword">, </span><span class="default">$str2</span><span class="keyword">) * </span><span class="default">100</span><span class="keyword">) . </span><span class="string">'%'</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="115994""></a>
  <div class="note">
   <strong class="user">I_HATE_SPAMMER- PAZ!</strong>
   <a href="#115994" class="date">24-Oct-2014 09:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Actually similar_text() is not bad...<br />
it works good. But before processing i think is a good way to make a little mod like this<br />
<br />
$var_1 = strtoupper("doggy");<br />
$var_2 = strtoupper("Dog");<br />
<br />
similar_text($var_1, $var_2, $percent); <br />
<br />
echo $percent; // output is 75 but without strtoupper output is 50</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114540""></a>
  <div class="note">
   <strong class="user">ryan at derokorian dot com</strong>
   <a href="#114540" class="date">04-Mar-2014 09:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that this function is case sensitive:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$var1 </span><span class="keyword">= </span><span class="string">'Hello'</span><span class="keyword">;<br />
</span><span class="default">$var2 </span><span class="keyword">= </span><span class="string">'Hello'</span><span class="keyword">;<br />
</span><span class="default">$var3 </span><span class="keyword">= </span><span class="string">'hello'</span><span class="keyword">;<br />
<br />
echo </span><span class="default">similar_text</span><span class="keyword">(</span><span class="default">$var1</span><span class="keyword">, </span><span class="default">$var2</span><span class="keyword">);&nbsp; </span><span class="comment">// 5<br />
</span><span class="keyword">echo </span><span class="default">similar_text</span><span class="keyword">(</span><span class="default">$var1</span><span class="keyword">, </span><span class="default">$var3</span><span class="keyword">);&nbsp; </span><span class="comment">// 4</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="109507""></a>
  <div class="note">
   <strong class="user">SPAM HATER</strong>
   <a href="#109507" class="date">23-Jul-2012 06:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hey there,
<br />

<br />
Be aware when using this function, that the order of passing the strings is very important if you want to calculate the percentage of similarity, in fact, altering the variables will give a very different result, example :
<br />

<br />
<span class="default">&lt;?php
<br />
$var_1 </span><span class="keyword">= </span><span class="string">'PHP IS GREAT'</span><span class="keyword">;
<br />
</span><span class="default">$var_2 </span><span class="keyword">= </span><span class="string">'WITH MYSQL'</span><span class="keyword">;
<br />

<br />
</span><span class="default">similar_text</span><span class="keyword">(</span><span class="default">$var_1</span><span class="keyword">, </span><span class="default">$var_2</span><span class="keyword">, </span><span class="default">$percent</span><span class="keyword">);
<br />

<br />
echo </span><span class="default">$percent</span><span class="keyword">;
<br />
</span><span class="comment">// 27.272727272727
<br />

<br />
</span><span class="default">similar_text</span><span class="keyword">(</span><span class="default">$var_2</span><span class="keyword">, </span><span class="default">$var_1</span><span class="keyword">, </span><span class="default">$percent</span><span class="keyword">);
<br />

<br />
echo </span><span class="default">$percent</span><span class="keyword">;
<br />
</span><span class="comment">// 18.181818181818
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101458""></a>
  <div class="note">
   <strong class="user">daniel dot karbach at localhorst dot tv</strong>
   <a href="#101458" class="date">17-Dec-2010 06:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Please note that this function calculates a similarity of 0 (zero) for two empty strings.<br />
<br />
<span class="default">&lt;?php<br />
similar_text</span><span class="keyword">(</span><span class="string">""</span><span class="keyword">, </span><span class="string">""</span><span class="keyword">, </span><span class="default">$sim</span><span class="keyword">);<br />
echo </span><span class="default">$sim</span><span class="keyword">; </span><span class="comment">// "0"<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="72448""></a>
  <div class="note">
   <strong class="user">Paul</strong>
   <a href="#72448" class="date">18-Jan-2007 08:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The speed issues for similar_text seem to be only an issue for long sections of text (&gt;20000 chars).<br />
<br />
I found a huge performance improvement in my application by just testing if the string to be tested was less than 20000 chars before calling similar_text.<br />
<br />
20000+ took 3-5 secs to process, anything else (10000 and below) took a fraction of a second.<br />
Fortunately for me, there was only a handful of instances with &gt;20000 chars which I couldn't get a comparison % for.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="29221""></a>
  <div class="note">
   <strong class="user">julius at infoguiden dot no</strong>
   <a href="#29221" class="date">06-Feb-2003 06:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you have reserved names in a database that you don't want others to use, i find this to work pretty good. 
<br />
I added strtoupper to the variables to validate typing only. Taking case into consideration will decrease similarity. 
<br />

<br />
<span class="default">&lt;?php
<br />
$query </span><span class="keyword">= </span><span class="default">mysql_query</span><span class="keyword">(</span><span class="string">"select * from </span><span class="default">$table</span><span class="string">"</span><span class="keyword">) or die(</span><span class="string">"Query failed"</span><span class="keyword">);
<br />

<br />
while (</span><span class="default">$row </span><span class="keyword">= </span><span class="default">mysql_fetch_array</span><span class="keyword">(</span><span class="default">$query</span><span class="keyword">)) {
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">similar_text</span><span class="keyword">(</span><span class="default">strtoupper</span><span class="keyword">(</span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'name'</span><span class="keyword">]), </span><span class="default">strtoupper</span><span class="keyword">(</span><span class="default">$row</span><span class="keyword">[</span><span class="string">'reserved'</span><span class="keyword">]), </span><span class="default">$similarity_pst</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (</span><span class="default">number_format</span><span class="keyword">(</span><span class="default">$similarity_pst</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">) &gt; </span><span class="default">90</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$too_similar </span><span class="keyword">= </span><span class="default">$row</span><span class="keyword">[</span><span class="string">'reserved'</span><span class="keyword">];
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; print </span><span class="string">"The name you entered is too similar the reserved name &amp;quot;"</span><span class="keyword">.</span><span class="default">$row</span><span class="keyword">[</span><span class="string">'reserved'</span><span class="keyword">].</span><span class="string">"&amp;quot;"</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; break;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; }
<br />
&nbsp;&nbsp;&nbsp; }
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="19734""></a>
  <div class="note">
   <strong class="user">georgesk at hotmail dot com</strong>
   <a href="#19734" class="date">08-Mar-2002 08:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Well, as mentioned above the speed is O(N^3), i've done a longest common subsequence way that is O(m.n) where m and n are the length of str1 and str2, the result is a percentage and it seems to be exactly the same as similar_text percentage but with better performance... here's the 3 functions i'm using..
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">LCS_Length</span><span class="keyword">(</span><span class="default">$s1</span><span class="keyword">, </span><span class="default">$s2</span><span class="keyword">)
<br />
{
<br />
&nbsp; </span><span class="default">$m </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$s1</span><span class="keyword">);
<br />
&nbsp; </span><span class="default">$n </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$s2</span><span class="keyword">);
<br />

<br />
&nbsp; </span><span class="comment">//this table will be used to compute the LCS-Length, only 128 chars per string are considered
<br />
&nbsp; </span><span class="default">$LCS_Length_Table </span><span class="keyword">= array(array(</span><span class="default">128</span><span class="keyword">),array(</span><span class="default">128</span><span class="keyword">)); 
<br />
&nbsp; 
<br />
&nbsp; 
<br />
&nbsp; </span><span class="comment">//reset the 2 cols in the table
<br />
&nbsp; </span><span class="keyword">for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$m</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) </span><span class="default">$LCS_Length_Table</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">]=</span><span class="default">0</span><span class="keyword">;
<br />
&nbsp; for(</span><span class="default">$j</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$j </span><span class="keyword">&lt; </span><span class="default">$n</span><span class="keyword">; </span><span class="default">$j</span><span class="keyword">++) </span><span class="default">$LCS_Length_Table</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">$j</span><span class="keyword">]=</span><span class="default">0</span><span class="keyword">;
<br />

<br />
&nbsp; for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt;= </span><span class="default">$m</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {
<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$j</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">; </span><span class="default">$j </span><span class="keyword">&lt;= </span><span class="default">$n</span><span class="keyword">; </span><span class="default">$j</span><span class="keyword">++) {
<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (</span><span class="default">$s1</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">]==</span><span class="default">$s2</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">])
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$LCS_Length_Table</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">$j</span><span class="keyword">] = </span><span class="default">$LCS_Length_Table</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">][</span><span class="default">$j</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">] + </span><span class="default">1</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp;&nbsp; else if (</span><span class="default">$LCS_Length_Table</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">][</span><span class="default">$j</span><span class="keyword">] &gt;= </span><span class="default">$LCS_Length_Table</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">$j</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">])
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$LCS_Length_Table</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">$j</span><span class="keyword">] = </span><span class="default">$LCS_Length_Table</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">][</span><span class="default">$j</span><span class="keyword">];
<br />
&nbsp;&nbsp; &nbsp;&nbsp; else
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$LCS_Length_Table</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">$j</span><span class="keyword">] = </span><span class="default">$LCS_Length_Table</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">$j</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">];
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp; }
<br />
&nbsp; return </span><span class="default">$LCS_Length_Table</span><span class="keyword">[</span><span class="default">$m</span><span class="keyword">][</span><span class="default">$n</span><span class="keyword">];
<br />
}
<br />

<br />
function </span><span class="default">str_lcsfix</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">)
<br />
{
<br />
&nbsp; </span><span class="default">$s </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">" "</span><span class="keyword">,</span><span class="string">""</span><span class="keyword">,</span><span class="default">$s</span><span class="keyword">);
<br />
&nbsp; </span><span class="default">$s </span><span class="keyword">= </span><span class="default">ereg_replace</span><span class="keyword">(</span><span class="string">"[????????]"</span><span class="keyword">,</span><span class="string">"e"</span><span class="keyword">, </span><span class="default">$s</span><span class="keyword">);
<br />
&nbsp; </span><span class="default">$s </span><span class="keyword">= </span><span class="default">ereg_replace</span><span class="keyword">(</span><span class="string">"[????????????]"</span><span class="keyword">,</span><span class="string">"a"</span><span class="keyword">, </span><span class="default">$s</span><span class="keyword">);
<br />
&nbsp; </span><span class="default">$s </span><span class="keyword">= </span><span class="default">ereg_replace</span><span class="keyword">(</span><span class="string">"[????????]"</span><span class="keyword">,</span><span class="string">"i"</span><span class="keyword">, </span><span class="default">$s</span><span class="keyword">);
<br />
&nbsp; </span><span class="default">$s </span><span class="keyword">= </span><span class="default">ereg_replace</span><span class="keyword">(</span><span class="string">"[?????????]"</span><span class="keyword">,</span><span class="string">"o"</span><span class="keyword">, </span><span class="default">$s</span><span class="keyword">);
<br />
&nbsp; </span><span class="default">$s </span><span class="keyword">= </span><span class="default">ereg_replace</span><span class="keyword">(</span><span class="string">"[????????]"</span><span class="keyword">,</span><span class="string">"u"</span><span class="keyword">, </span><span class="default">$s</span><span class="keyword">);
<br />
&nbsp; </span><span class="default">$s </span><span class="keyword">= </span><span class="default">ereg_replace</span><span class="keyword">(</span><span class="string">"[?]"</span><span class="keyword">,</span><span class="string">"c"</span><span class="keyword">, </span><span class="default">$s</span><span class="keyword">);
<br />
&nbsp; return </span><span class="default">$s</span><span class="keyword">;
<br />
}
<br />
&nbsp; 
<br />
function </span><span class="default">get_lcs</span><span class="keyword">(</span><span class="default">$s1</span><span class="keyword">, </span><span class="default">$s2</span><span class="keyword">)
<br />
{
<br />
&nbsp; </span><span class="comment">//ok, now replace all spaces with nothing
<br />
&nbsp; </span><span class="default">$s1 </span><span class="keyword">= </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">str_lcsfix</span><span class="keyword">(</span><span class="default">$s1</span><span class="keyword">));
<br />
&nbsp; </span><span class="default">$s2 </span><span class="keyword">= </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">str_lcsfix</span><span class="keyword">(</span><span class="default">$s2</span><span class="keyword">));
<br />
&nbsp; 
<br />
&nbsp; </span><span class="default">$lcs </span><span class="keyword">= </span><span class="default">LCS_Length</span><span class="keyword">(</span><span class="default">$s1</span><span class="keyword">,</span><span class="default">$s2</span><span class="keyword">); </span><span class="comment">//longest common sub sequence
<br />

<br />
&nbsp; </span><span class="default">$ms </span><span class="keyword">= (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$s1</span><span class="keyword">) + </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$s2</span><span class="keyword">)) / </span><span class="default">2</span><span class="keyword">;
<br />

<br />
&nbsp; return ((</span><span class="default">$lcs</span><span class="keyword">*</span><span class="default">100</span><span class="keyword">)/</span><span class="default">$ms</span><span class="keyword">);
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
you can skip calling str_lcsfix if you don't worry about accentuated characters and things like that or you can add up to it or modify it for faster performance, i think ereg is not the fastest way?
<br />
hope this helps.
<br />
Georges</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="15947""></a>
  <div class="note">
   <strong class="user">daniel at reflexionsdesign dot com</strong>
   <a href="#15947" class="date">09-Oct-2001 06:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If performance is an issue, you may wish to use the levenshtein() function instead, which has a considerably better complexity of O(str1 * str2).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
