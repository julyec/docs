<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=UTF-8">
  <title>取得文件类型</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.filesize.html">? filesize</a></li>
      <li style="float: right;"><a href="function.flock.html">flock ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.filesystem.html">文件系统函数</a></li>
    <li>取得文件类型</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.filetype" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">filetype</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">filetype</span> &mdash; <span class="dc-title">取得文件类型</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.filetype-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>filetype</strong></span>(<span class="methodparam"><span class="type">string</span> <code class="parameter">$filename</code></span>): <span class="type"><span class="type">string</span>|<span class="type"><span class="type false">false</span></span></span></div>

  <p class="para rdfs-comment">
   返回文件的类型。
  </p>
 </div>
  

 <div class="refsect1 parameters" id="refsect1-function.filetype-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">filename</code></dt>

     <dd>

      <p class="para">
       文件的路径。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.filetype-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   返回文件的类型。 可能的值有
   fifo，char，dir，block，link，file 和 unknown。
  </p>
  <p class="para">
    如果出错则返回 <strong><code>false</code></strong>。如果 stat 调用失败或者文件类型未知的话
   <span class="function"><strong>filetype()</strong></span> 还会产生一个 <strong><code>E_NOTICE</code></strong> 消息。
  </p>
 </div>


 <div class="refsect1 errors" id="refsect1-function.filetype-errors">
  <h3 class="title">错误／异常</h3>
  <p class="para">
失败时抛出 <strong><code>E_WARNING</code></strong> 警告。
</p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.filetype-examples">
  <h3 class="title">示例</h3>
  <p class="para">
   <div class="example" id="example-4462">
    <p><strong>Example #1 <span class="function"><strong>filetype()</strong></span> 例子</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">echo </span><span style="color: #0000BB">filetype</span><span style="color: #007700">(</span><span style="color: #DD0000">'/etc/passwd'</span><span style="color: #007700">);<br />echo </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />echo </span><span style="color: #0000BB">filetype</span><span style="color: #007700">(</span><span style="color: #DD0000">'/etc/'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上示例会输出：</p></div>
    <div class="example-contents screen">
     <div class="cdata"><pre>
file
dir
</pre></div>
    </div>
   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.filetype-notes">
  <h3 class="title">注释</h3>
  <blockquote class="note"><p><strong class="note">Note</strong>: <span class="simpara">此函数的结果会被缓存。参见
<span class="function"><a href="function.clearstatcache.html" class="function">clearstatcache()</a></span> 以获得更多细节。</span></p></blockquote>
  <div class="tip"><strong class="tip">Tip</strong><p class="simpara">自 PHP 5.0.0 起, 此函数也用于<em class="emphasis">某些</em>
URL 包装器。请参见 <a href="wrappers.html" class="xref">支持的协议和封装协议</a>以获得支持 <span class="function"><a href="function.stat.html" class="function">stat()</a></span> 系列函数功能的包装器列表。</p></div>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.filetype-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.is-dir.html" class="function" rel="rdfs-seeAlso">is_dir()</a> - 判断给定文件名是否是一个目录</span></li>
    <li class="member"><span class="function"><a href="function.is-file.html" class="function" rel="rdfs-seeAlso">is_file()</a> - 判断给定文件名是否为一个正常的文件</span></li>
    <li class="member"><span class="function"><a href="function.is-link.html" class="function" rel="rdfs-seeAlso">is_link()</a> - 判断给定文件名是否为一个符号连接</span></li>
    <li class="member"><span class="function"><a href="function.file-exists.html" class="function" rel="rdfs-seeAlso">file_exists()</a> - 检查文件或目录是否存在</span></li>
    <li class="member"><span class="function"><a href="function.mime-content-type.html" class="function" rel="rdfs-seeAlso">mime_content_type()</a> - 检测文件的 MIME 类型</span></li>
    <li class="member"><span class="function"><a href="function.pathinfo.html" class="function" rel="rdfs-seeAlso">pathinfo()</a> - 返回文件路径的信息</span></li>
    <li class="member"><span class="function"><a href="function.stat.html" class="function" rel="rdfs-seeAlso">stat()</a> - 给出文件的信息</span></li>
   </ul>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="116263""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#116263" class="date">03-Dec-2014 06:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note there is a bug when using filetype with for example Japanese filenames :<br />
https://bugs.php.net/bug.php?id=64699<br />
<br />
The whole PHP interpreter comes crashing down without anyway to avoid it or capture an exception.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114255""></a>
  <div class="note">
   <strong class="user">r dot koelpin at evisionteam dot de</strong>
   <a href="#114255" class="date">29-Jan-2014 06:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
/* COPY/PASTE */<br />
<span class="default">&lt;?php<br />
</span><span class="comment">//https://php.net/manual/de/function.filetype.php#104308 <br />
<br />
</span><span class="keyword">echo </span><span class="string">"Zum testen müssen tats?chlich existente Namen verwendet werden.&lt;br&gt;"</span><span class="keyword">;<br />
echo </span><span class="string">"Pfad und Dateiname müssen getrennt eingetragen und durch einen Punkt verbunden sein.&lt;br&gt;"</span><span class="keyword">;<br />
echo </span><span class="string">"Example: [filetype(\"../dir/u_dir/\".\"temp.jpg\")] liefert -&gt; file&lt;br&gt;"</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="104308""></a>
  <div class="note">
   <strong class="user">Abhi Jain</strong>
   <a href="#104308" class="date">08-Jun-2011 12:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Putting @ in front of the filetype() function does not prevent it from raising a warning (Lstat failed), if E_WARNING is enabled on your error_reporting.<br />
<br />
The most common cause of filetype() raising this warning and not showing a filetype() in the output (it actually returns NULL) is, if you happened to pass just the 'Dir or File Name' and not the complete "Absolute or Relative Path" to that 'file or Dir'. It may still read that file and return its filetype as "file" but for Dir's it shows warning and outputs NULL.<br />
eg:<br />
$pathToFile = '/var/www';<br />
$file = 'test.php';<br />
$dir = 'somedir';<br />
<br />
Output for filetype($file) will be returned as 'file' and possibly without any warning, but for filetype($dir), it will return NULL with the warning "Lstat failed", unless you pass a complete path to that dir, i.e. filetype($pathToFile.'/'.$dir).<br />
<br />
This happened to me and found this solution after a lot of trial and error. Thought, it might help someone.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100319""></a>
  <div class="note">
   <strong class="user">adlerweb</strong>
   <a href="#100319" class="date">07-Oct-2010 01:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
filetype() does not work for files &gt;=2GB on x86 Linux. You can use stat as a workarround:<br />
<br />
$type=trim(`stat -c%F $file`);<br />
<br />
Note that stat returns diffenerent strings ("regular file","directory",...)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87161""></a>
  <div class="note">
   <strong class="user">7r6ivyeo at mail dot com</strong>
   <a href="#87161" class="date">21-Nov-2008 05:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I use the CLI version of PHP on Windows Vista.&nbsp; Here's how to determine if a file is marked "hidden" by NTFS:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">is_hidden_file</span><span class="keyword">(</span><span class="default">$fn</span><span class="keyword">) {<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$attr </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">exec</span><span class="keyword">(</span><span class="string">'FOR %A IN ("'</span><span class="keyword">.</span><span class="default">$fn</span><span class="keyword">.</span><span class="string">'") DO @ECHO %~aA'</span><span class="keyword">));<br />
<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$attr</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">] === </span><span class="string">'h'</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Changing <span class="default">&lt;?php </span><span class="keyword">if(</span><span class="default">$attr</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">] === </span><span class="string">'h'</span><span class="keyword">) </span><span class="default">?&gt;</span> to <span class="default">&lt;?php </span><span class="keyword">if(</span><span class="default">$attr</span><span class="keyword">[</span><span class="default">4</span><span class="keyword">] === </span><span class="string">'s'</span><span class="keyword">) </span><span class="default">?&gt;</span> will check for system files.<br />
<br />
This should work on any Windows OS that provides DOS shell commands.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="40660""></a>
  <div class="note">
   <strong class="user">ruach at chpc dot utah dot edu</strong>
   <a href="#40660" class="date">10-Mar-2004 05:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There are 7 values that can be returned. Here is a list of them and what each one means<br />
<br />
block: block special device<br />
<br />
char: character special device<br />
<br />
dir: directory<br />
<br />
fifo: FIFO (named pipe)<br />
<br />
file: regular file<br />
<br />
link: symbolic link<br />
<br />
unknown: unknown file type</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
