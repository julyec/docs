<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=UTF-8">
  <title>检查某个名称的常量是否存在</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.define.html">? define</a></li>
      <li style="float: right;"><a href="function.die.html">die ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.misc.html">杂项 函数</a></li>
    <li>检查某个名称的常量是否存在</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.defined" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">defined</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">defined</span> &mdash; <span class="dc-title">检查某个名称的常量是否存在</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.defined-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>defined</strong></span>(<span class="methodparam"><span class="type">string</span> <code class="parameter">$constant_name</code></span>): <span class="type">bool</span></div>

  <p class="para rdfs-comment">
   检查该名称的常量是否已定义。
  </p>
  <p class="para">
   此函数也可以跟<a href="language.oop5.constants.html" class="link">累常量</a>和 <a href="language.types.enumerations.html" class="link">enum cases</a> 一起工作。
  </p>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <p class="para">
    如果你要检查一个变量是否存在，请使用 <span class="function"><a href="function.isset.html" class="function">isset()</a></span>。
    <span class="function"><strong>defined()</strong></span> 函数仅对 <a href="language.constants.html" class="link">常量</a>
    有效。如果你要检测某个函数是否存在，使用 <span class="function"><a href="function.function-exists.html" class="function">function_exists()</a></span>。
   </p>
  </p></blockquote>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.defined-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">constant_name</code></dt>

     <dd>

      <p class="para">
       常量的名称。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.defined-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
  如果名称 <code class="parameter">constant_name</code> 的常量已定义，返回 <strong><code>true</code></strong>；未定义则返回 <strong><code>false</code></strong>。
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.defined-examples">
  <h3 class="title">示例</h3>
  <p class="para">
   <div class="example" id="">
    <p><strong>Example #1 检查常量</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">/* 注意引号的使用，这很重要。这个例子是检查<br /> * 如果字符串 'TEST' 是 TEST 常量的名称 */<br /></span><span style="color: #007700">if (</span><span style="color: #0000BB">defined</span><span style="color: #007700">(</span><span style="color: #DD0000">'TEST'</span><span style="color: #007700">)) {<br />    echo </span><span style="color: #0000BB">TEST</span><span style="color: #007700">;<br />}<br /><br /><br />interface </span><span style="color: #0000BB">bar </span><span style="color: #007700">{<br />    const </span><span style="color: #0000BB">test </span><span style="color: #007700">= </span><span style="color: #DD0000">'foobar!'</span><span style="color: #007700">;<br />}<br /><br />class </span><span style="color: #0000BB">foo </span><span style="color: #007700">{<br />    const </span><span style="color: #0000BB">test </span><span style="color: #007700">= </span><span style="color: #DD0000">'foobar!'</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">defined</span><span style="color: #007700">(</span><span style="color: #DD0000">'bar::test'</span><span style="color: #007700">)); </span><span style="color: #FF8000">// bool(true)<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">defined</span><span style="color: #007700">(</span><span style="color: #DD0000">'foo::test'</span><span style="color: #007700">)); </span><span style="color: #FF8000">// bool(true)<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
   <div class="example" id="">
    <p><strong>Example #2 检测 Enum Cases（自 PHP 8.1.0 起）</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">enum </span><span style="color: #0000BB">Suit<br /></span><span style="color: #007700">{<br />    case </span><span style="color: #0000BB">Hearts</span><span style="color: #007700">;<br />    case </span><span style="color: #0000BB">Diamonds</span><span style="color: #007700">;<br />    case </span><span style="color: #0000BB">Clubs</span><span style="color: #007700">;<br />    case </span><span style="color: #0000BB">Spades</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">defined</span><span style="color: #007700">(</span><span style="color: #DD0000">'Suit::Hearts'</span><span style="color: #007700">)); </span><span style="color: #FF8000">// bool(true)<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.defined-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.define.html" class="function" rel="rdfs-seeAlso">define()</a> - 定义一个常量</span></li>
    <li class="member"><span class="function"><a href="function.constant.html" class="function" rel="rdfs-seeAlso">constant()</a> - 返回一个常量的值</span></li>
    <li class="member"><span class="function"><a href="function.get-defined-constants.html" class="function" rel="rdfs-seeAlso">get_defined_constants()</a> - 返回所有常量的关联数组，键是常量名，值是常量值</span></li>
    <li class="member"><span class="function"><a href="function.function-exists.html" class="function" rel="rdfs-seeAlso">function_exists()</a> - 如果给定的函数已经被定义就返回 true</span></li>
    <li class="member">关于<a href="language.constants.html" class="link">常量</a>的章节</li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="125341""></a>
  <div class="note">
   <strong class="user">ohcc at 163 dot com</strong>
   <a href="#125341" class="date">09-Sep-2020 02:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If a constant's name has a leading backslash (\), it's not possible to detect its existence using the defined() function, or to get its value using the constant() function. <br />
<br />
You can check its existence and get its value using the get_defined_constants() function, or prepend 2 more backslashes (\\) to the constant's name.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; define</span><span class="keyword">(</span><span class="string">'\DOMAIN'</span><span class="keyword">, </span><span class="string">'wuxiancheng.cn'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$isDefined </span><span class="keyword">= </span><span class="default">defined</span><span class="keyword">(</span><span class="string">'\DOMAIN'</span><span class="keyword">); </span><span class="comment">// false<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$domain </span><span class="keyword">= </span><span class="default">constant</span><span class="keyword">(</span><span class="string">'\DOMAIN'</span><span class="keyword">); </span><span class="comment">// NULL, in Php 8+ you'll get a Fatal error.<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$isDefined</span><span class="keyword">, </span><span class="default">$domain</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; define</span><span class="keyword">(</span><span class="string">'\DOMAIN'</span><span class="keyword">, </span><span class="string">'wuxiancheng.cn'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$constants </span><span class="keyword">= </span><span class="default">get_defined_constants</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$isDefined </span><span class="keyword">= isSet(</span><span class="default">$constants</span><span class="keyword">[</span><span class="string">'\DOMAIN'</span><span class="keyword">]);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$domain </span><span class="keyword">= </span><span class="default">$isDefined </span><span class="keyword">? </span><span class="default">$constants</span><span class="keyword">[</span><span class="string">'\DOMAIN'</span><span class="keyword">] : </span><span class="default">NULL</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$isDefined</span><span class="keyword">, </span><span class="default">$domain</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; define</span><span class="keyword">(</span><span class="string">'\DOMAIN'</span><span class="keyword">, </span><span class="string">'wuxiancheng.cn'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$isDefined </span><span class="keyword">= </span><span class="default">defined</span><span class="keyword">(</span><span class="string">'\\\DOMAIN'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$domain </span><span class="keyword">= </span><span class="default">constant</span><span class="keyword">(</span><span class="string">'\\\DOMAIN'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$isDefined</span><span class="keyword">, </span><span class="default">$domain</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="125085""></a>
  <div class="note">
   <strong class="user">nahiddhaka07 at gmail dot com</strong>
   <a href="#125085" class="date">05-Jun-2020 08:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
<br />
define</span><span class="keyword">(</span><span class="string">"GREET"</span><span class="keyword">, </span><span class="string">"Hi"</span><span class="keyword">);<br />
<br />
</span><span class="default">defined</span><span class="keyword">(</span><span class="string">"GREET"</span><span class="keyword">) || </span><span class="default">define</span><span class="keyword">(</span><span class="string">"GREET"</span><span class="keyword">, </span><span class="string">"Hello"</span><span class="keyword">);<br />
<br />
echo </span><span class="default">GREET</span><span class="keyword">;<br />
<br />
</span><span class="comment">// Output is: Hi</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="123239""></a>
  <div class="note">
   <strong class="user">louis at louisworks dot de</strong>
   <a href="#123239" class="date">16-Oct-2018 01:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Dont forget to put the name of your constant into single quotation mark. You will not get an error or a warning.<br />
<br />
<span class="default">&lt;?php<br />
define</span><span class="keyword">(</span><span class="string">"AMOUNT_OF_APPLES"</span><span class="keyword">, </span><span class="default">12</span><span class="keyword">);<br />
if(</span><span class="default">defined</span><span class="keyword">(</span><span class="default">AMOUNT_OF_APPLES</span><span class="keyword">)){<br />
&nbsp;&nbsp; </span><span class="comment">//you won't get an output here<br />
&nbsp;&nbsp; </span><span class="keyword">echo </span><span class="default">AMOUNT_OF_APPLES</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
so do instead<br />
<br />
<span class="default">&lt;?php<br />
define</span><span class="keyword">(</span><span class="string">"AMOUNT_OF_APPLES"</span><span class="keyword">, </span><span class="default">12</span><span class="keyword">);<br />
if(</span><span class="default">defined</span><span class="keyword">(</span><span class="string">"AMOUNT_OF_APPLES"</span><span class="keyword">)){<br />
&nbsp;&nbsp; </span><span class="comment">//here you go<br />
&nbsp;&nbsp; </span><span class="keyword">echo </span><span class="default">AMOUNT_OF_APPLES</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">//output: 12<br />
</span><span class="default">?&gt;<br />
</span><br />
It took me half an day to see it...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="121433""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#121433" class="date">26-Jul-2017 06:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be careful with boolean defines and assuming a check is done for a specific value by defined such as<br />
<span class="default">&lt;?php<br />
<br />
define</span><span class="keyword">(</span><span class="string">'DEBUG'</span><span class="keyword">, </span><span class="default">false</span><span class="keyword">);<br />
<br />
if(</span><span class="default">defined</span><span class="keyword">(</span><span class="string">'DEBUG'</span><span class="keyword">)){<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">'Not really debugging mode'</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
You want to also check the constant as in<br />
<br />
<span class="default">&lt;?php<br />
define</span><span class="keyword">(</span><span class="string">'DEBUG'</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />
<br />
if(</span><span class="default">defined</span><span class="keyword">(</span><span class="string">'DEBUG'</span><span class="keyword">) &amp;&amp; </span><span class="default">DEBUG</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">'Really this is debugging mode'</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
All defined is doing is verifying the constant exists not it's value.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="120920""></a>
  <div class="note">
   <strong class="user">ASchmidt at Anamera dot net</strong>
   <a href="#120920" class="date">31-Mar-2017 08:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
// Checking the existence of a class constant, if the class is referenced by a variable.<br />
<br />
class Class_A<br />
{<br />
&nbsp;&nbsp;&nbsp; const CONST_A = 'value A';<br />
}<br />
<br />
// When class name is known.<br />
if ( defined( 'Class_A::CONST_A' ) )<br />
&nbsp;&nbsp;&nbsp; echo 'Class_A::CONST_A defined';<br />
<br />
// Using a class name variable. Note the double quotes.<br />
$class_name = Class_A::class;<br />
if ( defined( "$class_name::CONST_A" ) )<br />
&nbsp;&nbsp;&nbsp; echo '$class_name::CONST_A defined';<br />
<br />
// Using an instantiated object for a variable class.<br />
$object_A = new $class_name();<br />
if ( defined( get_class($object_A).'::CONST_A' ) )<br />
&nbsp;&nbsp;&nbsp; echo '$object_A::CONST_A defined';</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="110530""></a>
  <div class="note">
   <strong class="user">passerbyxp at gmail dot com</strong>
   <a href="#110530" class="date">02-Nov-2012 12:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function, along with constant(), is namespace sensitive. And it might help if you imagine them always running under the "root namespace":<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">namespace </span><span class="default">FOO\BAR<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; const </span><span class="default">WMP</span><span class="keyword">=</span><span class="string">"wmp"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">test</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">defined</span><span class="keyword">(</span><span class="string">"WMP"</span><span class="keyword">)) echo </span><span class="string">"direct: "</span><span class="keyword">.</span><span class="default">constant</span><span class="keyword">(</span><span class="string">"WMP"</span><span class="keyword">); </span><span class="comment">//doesn't work;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">elseif(</span><span class="default">defined</span><span class="keyword">(</span><span class="string">"FOO\\BAR\\WMP"</span><span class="keyword">)) echo </span><span class="string">"namespace: "</span><span class="keyword">.</span><span class="default">constant</span><span class="keyword">(</span><span class="string">"FOO\\BAR\\WMP"</span><span class="keyword">); </span><span class="comment">//works<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">echo </span><span class="default">WMP</span><span class="keyword">; </span><span class="comment">//works<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">}<br />
}<br />
namespace<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">\FOO\BAR\test</span><span class="keyword">();<br />
}</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106287""></a>
  <div class="note">
   <strong class="user">Lars Lernestal</strong>
   <a href="#106287" class="date">25-Oct-2011 02:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
if you want to check id a class constant is defined use self:: before the constant name:<br />
<br />
<span class="default">&lt;?php<br />
defined</span><span class="keyword">(</span><span class="string">'self::CONSTANT_NAME'</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99694""></a>
  <div class="note">
   <strong class="user">vindozo at gmail dot com</strong>
   <a href="#99694" class="date">31-Aug-2010 02:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you wish to protect files from direct access I normally use this:<br />
<br />
index.php:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// Main stuff here<br />
</span><span class="default">define</span><span class="keyword">(</span><span class="string">'START'</span><span class="keyword">,</span><span class="default">microtime</span><span class="keyword">());<br />
<br />
include </span><span class="string">"x.php"</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
x.php:<br />
<br />
<span class="default">&lt;?php<br />
defined</span><span class="keyword">(</span><span class="string">'START'</span><span class="keyword">)||(</span><span class="default">header</span><span class="keyword">(</span><span class="string">"HTTP/1.1 403 Forbidden"</span><span class="keyword">)&amp;die(</span><span class="string">'403.14 - Directory listing denied.'</span><span class="keyword">));<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="94953""></a>
  <div class="note">
   <strong class="user">r dot hartung at roberthartung dot de</strong>
   <a href="#94953" class="date">03-Dec-2009 11:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You can use the late static command "static::" withing defined as well. This example outputs - as expected - "int (2)"
<br />

<br />
<span class="default">&lt;?php
<br />
&nbsp; </span><span class="keyword">abstract class </span><span class="default">class1
<br />
&nbsp; </span><span class="keyword">{
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">getConst</span><span class="keyword">()
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp;&nbsp; return </span><span class="default">defined</span><span class="keyword">(</span><span class="string">'static::SOME_CONST'</span><span class="keyword">) ? static::</span><span class="default">SOME_CONST </span><span class="keyword">: </span><span class="default">false</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp; }
<br />
&nbsp; 
<br />
&nbsp; final class </span><span class="default">class2 </span><span class="keyword">extends </span><span class="default">class1
<br />
&nbsp; </span><span class="keyword">{
<br />
&nbsp;&nbsp;&nbsp; const </span><span class="default">SOME_CONST </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">;
<br />
&nbsp; }
<br />
&nbsp; 
<br />
&nbsp; </span><span class="default">$class2 </span><span class="keyword">= new </span><span class="default">class2</span><span class="keyword">;
<br />
&nbsp; 
<br />
&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$class2</span><span class="keyword">-&gt;</span><span class="default">getConst</span><span class="keyword">());
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92155""></a>
  <div class="note">
   <strong class="user">info at daniel-marschall dot de</strong>
   <a href="#92155" class="date">11-Jul-2009 01:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I found something out: defined() becomes probably false if a reference gets lost.<br />
<br />
<span class="default">&lt;?php<br />
<br />
session_start</span><span class="keyword">(); </span><span class="comment">// $_SESSION created<br />
</span><span class="default">define</span><span class="keyword">(</span><span class="string">'SESSION_BACKUP'</span><span class="keyword">, </span><span class="default">$_SESSION</span><span class="keyword">);<br />
if (</span><span class="default">defined</span><span class="keyword">(</span><span class="string">'SESSION_BACKUP'</span><span class="keyword">)) echo </span><span class="string">'A'</span><span class="keyword">;<br />
</span><span class="default">session_unset</span><span class="keyword">(); </span><span class="comment">// $_SESSION destroyed<br />
</span><span class="keyword">if (</span><span class="default">defined</span><span class="keyword">(</span><span class="string">'SESSION_BACKUP'</span><span class="keyword">)) echo </span><span class="string">'B'</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
You will see "A", but not "B".</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89886""></a>
  <div class="note">
   <strong class="user">tris+php at tfconsulting dot com dot au</strong>
   <a href="#89886" class="date">26-Mar-2009 06:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Before using defined() have a look at the following benchmarks:<br />
<br />
true&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 0.65ms<br />
$true&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.69ms (1)<br />
$config['true']&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.87ms<br />
TRUE_CONST&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 1.28ms (2)<br />
true&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 0.65ms<br />
defined('TRUE_CONST')&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2.06ms (3)<br />
defined('UNDEF_CONST')&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 12.34ms (4)<br />
isset($config['def_key'])&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.91ms (5)<br />
isset($config['undef_key'])&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.79ms<br />
isset($empty_hash[$good_key])&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.78ms<br />
isset($small_hash[$good_key])&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.86ms<br />
isset($big_hash[$good_key])&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.89ms<br />
isset($small_hash[$bad_key])&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 0.78ms<br />
isset($big_hash[$bad_key])&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 0.80ms<br />
<br />
PHP Version 5.2.6, Apache 2.0, Windows XP<br />
<br />
Each statement was executed 1000 times and while a 12ms overhead on 1000 calls isn't going to have the end users tearing their hair out, it does throw up some interesting results when comparing to if(true):<br />
<br />
1) if($true) was virtually identical<br />
2) if(TRUE_CONST) was almost twice as slow - I guess that the substitution isn't done at compile time (I had to double check this one!)<br />
3) defined() is 3 times slower if the constant exists<br />
4) defined() is 19 TIMES SLOWER if the constant doesn't exist!<br />
5) isset() is remarkably efficient regardless of what you throw at it (great news for anyone implementing array driven event systems - me!)<br />
<br />
May want to avoid if(defined('DEBUG'))...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87340""></a>
  <div class="note">
   <strong class="user">reachmike at hotpop dot com</strong>
   <a href="#87340" class="date">30-Nov-2008 10:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You may find that if you use <span class="default">&lt;?= ?&gt;</span> to dump your constants, and they are not defined, depending on your error reporting level, you may not display an error and, instead, just show the name of the constant. For example:<br />
<br />
<span class="default">&lt;?= TEST ?&gt;<br />
</span><br />
...may say TEST instead of an empty string like you might expect. The fix is a function like this:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">C</span><span class="keyword">(&amp;</span><span class="default">$constant</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$nPrev1 </span><span class="keyword">= </span><span class="default">error_reporting</span><span class="keyword">(</span><span class="default">E_ALL</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$sPrev2 </span><span class="keyword">= </span><span class="default">ini_set</span><span class="keyword">(</span><span class="string">'display_errors'</span><span class="keyword">, </span><span class="string">'0'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$sTest </span><span class="keyword">= </span><span class="default">defined</span><span class="keyword">(</span><span class="default">$constant</span><span class="keyword">) ? </span><span class="string">'defined' </span><span class="keyword">: </span><span class="string">'not defined'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$oTest </span><span class="keyword">= (object) </span><span class="default">error_get_last</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">error_reporting</span><span class="keyword">(</span><span class="default">$nPrev1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">ini_set</span><span class="keyword">(</span><span class="string">'display_errors'</span><span class="keyword">, </span><span class="default">$sPrev2</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$oTest</span><span class="keyword">-&gt;</span><span class="default">message</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$constant</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
And so now you can do:<br />
<br />
<span class="default">&lt;?= C</span><span class="keyword">(</span><span class="default">TEST</span><span class="keyword">) </span><span class="default">?&gt;<br />
</span><br />
If TEST was assigned with define(), then you'll receive the value. If not, then you'll receive an empty string.<br />
<br />
Please post if you can do this in fewer lines of code or do something more optimal than toggling the error handler.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84439""></a>
  <div class="note">
   <strong class="user">daniel at neville dot tk</strong>
   <a href="#84439" class="date">14-Jul-2008 10:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
My preferred way of checking if a constant is set, and if it isn't - setting it (could be used to set defaults in a file, where the user has already had the opportunity to set their own values in another.)<br />
<br />
<span class="default">&lt;?php<br />
<br />
defined</span><span class="keyword">(</span><span class="string">'CONSTANT'</span><span class="keyword">) or </span><span class="default">define</span><span class="keyword">(</span><span class="string">'CONSTANT'</span><span class="keyword">, </span><span class="string">'SomeDefaultValue'</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Dan.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82148""></a>
  <div class="note">
   <strong class="user">Shaun H</strong>
   <a href="#82148" class="date">28-Mar-2008 11:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I saw that PHP doesn't have an enum function so I created my own. It's not necessary, but can come in handy from time to time.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">enum</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$args </span><span class="keyword">= </span><span class="default">func_get_args</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$args </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$arg</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">defined</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; die(</span><span class="string">'Redefinition of defined constant ' </span><span class="keyword">. </span><span class="default">$arg</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">define</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">enum</span><span class="keyword">(</span><span class="string">'ONE'</span><span class="keyword">,</span><span class="string">'TWO'</span><span class="keyword">,</span><span class="string">'THREE'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">ONE</span><span class="keyword">, </span><span class="string">' '</span><span class="keyword">, </span><span class="default">TWO</span><span class="keyword">, </span><span class="string">' '</span><span class="keyword">, </span><span class="default">THREE</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="77204""></a>
  <div class="note">
   <strong class="user">Joel</strong>
   <a href="#77204" class="date">20-Aug-2007 05:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If your constants don't show up in your included or required files, then you probably have php safe mode turned on!<br />
<br />
I ran into this problem, I forgot to turn of safe mode when I was creating a new site.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="49442""></a>
  <div class="note">
   <strong class="user">ndove at cox dot net</strong>
   <a href="#49442" class="date">27-Jan-2005 07:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In PHP5, you can actually use defined() to see if an object constant has been defined, like so:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">class </span><span class="default">Generic<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; const </span><span class="default">WhatAmI </span><span class="keyword">= </span><span class="string">'Generic'</span><span class="keyword">;<br />
}<br />
<br />
if (</span><span class="default">defined</span><span class="keyword">(</span><span class="string">'Generic::WhatAmI'</span><span class="keyword">))<br />
{<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">Generic</span><span class="keyword">::</span><span class="default">WhatAmI</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Thought it may be useful to note.<br />
<br />
-Nick</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
