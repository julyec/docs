<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=UTF-8">
  <title>在数组中搜索给定的值，如果成功则返回首个相应的键名</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.array-reverse.html">? array_reverse</a></li>
      <li style="float: right;"><a href="function.array-shift.html">array_shift ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.array.html">数组 函数</a></li>
    <li>在数组中搜索给定的值，如果成功则返回首个相应的键名</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.array-search" class="refentry">
   <div class="refnamediv">
    <h1 class="refname">array_search</h1>
    <p class="verinfo">(PHP 4 &gt;= 4.0.5, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">array_search</span> &mdash; <span class="dc-title">
     在数组中搜索给定的值，如果成功则返回首个相应的键名
    </span></p>

   </div>
 <div class="refsect1 description" id="refsect1-function.array-search-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>array_search</strong></span>(<span class="methodparam"><span class="type"><a href="language.types.declarations.html#language.types.declarations.mixed" class="type mixed">mixed</a></span> <code class="parameter">$needle</code></span>, <span class="methodparam"><span class="type">array</span> <code class="parameter">$haystack</code></span>, <span class="methodparam"><span class="type">bool</span> <code class="parameter">$strict</code><span class="initializer"> = <strong><code>false</code></strong></span></span>): <span class="type"><span class="type">int</span>|<span class="type">string</span>|<span class="type"><span class="type false">false</span></span></span></div>

    <p class="para rdfs-comment">
     在 <code class="parameter">haystack</code> 中搜索 <code class="parameter">needle</code>。
    </p>
 </div>

 <div class="refsect1 parameters" id="refsect1-function.array-search-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">needle</code></dt>

     <dd>

      <p class="para">
       搜索的值。
      </p>
      <blockquote class="note"><p><strong class="note">Note</strong>: 
       <p class="para">
        如果 <code class="parameter">needle</code> 是字符串，则比较以区分大小写的方式进行。
       </p>
      </p></blockquote>
     </dd>

    
    
     <dt>
<code class="parameter">haystack</code></dt>

     <dd>

      <p class="para">
       这个数组。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">strict</code></dt>

     <dd>

      <p class="para">
       如果可选的第三个参数 <code class="parameter">strict</code> 为 <strong><code>true</code></strong>，则
       <span class="function"><strong>array_search()</strong></span> 将在 <code class="parameter">haystack</code>
       中检查<em class="emphasis">完全相同</em>的元素。
       这意味着同样严格比较 <code class="parameter">haystack</code> 里 <code class="parameter">needle</code> 的 <a href="language.types.html" class="link">类型</a>，并且对象需是同一个实例。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.array-search-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   如果找到了 <code class="parameter">needle</code> 则返回它的键，否则返回 <strong><code>false</code></strong>。
  </p>
  <p class="para">
   如果 <code class="parameter">needle</code> 在
   <code class="parameter">haystack</code>
   中出现不止一次，则返回第一个匹配的键。要返回所有匹配值的键，应该用
   <span class="function"><a href="function.array-keys.html" class="function">array_keys()</a></span> 加上可选参数
   <code class="parameter">search_value</code> 来代替。
  </p>
  <div class="warning"><strong class="warning">Warning</strong><p class="simpara">此函数可能返回布尔值
<strong><code>false</code></strong>，但也可能返回等同于 <strong><code>false</code></strong> 的非布尔值。请阅读 <a href="language.types.boolean.html" class="link">布尔类型</a>章节以获取更多信息。应使用
<a href="language.operators.comparison.html" class="link">===
运算符</a>来测试此函数的返回值。</p></div>
 </div>

  <div class="refsect1 examples" id="refsect1-function.array-search-examples">
  <h3 class="title">示例</h3>
  <p class="para">
   <div class="example" id="">
    <p><strong>Example #1 <span class="function"><strong>array_search()</strong></span> 例子</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$array </span><span style="color: #007700">= array(</span><span style="color: #0000BB">0 </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'blue'</span><span style="color: #007700">, </span><span style="color: #0000BB">1 </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'red'</span><span style="color: #007700">, </span><span style="color: #0000BB">2 </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'green'</span><span style="color: #007700">, </span><span style="color: #0000BB">3 </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'red'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$key </span><span style="color: #007700">= </span><span style="color: #0000BB">array_search</span><span style="color: #007700">(</span><span style="color: #DD0000">'green'</span><span style="color: #007700">, </span><span style="color: #0000BB">$array</span><span style="color: #007700">); </span><span style="color: #FF8000">// $key = 2;<br /></span><span style="color: #0000BB">$key </span><span style="color: #007700">= </span><span style="color: #0000BB">array_search</span><span style="color: #007700">(</span><span style="color: #DD0000">'red'</span><span style="color: #007700">, </span><span style="color: #0000BB">$array</span><span style="color: #007700">);   </span><span style="color: #FF8000">// $key = 1;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>

 <div class="refsect1 seealso" id="refsect1-function.array-search-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.array-keys.html" class="function" rel="rdfs-seeAlso">array_keys()</a> - 返回数组中部分的或所有的键名</span></li>
    <li class="member"><span class="function"><a href="function.array-values.html" class="function" rel="rdfs-seeAlso">array_values()</a> - 返回数组中所有的值</span></li>
    <li class="member"><span class="function"><a href="function.array-key-exists.html" class="function" rel="rdfs-seeAlso">array_key_exists()</a> - 检查数组里是否有指定的键名或索引</span></li>
    <li class="member"><span class="function"><a href="function.in-array.html" class="function" rel="rdfs-seeAlso">in_array()</a> - 检查数组中是否存在某个值</span></li>
   </ul>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="126453""></a>
  <div class="note">
   <strong class="user">opencart dot ocfilter at gmail dot com</strong>
   <a href="#126453" class="date">23-Sep-2021 12:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be careful!<br />
<br />
<span class="default">&lt;?php<br />
<br />
var_dump</span><span class="keyword">(</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">'needle'</span><span class="keyword">, [ </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="default">0 </span><span class="keyword">])); </span><span class="comment">// int(0) (!)<br />
<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">'needle'</span><span class="keyword">, [ </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="default">0 </span><span class="keyword">], </span><span class="default">true</span><span class="keyword">)); </span><span class="comment">// bool(false)<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
But, in php 8<br />
<br />
<span class="default">&lt;?php<br />
<br />
var_dump</span><span class="keyword">(</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">'needle'</span><span class="keyword">, [ </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="default">0 </span><span class="keyword">])); </span><span class="comment">// bool(false)<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="124985""></a>
  <div class="note">
   <strong class="user">nordseebaer at gmx dot de</strong>
   <a href="#124985" class="date">08-May-2020 08:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It's really important to check the return value is not false! I used array_search() to determine the index of an value to unset this value and then realized that $arr[false] === $arr[0] !<br />
<br />
<span class="default">&lt;?php<br />
$arr </span><span class="keyword">= [</span><span class="string">'apple'</span><span class="keyword">, </span><span class="string">'banana'</span><span class="keyword">];<br />
<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] === </span><span class="string">'apple'</span><span class="keyword">); </span><span class="comment">// true<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">false</span><span class="keyword">] === </span><span class="default">$arr</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]); </span><span class="comment">// true<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">false</span><span class="keyword">] === </span><span class="string">'apple'</span><span class="keyword">); </span><span class="comment">// true<br />
<br />
</span><span class="keyword">unset(</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">'banana'</span><span class="keyword">, </span><span class="default">$arr</span><span class="keyword">)]); </span><span class="comment">//index = 1<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">);<br />
<br />
</span><span class="comment">// result<br />
//&nbsp;&nbsp; array(1) {<br />
//&nbsp; &nbsp;&nbsp; [0]=&gt;<br />
//&nbsp; &nbsp;&nbsp; string(5) "apple"<br />
//&nbsp;&nbsp; }<br />
<br />
</span><span class="keyword">unset(</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">'peach'</span><span class="keyword">, </span><span class="default">$arr</span><span class="keyword">)]); </span><span class="comment">//not found, result is false<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">);<br />
<br />
</span><span class="comment">// result<br />
//&nbsp;&nbsp; array(0) {<br />
//&nbsp;&nbsp; }<br />
// because $arr[false] === $arr[0]<br />
</span><span class="default">?&gt;<br />
</span><br />
So always check the return of array_search!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="124961""></a>
  <div class="note">
   <strong class="user">yasien dot dwieb at gmail dot com</strong>
   <a href="#124961" class="date">28-Apr-2020 05:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Beware when using array_search to a mix of string and integer where prefixes of keys may collide, as in my case I have encountered the following situation:<br />
<br />
Assume you have the following array:<br />
<span class="default">&lt;?php<br />
$arr </span><span class="keyword">= [<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">1 </span><span class="keyword">=&gt; </span><span class="string">'index 0'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">2 </span><span class="keyword">=&gt; </span><span class="string">'index 1'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">3 </span><span class="keyword">=&gt; </span><span class="string">'index 2'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'3anothersuffix' </span><span class="keyword">=&gt; </span><span class="string">'index 3'<br />
</span><span class="keyword">];<br />
<br />
</span><span class="default">$index1 </span><span class="keyword">= </span><span class="default">array_search</span><span class="keyword">(</span><span class="string">'3'</span><span class="keyword">, </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">)); </span><span class="comment">// 2<br />
</span><span class="default">$index2 </span><span class="keyword">= </span><span class="default">array_search</span><span class="keyword">(</span><span class="string">'3anothersuffix'</span><span class="keyword">, </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">)); </span><span class="comment">//2<br />
</span><span class="default">?&gt;<br />
</span><br />
$index1 and $index2 will be the same<br />
<br />
after using strict type search:<br />
<br />
<span class="default">&lt;?php<br />
$index1 </span><span class="keyword">= </span><span class="default">array_search</span><span class="keyword">(</span><span class="string">'3'</span><span class="keyword">, </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">), </span><span class="default">true</span><span class="keyword">); </span><span class="comment">// false<br />
</span><span class="default">$index2 </span><span class="keyword">= </span><span class="default">array_search</span><span class="keyword">(</span><span class="string">'3anothersuffix'</span><span class="keyword">, </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">), </span><span class="default">true</span><span class="keyword">);&nbsp; </span><span class="comment">//3<br />
</span><span class="default">?&gt;<br />
</span><br />
it will not find $index1 at all while returning a correct value for $index2;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="122288""></a>
  <div class="note">
   <strong class="user">thinbegin at gmail dot com</strong>
   <a href="#122288" class="date">18-Jan-2018 10:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Despite PHP's amazing assortment of array functions and juggling maneuvers, I found myself needing a way to get the FULL array key mapping to a specific value. This function does that, and returns an array of the appropriate keys to get to said (first) value occurrence.<br />
<br />
function array_recursive_search_key_map($needle, $haystack) {<br />
&nbsp;&nbsp;&nbsp; foreach($haystack as $first_level_key=&gt;$value) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ($needle === $value) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return array($first_level_key);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } elseif (is_array($value)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $callback = array_recursive_search_key_map($needle, $value);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ($callback) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return array_merge(array($first_level_key), $callback);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return false;<br />
}<br />
<br />
usage example:<br />
-------------------<br />
<br />
$nested_array = $sample_array = array(<br />
&nbsp;&nbsp;&nbsp; 'a' =&gt; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 'one' =&gt; array ('aaa' =&gt; 'apple', 'bbb' =&gt; 'berry', 'ccc' =&gt; 'cantalope'),<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 'two' =&gt; array ('ddd' =&gt; 'dog', 'eee' =&gt; 'elephant', 'fff' =&gt; 'fox')<br />
&nbsp;&nbsp;&nbsp; ),<br />
&nbsp;&nbsp;&nbsp; 'b' =&gt; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 'three' =&gt; array ('ggg' =&gt; 'glad', 'hhh' =&gt; 'happy', 'iii' =&gt; 'insane'),<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 'four' =&gt; array ('jjj' =&gt; 'jim', 'kkk' =&gt; 'kim', 'lll' =&gt; 'liam')<br />
&nbsp;&nbsp;&nbsp; ),<br />
&nbsp;&nbsp;&nbsp; 'c' =&gt; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 'five' =&gt; array ('mmm' =&gt; 'mow', 'nnn' =&gt; 'no', 'ooo' =&gt; 'ohh'),<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 'six' =&gt; array ('ppp' =&gt; 'pidgeon', 'qqq' =&gt; 'quail', 'rrr' =&gt; 'rooster')<br />
&nbsp;&nbsp;&nbsp; )<br />
);<br />
<br />
$search_value = 'insane';<br />
<br />
$array_keymap = array_recursive_search_key_map($search_value, $nested_array);<br />
<br />
var_dump($array_keymap);<br />
// Outputs:<br />
// array(3) {<br />
// [0]=&gt;<br />
//&nbsp; string(1) "b"<br />
//&nbsp; [1]=&gt;<br />
//&nbsp; string(5) "three"<br />
//&nbsp; [2]=&gt;<br />
//&nbsp; string(3) "iii"<br />
//}<br />
<br />
----------------------------------------------<br />
<br />
But again, with the above solution, PHP again falls short on how to dynamically access a specific element's value within the nested array. For that, I wrote a 2nd function to pull the value that was mapped above.<br />
<br />
function array_get_nested_value($keymap, $array)<br />
{<br />
&nbsp;&nbsp;&nbsp; $nest_depth = sizeof($keymap);<br />
&nbsp;&nbsp;&nbsp; $value = $array;<br />
&nbsp;&nbsp;&nbsp; for ($i = 0; $i &lt; $nest_depth; $i++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $value = $value[$keymap[$i]];<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; return $value;<br />
}<br />
<br />
usage example:<br />
-------------------<br />
echo array_get_nested_value($array_keymap, $nested_array);&nbsp;&nbsp; // insane</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="120784""></a>
  <div class="note">
   <strong class="user">turabgarip at gmail dot com</strong>
   <a href="#120784" class="date">10-Mar-2017 03:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
About searcing in multi-dimentional arrays; two notes on "xfoxawy at gmail dot com";<br />
<br />
It perfectly searches through multi-dimentional arrays combined with array_column() (min php 5.5.0) but it may not return the values you'd expect.<br />
<br />
<span class="default">&lt;?php array_search</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">array_column</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="string">'key'</span><span class="keyword">)); </span><span class="default">?&gt;<br />
</span><br />
Since array_column() will produce a resulting array; it won't preserve your multi-dimentional array's keys. So if you check against your keys, it will fail.<br />
<br />
For example;<br />
<br />
<span class="default">&lt;?php<br />
$people </span><span class="keyword">= array(<br />
&nbsp; </span><span class="default">2 </span><span class="keyword">=&gt; array(<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="string">'John'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'fav_color' </span><span class="keyword">=&gt; </span><span class="string">'green'<br />
&nbsp; </span><span class="keyword">),<br />
&nbsp; </span><span class="default">5</span><span class="keyword">=&gt; array(<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="string">'Samuel'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'fav_color' </span><span class="keyword">=&gt; </span><span class="string">'blue'<br />
&nbsp; </span><span class="keyword">)<br />
);<br />
<br />
</span><span class="default">$found_key </span><span class="keyword">= </span><span class="default">array_search</span><span class="keyword">(</span><span class="string">'blue'</span><span class="keyword">, </span><span class="default">array_column</span><span class="keyword">(</span><span class="default">$people</span><span class="keyword">, </span><span class="string">'fav_color'</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span><br />
Here, you could expect that the $found_key would be "5" but it's NOT. It will be 1. Since it's the second element of the produced array by the array_column() function.<br />
<br />
Secondly, if your array is big, I would recommend you to first assign a new variable so that it wouldn't call array_column() for each element it searches. For a better performance, you could do;<br />
<br />
<span class="default">&lt;?php<br />
$colors </span><span class="keyword">= </span><span class="default">array_column</span><span class="keyword">(</span><span class="default">$people</span><span class="keyword">, </span><span class="string">'fav_color'</span><span class="keyword">);<br />
</span><span class="default">$found_key </span><span class="keyword">= </span><span class="default">array_search</span><span class="keyword">(</span><span class="string">'blue'</span><span class="keyword">, </span><span class="default">$colors</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="117837""></a>
  <div class="note">
   <strong class="user">maciej at speccode dot com</strong>
   <a href="#117837" class="date">18-Aug-2015 05:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
FYI, remember that strict mode is something that might save you hours.<br />
<br />
If you're searching for a string and you have a "true" boolean on the way - you will get it as result (first occurrence). Example below:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$arr </span><span class="keyword">= [<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'foo'&nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="string">'bar'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'abc'&nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="string">'def'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'bool'&nbsp;&nbsp; </span><span class="keyword">=&gt; </span><span class="default">true</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'target' </span><span class="keyword">=&gt; </span><span class="string">'xyz'<br />
</span><span class="keyword">];<br />
<br />
</span><span class="default">var_dump</span><span class="keyword">( </span><span class="default">array_search</span><span class="keyword">( </span><span class="string">'xyz'</span><span class="keyword">, </span><span class="default">$arr </span><span class="keyword">) ); </span><span class="comment">//bool<br />
</span><span class="default">var_dump</span><span class="keyword">( </span><span class="default">array_search</span><span class="keyword">( </span><span class="string">'xyz'</span><span class="keyword">, </span><span class="default">$arr</span><span class="keyword">, </span><span class="default">true </span><span class="keyword">) ); </span><span class="comment">//target<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106056""></a>
  <div class="note">
   <strong class="user">stooshie at gmail dot com</strong>
   <a href="#106056" class="date">06-Oct-2011 02:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Example of a recursive binary search that returns the index rather than boolean.<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// returns the index of needle in haystack<br />
</span><span class="keyword">function </span><span class="default">binSearch</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// n is only needed if counting depth of search<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">global </span><span class="default">$n</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$n</span><span class="keyword">++;<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// get the length of passed array<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$l </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// if length is 0, problem<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">$l </span><span class="keyword">&lt;= </span><span class="default">0</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return -</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// get the mid element<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$m </span><span class="keyword">= ((</span><span class="default">$l</span><span class="keyword">+(</span><span class="default">$l</span><span class="keyword">%</span><span class="default">2</span><span class="keyword">))/</span><span class="default">2</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// if mid &gt;= length (e.g. l=1)<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">$m </span><span class="keyword">&gt;= </span><span class="default">$l</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$m </span><span class="keyword">= </span><span class="default">$m</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// get the indexed element to compare to the passed element and branch accordingly<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$compare </span><span class="keyword">= </span><span class="default">$haystack</span><span class="keyword">[</span><span class="default">$m</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; switch(</span><span class="default">true</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; case(</span><span class="default">$compare</span><span class="keyword">&gt;</span><span class="default">$needle</span><span class="keyword">):<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// recurse on the lower half<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$new_haystack </span><span class="keyword">= </span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$m</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$c </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$new_haystack</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$r </span><span class="keyword">= </span><span class="default">binSearch</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$new_haystack</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// return current index - (length of lower half - found index in lower half)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$m </span><span class="keyword">- (</span><span class="default">$c </span><span class="keyword">- </span><span class="default">$r</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; case(</span><span class="default">$compare</span><span class="keyword">&lt;</span><span class="default">$needle</span><span class="keyword">):<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// recurse on the upper half<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$new_haystack </span><span class="keyword">= </span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$m</span><span class="keyword">, (</span><span class="default">$l</span><span class="keyword">-</span><span class="default">$m</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$c </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$new_haystack</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$r </span><span class="keyword">= </span><span class="default">binSearch</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$new_haystack</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// return current position + found index in upper half<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$m </span><span class="keyword">+ </span><span class="default">$r</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; case(</span><span class="default">$compare</span><span class="keyword">==</span><span class="default">$needle</span><span class="keyword">):<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// found it, so return index<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$m</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101869""></a>
  <div class="note">
   <strong class="user">stefano@takys dot it</strong>
   <a href="#101869" class="date">14-Jan-2011 01:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
for searching case insensitive better this:
<br />

<br />
<span class="default">&lt;?php
<br />
array_search</span><span class="keyword">(</span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$element</span><span class="keyword">),</span><span class="default">array_map</span><span class="keyword">(</span><span class="string">'strtolower'</span><span class="keyword">,</span><span class="default">$array</span><span class="keyword">));
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93833""></a>
  <div class="note">
   <strong class="user">codeslinger at compsalot dot com</strong>
   <a href="#93833" class="date">02-Oct-2009 12:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
one thing to be very aware of is that array_search() will fail if the needle is a string and the array itself contains values that are mixture of numbers and strings.&nbsp; (or even a string that looks like a number)
<br />

<br />
The problem is that unless you specify "strict" the match is done using ==&nbsp; &nbsp; and in that case any string will match a numeric value of zero which is not what you want.
<br />

<br />
-----
<br />

<br />
also, php can lookup an index pretty darn fast.&nbsp; for many scenarios, it is practical to maintain multiple arrays, one in which the index of the array is the search key and the normal array that contains the data.
<br />

<br />
<span class="default">&lt;?php
<br />

<br />
&nbsp; $normal</span><span class="keyword">[</span><span class="default">$index</span><span class="keyword">] = array(</span><span class="string">'key'</span><span class="keyword">=&gt;</span><span class="default">$key</span><span class="keyword">, </span><span class="string">'data'</span><span class="keyword">=&gt;</span><span class="string">'foo'</span><span class="keyword">);
<br />
&nbsp; </span><span class="default">$inverse</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$index</span><span class="keyword">;
<br />

<br />
&nbsp; </span><span class="comment">//very fast lookup, this beats any other kind of search
<br />

<br />
&nbsp; </span><span class="keyword">if (</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$inverse</span><span class="keyword">)) 
<br />
&nbsp; {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$index </span><span class="keyword">= </span><span class="default">$inverse</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">];
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$normal</span><span class="keyword">[</span><span class="default">$index</span><span class="keyword">];
<br />
&nbsp; }
<br />

<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90711""></a>
  <div class="note">
   <strong class="user">n-regen</strong>
   <a href="#90711" class="date">05-May-2009 10:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you only know a part of a value in an array and want to know the complete value, you can use the following function:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_find</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp; foreach (</span><span class="default">$haystack </span><span class="keyword">as </span><span class="default">$item</span><span class="keyword">)<br />
&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$item</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">) !== </span><span class="default">FALSE</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$item</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; break;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span>The function returns the complete first value of $haystack that contains $needle.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="88465""></a>
  <div class="note">
   <strong class="user">helenadeus at gmail dot com</strong>
   <a href="#88465" class="date">25-Jan-2009 01:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was trying to use array_search to retrieve all the values that match a given needle, but it turns out only the first match key is returned. I built this little function, which works just like array_search, but returns all the keys that match a given needle instead. The output is an array.<br />
<br />
<span class="default">&lt;?php<br />
<br />
$haystack </span><span class="keyword">= array(</span><span class="string">'a'</span><span class="keyword">,</span><span class="string">'b'</span><span class="keyword">,</span><span class="string">'a'</span><span class="keyword">,</span><span class="string">'b'</span><span class="keyword">);<br />
<br />
</span><span class="default">$needle </span><span class="keyword">= </span><span class="string">'a'</span><span class="keyword">;<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">array_search_all</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">));<br />
<br />
</span><span class="comment">//Output will be<br />
// Array<br />
// (<br />
//&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0]=&gt;1<br />
//&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1]=&gt;3<br />
// )<br />
<br />
</span><span class="keyword">function </span><span class="default">array_search_all</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">)<br />
{</span><span class="comment">#array_search_match($needle, $haystack) returns all the keys of the values that match $needle in $haystack<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">foreach (</span><span class="default">$haystack </span><span class="keyword">as </span><span class="default">$k</span><span class="keyword">=&gt;</span><span class="default">$v</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$haystack</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">]==</span><span class="default">$needle</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$array</span><span class="keyword">[] = </span><span class="default">$k</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return (</span><span class="default">$array</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; <br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87773""></a>
  <div class="note">
   <strong class="user">azaozz, gmail</strong>
   <a href="#87773" class="date">20-Dec-2008 05:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Expanding on the comment by hansen{}cointel.de:<br />
<br />
When searching for a string and the array contains 0 (zero), the string is casted to (int) by the type-casting which is always 0 (perhaps the opposite is the proper behaviour, the array value 0 should have been casted to string). That produces unexpected results if strict comparison is not used:<br />
<br />
<span class="default">&lt;?php<br />
$a </span><span class="keyword">= array(</span><span class="default">0</span><span class="keyword">, </span><span class="string">"str1"</span><span class="keyword">, </span><span class="string">"str2"</span><span class="keyword">, </span><span class="string">"str3"</span><span class="keyword">);<br />
echo </span><span class="string">"<br />
str1 = "</span><span class="keyword">.</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"str1"</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">).</span><span class="string">",<br />
str2 = "</span><span class="keyword">.</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"str2"</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">).</span><span class="string">",<br />
str3 = "</span><span class="keyword">.</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"str3"</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">).</span><span class="string">",<br />
<br />
str1 strict = "</span><span class="keyword">.</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"str1"</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">).</span><span class="string">",<br />
str2 strict = "</span><span class="keyword">.</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"str2"</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">).</span><span class="string">",<br />
str3 strict = "</span><span class="keyword">.</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"str3"</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
This will return:<br />
str1 = 0, str2 = 0, str3 = 0, str1 strict = 1, str2 strict = 2, str3 strict = 3</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82283""></a>
  <div class="note">
   <strong class="user">andreas dot damm at maxmachine dot de</strong>
   <a href="#82283" class="date">03-Apr-2008 04:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Combining syntax of array_search() and functionality of array_keys() to get all key=&gt;value associations of an array with the given search-value:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_search_values</span><span class="keyword">( </span><span class="default">$m_needle</span><span class="keyword">, </span><span class="default">$a_haystack</span><span class="keyword">, </span><span class="default">$b_strict </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">array_intersect_key</span><span class="keyword">( </span><span class="default">$a_haystack</span><span class="keyword">, </span><span class="default">array_flip</span><span class="keyword">( </span><span class="default">array_keys</span><span class="keyword">( </span><span class="default">$a_haystack</span><span class="keyword">, </span><span class="default">$m_needle</span><span class="keyword">, </span><span class="default">$b_strict</span><span class="keyword">)));<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Usage:<br />
<span class="default">&lt;?php<br />
$array1 </span><span class="keyword">= array( </span><span class="string">'pre'</span><span class="keyword">=&gt;</span><span class="string">'2'</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">, </span><span class="string">'1'</span><span class="keyword">, </span><span class="string">'2'</span><span class="keyword">, </span><span class="string">'3'</span><span class="keyword">, </span><span class="string">'post'</span><span class="keyword">=&gt;</span><span class="default">2</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">( </span><span class="default">array_search_values</span><span class="keyword">( </span><span class="string">'2'</span><span class="keyword">, </span><span class="default">$array1</span><span class="keyword">));<br />
</span><span class="default">print_r</span><span class="keyword">( </span><span class="default">array_search_values</span><span class="keyword">( </span><span class="string">'2'</span><span class="keyword">, </span><span class="default">$array1</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">));<br />
</span><span class="default">print_r</span><span class="keyword">( </span><span class="default">array_search_values</span><span class="keyword">( </span><span class="default">2</span><span class="keyword">, </span><span class="default">$array1</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span><br />
Will return:<br />
array(4) {<br />
&nbsp;&nbsp;&nbsp; ["pre"] =&gt;<br />
&nbsp;&nbsp;&nbsp; string(1) "2"<br />
&nbsp;&nbsp;&nbsp; [1] =&gt;<br />
&nbsp;&nbsp;&nbsp; int(2)<br />
&nbsp;&nbsp;&nbsp; [4] =&gt;<br />
&nbsp;&nbsp;&nbsp; string(1) "2"<br />
&nbsp;&nbsp;&nbsp; ["post"] =&gt;<br />
&nbsp;&nbsp;&nbsp; int(2)<br />
}<br />
array(2) {<br />
&nbsp;&nbsp;&nbsp; ["pre"] =&gt;<br />
&nbsp;&nbsp;&nbsp; string(1) "2"<br />
&nbsp;&nbsp;&nbsp; [4] =&gt;<br />
&nbsp;&nbsp;&nbsp; string(1) "2"<br />
}<br />
array(2) {<br />
&nbsp;&nbsp;&nbsp; [1] =&gt;<br />
&nbsp;&nbsp;&nbsp; int(2)<br />
&nbsp;&nbsp;&nbsp; ["post"] =&gt;<br />
&nbsp;&nbsp;&nbsp; int(2)<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="77750""></a>
  <div class="note">
   <strong class="user">kermes [at] thesevens [dot] net</strong>
   <a href="#77750" class="date">11-Sep-2007 03:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A variation of previous searches that returns an array of keys that match the given value:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_ksearch</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">); </span><span class="default">next</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">), </span><span class="default">$i</span><span class="keyword">++)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">current</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)) == </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">, </span><span class="default">key</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Usage would be as follows:<br />
<span class="default">&lt;?php<br />
$testArray </span><span class="keyword">= array(</span><span class="string">'one' </span><span class="keyword">=&gt; </span><span class="string">'test1'</span><span class="keyword">, </span><span class="string">'two' </span><span class="keyword">=&gt; </span><span class="string">'test2'</span><span class="keyword">, </span><span class="string">'three' </span><span class="keyword">=&gt; </span><span class="string">'test1'</span><span class="keyword">, </span><span class="string">'four' </span><span class="keyword">=&gt; </span><span class="string">'test2'</span><span class="keyword">, </span><span class="string">'five' </span><span class="keyword">=&gt; </span><span class="string">'test1'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">array_ksearch</span><span class="keyword">(</span><span class="default">$testArray</span><span class="keyword">, </span><span class="string">'test1'</span><span class="keyword">));<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="63338""></a>
  <div class="note">
   <strong class="user">RichGC</strong>
   <a href="#63338" class="date">20-Mar-2006 05:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To expand on previous comments, here are some examples of<br />
where using array_search within an IF statement can go<br />
wrong when you want to use the array key thats returned.<br />
<br />
Take the following two arrays you wish to search:<br />
<br />
<span class="default">&lt;?php<br />
$fruit_array </span><span class="keyword">= array(</span><span class="string">"apple"</span><span class="keyword">, </span><span class="string">"pear"</span><span class="keyword">, </span><span class="string">"orange"</span><span class="keyword">);<br />
</span><span class="default">$fruit_array </span><span class="keyword">= array(</span><span class="string">"a" </span><span class="keyword">=&gt; </span><span class="string">"apple"</span><span class="keyword">, </span><span class="string">"b" </span><span class="keyword">=&gt; </span><span class="string">"pear"</span><span class="keyword">, </span><span class="string">"c" </span><span class="keyword">=&gt; </span><span class="string">"orange"</span><span class="keyword">);<br />
<br />
if (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"apple"</span><span class="keyword">, </span><span class="default">$fruit_array</span><span class="keyword">))<br />
</span><span class="comment">//PROBLEM: the first array returns a key of 0 and IF treats it as FALSE<br />
<br />
</span><span class="keyword">if (</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"apple"</span><span class="keyword">, </span><span class="default">$fruit_array</span><span class="keyword">)))<br />
</span><span class="comment">//PROBLEM: works on numeric keys of the first array but fails on the second<br />
<br />
</span><span class="keyword">if (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"apple"</span><span class="keyword">, </span><span class="default">$fruit_array</span><span class="keyword">)))<br />
</span><span class="comment">//PROBLEM: using the above in the wrong order causes $i to always equal 1<br />
<br />
</span><span class="keyword">if (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"apple"</span><span class="keyword">, </span><span class="default">$fruit_array</span><span class="keyword">) !== </span><span class="default">FALSE</span><span class="keyword">)<br />
</span><span class="comment">//PROBLEM: explicit with no extra brackets causes $i to always equal 1<br />
<br />
</span><span class="keyword">if ((</span><span class="default">$i </span><span class="keyword">= </span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"apple"</span><span class="keyword">, </span><span class="default">$fruit_array</span><span class="keyword">)) !== </span><span class="default">FALSE</span><span class="keyword">)<br />
</span><span class="comment">//YES: works on both arrays returning their keys<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="32883""></a>
  <div class="note">
   <strong class="user">cue at openxbox dot com</strong>
   <a href="#32883" class="date">09-Jun-2003 07:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you are using the result of array_search in a condition statement, make sure you use the === operator instead of == to test whether or not it found a match.&nbsp; Otherwise, searching through an array with numeric indicies will result in index 0 always getting evaluated as false/null.&nbsp; This nuance cost me a lot of time and sanity, so I hope this helps someone.&nbsp; In case you don't know what I'm talking about, here's an example:
<br />

<br />
<span class="default">&lt;?php
<br />
$code </span><span class="keyword">= array(</span><span class="string">"a"</span><span class="keyword">, </span><span class="string">"b"</span><span class="keyword">, </span><span class="string">"a"</span><span class="keyword">, </span><span class="string">"c"</span><span class="keyword">, </span><span class="string">"a"</span><span class="keyword">, </span><span class="string">"b"</span><span class="keyword">, </span><span class="string">"b"</span><span class="keyword">); </span><span class="comment">// infamous abacabb mortal kombat code :-P
<br />

<br />
// this is WRONG
<br />
</span><span class="keyword">while ((</span><span class="default">$key </span><span class="keyword">= </span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"a"</span><span class="keyword">, </span><span class="default">$code</span><span class="keyword">)) != </span><span class="default">NULL</span><span class="keyword">)
<br />
{
<br />
&nbsp;</span><span class="comment">// infinite loop, regardless of the unset
<br />
&nbsp;</span><span class="keyword">unset(</span><span class="default">$code</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);
<br />
}
<br />

<br />
</span><span class="comment">// this is _RIGHT_
<br />
</span><span class="keyword">while ((</span><span class="default">$key </span><span class="keyword">= </span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"a"</span><span class="keyword">, </span><span class="default">$code</span><span class="keyword">)) !== </span><span class="default">NULL</span><span class="keyword">)
<br />
{
<br />
&nbsp;</span><span class="comment">// loop will terminate
<br />
&nbsp;</span><span class="keyword">unset(</span><span class="default">$code</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
