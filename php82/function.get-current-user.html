<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=UTF-8">
  <title>获取当前 PHP 脚本所有者名称</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.get-cfg-var.html">? get_cfg_var</a></li>
      <li style="float: right;"><a href="function.get-defined-constants.html">get_defined_constants ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.info.html">PHP 选项/信息 函数</a></li>
    <li>获取当前 PHP 脚本所有者名称</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.get-current-user" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">get_current_user</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">get_current_user</span> &mdash; <span class="dc-title">获取当前 PHP 脚本所有者名称</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.get-current-user-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>get_current_user</strong></span>(): <span class="type">string</span></div>

  <p class="simpara">
   返回当前 PHP 脚本所有者名称。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.get-current-user-parameters">
  <h3 class="title">参数</h3>
  <p class="para">此函数没有参数。</p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.get-current-user-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   以字符串返回用户名。
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.get-current-user-examples">
  <h3 class="title">示例</h3>
  <p class="para">
   <div class="example" id="example-1116">
    <p><strong>Example #1 <span class="function"><strong>get_current_user()</strong></span> 例子</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">echo </span><span style="color: #DD0000">'Current script owner: ' </span><span style="color: #007700">. </span><span style="color: #0000BB">get_current_user</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上示例的输出类似于：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Current script owner: SYSTEM
</pre></div>
    </div>
   </div>
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.get-current-user-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.getmyuid.html" class="function" rel="rdfs-seeAlso">getmyuid()</a> - 获取 PHP 脚本所有者的 UID</span></li>
    <li class="member"><span class="function"><a href="function.getmygid.html" class="function" rel="rdfs-seeAlso">getmygid()</a> - 获取当前 PHP 脚本拥有者的 GID</span></li>
    <li class="member"><span class="function"><a href="function.getmypid.html" class="function" rel="rdfs-seeAlso">getmypid()</a> - 获取 PHP 进程的 ID</span></li>
    <li class="member"><span class="function"><a href="function.getmyinode.html" class="function" rel="rdfs-seeAlso">getmyinode()</a> - 获取当前脚本的索引节点（inode）</span></li>
    <li class="member"><span class="function"><a href="function.getlastmod.html" class="function" rel="rdfs-seeAlso">getlastmod()</a> - 获取页面最后修改的时间</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="124789""></a>
  <div class="note">
   <strong class="user">chris at ocproducts dot com</strong>
   <a href="#124789" class="date">03-Mar-2020 07:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Further testing of behaviour on Windows vs Linux...<br />
<br />
On Linux this function is indeed returning the owner of the script. If you want to know the username PHP is running as you can use POSIX functions (or shell_exec with 'whoami').<br />
<br />
On Windows this function is returning the username PHP is running as. Both for IIS (IUSR) and Apache (SYSTEM - which comes from the fact Apache is a service on Windows).<br />
<br />
The behaviour on Windows is actually useful given that POSIX functions aren't available. If you need to find the owner of the script on Windows perhaps the best way is to shell_exec to use dir /Q, and parse that.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="119742""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#119742" class="date">15-Aug-2016 06:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you have userdir enabled, get_current_user() returns the username of the user hosting the public_html. For example, <a href="http://example.com/~bobevans/somescript.php will return bobevans when calling get_current_user(" rel="nofollow" target="_blank">http://example.com/~bobevans/somescript.php will return bobevans when calling get_current_user(</a>).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="117584""></a>
  <div class="note">
   <strong class="user">login dot naitsirch at arcor dot de</strong>
   <a href="#117584" class="date">02-Jul-2015 08:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to get the name of the user who executes the current PHP script, you can use<br />
<br />
<span class="default">&lt;?php<br />
$username </span><span class="keyword">= </span><span class="default">getenv</span><span class="keyword">(</span><span class="string">'USERNAME'</span><span class="keyword">) ?: </span><span class="default">getenv</span><span class="keyword">(</span><span class="string">'USER'</span><span class="keyword">);<br />
echo </span><span class="default">$username</span><span class="keyword">; </span><span class="comment">// e.g. root or www-data<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113034""></a>
  <div class="note">
   <strong class="user">nick at little-apps dot org</strong>
   <a href="#113034" class="date">21-Aug-2013 05:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Since this only returns the file owner and not the actual user running the script, an alternative in Linux is:<br />
<br />
<span class="default">&lt;?php<br />
$current_user </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">shell_exec</span><span class="keyword">(</span><span class="string">'whoami'</span><span class="keyword">));<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="109867""></a>
  <div class="note">
   <strong class="user">south dot bucks at gmail dot com</strong>
   <a href="#109867" class="date">29-Aug-2012 02:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
On Centos, the Red Hat linux clone, this instruction gives the file's OWNER (the first parameter in instruction 'chown').&nbsp; It does not reveal the file's GROUP.<br />
<br />
get_current_user()&nbsp; does NOT reveal the current process' user's identity.<br />
<br />
See:&nbsp; posix_getuid() - Return the real user ID of the current process</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75059""></a>
  <div class="note">
   <strong class="user">s dot bond1 at lse dot ac dot uk</strong>
   <a href="#75059" class="date">10-May-2007 05:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The information returned by get_current_user() seems to depend on the platform.
<br />

<br />
Using PHP 5.1.1 running as CGI with IIS 5.0 on Windows NT, get_current_user() returns the owner of the process running the script, *not* the owner of the script itself.
<br />

<br />
It's easy to test - create a file containing:
<br />

<br />
<span class="default">&lt;?php
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">echo </span><span class="default">get_current_user</span><span class="keyword">();
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Then access it through the browser. I get: IUSR_MACHINE, the Internet Guest Account on Windows, which is certainly not the owner of the script.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="57624""></a>
  <div class="note">
   <strong class="user">justin samuel</strong>
   <a href="#57624" class="date">08-Oct-2005 11:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
to get the username of the process owner (rather than the file owner), you can use:<br />
<br />
<span class="default">&lt;?php<br />
$processUser </span><span class="keyword">= </span><span class="default">posix_getpwuid</span><span class="keyword">(</span><span class="default">posix_geteuid</span><span class="keyword">());<br />
print </span><span class="default">$processUser</span><span class="keyword">[</span><span class="string">'name'</span><span class="keyword">];<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
