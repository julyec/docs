<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=UTF-8">
  <title>判断是否为合法数值</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.is-infinite.html">? is_infinite</a></li>
      <li style="float: right;"><a href="function.log10.html">log10 ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.math.html">Math 函数</a></li>
    <li>判断是否为合法数值</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.is-nan" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">is_nan</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.2.0, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">is_nan</span> &mdash; <span class="dc-title">判断是否为合法数值</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.is-nan-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>is_nan</strong></span>(<span class="methodparam"><span class="type">float</span> <code class="parameter">$num</code></span>): <span class="type">bool</span></div>

  <p class="para rdfs-comment">
   如果 <code class="parameter">num</code> 为"非数值"，例如
   <code class="literal">acos(1.01)</code> 的结果，则返回 <strong><code>true</code></strong>。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.is-nan-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">num</code></dt>

     <dd>

      <p class="para">
       要检查的值
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.is-nan-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   如果 <code class="parameter">num</code>"不是数字"返回 <strong><code>true</code></strong>，否则返回 <strong><code>false</code></strong>。
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.is-nan-examples">
  <h3 class="title">示例</h3>
  <p class="para">
   <div class="example" id="">
    <p><strong>Example #1 <span class="function"><strong>is_nan()</strong></span> 例子</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">// 无效计算，将返回 <br />// NaN 值<br /></span><span style="color: #0000BB">$nan </span><span style="color: #007700">= </span><span style="color: #0000BB">acos</span><span style="color: #007700">(</span><span style="color: #0000BB">8</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$nan</span><span style="color: #007700">, </span><span style="color: #0000BB">is_nan</span><span style="color: #007700">(</span><span style="color: #0000BB">$nan</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上示例会输出：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
float(NAN)
bool(true)
</pre></div>
    </div>
   </div>
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.is-nan-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.is-finite.html" class="function" rel="rdfs-seeAlso">is_finite()</a> - 判断是否为有限值</span></li>
    <li class="member"><span class="function"><a href="function.is-infinite.html" class="function" rel="rdfs-seeAlso">is_infinite()</a> - 判断是否为无限值</span></li>
   </ul>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="124931""></a>
  <div class="note">
   <strong class="user">ScorpioT1000</strong>
   <a href="#124931" class="date">22-Apr-2020 10:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
function is_nan2($n) {<br />
&nbsp;&nbsp;&nbsp; return $n !== $n;<br />
}<br />
<br />
is_nan2(NAN); // true</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="119161""></a>
  <div class="note">
   <strong class="user">php at darkain dot com</strong>
   <a href="#119161" class="date">12-Apr-2016 08:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Starting with PHP 7, the string 'NaN' evaluates to the NaN value as well. <br />
<br />
Example:<br />
var_dump( (float) 'NaN' );<br />
<br />
PHP 5.x and HHVM:<br />
float(0)<br />
<br />
PHP 7.0:<br />
float(NAN)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="117310""></a>
  <div class="note">
   <strong class="user">10basetom</strong>
   <a href="#117310" class="date">20-May-2015 02:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I would use is_numeric() instead of ctype_digit() if you cannot be 100% sure what data type the string will be. Example from the docs:<br />
<br />
<span class="default">&lt;?php<br />
$numeric_string </span><span class="keyword">= </span><span class="string">'42'</span><span class="keyword">;<br />
</span><span class="default">$integer&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">= </span><span class="default">42</span><span class="keyword">;<br />
<br />
</span><span class="default">ctype_digit</span><span class="keyword">(</span><span class="default">$numeric_string</span><span class="keyword">);&nbsp; </span><span class="comment">// true<br />
</span><span class="default">ctype_digit</span><span class="keyword">(</span><span class="default">$integer</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// false (ASCII 42 is the * character)<br />
<br />
</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$numeric_string</span><span class="keyword">);&nbsp;&nbsp; </span><span class="comment">// true<br />
</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$integer</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// true<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107929""></a>
  <div class="note">
   <strong class="user">modern dot apocalypse at gmail dot com</strong>
   <a href="#107929" class="date">15-Mar-2012 10:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I have decided to do some testing because I am getting unusual results with the is_nan function and here are the results of my tests:<br />
<br />
<span class="default">&lt;?php<br />
var_dump</span><span class="keyword">(</span><span class="default">NAN</span><span class="keyword">); </span><span class="comment">// float NAN<br />
<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">NAN </span><span class="keyword">== </span><span class="default">NAN</span><span class="keyword">); </span><span class="comment">// boolean true<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">NAN </span><span class="keyword">=== </span><span class="default">NAN</span><span class="keyword">); </span><span class="comment">// boolean true<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">is_nan</span><span class="keyword">(</span><span class="default">NAN</span><span class="keyword">)); </span><span class="comment">// boolean true<br />
<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">NAN </span><span class="keyword">== </span><span class="default">12</span><span class="keyword">); </span><span class="comment">// boolean true<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">NAN </span><span class="keyword">=== </span><span class="default">12</span><span class="keyword">); </span><span class="comment">// boolean false<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">is_nan</span><span class="keyword">(</span><span class="default">12</span><span class="keyword">)); </span><span class="comment">// boolean false<br />
<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">NAN </span><span class="keyword">== </span><span class="default">12.4</span><span class="keyword">); </span><span class="comment">// boolean true<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">NAN </span><span class="keyword">=== </span><span class="default">12.4</span><span class="keyword">); </span><span class="comment">// boolean true<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">is_nan</span><span class="keyword">(</span><span class="default">12.4</span><span class="keyword">)); </span><span class="comment">// boolean false<br />
<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">NAN </span><span class="keyword">== </span><span class="default">NULL</span><span class="keyword">); </span><span class="comment">// boolean true<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">NAN </span><span class="keyword">=== </span><span class="default">NULL</span><span class="keyword">); </span><span class="comment">// boolean false<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">is_nan</span><span class="keyword">(</span><span class="default">NULL</span><span class="keyword">)); </span><span class="comment">// boolean false<br />
<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">NAN </span><span class="keyword">== </span><span class="string">'K&lt;WNPO'</span><span class="keyword">); </span><span class="comment">// boolean true<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">NAN </span><span class="keyword">=== </span><span class="string">'K&lt;WNPO'</span><span class="keyword">); </span><span class="comment">// boolean false<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">is_nan</span><span class="keyword">(</span><span class="string">'K&lt;WNPO'</span><span class="keyword">)); </span><span class="comment">// null and throws a warning "Warning: is_nan() expects parameter 1 to be double, string given in NANTest.php on line 13"</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="97330""></a>
  <div class="note">
   <strong class="user">php at keith tyler dot com</strong>
   <a href="#97330" class="date">14-Apr-2010 04:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It seems odd to me, but in boolean context, NAN evalutes to true. <br />
<br />
<span class="default">&lt;?php<br />
var_dump</span><span class="keyword">(</span><span class="default">acos</span><span class="keyword">(</span><span class="default">8</span><span class="keyword">));<br />
</span><span class="default">var_dump</span><span class="keyword">((bool)</span><span class="default">acos</span><span class="keyword">(</span><span class="default">8</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span><br />
Returns:<br />
<br />
float(NAN)<br />
bool(true)<br />
<br />
Incidentally INF and -INF also evaluate to true.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92076""></a>
  <div class="note">
   <strong class="user">J.K.</strong>
   <a href="#92076" class="date">07-Jul-2009 04:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For seeing whether or not something is a number, use ctype_digit().</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="62504""></a>
  <div class="note">
   <strong class="user">darkangel at moveinmod dot net</strong>
   <a href="#62504" class="date">01-Mar-2006 10:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
nan/"not a number" is not meant to see if the data type is numeric/textual/etc..<br />
<br />
NaN is actually a set of values which can be stored in floating-point variables, but dont actually evaluate to a proper floating point number.<br />
<br />
The floating point system has three sections: 1 bit for the sign (+/-), an 8 bit exponent, and a 23 bit fractional part.<br />
There are rules governing which combinations of values can be placed into each section, and some values are reserved for numbers such as infinity. This leads to certain combinations being invalid, or in other words, not a number.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
