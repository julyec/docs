<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=UTF-8">
  <title>将公历日期转为儒略日数</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.frenchtojd.html">? frenchtojd</a></li>
      <li style="float: right;"><a href="function.jddayofweek.html">jddayofweek ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.calendar.html">Calendar 函数</a></li>
    <li>将公历日期转为儒略日数</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.gregoriantojd" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">gregoriantojd</h1> 
  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">gregoriantojd</span> &mdash; <span class="dc-title">将公历日期转为儒略日数</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.gregoriantojd-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>gregoriantojd</strong></span>(<span class="methodparam"><span class="type">int</span> <code class="parameter">$month</code></span>, <span class="methodparam"><span class="type">int</span> <code class="parameter">$day</code></span>, <span class="methodparam"><span class="type">int</span> <code class="parameter">$year</code></span>): <span class="type">int</span></div>

  <p class="para rdfs-comment">
   公历的有效范围是从公元前 4714 年 11 月 25 日开始。至少到公元 9999 年 12 月 31 日</p>
  <p class="para">
   虽然这个函数可以处理追溯到公元前 4714 年以前的日期，但这样做可能没有意义。公历直到 1582 年 10 年 15 
   日（或是儒略历 1582 年 10 月 5 日）才被发明，一些国家直到很久以后才接受它。比如，英国是在 1752 
   年开始使用公历，苏联是在 1918 年，希腊是在 1923 年，大部分的欧洲国家在公历前使用儒略历。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.gregoriantojd-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">month</code></dt>

     <dd>

      <p class="para">
       月份的范围是 1（January）到 12（December）之间的数字。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">day</code></dt>

     <dd>

      <p class="para">
       天的范围是 1 到 31 之间的数字。如果该月的天数小于指定的天数，
       则会发生溢出。请参考下面的示例。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">year</code></dt>

     <dd>

      <p class="para">
       年份的范围是 -4714 到 9999 之间的数字。负数表示公元前，正数表示公元。注意没有公元
       <code class="literal">0</code> 年，公元前 1 年 12 月 31 日紧跟其后的是公元 1 年 1 月 1 日。
      </p>
     </dd>

      
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.gregoriantojd-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   int 类型的指定公历日期的儒略日。日期超出范围值返回 <code class="literal">0</code>。
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.gregoriantojd-examples">
  <h3 class="title">示例</h3>
  <p class="para">
   <div class="example" id="example-4094">
    <p><strong>Example #1 历法函数</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$jd </span><span style="color: #007700">= </span><span style="color: #0000BB">gregoriantojd</span><span style="color: #007700">(</span><span style="color: #0000BB">10</span><span style="color: #007700">, </span><span style="color: #0000BB">11</span><span style="color: #007700">, </span><span style="color: #0000BB">1970</span><span style="color: #007700">);<br />echo </span><span style="color: #DD0000">"</span><span style="color: #0000BB">$jd</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$gregorian </span><span style="color: #007700">= </span><span style="color: #0000BB">jdtogregorian</span><span style="color: #007700">(</span><span style="color: #0000BB">$jd</span><span style="color: #007700">);<br />echo </span><span style="color: #DD0000">"</span><span style="color: #0000BB">$gregorian</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上示例会输出：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
2440871
10/11/1970
</pre></div>
    </div>
   </div>
   <div class="example" id="example-4096">
    <p><strong>Example #2 溢出行为</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">echo </span><span style="color: #0000BB">gregoriantojd</span><span style="color: #007700">(</span><span style="color: #0000BB">2</span><span style="color: #007700">, </span><span style="color: #0000BB">31</span><span style="color: #007700">, </span><span style="color: #0000BB">2018</span><span style="color: #007700">), </span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">,<br />     </span><span style="color: #0000BB">gregoriantojd</span><span style="color: #007700">(</span><span style="color: #0000BB">3</span><span style="color: #007700">,  </span><span style="color: #0000BB">3</span><span style="color: #007700">, </span><span style="color: #0000BB">2018</span><span style="color: #007700">), </span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上示例会输出：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
2458181
2458181
</pre></div>
    </div>
   </div>
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.gregoriantojd-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.jdtogregorian.html" class="function" rel="rdfs-seeAlso">jdtogregorian()</a> - 将儒略日数转换为公历日期</span></li> 
    <li class="member"><span class="function"><a href="function.cal-to-jd.html" class="function" rel="rdfs-seeAlso">cal_to_jd()</a> - 从支持的历法转换为儒略日数</span></li>
   </ul>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="90138""></a>
  <div class="note">
   <strong class="user">jfg</strong>
   <a href="#90138" class="date">07-Apr-2009 01:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you need the same output as the g_date_get_julian function of the GlibC, here is my php implementation :<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * Glib g_date_get_julian PHP implementation<br />
&nbsp;&nbsp; &nbsp; *<br />
&nbsp;&nbsp; &nbsp; * @param&nbsp; $str&nbsp; Date string in a format accepted by strtotime<br />
&nbsp;&nbsp; &nbsp; * @author jfg<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">private function </span><span class="default">_get_julian</span><span class="keyword">( </span><span class="default">$str </span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$d </span><span class="keyword">= </span><span class="default">date_create</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if( </span><span class="default">$d </span><span class="keyword">== </span><span class="default">false </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$day_in_year </span><span class="keyword">= (int) </span><span class="default">date_format</span><span class="keyword">(</span><span class="default">$d</span><span class="keyword">, </span><span class="string">"z"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$year&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">= (int) </span><span class="default">date_format</span><span class="keyword">(</span><span class="default">$d</span><span class="keyword">, </span><span class="string">"Y"</span><span class="keyword">) - </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$julian_days </span><span class="keyword">= </span><span class="default">$year </span><span class="keyword">* </span><span class="default">365</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$julian_days </span><span class="keyword">+= (</span><span class="default">$year </span><span class="keyword">&gt;&gt;= </span><span class="default">2</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$julian_days </span><span class="keyword">-= (</span><span class="default">$year </span><span class="keyword">/= </span><span class="default">25</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$julian_days </span><span class="keyword">+= </span><span class="default">$year </span><span class="keyword">&gt;&gt; </span><span class="default">2</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$julian_days </span><span class="keyword">+= </span><span class="default">$day_in_year </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">ceil</span><span class="keyword">(</span><span class="default">$julian_days</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="51040""></a>
  <div class="note">
   <strong class="user">jettyrat at jettyfishing dot com</strong>
   <a href="#51040" class="date">17-Mar-2005 01:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You can obtain the decimal fraction of the Julian date with the php gregoriantojd() function or the function shown below by applying this code to the returned value.
<br />

<br />
<span class="default">&lt;?php
<br />
&nbsp; $julianDate </span><span class="keyword">= </span><span class="default">gregoriantojd</span><span class="keyword">(</span><span class="default">$month</span><span class="keyword">, </span><span class="default">$day</span><span class="keyword">, </span><span class="default">$year</span><span class="keyword">);
<br />

<br />
&nbsp; </span><span class="comment">//correct for half-day offset
<br />
&nbsp; </span><span class="default">$dayfrac </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">'G'</span><span class="keyword">) / </span><span class="default">24 </span><span class="keyword">- </span><span class="default">.5</span><span class="keyword">;
<br />
&nbsp; if (</span><span class="default">$dayfrac </span><span class="keyword">&lt; </span><span class="default">0</span><span class="keyword">) </span><span class="default">$dayfrac </span><span class="keyword">+= </span><span class="default">1</span><span class="keyword">;
<br />

<br />
&nbsp; </span><span class="comment">//now set the fraction of a day
<br />
&nbsp; </span><span class="default">$frac </span><span class="keyword">= </span><span class="default">$dayfrac </span><span class="keyword">+ (</span><span class="default">date</span><span class="keyword">(</span><span class="string">'i'</span><span class="keyword">) + </span><span class="default">date</span><span class="keyword">(</span><span class="string">'s'</span><span class="keyword">) / </span><span class="default">60</span><span class="keyword">) / </span><span class="default">60 </span><span class="keyword">/ </span><span class="default">24</span><span class="keyword">;
<br />

<br />
&nbsp; </span><span class="default">$julianDate </span><span class="keyword">= </span><span class="default">$julianDate </span><span class="keyword">+ </span><span class="default">$frac</span><span class="keyword">;
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="43068""></a>
  <div class="note">
   <strong class="user">httpwebwitch</strong>
   <a href="#43068" class="date">08-Jun-2004 04:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function also ignores decimal fractions in JD dates, and it uses non-standard format for returning the Gregorian date. <br />
<br />
So, if your JD date is 2453056.28673, the Gregorian returned value is 2/20/2004, not "2004-02-20 23:45:36"<br />
<br />
The decimal part is important, since the Julian day begins at noon, for example 2453056.49 is on Friday, 2453056.50 is on Saturday. Discarding the decimal part means that your returned Gregorian Date will be wrong 50% of the time.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
