<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=UTF-8">
  <title>Adds an attribute to the SimpleXML element</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="class.simplexmlelement.html">? SimpleXMLElement</a></li>
      <li style="float: right;"><a href="simplexmlelement.addchild.html">SimpleXMLElement::addChild ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="class.simplexmlelement.html">SimpleXMLElement</a></li>
    <li>Adds an attribute to the SimpleXML element</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="simplexmlelement.addattribute" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">SimpleXMLElement::addAttribute</h1>
  <p class="verinfo">(PHP 5 &gt;= 5.1.3, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">SimpleXMLElement::addAttribute</span> &mdash; <span class="dc-title">
   Adds an attribute to the SimpleXML element
  </span></p>

 </div>
 <div class="refsect1 description" id="refsect1-simplexmlelement.addattribute-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="methodname"><strong>SimpleXMLElement::addAttribute</strong></span>(<span class="methodparam"><span class="type">string</span> <code class="parameter">$qualifiedName</code></span>, <span class="methodparam"><span class="type">string</span> <code class="parameter">$value</code></span>, <span class="methodparam"><span class="type">?</span><span class="type"><span class="type">string</span><span class="type"></span></span> <code class="parameter">$namespace</code><span class="initializer"> = <strong><code>null</code></strong></span></span>): <span class="type"><span class="type void">void</span></span></div>

  <p class="para rdfs-comment">
   Adds an attribute to the SimpleXML element.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-simplexmlelement.addattribute-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">qualifiedName</code></dt>

     <dd>

      <p class="para">
       The name of the attribute to add.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">value</code></dt>

     <dd>

      <p class="para">
       The value of the attribute.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">namespace</code></dt>

     <dd>

      <p class="para">
       If specified, the namespace to which the attribute belongs.
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-simplexmlelement.addattribute-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   没有返回值。
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-simplexmlelement.addattribute-examples">
  <h3 class="title">示例</h3>
  <p class="para">
   <blockquote class="note"><p><strong class="note">Note</strong>: 
    <p class="para">
     Listed examples may include <code class="literal">example.php</code>,
     which refers to the XML string found in the first example
     of the <a href="simplexml.examples-basic.html" class="link">basic usage</a> guide.
    </p>
   </p></blockquote>
   <div class="example" id="">
    <p><strong>Example #1 Add attributes and children to a SimpleXML element</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">include </span><span style="color: #DD0000">'example.php'</span><span style="color: #007700">;<br /> <br /></span><span style="color: #0000BB">$sxe </span><span style="color: #007700">= new </span><span style="color: #0000BB">SimpleXMLElement</span><span style="color: #007700">(</span><span style="color: #0000BB">$xmlstr</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$sxe</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addAttribute</span><span style="color: #007700">(</span><span style="color: #DD0000">'type'</span><span style="color: #007700">, </span><span style="color: #DD0000">'documentary'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$movie </span><span style="color: #007700">= </span><span style="color: #0000BB">$sxe</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addChild</span><span style="color: #007700">(</span><span style="color: #DD0000">'movie'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$movie</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addChild</span><span style="color: #007700">(</span><span style="color: #DD0000">'title'</span><span style="color: #007700">, </span><span style="color: #DD0000">'PHP2: More Parser Stories'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$movie</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addChild</span><span style="color: #007700">(</span><span style="color: #DD0000">'plot'</span><span style="color: #007700">, </span><span style="color: #DD0000">'This is all about the people who make it work.'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$characters </span><span style="color: #007700">= </span><span style="color: #0000BB">$movie</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addChild</span><span style="color: #007700">(</span><span style="color: #DD0000">'characters'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$character  </span><span style="color: #007700">= </span><span style="color: #0000BB">$characters</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addChild</span><span style="color: #007700">(</span><span style="color: #DD0000">'character'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$character</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addChild</span><span style="color: #007700">(</span><span style="color: #DD0000">'name'</span><span style="color: #007700">, </span><span style="color: #DD0000">'Mr. Parser'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$character</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addChild</span><span style="color: #007700">(</span><span style="color: #DD0000">'actor'</span><span style="color: #007700">, </span><span style="color: #DD0000">'John Doe'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$rating </span><span style="color: #007700">= </span><span style="color: #0000BB">$movie</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addChild</span><span style="color: #007700">(</span><span style="color: #DD0000">'rating'</span><span style="color: #007700">, </span><span style="color: #DD0000">'5'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$rating</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addAttribute</span><span style="color: #007700">(</span><span style="color: #DD0000">'type'</span><span style="color: #007700">, </span><span style="color: #DD0000">'stars'</span><span style="color: #007700">);<br /> <br />echo </span><span style="color: #0000BB">$sxe</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">asXML</span><span style="color: #007700">();<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上示例的输出类似于：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
&lt;?xml version=&quot;1.0&quot; standalone=&quot;yes&quot;?&gt;
&lt;movies type=&quot;documentary&quot;&gt;
 &lt;movie&gt;
  &lt;title&gt;PHP: Behind the Parser&lt;/title&gt;
  &lt;characters&gt;
   &lt;character&gt;
    &lt;name&gt;Ms. Coder&lt;/name&gt;
    &lt;actor&gt;Onlivia Actora&lt;/actor&gt;
   &lt;/character&gt;
   &lt;character&gt;
    &lt;name&gt;Mr. Coder&lt;/name&gt;
    &lt;actor&gt;El Act&amp;#xD3;r&lt;/actor&gt;
   &lt;/character&gt;
  &lt;/characters&gt;
  &lt;plot&gt;
   So, this language. It&#039;s like, a programming language. Or is it a
   scripting language? All is revealed in this thrilling horror spoof
   of a documentary.
  &lt;/plot&gt;
  &lt;great-lines&gt;
   &lt;line&gt;PHP solves all my web problems&lt;/line&gt;
  &lt;/great-lines&gt;
  &lt;rating type=&quot;thumbs&quot;&gt;7&lt;/rating&gt;
  &lt;rating type=&quot;stars&quot;&gt;5&lt;/rating&gt;
 &lt;/movie&gt;
 &lt;movie&gt;
  &lt;title&gt;PHP2: More Parser Stories&lt;/title&gt;
  &lt;plot&gt;This is all about the people who make it work.&lt;/plot&gt;
  &lt;characters&gt;
   &lt;character&gt;
    &lt;name&gt;Mr. Parser&lt;/name&gt;
    &lt;actor&gt;John Doe&lt;/actor&gt;
   &lt;/character&gt;
  &lt;/characters&gt;
  &lt;rating type=&quot;stars&quot;&gt;5&lt;/rating&gt;
 &lt;/movie&gt;
&lt;/movies&gt;
</pre></div>
    </div>
   </div>
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-simplexmlelement.addattribute-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="methodname"><a href="simplexmlelement.addchild.html" class="methodname" rel="rdfs-seeAlso">SimpleXMLElement::addChild()</a> - Adds a child element to the XML node</span></li>
    <li class="member"><a href="simplexml.examples-basic.html" class="xref">Basic SimpleXML usage</a></li>
   </ul>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="127998""></a>
  <div class="note">
   <strong class="user">caffeinatedbits</strong>
   <a href="#127998" class="date">09-Dec-2022 10:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just found another gem. Need to remove an attribute? That's simple too!<br />
<br />
<span class="default">&lt;?php<br />
<br />
$xml </span><span class="keyword">= &lt;&lt;&lt;EOF<br />
</span><span class="string">&lt;?xml version="1.0" encoding="utf-8" ?&gt;<br />
&lt;Animals&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;Dog breed="chihuahua"/&gt;<br />
&lt;/Animals&gt;<br />
</span><span class="keyword">EOF;<br />
<br />
</span><span class="default">$animals </span><span class="keyword">= new </span><span class="default">SimpleXMLElement</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">);<br />
<br />
echo </span><span class="default">$animals</span><span class="keyword">-&gt;</span><span class="default">Dog</span><span class="keyword">-&gt;</span><span class="default">asXML</span><span class="keyword">();<br />
</span><span class="comment">// &lt;Dog breed="chihuahua"/&gt;<br />
<br />
</span><span class="keyword">unset(</span><span class="default">$animals</span><span class="keyword">-&gt;</span><span class="default">Dog</span><span class="keyword">[</span><span class="string">'breed'</span><span class="keyword">]);<br />
<br />
echo </span><span class="default">$animals</span><span class="keyword">-&gt;</span><span class="default">Dog</span><span class="keyword">-&gt;</span><span class="default">asXML</span><span class="keyword">();<br />
</span><span class="comment">// &lt;Dog/&gt;<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="127997""></a>
  <div class="note">
   <strong class="user">caffeinatedbits</strong>
   <a href="#127997" class="date">09-Dec-2022 10:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I needed a way to update an attribute, but I could not find any documented way to do this.<br />
<br />
After much experimentation, here's my findings of what works - the answer was so simple it took me 8 tries to figure it out :-)<br />
<br />
Given the following example:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$xml </span><span class="keyword">= &lt;&lt;&lt;EOF<br />
</span><span class="string">&lt;?xml version="1.0" encoding="utf-8" ?&gt;<br />
&lt;Animals&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;Dog/&gt;<br />
&lt;/Animals&gt;<br />
</span><span class="keyword">EOF;<br />
<br />
</span><span class="default">$animals </span><span class="keyword">= new </span><span class="default">SimpleXMLElement</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">);<br />
<br />
echo </span><span class="default">$animals</span><span class="keyword">-&gt;</span><span class="default">Dog</span><span class="keyword">-&gt;</span><span class="default">asXML</span><span class="keyword">();<br />
</span><span class="comment">// &lt;Dog/&gt;<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Test #6 - maybe directly modifying the attributes() Iterator like an array will secretly call __set() magic method?<br />
<br />
TL;DR: yep<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">...<br />
<br />
</span><span class="default">$animals</span><span class="keyword">-&gt;</span><span class="default">Dog</span><span class="keyword">-&gt;</span><span class="default">addAttribute</span><span class="keyword">(</span><span class="string">'breed'</span><span class="keyword">, </span><span class="string">"chihuahua"</span><span class="keyword">);<br />
<br />
echo </span><span class="default">$animals</span><span class="keyword">-&gt;</span><span class="default">Dog</span><span class="keyword">-&gt;</span><span class="default">asXML</span><span class="keyword">();<br />
</span><span class="comment">// &lt;Dog breed="chihuahua"&gt;<br />
<br />
</span><span class="default">$dogAttrs </span><span class="keyword">= </span><span class="default">$animals</span><span class="keyword">-&gt;</span><span class="default">Dog</span><span class="keyword">-&gt;</span><span class="default">attributes</span><span class="keyword">();<br />
</span><span class="comment">// object(SimpleXMLElement)#4 (1) {<br />
// ["@attributes"]=&gt;<br />
//&nbsp;&nbsp; array(1) {<br />
//&nbsp; &nbsp;&nbsp; ["breed"]=&gt;<br />
//&nbsp; &nbsp;&nbsp; string(9) "chihuahua"<br />
//&nbsp;&nbsp; }<br />
// }<br />
<br />
</span><span class="default">$dogAttrs</span><span class="keyword">[</span><span class="string">'breed'</span><span class="keyword">] = </span><span class="string">"poodle"</span><span class="keyword">;<br />
</span><span class="comment">// works!<br />
<br />
</span><span class="keyword">echo </span><span class="default">$animals</span><span class="keyword">-&gt;</span><span class="default">Dog</span><span class="keyword">-&gt;</span><span class="default">asXML</span><span class="keyword">();<br />
</span><span class="comment">// &lt;Dog breed="poodle"&gt;<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Test #7 - maybe I don't even need to call attributes() at all?<br />
<br />
TL;DR: I sure don't!<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">...<br />
<br />
</span><span class="default">$animals</span><span class="keyword">-&gt;</span><span class="default">Dog</span><span class="keyword">-&gt;</span><span class="default">addAttribute</span><span class="keyword">(</span><span class="string">'breed'</span><span class="keyword">, </span><span class="string">"chihuahua"</span><span class="keyword">);<br />
<br />
echo </span><span class="default">$animals</span><span class="keyword">-&gt;</span><span class="default">Dog</span><span class="keyword">-&gt;</span><span class="default">asXML</span><span class="keyword">();<br />
</span><span class="comment">// &lt;Dog breed="chihuahua"&gt;<br />
<br />
</span><span class="default">$animals</span><span class="keyword">-&gt;</span><span class="default">Dog</span><span class="keyword">[</span><span class="string">'breed'</span><span class="keyword">] = </span><span class="string">"poodle"</span><span class="keyword">;<br />
</span><span class="comment">// works!<br />
<br />
</span><span class="keyword">echo </span><span class="default">$animals</span><span class="keyword">-&gt;</span><span class="default">Dog</span><span class="keyword">-&gt;</span><span class="default">asXML</span><span class="keyword">();<br />
</span><span class="comment">// &lt;Dog breed="poodle"&gt;<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Test #8 - Maybe I never needed to call addAttribute() in the first place?<br />
<br />
TL;DR: nope, I can skip that altogether!<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">...<br />
<br />
</span><span class="default">$animals</span><span class="keyword">-&gt;</span><span class="default">Dog</span><span class="keyword">[</span><span class="string">'breed'</span><span class="keyword">] = </span><span class="string">"chihuahua"</span><span class="keyword">;<br />
</span><span class="comment">// works!<br />
<br />
</span><span class="keyword">echo </span><span class="default">$animals</span><span class="keyword">-&gt;</span><span class="default">Dog</span><span class="keyword">-&gt;</span><span class="default">asXML</span><span class="keyword">();<br />
</span><span class="comment">// &lt;Dog breed="chihuahua"&gt;<br />
<br />
</span><span class="default">$animals</span><span class="keyword">-&gt;</span><span class="default">Dog</span><span class="keyword">[</span><span class="string">'breed'</span><span class="keyword">] = </span><span class="string">"poodle"</span><span class="keyword">;<br />
</span><span class="comment">// works!<br />
<br />
</span><span class="keyword">echo </span><span class="default">$animals</span><span class="keyword">-&gt;</span><span class="default">Dog</span><span class="keyword">-&gt;</span><span class="default">asXML</span><span class="keyword">();<br />
</span><span class="comment">// &lt;Dog breed="poodle"&gt;<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
FYI: I also submitted another separate note with what does NOT work just in case you, like me, are curious and tempted to try another way.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="127996""></a>
  <div class="note">
   <strong class="user">caffeinatedbits</strong>
   <a href="#127996" class="date">09-Dec-2022 10:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I needed a way to update an attribute, but I could not find any documented way to do this.<br />
<br />
TL;DR: It's not only possible, but unbelievably simple. See the other note I submitted for what actually works (sorry, I could not fit it all in a single note due to the 4095 character limit).<br />
<br />
After much experimentation, here's my findings of what does NOT work; hopefully, it saves you the time and frustration it cost me.<br />
<br />
Given the following example:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$xml </span><span class="keyword">= &lt;&lt;&lt;EOF<br />
</span><span class="string">&lt;?xml version="1.0" encoding="utf-8" ?&gt;<br />
&lt;Animals&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;Dog/&gt;<br />
&lt;/Animals&gt;<br />
</span><span class="keyword">EOF;<br />
<br />
</span><span class="default">$animals </span><span class="keyword">= new </span><span class="default">SimpleXMLElement</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">);<br />
<br />
echo </span><span class="default">$animals</span><span class="keyword">-&gt;</span><span class="default">Dog</span><span class="keyword">-&gt;</span><span class="default">asXML</span><span class="keyword">();<br />
</span><span class="comment">// &lt;Dog/&gt;<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Test #1 - attempt to call addAttribute() twice<br />
<br />
TL;DR: PHP Warning: SimpleXMLElement::addAttribute(): Attribute already exists<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">...<br />
<br />
</span><span class="default">$animals</span><span class="keyword">-&gt;</span><span class="default">Dog</span><span class="keyword">-&gt;</span><span class="default">addAttribute</span><span class="keyword">(</span><span class="string">'breed'</span><span class="keyword">, </span><span class="string">"chihuahua"</span><span class="keyword">);<br />
<br />
echo </span><span class="default">$animals</span><span class="keyword">-&gt;</span><span class="default">Dog</span><span class="keyword">-&gt;</span><span class="default">asXML</span><span class="keyword">();<br />
</span><span class="comment">// &lt;Dog breed="chihuahua"/&gt;<br />
<br />
</span><span class="default">$animals</span><span class="keyword">-&gt;</span><span class="default">Dog</span><span class="keyword">-&gt;</span><span class="default">addAttribute</span><span class="keyword">(</span><span class="string">'breed'</span><span class="keyword">, </span><span class="string">"poodle"</span><span class="keyword">);<br />
</span><span class="comment">// PHP Warning: SimpleXMLElement::addAttribute(): Attribute already exists<br />
<br />
</span><span class="keyword">echo </span><span class="default">$animals</span><span class="keyword">-&gt;</span><span class="default">Dog</span><span class="keyword">-&gt;</span><span class="default">asXML</span><span class="keyword">();<br />
</span><span class="comment">// &lt;Dog breed="chihuahua"/&gt;<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Test #2 - attempt to iterate attributes() (an Iterator) by reference<br />
<br />
TL;DR: An iterator cannot be used with foreach by reference<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">...<br />
<br />
</span><span class="default">$animals</span><span class="keyword">-&gt;</span><span class="default">Dog</span><span class="keyword">-&gt;</span><span class="default">addAttribute</span><span class="keyword">(</span><span class="string">'breed'</span><span class="keyword">, </span><span class="string">"chihuahua"</span><span class="keyword">);<br />
<br />
echo </span><span class="default">$animals</span><span class="keyword">-&gt;</span><span class="default">Dog</span><span class="keyword">-&gt;</span><span class="default">asXML</span><span class="keyword">();<br />
</span><span class="comment">// &lt;Dog breed="chihuahua"&gt;<br />
<br />
</span><span class="keyword">try {<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$animals</span><span class="keyword">-&gt;</span><span class="default">Dog</span><span class="keyword">-&gt;</span><span class="default">attributes</span><span class="keyword">() as </span><span class="default">$attr </span><span class="keyword">=&gt; &amp;</span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="string">"breed" </span><span class="keyword">=== </span><span class="default">$attr</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="string">"poodle"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
} catch (</span><span class="default">Throwable $e</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$e</span><span class="keyword">-&gt;</span><span class="default">getMessage</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// An iterator cannot be used with foreach by reference<br />
</span><span class="keyword">}<br />
<br />
echo </span><span class="default">$animals</span><span class="keyword">-&gt;</span><span class="default">Dog</span><span class="keyword">-&gt;</span><span class="default">asXML</span><span class="keyword">();<br />
</span><span class="comment">// &lt;Dog breed="chihuahua"&gt;<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Test #3 - attempt to re-parse child element and then call addAttribute() on the newly parsed element, as suggested in a note I found here<br />
<br />
TL;DR: PHP Warning: SimpleXMLElement::addAttribute(): Attribute already exists<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">...<br />
<br />
</span><span class="default">$animals</span><span class="keyword">-&gt;</span><span class="default">Dog</span><span class="keyword">-&gt;</span><span class="default">addAttribute</span><span class="keyword">(</span><span class="string">'breed'</span><span class="keyword">, </span><span class="string">"chihuahua"</span><span class="keyword">);<br />
<br />
echo </span><span class="default">$animals</span><span class="keyword">-&gt;</span><span class="default">Dog</span><span class="keyword">-&gt;</span><span class="default">asXML</span><span class="keyword">();<br />
</span><span class="comment">// &lt;Dog breed="chihuahua"&gt;<br />
<br />
</span><span class="default">$animals</span><span class="keyword">-&gt;</span><span class="default">Dog </span><span class="keyword">= new </span><span class="default">SimpleXMLElement</span><span class="keyword">(</span><span class="default">$animals</span><span class="keyword">-&gt;</span><span class="default">asXML</span><span class="keyword">());<br />
<br />
</span><span class="default">$animals</span><span class="keyword">-&gt;</span><span class="default">Dog</span><span class="keyword">-&gt;</span><span class="default">addAttribute</span><span class="keyword">(</span><span class="string">'breed'</span><span class="keyword">, </span><span class="string">"poodle"</span><span class="keyword">);<br />
</span><span class="comment">// PHP Warning: SimpleXMLElement::addAttribute(): Attribute already exists<br />
<br />
</span><span class="keyword">echo </span><span class="default">$animals</span><span class="keyword">-&gt;</span><span class="default">Dog</span><span class="keyword">-&gt;</span><span class="default">asXML</span><span class="keyword">();<br />
</span><span class="comment">// &lt;Dog breed="chihuahua"&gt;<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Test #4 - attempt to modify @attributes array element<br />
<br />
TL;DR: PHP Notice:&nbsp; Indirect modification of overloaded element of SimpleXMLElement has no effect<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">...<br />
<br />
</span><span class="default">$animals</span><span class="keyword">-&gt;</span><span class="default">Dog</span><span class="keyword">-&gt;</span><span class="default">addAttribute</span><span class="keyword">(</span><span class="string">'breed'</span><span class="keyword">, </span><span class="string">"chihuahua"</span><span class="keyword">);<br />
<br />
echo </span><span class="default">$animals</span><span class="keyword">-&gt;</span><span class="default">Dog</span><span class="keyword">-&gt;</span><span class="default">asXML</span><span class="keyword">();<br />
</span><span class="comment">// &lt;Dog breed="chihuahua"&gt;<br />
<br />
</span><span class="default">$dogAttrs </span><span class="keyword">= </span><span class="default">$animals</span><span class="keyword">-&gt;</span><span class="default">Dog</span><span class="keyword">-&gt;</span><span class="default">attributes</span><span class="keyword">();<br />
</span><span class="comment">// object(SimpleXMLElement)#4 (1) {<br />
// ["@attributes"]=&gt;<br />
//&nbsp;&nbsp; array(1) {<br />
//&nbsp; &nbsp;&nbsp; ["breed"]=&gt;<br />
//&nbsp; &nbsp;&nbsp; string(9) "chihuahua"<br />
//&nbsp;&nbsp; }<br />
// }<br />
<br />
</span><span class="default">$dogAttrs</span><span class="keyword">[</span><span class="string">'@attributes'</span><span class="keyword">][</span><span class="string">'breed'</span><span class="keyword">] = </span><span class="string">"poodle"</span><span class="keyword">;<br />
</span><span class="comment">// PHP Notice:&nbsp; Indirect modification of overloaded element of SimpleXMLElement has no effect<br />
<br />
</span><span class="keyword">echo </span><span class="default">$animals</span><span class="keyword">-&gt;</span><span class="default">Dog</span><span class="keyword">-&gt;</span><span class="default">asXML</span><span class="keyword">();<br />
</span><span class="comment">// &lt;Dog breed="chihuahua"&gt;<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Test #5 - cast attributes() to array and set value of 'breed' element<br />
<br />
TL;DR: does not update value in original object<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">...<br />
<br />
</span><span class="default">$animals</span><span class="keyword">-&gt;</span><span class="default">Dog</span><span class="keyword">-&gt;</span><span class="default">addAttribute</span><span class="keyword">(</span><span class="string">'breed'</span><span class="keyword">, </span><span class="string">"chihuahua"</span><span class="keyword">);<br />
<br />
echo </span><span class="default">$animals</span><span class="keyword">-&gt;</span><span class="default">Dog</span><span class="keyword">-&gt;</span><span class="default">asXML</span><span class="keyword">();<br />
</span><span class="comment">// &lt;Dog breed="chihuahua"&gt;<br />
<br />
</span><span class="default">$dogAttrs </span><span class="keyword">= (array) </span><span class="default">$animals</span><span class="keyword">-&gt;</span><span class="default">Dog</span><span class="keyword">-&gt;</span><span class="default">attributes</span><span class="keyword">();<br />
</span><span class="comment">// array(1) {<br />
//&nbsp; &nbsp;&nbsp; ["@attributes"]=&gt;<br />
//&nbsp;&nbsp; array(1) {<br />
//&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ["breed"]=&gt;<br />
//&nbsp; &nbsp;&nbsp; string(9) "chihuahua"<br />
//&nbsp;&nbsp; }<br />
// }<br />
<br />
</span><span class="default">$dogAttrs</span><span class="keyword">[</span><span class="string">'@attributes'</span><span class="keyword">][</span><span class="string">'breed'</span><span class="keyword">] = </span><span class="string">"poodle"</span><span class="keyword">;<br />
<br />
echo </span><span class="default">$animals</span><span class="keyword">-&gt;</span><span class="default">Dog</span><span class="keyword">-&gt;</span><span class="default">asXML</span><span class="keyword">();<br />
</span><span class="comment">// &lt;Dog breed="chihuahua"&gt;<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="119144""></a>
  <div class="note">
   <strong class="user">Patanjali</strong>
   <a href="#119144" class="date">10-Apr-2016 10:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You cannot use this to update an existing attribute's value.<br />
<br />
Instead, get a DOM version of the SimpleXMLElement and use setAttribute, as per:<br />
<br />
$XML = '&lt;element a="aa"&gt;Text&lt;/element&gt;';<br />
$snode = new simple_xml_element($XML);<br />
<br />
$dnode = dom_import_simplexml($snode);<br />
$dnode-&gt;setAttribute('a', 'bb');<br />
<br />
Resulting XML for the node is:<br />
&lt;element a="bb"&gt;Text&lt;/element&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106566""></a>
  <div class="note">
   <strong class="user">p.servus</strong>
   <a href="#106566" class="date">18-Nov-2011 05:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you need an Namespace, you must write a Prefix of the Namespace + the Name of the Attribute ("prefix:name") as the first parameter AND the uri as the third one. (I don't know why?!)<br />
<br />
Example code:<br />
<span class="default">&lt;?php<br />
$xml </span><span class="keyword">= new </span><span class="default">SimpleXMLElement</span><span class="keyword">(</span><span class="string">"&lt;packagedElement&gt;&lt;/packagedElement&gt;"</span><span class="keyword">);<br />
</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">addAttribute</span><span class="keyword">(</span><span class="string">"xmi:type"</span><span class="keyword">, </span><span class="string">"uml:Class"</span><span class="keyword">, </span><span class="string">"<a href="http://schema.omg.org/spec/XMI/2.1" rel="nofollow" target="_blank">http://schema.omg.org/spec/XMI/2.1</a>"</span><span class="keyword">); <br />
echo </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">asXml</span><span class="keyword">();<br />
</span><span class="default">?&gt;<br />
</span><br />
Output:<br />
&lt;packagedElement xmlns:xmi="<a href="http://schema.omg.org/spec/XMI/2.1" rel="nofollow" target="_blank">http://schema.omg.org/spec/XMI/2.1</a>" xmi:type="uml:Class"&gt;&lt;/packagedElement&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="103865""></a>
  <div class="note">
   <strong class="user">sarlak</strong>
   <a href="#103865" class="date">07-May-2011 07:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You can access a node child with his name this way :<br />
<br />
<span class="default">&lt;?php<br />
$root </span><span class="keyword">= new </span><span class="default">SimpleXMLElement</span><span class="keyword">(</span><span class="default">$filePath</span><span class="keyword">);<br />
echo </span><span class="default">$root</span><span class="keyword">-&gt;</span><span class="default">nodeName</span><span class="keyword">-&gt;</span><span class="default">attributes</span><span class="keyword">;<br />
<br />
</span><span class="comment">// It works recursivly so this will work too<br />
</span><span class="keyword">echo </span><span class="default">$root</span><span class="keyword">-&gt;</span><span class="default">nodeName</span><span class="keyword">-&gt;</span><span class="default">subNodeName</span><span class="keyword">-&gt;</span><span class="default">attributes</span><span class="keyword">();<br />
</span><span class="default">?&gt;<br />
</span><br />
But if you want to ADD an attribute to a children you MUST use the children() method to access and modfiy it or it will modify the parent's attributes.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// Add a subnode<br />
</span><span class="default">$element</span><span class="keyword">-&gt;</span><span class="default">nodeName</span><span class="keyword">-&gt;</span><span class="default">addChild</span><span class="keyword">(</span><span class="string">'subNodeName'</span><span class="keyword">, </span><span class="string">"whatever you want"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
</span><span class="comment">// Get the pos in the childrens of the parent node<br />
</span><span class="default">$lastNodePos </span><span class="keyword">= </span><span class="default">$element</span><span class="keyword">-&gt;</span><span class="default">nodeName</span><span class="keyword">-&gt;</span><span class="default">count</span><span class="keyword">()-</span><span class="default">1</span><span class="keyword">;<br />
<br />
</span><span class="comment">// Get the parents node childrens<br />
</span><span class="default">$nodeChildrens </span><span class="keyword">= </span><span class="default">$element</span><span class="keyword">-&gt;</span><span class="default">nodeName</span><span class="keyword">-&gt;</span><span class="default">children</span><span class="keyword">();<br />
<br />
</span><span class="comment">// Add an attribute to the last created<br />
</span><span class="default">$nodeChildrens</span><span class="keyword">[</span><span class="default">$lastNodePos</span><span class="keyword">]-&gt;</span><span class="default">addAttribute</span><span class="keyword">(</span><span class="string">'attributeName'</span><span class="keyword">, </span><span class="string">"The attribute value);<br />
?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101442""></a>
  <div class="note">
   <strong class="user">booleer at yahoo dot it</strong>
   <a href="#101442" class="date">16-Dec-2010 09:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If the attribute already exists, addAttribute does nothing.<br />
<br />
example:<br />
<span class="default">&lt;?php<br />
$xml_string </span><span class="keyword">= &lt;&lt;&lt;XML<br />
</span><span class="string">&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br />
&lt;root&gt;<br />
&nbsp;&nbsp; &lt;item id="foo"&gt;<br />
&lt;root&gt;<br />
</span><span class="keyword">XML;<br />
<br />
</span><span class="default">$xml </span><span class="keyword">= </span><span class="default">simplexml_load_string</span><span class="keyword">(</span><span class="default">$xml_string</span><span class="keyword">);<br />
</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">item</span><span class="keyword">-&gt;</span><span class="default">addAttribute</span><span class="keyword">(</span><span class="string">'id'</span><span class="keyword">, </span><span class="string">'bar'</span><span class="keyword">);<br />
echo </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">asXML</span><span class="keyword">();<br />
</span><span class="default">?&gt;<br />
</span><br />
The above examples will output:<br />
&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br />
&lt;root&gt;<br />
&nbsp;&nbsp; &lt;item id="foo"&gt;<br />
&lt;root&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
