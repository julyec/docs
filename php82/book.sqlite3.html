<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=UTF-8">
  <title>SQLite3</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="class.pgsql-lob.html">? PgSql\Lob</a></li>
      <li style="float: right;"><a href="intro.sqlite3.html">简介 ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="refs.database.vendors.html">针对各数据库系统对应的扩展</a></li>
    <li>SQLite3</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="book.sqlite3" class="book">
 
 <h1 class="title">SQLite3</h1>
 

 

 








 








 






 






 







<ul class="chunklist chunklist_book"><li><a href="intro.sqlite3.html">简介</a></li><li><a href="sqlite3.setup.html">安装/配置</a><ul class="chunklist chunklist_book chunklist_children"><li><a href="sqlite3.requirements.html">需求</a></li><li><a href="sqlite3.installation.html">安装</a></li><li><a href="sqlite3.configuration.html">运行时配置</a></li><li><a href="sqlite3.resources.html">资源类型</a></li></ul></li><li><a href="sqlite3.constants.html">预定义常量</a></li><li><a href="class.sqlite3.html">SQLite3</a> &mdash; SQLite3 类<ul class="chunklist chunklist_book chunklist_children"><li><a href="sqlite3.backup.html">SQLite3::backup</a> &mdash; Backup one database to another database</li><li><a href="sqlite3.busytimeout.html">SQLite3::busyTimeout</a> &mdash; Sets the busy connection handler</li><li><a href="sqlite3.changes.html">SQLite3::changes</a> &mdash; Returns the number of database rows that were changed (or inserted or
   deleted) by the most recent SQL statement</li><li><a href="sqlite3.close.html">SQLite3::close</a> &mdash; Closes the database connection</li><li><a href="sqlite3.construct.html">SQLite3::__construct</a> &mdash; 实例化 SQLite3 对象并打开 SQLite 3 数据库</li><li><a href="sqlite3.createaggregate.html">SQLite3::createAggregate</a> &mdash; Registers a PHP function for use as an SQL aggregate function</li><li><a href="sqlite3.createcollation.html">SQLite3::createCollation</a> &mdash; Registers a PHP function for use as an SQL collating function</li><li><a href="sqlite3.createfunction.html">SQLite3::createFunction</a> &mdash; Registers a PHP function for use as an SQL scalar function</li><li><a href="sqlite3.enableexceptions.html">SQLite3::enableExceptions</a> &mdash; Enable throwing exceptions</li><li><a href="sqlite3.escapestring.html">SQLite3::escapeString</a> &mdash; Returns a string that has been properly escaped</li><li><a href="sqlite3.exec.html">SQLite3::exec</a> &mdash; Executes a result-less query against a given database</li><li><a href="sqlite3.lasterrorcode.html">SQLite3::lastErrorCode</a> &mdash; Returns the numeric result code of the most recent failed SQLite request</li><li><a href="sqlite3.lasterrormsg.html">SQLite3::lastErrorMsg</a> &mdash; Returns English text describing the most recent failed SQLite request</li><li><a href="sqlite3.lastinsertrowid.html">SQLite3::lastInsertRowID</a> &mdash; Returns the row ID of the most recent INSERT into the database</li><li><a href="sqlite3.loadextension.html">SQLite3::loadExtension</a> &mdash; Attempts to load an SQLite extension library</li><li><a href="sqlite3.open.html">SQLite3::open</a> &mdash; Opens an SQLite database</li><li><a href="sqlite3.openblob.html">SQLite3::openBlob</a> &mdash; Opens a stream resource to read a BLOB</li><li><a href="sqlite3.prepare.html">SQLite3::prepare</a> &mdash; Prepares an SQL statement for execution</li><li><a href="sqlite3.query.html">SQLite3::query</a> &mdash; Executes an SQL query</li><li><a href="sqlite3.querysingle.html">SQLite3::querySingle</a> &mdash; Executes a query and returns a single result</li><li><a href="sqlite3.setauthorizer.html">SQLite3::setAuthorizer</a> &mdash; Configures a callback to be used as an authorizer to limit what a statement can do</li><li><a href="sqlite3.version.html">SQLite3::version</a> &mdash; Returns the SQLite3 library version as a string constant and as a number</li></ul></li><li><a href="class.sqlite3stmt.html">SQLite3Stmt</a> &mdash; SQLite3Stmt 类<ul class="chunklist chunklist_book chunklist_children"><li><a href="sqlite3stmt.bindparam.html">SQLite3Stmt::bindParam</a> &mdash; Binds a parameter to a statement variable</li><li><a href="sqlite3stmt.bindvalue.html">SQLite3Stmt::bindValue</a> &mdash; Binds the value of a parameter to a statement variable</li><li><a href="sqlite3stmt.clear.html">SQLite3Stmt::clear</a> &mdash; Clears all current bound parameters</li><li><a href="sqlite3stmt.close.html">SQLite3Stmt::close</a> &mdash; Closes the prepared statement</li><li><a href="sqlite3stmt.construct.html">SQLite3Stmt::__construct</a> &mdash; Constructs an SQLite3Stmt object</li><li><a href="sqlite3stmt.execute.html">SQLite3Stmt::execute</a> &mdash; Executes a prepared statement and returns a result set object</li><li><a href="sqlite3stmt.getsql.html">SQLite3Stmt::getSQL</a> &mdash; Get the SQL of the statement</li><li><a href="sqlite3stmt.paramcount.html">SQLite3Stmt::paramCount</a> &mdash; Returns the number of parameters within the prepared statement</li><li><a href="sqlite3stmt.readonly.html">SQLite3Stmt::readOnly</a> &mdash; Returns whether a statement is definitely read only</li><li><a href="sqlite3stmt.reset.html">SQLite3Stmt::reset</a> &mdash; Resets the prepared statement</li></ul></li><li><a href="class.sqlite3result.html">SQLite3Result</a> &mdash; SQLite3Result 类<ul class="chunklist chunklist_book chunklist_children"><li><a href="sqlite3result.columnname.html">SQLite3Result::columnName</a> &mdash; Returns the name of the nth column</li><li><a href="sqlite3result.columntype.html">SQLite3Result::columnType</a> &mdash; Returns the type of the nth column</li><li><a href="sqlite3result.construct.html">SQLite3Result::__construct</a> &mdash; Constructs an SQLite3Result</li><li><a href="sqlite3result.fetcharray.html">SQLite3Result::fetchArray</a> &mdash; Fetches a result row as an associative or numerically indexed array or both</li><li><a href="sqlite3result.finalize.html">SQLite3Result::finalize</a> &mdash; Closes the result set</li><li><a href="sqlite3result.numcolumns.html">SQLite3Result::numColumns</a> &mdash; Returns the number of columns in the result set</li><li><a href="sqlite3result.reset.html">SQLite3Result::reset</a> &mdash; Resets the result set back to the first row</li></ul></li></ul></div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="124480""></a>
  <div class="note">
   <strong class="user">donotspam at alecos dot it</strong>
   <a href="#124480" class="date">06-Dec-2019 04:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To enable CURL and SQLITE3 on Windows with PHP 7.4 edit httpd.conf and php.ini as below:<br />
<br />
httpd.conf:<br />
<br />
# load php.ini from chosen directory<br />
PHPIniDir "${SRVROOT}/php"<br />
# load PHP 7.4 on Windows <br />
LoadModule php7_module "${SRVROOT}/php/php7apache2_4.dll"<br />
# load CURL on Windows<br />
LoadFile "${SRVROOT}/php/libssh2.dll"<br />
# load SQLITE3 on Windows<br />
LoadFile "${SRVROOT}/php/libsqlite3.dll"<br />
<br />
php.ini:<br />
<br />
extension=curl<br />
extension=pdo_sqlite<br />
extension=sqlite3<br />
<br />
Now CURL and SQLITE3 are enabled and working fine on Windows on PHP 7.4.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="122342""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#122342" class="date">01-Feb-2018 12:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
PHP doesn't seem to support password protection for SQLite3. We can specify password on the db(I think) but you will still be able to open the DB without using a password so it is not working.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106779""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#106779" class="date">06-Dec-2011 12:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As of PHP 5.4 support for Sqlite2 has been removed. I have a large web app that was built with sqlite2 as the database backend and thus it exploded when I updated PHP. If you're in a similar situation I've written a few wrapper functions that will allow your app to work whilst you convert the code to sqlite3. 
<br />

<br />
Firstly convert your DB to an sqlite3 db. 
<br />

<br />
sqlite OLD.DB .dump | sqlite3 NEW.DB
<br />

<br />
Then add the following functions to your app:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">sqlite_open</span><span class="keyword">(</span><span class="default">$location</span><span class="keyword">,</span><span class="default">$mode</span><span class="keyword">)
<br />
{
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$handle </span><span class="keyword">= new </span><span class="default">SQLite3</span><span class="keyword">(</span><span class="default">$location</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$handle</span><span class="keyword">;
<br />
}
<br />
function </span><span class="default">sqlite_query</span><span class="keyword">(</span><span class="default">$dbhandle</span><span class="keyword">,</span><span class="default">$query</span><span class="keyword">)
<br />
{
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="string">'dbhandle'</span><span class="keyword">] = </span><span class="default">$dbhandle</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="string">'query'</span><span class="keyword">] = </span><span class="default">$query</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">$dbhandle</span><span class="keyword">-&gt;</span><span class="default">query</span><span class="keyword">(</span><span class="default">$query</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;
<br />
}
<br />
function </span><span class="default">sqlite_fetch_array</span><span class="keyword">(&amp;</span><span class="default">$result</span><span class="keyword">,</span><span class="default">$type</span><span class="keyword">)
<br />
{
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">#Get Columns
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; while (</span><span class="default">$result</span><span class="keyword">-&gt;</span><span class="default">columnName</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">))
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$columns</span><span class="keyword">[ ] = </span><span class="default">$result</span><span class="keyword">-&gt;</span><span class="default">columnName</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">++;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$resx </span><span class="keyword">= </span><span class="default">$result</span><span class="keyword">-&gt;</span><span class="default">fetchArray</span><span class="keyword">(</span><span class="default">SQLITE3_ASSOC</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$resx</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
They're not perfect by any stretch but they seem to be working ok as a temporary measure while I convert the site. 
<br />
Hope that helps someone</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99290""></a>
  <div class="note">
   <strong class="user">alan at chandlerfamily dot org dot uk</strong>
   <a href="#99290" class="date">09-Aug-2010 01:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
PHP 5.3.3 introduced sqlite3::busyTimeout(int milliseconds) which does not currently seem to be documented.<br />
<br />
It believe it acts like sqlite::busyTimeout - that is it tells sqlite3 to call an internal busyHandler if SQLITE_BUSY is returned from any call which waits a short period and then retries.&nbsp; It continues to do this until milliseconds milliseconds have elapsed and then returns the SQLITE_BUSY status.<br />
<br />
I don't know whether the default 60 second value is in place if this function is not called.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
