<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=UTF-8">
  <title>PDO 类</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="pdo.lobs.html">? 大对象 (LOB)</a></li>
      <li style="float: right;"><a href="pdo.begintransaction.html">PDO::beginTransaction ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="book.pdo.html">PDO</a></li>
    <li>PDO 类</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="class.pdo" class="reference">
 <h1 class="title"> PDO 类</h1>
 
 
 <div class="partintro"><p class="verinfo">(PHP 5 &gt;= 5.1.0, PHP 7, PHP 8, PECL pdo &gt;= 0.1.0)</p>
 

  <div class="section" id="pdo.intro">
   <h2 class="title">简介</h2>
   <p class="para">
   代表 PHP 和数据库服务之间的一个连接
   </p>
  </div>

 
  <div class="section" id="pdo.synopsis">
   <h2 class="title">类摘要</h2>
 

   <div class="classsynopsis">
    <span class="ooclass">
     <strong class="classname"></strong>
    </span>

    <div class="classsynopsisinfo">
     <span class="ooclass">
      <span class="modifier">class</span> <strong class="classname">PDO</strong>
     </span>
     {</div>

    <div class="classsynopsisinfo classsynopsisinfo_comment">/* 常量 */</div>
    <div class="fieldsynopsis">
     <span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.param-null"><var class="varname">PARAM_NULL</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.param-bool"><var class="varname">PARAM_BOOL</var></a></var><span class="initializer"> = 5</span>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.param-int"><var class="varname">PARAM_INT</var></a></var><span class="initializer"> = 1</span>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.param-str"><var class="varname">PARAM_STR</var></a></var><span class="initializer"> = 2</span>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.param-lob"><var class="varname">PARAM_LOB</var></a></var><span class="initializer"> = 3</span>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.param-stmt"><var class="varname">PARAM_STMT</var></a></var><span class="initializer"> = 4</span>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.param-input-output"><var class="varname">PARAM_INPUT_OUTPUT</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.param-str-natl"><var class="varname">PARAM_STR_NATL</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.param-str-char"><var class="varname">PARAM_STR_CHAR</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.param-evt-alloc"><var class="varname">PARAM_EVT_ALLOC</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.param-evt-free"><var class="varname">PARAM_EVT_FREE</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.param-evt-exec-pre"><var class="varname">PARAM_EVT_EXEC_PRE</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.param-evt-exec-post"><var class="varname">PARAM_EVT_EXEC_POST</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.param-evt-fetch-pre"><var class="varname">PARAM_EVT_FETCH_PRE</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.param-evt-fetch-post"><var class="varname">PARAM_EVT_FETCH_POST</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.param-evt-normalize"><var class="varname">PARAM_EVT_NORMALIZE</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.fetch-default"><var class="varname">FETCH_DEFAULT</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.fetch-lazy"><var class="varname">FETCH_LAZY</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.fetch-assoc"><var class="varname">FETCH_ASSOC</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.fetch-num"><var class="varname">FETCH_NUM</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.fetch-both"><var class="varname">FETCH_BOTH</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.fetch-obj"><var class="varname">FETCH_OBJ</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.fetch-bound"><var class="varname">FETCH_BOUND</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.fetch-column"><var class="varname">FETCH_COLUMN</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.fetch-class"><var class="varname">FETCH_CLASS</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.fetch-into"><var class="varname">FETCH_INTO</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.fetch-func"><var class="varname">FETCH_FUNC</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.fetch-group"><var class="varname">FETCH_GROUP</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.fetch-unique"><var class="varname">FETCH_UNIQUE</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.fetch-key-pair"><var class="varname">FETCH_KEY_PAIR</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.fetch-classtype"><var class="varname">FETCH_CLASSTYPE</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.fetch-serialize"><var class="varname">FETCH_SERIALIZE</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.fetch-props-late"><var class="varname">FETCH_PROPS_LATE</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.fetch-named"><var class="varname">FETCH_NAMED</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.attr-autocommit"><var class="varname">ATTR_AUTOCOMMIT</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.attr-prefetch"><var class="varname">ATTR_PREFETCH</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.attr-timeout"><var class="varname">ATTR_TIMEOUT</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.attr-errmode"><var class="varname">ATTR_ERRMODE</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.attr-server-version"><var class="varname">ATTR_SERVER_VERSION</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.attr-client-version"><var class="varname">ATTR_CLIENT_VERSION</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.attr-server-info"><var class="varname">ATTR_SERVER_INFO</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.attr-connection-status"><var class="varname">ATTR_CONNECTION_STATUS</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.attr-case"><var class="varname">ATTR_CASE</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.attr-cursor-name"><var class="varname">ATTR_CURSOR_NAME</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.attr-cursor"><var class="varname">ATTR_CURSOR</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.attr-oracle-nulls"><var class="varname">ATTR_ORACLE_NULLS</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.attr-persistent"><var class="varname">ATTR_PERSISTENT</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.attr-statement-class"><var class="varname">ATTR_STATEMENT_CLASS</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.attr-fetch-table-names"><var class="varname">ATTR_FETCH_TABLE_NAMES</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.attr-fetch-catalog-names"><var class="varname">ATTR_FETCH_CATALOG_NAMES</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.attr-driver-name"><var class="varname">ATTR_DRIVER_NAME</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.attr-stringify-fetches"><var class="varname">ATTR_STRINGIFY_FETCHES</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.attr-max-column-len"><var class="varname">ATTR_MAX_COLUMN_LEN</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.attr-emulate-prepares"><var class="varname">ATTR_EMULATE_PREPARES</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.attr-default-fetch-mode"><var class="varname">ATTR_DEFAULT_FETCH_MODE</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.attr-default-str-param"><var class="varname">ATTR_DEFAULT_STR_PARAM</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.errmode-silent"><var class="varname">ERRMODE_SILENT</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.errmode-warning"><var class="varname">ERRMODE_WARNING</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.errmode-exception"><var class="varname">ERRMODE_EXCEPTION</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.case-natural"><var class="varname">CASE_NATURAL</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.case-lower"><var class="varname">CASE_LOWER</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.case-upper"><var class="varname">CASE_UPPER</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.null-natural"><var class="varname">NULL_NATURAL</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.null-empty-string"><var class="varname">NULL_EMPTY_STRING</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.null-to-string"><var class="varname">NULL_TO_STRING</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">string</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.err-none"><var class="varname">ERR_NONE</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.fetch-ori-next"><var class="varname">FETCH_ORI_NEXT</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.fetch-ori-prior"><var class="varname">FETCH_ORI_PRIOR</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.fetch-ori-first"><var class="varname">FETCH_ORI_FIRST</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.fetch-ori-last"><var class="varname">FETCH_ORI_LAST</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.fetch-ori-abs"><var class="varname">FETCH_ORI_ABS</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.fetch-ori-rel"><var class="varname">FETCH_ORI_REL</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.cursor-fwdonly"><var class="varname">CURSOR_FWDONLY</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type">int</span>
      <var class="fieldsynopsis_varname"><a href="pdo.constants.html#pdo.constants.cursor-scroll"><var class="varname">CURSOR_SCROLL</var></a></var>;</div>


    <div class="classsynopsisinfo classsynopsisinfo_comment">/* 方法 */</div>
    <div class="constructorsynopsis dc-description">
   <span class="modifier">public</span> <span class="methodname"><a href="pdo.construct.html" class="methodname">__construct</a></span>(<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">string</span> <code class="parameter">$dsn</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">?</span><span class="type"><span class="type">string</span><span class="type"></span></span> <code class="parameter">$username</code><span class="initializer"> = <strong><code>null</code></strong></span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">?</span><span class="type"><span class="type">string</span><span class="type"></span></span> <code class="parameter">$password</code><span class="initializer"> = <strong><code>null</code></strong></span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">?</span><span class="type"><span class="type">array</span><span class="type"></span></span> <code class="parameter">$options</code><span class="initializer"> = <strong><code>null</code></strong></span></span><br>)</div>

    <div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="pdo.begintransaction.html" class="methodname">beginTransaction</a></span>(): <span class="type">bool</span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="pdo.commit.html" class="methodname">commit</a></span>(): <span class="type">bool</span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="pdo.errorcode.html" class="methodname">errorCode</a></span>(): <span class="type"><span class="type">?</span><span class="type">string</span></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="pdo.errorinfo.html" class="methodname">errorInfo</a></span>(): <span class="type">array</span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="pdo.exec.html" class="methodname">exec</a></span>(<span class="methodparam"><span class="type">string</span> <code class="parameter">$statement</code></span>): <span class="type"><span class="type">int</span>|<span class="type"><span class="type false">false</span></span></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="pdo.getattribute.html" class="methodname">getAttribute</a></span>(<span class="methodparam"><span class="type">int</span> <code class="parameter">$attribute</code></span>): <span class="type"><a href="language.types.declarations.html#language.types.declarations.mixed" class="type mixed">mixed</a></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="modifier">static</span> <span class="methodname"><a href="pdo.getavailabledrivers.html" class="methodname">getAvailableDrivers</a></span>(): <span class="type">array</span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="pdo.intransaction.html" class="methodname">inTransaction</a></span>(): <span class="type">bool</span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="pdo.lastinsertid.html" class="methodname">lastInsertId</a></span>(<span class="methodparam"><span class="type">?</span><span class="type"><span class="type">string</span><span class="type"></span></span> <code class="parameter">$name</code><span class="initializer"> = <strong><code>null</code></strong></span></span>): <span class="type"><span class="type">string</span>|<span class="type"><span class="type false">false</span></span></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="pdo.prepare.html" class="methodname">prepare</a></span>(<span class="methodparam"><span class="type">string</span> <code class="parameter">$query</code></span>, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = []</span></span>): <span class="type"><span class="type"><a href="class.pdostatement.html" class="type PDOStatement">PDOStatement</a></span>|<span class="type"><span class="type false">false</span></span></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="pdo.query.html" class="methodname">query</a></span>(<span class="methodparam"><span class="type">string</span> <code class="parameter">$query</code></span>, <span class="methodparam"><span class="type">?</span><span class="type"><span class="type">int</span><span class="type"></span></span> <code class="parameter">$fetchMode</code><span class="initializer"> = <strong><code>null</code></strong></span></span>): <span class="type"><span class="type"><a href="class.pdostatement.html" class="type PDOStatement">PDOStatement</a></span>|<span class="type"><span class="type false">false</span></span></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="pdo.query.html" class="methodname">query</a></span>(<span class="methodparam"><span class="type">string</span> <code class="parameter">$query</code></span>, <span class="methodparam"><span class="type">?</span><span class="type"><span class="type">int</span><span class="type"></span></span> <code class="parameter">$fetchMode</code><span class="initializer"> = PDO::FETCH_COLUMN</span></span>, <span class="methodparam"><span class="type">int</span> <code class="parameter">$colno</code></span>): <span class="type"><span class="type"><a href="class.pdostatement.html" class="type PDOStatement">PDOStatement</a></span>|<span class="type"><span class="type false">false</span></span></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="pdo.query.html" class="methodname">query</a></span>(<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">string</span> <code class="parameter">$query</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">?</span><span class="type"><span class="type">int</span><span class="type"></span></span> <code class="parameter">$fetchMode</code><span class="initializer"> = PDO::FETCH_CLASS</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">string</span> <code class="parameter">$classname</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">array</span> <code class="parameter">$constructorArgs</code></span><br>): <span class="type"><span class="type"><a href="class.pdostatement.html" class="type PDOStatement">PDOStatement</a></span>|<span class="type"><span class="type false">false</span></span></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="pdo.query.html" class="methodname">query</a></span>(<span class="methodparam"><span class="type">string</span> <code class="parameter">$query</code></span>, <span class="methodparam"><span class="type">?</span><span class="type"><span class="type">int</span><span class="type"></span></span> <code class="parameter">$fetchMode</code><span class="initializer"> = PDO::FETCH_INTO</span></span>, <span class="methodparam"><span class="type">object</span> <code class="parameter">$object</code></span>): <span class="type"><span class="type"><a href="class.pdostatement.html" class="type PDOStatement">PDOStatement</a></span>|<span class="type"><span class="type false">false</span></span></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="pdo.quote.html" class="methodname">quote</a></span>(<span class="methodparam"><span class="type">string</span> <code class="parameter">$string</code></span>, <span class="methodparam"><span class="type">int</span> <code class="parameter">$type</code><span class="initializer"> = PDO::PARAM_STR</span></span>): <span class="type"><span class="type">string</span>|<span class="type"><span class="type false">false</span></span></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="pdo.rollback.html" class="methodname">rollBack</a></span>(): <span class="type">bool</span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="pdo.setattribute.html" class="methodname">setAttribute</a></span>(<span class="methodparam"><span class="type">int</span> <code class="parameter">$attribute</code></span>, <span class="methodparam"><span class="type"><a href="language.types.declarations.html#language.types.declarations.mixed" class="type mixed">mixed</a></span> <code class="parameter">$value</code></span>): <span class="type">bool</span></div>

   }</div>
  </div>

 </div>
 
 







































































































 
<h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="pdo.begintransaction.html">PDO::beginTransaction</a> &mdash; 启动一个事务</li><li><a href="pdo.commit.html">PDO::commit</a> &mdash; 提交一个事务</li><li><a href="pdo.construct.html">PDO::__construct</a> &mdash; 创建一个表示数据库连接的 PDO 实例</li><li><a href="pdo.errorcode.html">PDO::errorCode</a> &mdash; 获取跟数据库句柄上一次操作相关的 SQLSTATE</li><li><a href="pdo.errorinfo.html">PDO::errorInfo</a> &mdash; Fetch extended error information associated with the last operation on the database handle</li><li><a href="pdo.exec.html">PDO::exec</a> &mdash; 执行 SQL 语句，并返回受影响的行数</li><li><a href="pdo.getattribute.html">PDO::getAttribute</a> &mdash; 取回一个数据库连接的属性</li><li><a href="pdo.getavailabledrivers.html">PDO::getAvailableDrivers</a> &mdash; 返回一个可用驱动的数组</li><li><a href="pdo.intransaction.html">PDO::inTransaction</a> &mdash; 检查是否在事务内</li><li><a href="pdo.lastinsertid.html">PDO::lastInsertId</a> &mdash; 返回最后插入行的ID或序列值</li><li><a href="pdo.prepare.html">PDO::prepare</a> &mdash; 预处理要执行的语句，并返回语句对象</li><li><a href="pdo.query.html">PDO::query</a> &mdash; 预处理并执行没有占位符的 SQL 语句</li><li><a href="pdo.quote.html">PDO::quote</a> &mdash; 为 SQL 查询里的字符串添加引号</li><li><a href="pdo.rollback.html">PDO::rollBack</a> &mdash; 回滚事务</li><li><a href="pdo.setattribute.html">PDO::setAttribute</a> &mdash; 设置属性</li></ul>
</div>
<div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="123295""></a>
  <div class="note">
   <strong class="user">Ale L</strong>
   <a href="#123295" class="date">01-Nov-2018 06:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
1) Do not use your ddbb info in the same file<br />
<br />
AND <br />
<br />
2) DO NOT NEVER USE "All privileges user" for everything, always create an alternative user with restricted permissions (basic: SELECT, INSERT and so on)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="121996""></a>
  <div class="note">
   <strong class="user">sinri at everstray dot com</strong>
   <a href="#121996" class="date">07-Dec-2017 03:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For some Database Environment, such as Aliyun DRDS (Distributed Relational Database Service), cannot process preparing for SQL. <br />
For such cases, the option `\PDO::ATTR_EMULATE_PREPARES` should be set to true. If you always got reports about "Failed to prepare SQL" while this option were set to false, you might try to turn on this option to emulate prepares for SQL.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="121578""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#121578" class="date">30-Aug-2017 08:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I personnaly create a new instance of PDO like this : <br />
<br />
$dbDatas = parse_ini_file( DB_FILE );<br />
&nbsp;$dbOptions = [<br />
&nbsp;\PDO::ATTR_DEFAULT_FECTH_MODE =&gt; \PDO::FETCH_OBJ,<br />
&nbsp;\PDO::ATTR_ERRMODE =&gt; \PDO::ERRMODE_EXCEPTION<br />
&nbsp;];<br />
<br />
&nbsp;$dsn = sprintf( 'mysql:dbname=%s;host=%s', $dbDatas['dbname'],<br />
$dbDatas['host'] );<br />
&nbsp;<br />
&nbsp;$this-&gt;cn = new \PDO( $dsn, $dbDatas['user'], $dbDatas['password'],<br />
$dbOptions );<br />
&nbsp;$this-&gt;cn-&gt;exec( 'SET CHARACTER SET UTF8' );</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112418""></a>
  <div class="note">
   <strong class="user">thz at plista dot com</strong>
   <a href="#112418" class="date">14-Jun-2013 01:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Starting with PHP 5.4 you are unable to use persistent connections when you have your own database class derived from the native PDO class. If your code uses this combination, you will encounter segmentation faults during the cleanup of the PHP process.<br />
You can still use _either_ a derived PDO class _or_ persistent connections.<br />
<br />
For more information, please see this bug report: https://bugs.php.net/bug.php?id=63176</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106125""></a>
  <div class="note">
   <strong class="user">williambarry007 at gmail dot com</strong>
   <a href="#106125" class="date">12-Oct-2011 01:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
PDO and Dependency Injection<br />
<br />
Dependency injection is good for testing.&nbsp; But for anyone wanting various data mapper objects to have a database connection, dependency injection can make other model code very messy because database objects have to be instantiated all over the place and given to the data mapper objects.<br />
<br />
The code below is a good way to maintain dependency injection while keeping clean and minimal model code.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">class </span><span class="default">DataMapper<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public static </span><span class="default">$db</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; public static function </span><span class="default">init</span><span class="keyword">(</span><span class="default">$db</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">$db </span><span class="keyword">= </span><span class="default">$db</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
class </span><span class="default">VendorMapper </span><span class="keyword">extends </span><span class="default">DataMapper<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public static function </span><span class="default">add</span><span class="keyword">(</span><span class="default">$vendor</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$st </span><span class="keyword">= </span><span class="default">self</span><span class="keyword">::</span><span class="default">$db</span><span class="keyword">-&gt;</span><span class="default">prepare</span><span class="keyword">(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"insert into vendors set<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; first_name = :first_name,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; last_name = :last_name"<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$st</span><span class="keyword">-&gt;</span><span class="default">execute</span><span class="keyword">(array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">':first_name' </span><span class="keyword">=&gt; </span><span class="default">$vendor</span><span class="keyword">-&gt;</span><span class="default">first_name</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">':last_name' </span><span class="keyword">=&gt; </span><span class="default">$vendor</span><span class="keyword">-&gt;</span><span class="default">last_name<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="comment">// In your bootstrap<br />
</span><span class="default">$db </span><span class="keyword">= new </span><span class="default">PDO</span><span class="keyword">(...);<br />
</span><span class="default">DataMapper</span><span class="keyword">::</span><span class="default">init</span><span class="keyword">(</span><span class="default">$db</span><span class="keyword">);<br />
<br />
</span><span class="comment">// In your model logic<br />
</span><span class="default">$vendor </span><span class="keyword">= new </span><span class="default">Vendor</span><span class="keyword">(</span><span class="string">'John'</span><span class="keyword">, </span><span class="string">'Doe'</span><span class="keyword">);<br />
</span><span class="default">VendorMapper</span><span class="keyword">::</span><span class="default">add</span><span class="keyword">(</span><span class="default">$vendor</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="97682""></a>
  <div class="note">
   <strong class="user">kcleung at kcleung dot no-ip dot org</strong>
   <a href="#97682" class="date">02-May-2010 03:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is an singleton PDO example:<br />
<br />
###### config.ini ######<br />
db_driver=mysql<br />
db_user=root<br />
db_password=924892xp<br />
<br />
[dsn]<br />
host=localhost<br />
port=3306<br />
dbname=localhost<br />
<br />
[db_options]<br />
PDO::MYSQL_ATTR_INIT_COMMAND=set names utf8<br />
<br />
[db_attributes]<br />
ATTR_ERRMODE=ERRMODE_EXCEPTION<br />
############<br />
<br />
<span class="default">&lt;?php </span><span class="keyword">class </span><span class="default">Database </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; private static </span><span class="default">$link </span><span class="keyword">= </span><span class="default">null </span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; private static function </span><span class="default">getLink </span><span class="keyword">( ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ( </span><span class="default">self </span><span class="keyword">:: </span><span class="default">$link </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">self </span><span class="keyword">:: </span><span class="default">$link </span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ini </span><span class="keyword">= </span><span class="default">_BASE_DIR </span><span class="keyword">. </span><span class="string">"config.ini" </span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$parse </span><span class="keyword">= </span><span class="default">parse_ini_file </span><span class="keyword">( </span><span class="default">$ini </span><span class="keyword">, </span><span class="default">true </span><span class="keyword">) ;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$driver </span><span class="keyword">= </span><span class="default">$parse </span><span class="keyword">[ </span><span class="string">"db_driver" </span><span class="keyword">] ;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$dsn </span><span class="keyword">= </span><span class="string">"</span><span class="keyword">${</span><span class="default">driver</span><span class="keyword">}</span><span class="string">:" </span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$user </span><span class="keyword">= </span><span class="default">$parse </span><span class="keyword">[ </span><span class="string">"db_user" </span><span class="keyword">] ;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$password </span><span class="keyword">= </span><span class="default">$parse </span><span class="keyword">[ </span><span class="string">"db_password" </span><span class="keyword">] ;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$options </span><span class="keyword">= </span><span class="default">$parse </span><span class="keyword">[ </span><span class="string">"db_options" </span><span class="keyword">] ;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$attributes </span><span class="keyword">= </span><span class="default">$parse </span><span class="keyword">[ </span><span class="string">"db_attributes" </span><span class="keyword">] ;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach ( </span><span class="default">$parse </span><span class="keyword">[ </span><span class="string">"dsn" </span><span class="keyword">] as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$dsn </span><span class="keyword">.= </span><span class="string">"</span><span class="keyword">${</span><span class="default">k</span><span class="keyword">}</span><span class="string">=</span><span class="keyword">${</span><span class="default">v</span><span class="keyword">}</span><span class="string">;" </span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">self </span><span class="keyword">:: </span><span class="default">$link </span><span class="keyword">= new </span><span class="default">PDO </span><span class="keyword">( </span><span class="default">$dsn</span><span class="keyword">, </span><span class="default">$user</span><span class="keyword">, </span><span class="default">$password</span><span class="keyword">, </span><span class="default">$options </span><span class="keyword">) ;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach ( </span><span class="default">$attributes </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">self </span><span class="keyword">:: </span><span class="default">$link </span><span class="keyword">-&gt; </span><span class="default">setAttribute </span><span class="keyword">( </span><span class="default">constant </span><span class="keyword">( </span><span class="string">"PDO::</span><span class="keyword">{</span><span class="default">$k</span><span class="keyword">}</span><span class="string">" </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; , </span><span class="default">constant </span><span class="keyword">( </span><span class="string">"PDO::</span><span class="keyword">{</span><span class="default">$v</span><span class="keyword">}</span><span class="string">" </span><span class="keyword">) ) ;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">self </span><span class="keyword">:: </span><span class="default">$link </span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; public static function </span><span class="default">__callStatic </span><span class="keyword">( </span><span class="default">$name</span><span class="keyword">, </span><span class="default">$args </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$callback </span><span class="keyword">= array ( </span><span class="default">self </span><span class="keyword">:: </span><span class="default">getLink </span><span class="keyword">( ), </span><span class="default">$name </span><span class="keyword">) ;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">call_user_func_array </span><span class="keyword">( </span><span class="default">$callback </span><span class="keyword">, </span><span class="default">$args </span><span class="keyword">) ;<br />
&nbsp;&nbsp;&nbsp; }<br />
} </span><span class="default">?&gt;<br />
</span><br />
<span class="default">&lt;?php </span><span class="comment">// examples<br />
</span><span class="default">$stmt </span><span class="keyword">= </span><span class="default">Database </span><span class="keyword">:: </span><span class="default">prepare </span><span class="keyword">( </span><span class="string">"SELECT 'something' ;" </span><span class="keyword">) ;<br />
</span><span class="default">$stmt </span><span class="keyword">-&gt; </span><span class="default">execute </span><span class="keyword">( ) ;<br />
</span><span class="default">var_dump </span><span class="keyword">( </span><span class="default">$stmt </span><span class="keyword">-&gt; </span><span class="default">fetchAll </span><span class="keyword">( ) ) ;<br />
</span><span class="default">$stmt </span><span class="keyword">-&gt; </span><span class="default">closeCursor </span><span class="keyword">( ) ;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89019""></a>
  <div class="note">
   <strong class="user">Megaloman</strong>
   <a href="#89019" class="date">18-Feb-2009 07:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
"And storing username/password inside class is not a very good idea for production code."<br />
<br />
Good idea is to store database connection settings in *.ini files but you have to restrict access to them. For example this way:<br />
<br />
my_setting.ini:<br />
[database]<br />
driver = mysql<br />
host = localhost<br />
;port = 3306<br />
schema = db_schema<br />
username = user<br />
password = secret<br />
<br />
Database connection:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">MyPDO </span><span class="keyword">extends </span><span class="default">PDO<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$file </span><span class="keyword">= </span><span class="string">'my_setting.ini'</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">$settings </span><span class="keyword">= </span><span class="default">parse_ini_file</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">, </span><span class="default">TRUE</span><span class="keyword">)) throw new </span><span class="default">exception</span><span class="keyword">(</span><span class="string">'Unable to open ' </span><span class="keyword">. </span><span class="default">$file </span><span class="keyword">. </span><span class="string">'.'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$dns </span><span class="keyword">= </span><span class="default">$settings</span><span class="keyword">[</span><span class="string">'database'</span><span class="keyword">][</span><span class="string">'driver'</span><span class="keyword">] .<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">':host=' </span><span class="keyword">. </span><span class="default">$settings</span><span class="keyword">[</span><span class="string">'database'</span><span class="keyword">][</span><span class="string">'host'</span><span class="keyword">] .<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; ((!empty(</span><span class="default">$settings</span><span class="keyword">[</span><span class="string">'database'</span><span class="keyword">][</span><span class="string">'port'</span><span class="keyword">])) ? (</span><span class="string">';port=' </span><span class="keyword">. </span><span class="default">$settings</span><span class="keyword">[</span><span class="string">'database'</span><span class="keyword">][</span><span class="string">'port'</span><span class="keyword">]) : </span><span class="string">''</span><span class="keyword">) .<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">';dbname=' </span><span class="keyword">. </span><span class="default">$settings</span><span class="keyword">[</span><span class="string">'database'</span><span class="keyword">][</span><span class="string">'schema'</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">parent</span><span class="keyword">::</span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$dns</span><span class="keyword">, </span><span class="default">$settings</span><span class="keyword">[</span><span class="string">'database'</span><span class="keyword">][</span><span class="string">'username'</span><span class="keyword">], </span><span class="default">$settings</span><span class="keyword">[</span><span class="string">'database'</span><span class="keyword">][</span><span class="string">'password'</span><span class="keyword">]);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Database connection parameters are accessible via human readable ini file for those who screams even if they see one PHP/HTML/any_other command.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85256""></a>
  <div class="note">
   <strong class="user">anrdaemon at freemail dot ru</strong>
   <a href="#85256" class="date">22-Aug-2008 01:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Keep in mind, you MUST NOT use 'root' user in your applications, unless your application designed to do a database maintenance.<br />
<br />
And storing username/password inside class is not a very good idea for production code. You would need to edit the actual working code to change settings, which is bad.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
