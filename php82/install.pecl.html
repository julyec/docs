<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=UTF-8">
  <title>PECL 扩展库安装</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="install.fpm.configuration.html">? 配置</a></li>
      <li style="float: right;"><a href="install.pecl.intro.html">PECL 安装介绍 ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="install.html">安装与配置</a></li>
    <li>PECL 扩展库安装</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="install.pecl" class="chapter">
 <h1>PECL 扩展库安装</h1>
<h2>Table of Contents</h2><ul class="chunklist chunklist_chapter"><li><a href="install.pecl.intro.html">PECL 安装介绍</a></li><li><a href="install.pecl.downloads.html">下载 PECL 扩展库</a></li><li><a href="install.pecl.windows.html">在 Windows 上安装 PHP 扩展</a></li><li><a href="install.pecl.pear.html">用 PEAR 编译共享 PECL 扩展库</a></li><li><a href="install.pecl.phpize.html">用 phpize 编译共享 PECL 扩展库</a></li><li><a href="install.pecl.php-config.html">php-config</a></li><li><a href="install.pecl.static.html">将 PECL 扩展库静态编译入 PHP</a></li></ul>

 
 
 
 

 
 
 
 
 
 
 
 
 
</div>
<div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="125680""></a>
  <div class="note">
   <strong class="user">Boruta.info</strong>
   <a href="#125680" class="date">14-Jan-2021 04:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was able to run it on Ubuntu + PHP 8.0. Currently newest version 0.5.0 is not adapted to PHP 8.0, although it seems to work. You have to download the source version and compile it manually (based on https://www.php.net/manual/en/install.pecl.phpize.php), but you will probably get compilation errors. In my case, there were a few minor bugs due to the missing `;` at the end of the return statement. There were also errors related to the removal of TSRM from PHP 8, but it was enough to add macros to the `.c` files.<br />
<br />
May be useful (adds macros to the first line of all `.c` files in the current directory):<br />
<br />
sed -i '1s / ^ / \ # ifndef \ TSRMLS_D \ n \ #define \ TSRMLS_D \ void \ n \ #define \ TSRMLS_DC \ n \ #define \ TSRMLS_C \ n \ #define \ TSRMLS_CC \ n \ #define \ TSRMLS_FETCH \ (\) \ n \ #endif \ n / '* .c</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
