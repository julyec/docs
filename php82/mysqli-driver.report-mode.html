<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=UTF-8">
  <title>Sets mysqli error reporting mode</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="mysqli-driver.embedded-server-start.html">? mysqli_driver::embedded_server_start</a></li>
      <li style="float: right;"><a href="class.mysqli-warning.html">mysqli_warning ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="class.mysqli-driver.html">mysqli_driver</a></li>
    <li>Sets mysqli error reporting mode</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="mysqli-driver.report-mode" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">mysqli_driver::$report_mode</h1>
  <h1 class="refname">mysqli_report</h1>
  <p class="verinfo">(PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">mysqli_driver::$report_mode</span> -- <span class="refname">mysqli_report</span> &mdash; <span class="dc-title">Sets mysqli error reporting mode</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-mysqli-driver.report-mode-description">
  <h3 class="title">说明</h3>
  <p class="para">面向对象风格</p>
  <div class="fieldsynopsis">
   <span class="type">int</span> <var class="varname"><a href="mysqli-driver.report-mode.html">$mysqli_driver-&gt;report_mode</a></var>;</div>

  <p class="para">过程化风格</p>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><a href="function.mysqli-report.html" class="methodname">mysqli_report</a></span>(<span class="methodparam"><span class="type">int</span> <code class="parameter">$flags</code></span>): <span class="type">bool</span></div>

  <p class="para rdfs-comment">
   Depending on the flags, it sets mysqli error reporting mode to exception, warning or none.  
   When set to <strong><code>MYSQLI_REPORT_ALL</code></strong> or <strong><code>MYSQLI_REPORT_INDEX</code></strong> 
   it will also inform about queries that don&#039;t use an index (or use a bad index).
  </p>
  <p class="para">
   As of PHP 8.1.0, the default setting is <code class="literal">MYSQLI_REPORT_ERROR | MYSQLI_REPORT_STRICT</code>.
   Previously, it was <strong><code>MYSQLI_REPORT_OFF</code></strong>.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-mysqli-driver.report-mode-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">flags</code></dt>

     <dd>

      <p class="para">
       <table id="mysqli-driver.report-mode.parameters" class="doctable table">
        <caption><strong>Supported flags</strong></caption>
        
         <thead>
          <tr>
           <th>Name</th>
           <th>Description</th>
          </tr>

         </thead>

         <tbody class="tbody">
          <tr>
           <td><strong><code>MYSQLI_REPORT_OFF</code></strong></td>
           <td>Turns reporting off</td>
          </tr>

          <tr>
           <td><strong><code>MYSQLI_REPORT_ERROR</code></strong></td>
           <td>Report errors from mysqli function calls</td>
          </tr>

          <tr>
           <td><strong><code>MYSQLI_REPORT_STRICT</code></strong></td>
           <td>
            Throw <span class="classname"><a href="class.mysqli-sql-exception.html" class="classname">mysqli_sql_exception</a></span> for errors
            instead of warnings
           </td>
          </tr>

          <tr>
           <td><strong><code>MYSQLI_REPORT_INDEX</code></strong></td>
           <td>Report if no index or bad index was used in a query</td>
          </tr>

          <tr>
           <td><strong><code>MYSQLI_REPORT_ALL</code></strong></td>
           <td>Set all options (report all)</td>
          </tr>

         </tbody>
        
       </table>

      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-mysqli-driver.report-mode-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   Returns <strong><code>true</code></strong>.
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-mysqli-driver.report-mode-changelog">
  <h3 class="title">更新日志</h3>
  <table class="doctable informaltable">
   
    <thead>
     <tr>
      <th>版本</th>
      <th>说明</th>
     </tr>

    </thead>

    <tbody class="tbody">
     <tr>
      <td>8.1.0</td>
      <td>
       The default value is now <code class="literal">MYSQLI_REPORT_ERROR | MYSQLI_REPORT_STRICT</code>.
       Previously, it was <strong><code>MYSQLI_REPORT_OFF</code></strong>.
      </td>
     </tr>

    </tbody>
   
  </table>

 </div>


 <div class="refsect1 examples" id="refsect1-mysqli-driver.report-mode-examples">
  <h3 class="title">示例</h3>
  <div class="example" id="example-3102">
   <p><strong>Example #1 面向对象风格</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">/* activate reporting */<br /></span><span style="color: #0000BB">$driver </span><span style="color: #007700">= new </span><span style="color: #0000BB">mysqli_driver</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$driver</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">report_mode </span><span style="color: #007700">= </span><span style="color: #0000BB">MYSQLI_REPORT_ALL</span><span style="color: #007700">;<br /><br />try {<br />    </span><span style="color: #FF8000">/* if the connection fails, a mysqli_sql_exception will be thrown */<br />    </span><span style="color: #0000BB">$mysqli </span><span style="color: #007700">= new </span><span style="color: #0000BB">mysqli</span><span style="color: #007700">(</span><span style="color: #DD0000">"localhost"</span><span style="color: #007700">, </span><span style="color: #DD0000">"my_user"</span><span style="color: #007700">, </span><span style="color: #DD0000">"my_password"</span><span style="color: #007700">, </span><span style="color: #DD0000">"my_db"</span><span style="color: #007700">);<br /><br />    </span><span style="color: #FF8000">/* this query should report an error */<br />    </span><span style="color: #0000BB">$result </span><span style="color: #007700">= </span><span style="color: #0000BB">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #DD0000">"SELECT Name FROM Nonexistingtable WHERE population &gt; 50000"</span><span style="color: #007700">);<br /><br />    </span><span style="color: #FF8000">/* this query should report a bad index if the column population doesn't have an index */<br />    </span><span style="color: #0000BB">$result </span><span style="color: #007700">= </span><span style="color: #0000BB">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #DD0000">"SELECT Name FROM City WHERE population &gt; 50000"</span><span style="color: #007700">);<br />} catch (</span><span style="color: #0000BB">mysqli_sql_exception $e</span><span style="color: #007700">) {<br />    </span><span style="color: #0000BB">error_log</span><span style="color: #007700">(</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">__toString</span><span style="color: #007700">());<br />}</span>
</span>
</code></div>
   </div>

  </div>
  <div class="example" id="example-3104">
   <p><strong>Example #2 过程化风格</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">/* activate reporting */<br /></span><span style="color: #0000BB">mysqli_report</span><span style="color: #007700">(</span><span style="color: #0000BB">MYSQLI_REPORT_ALL</span><span style="color: #007700">);<br /><br />try {<br />    </span><span style="color: #FF8000">/* if the connection fails, a mysqli_sql_exception will be thrown */<br />    </span><span style="color: #0000BB">$link </span><span style="color: #007700">= </span><span style="color: #0000BB">mysqli_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">"localhost"</span><span style="color: #007700">, </span><span style="color: #DD0000">"my_user"</span><span style="color: #007700">, </span><span style="color: #DD0000">"my_password"</span><span style="color: #007700">, </span><span style="color: #DD0000">"my_db"</span><span style="color: #007700">);<br /><br />    </span><span style="color: #FF8000">/* this query should report an error */<br />    </span><span style="color: #0000BB">$result </span><span style="color: #007700">= </span><span style="color: #0000BB">mysqli_query</span><span style="color: #007700">(</span><span style="color: #0000BB">$link</span><span style="color: #007700">, </span><span style="color: #DD0000">"SELECT Name FROM Nonexistingtable WHERE population &gt; 50000"</span><span style="color: #007700">);<br /><br />    </span><span style="color: #FF8000">/* this query should report a bad index if the column population doesn't have an index */<br />    </span><span style="color: #0000BB">$result </span><span style="color: #007700">= </span><span style="color: #0000BB">mysqli_query</span><span style="color: #007700">(</span><span style="color: #0000BB">$link</span><span style="color: #007700">, </span><span style="color: #DD0000">"SELECT Name FROM City WHERE population &gt; 50000"</span><span style="color: #007700">);<br />} catch (</span><span style="color: #0000BB">mysqli_sql_exception $e</span><span style="color: #007700">) {<br />    </span><span style="color: #0000BB">error_log</span><span style="color: #007700">(</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">__toString</span><span style="color: #007700">());<br />}</span>
</span>
</code></div>
   </div>

  </div>
  <div class="example" id="example-3106">
   <p><strong>Example #3 Error reporting except bad index errors</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">/* activate reporting */<br /></span><span style="color: #0000BB">mysqli_report</span><span style="color: #007700">(</span><span style="color: #0000BB">MYSQLI_REPORT_ERROR </span><span style="color: #007700">| </span><span style="color: #0000BB">MYSQLI_REPORT_STRICT</span><span style="color: #007700">);<br /><br />try {<br />    </span><span style="color: #FF8000">/* if the connection fails, a mysqli_sql_exception will be thrown */<br />    </span><span style="color: #0000BB">$mysqli </span><span style="color: #007700">= new </span><span style="color: #0000BB">mysqli</span><span style="color: #007700">(</span><span style="color: #DD0000">"localhost"</span><span style="color: #007700">, </span><span style="color: #DD0000">"my_user"</span><span style="color: #007700">, </span><span style="color: #DD0000">"my_password"</span><span style="color: #007700">, </span><span style="color: #DD0000">"my_db"</span><span style="color: #007700">);<br /><br />    </span><span style="color: #FF8000">/* this query should report an error */<br />    </span><span style="color: #0000BB">$result </span><span style="color: #007700">= </span><span style="color: #0000BB">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #DD0000">"SELECT Name FROM Nonexistingtable WHERE population &gt; 50000"</span><span style="color: #007700">);<br /><br />    </span><span style="color: #FF8000">/* this WILL NOT report any errors even if index is not available */<br />    </span><span style="color: #0000BB">$result </span><span style="color: #007700">= </span><span style="color: #0000BB">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #DD0000">"SELECT Name FROM City WHERE population &gt; 50000"</span><span style="color: #007700">);<br />} catch (</span><span style="color: #0000BB">mysqli_sql_exception $e</span><span style="color: #007700">) {<br />    </span><span style="color: #0000BB">error_log</span><span style="color: #007700">(</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">__toString</span><span style="color: #007700">());<br />}</span>
</span>
</code></div>
   </div>

  </div>
 </div>


 <div class="refsect1 seealso" id="refsect1-mysqli-driver.report-mode-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="classname"><a href="class.mysqli-sql-exception.html" class="classname">mysqli_sql_exception</a></span></li>
    <li class="member"><span class="function"><a href="function.set-exception-handler.html" class="function" rel="rdfs-seeAlso">set_exception_handler()</a> - 设置用户自定义的异常处理函数</span></li>
    <li class="member"><span class="function"><a href="function.error-reporting.html" class="function" rel="rdfs-seeAlso">error_reporting()</a> - 设置应该报告何种 PHP 错误</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="125344""></a>
  <div class="note">
   <strong class="user">welfordmartin at gmail dot com</strong>
   <a href="#125344" class="date">09-Sep-2020 03:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As a recommendaton on memory management please don't use the objective way your creating an object to specify one property and thats all your doing with it, much more effective both for the parser and for memory to use the proccedual style for setting the report flag.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="121234""></a>
  <div class="note">
   <strong class="user">nineoclick (atsymbol) gmail (dot) com</strong>
   <a href="#121234" class="date">16-Jun-2017 10:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Seems not clear but flags *could be combined*, as per other flags.<br />
For example:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment"># wannabe noticed about all errors except those about indexes<br />
</span><span class="default">$driver </span><span class="keyword">= new </span><span class="default">mysqli_driver</span><span class="keyword">();<br />
</span><span class="default">$driver</span><span class="keyword">-&gt;</span><span class="default">report_mode </span><span class="keyword">= </span><span class="default">MYSQLI_REPORT_ALL </span><span class="keyword">&amp; ~</span><span class="default">MYSQLI_REPORT_INDEX</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
