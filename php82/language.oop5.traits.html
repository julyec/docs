<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=UTF-8">
  <title>Trait</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="language.oop5.interfaces.html">? 对象接口</a></li>
      <li style="float: right;"><a href="language.oop5.anonymous.html">匿名类 ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="language.oop5.html">类与对象</a></li>
    <li>Trait</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="language.oop5.traits" class="sect1">
  <h2 class="title">Trait</h2>
  <p class="para">
   PHP 实现了一种代码复用的方法，称为 trait。
  </p>
  <p class="para">
   Trait 是为类似 PHP 的单继承语言而准备的一种代码复用机制。Trait
   为了减少单继承语言的限制，使开发人员能够自由地在不同层次结构内独立的类中复用 method。Trait
   和 Class 组合的语义定义了一种减少复杂性的方式，避免传统多继承和 Mixin 类相关典型问题。
  </p>
  <p class="para">
   Trait 和 Class 相似，但仅仅旨在用细粒度和一致的方式来组合功能。
   无法通过 trait 自身来实例化。它为传统继承增加了水平特性的组合；也就是说，应用的几个 Class 之间不需要继承。
  </p>
  
  <div class="example" id="example-512">
    <p><strong>Example #1 Trait 示例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">trait </span><span style="color: #0000BB">ezcReflectionReturnInfo </span><span style="color: #007700">{<br />    function </span><span style="color: #0000BB">getReturnType</span><span style="color: #007700">() { </span><span style="color: #FF8000">/*1*/ </span><span style="color: #007700">}<br />    function </span><span style="color: #0000BB">getReturnDescription</span><span style="color: #007700">() { </span><span style="color: #FF8000">/*2*/ </span><span style="color: #007700">}<br />}<br /><br />class </span><span style="color: #0000BB">ezcReflectionMethod </span><span style="color: #007700">extends </span><span style="color: #0000BB">ReflectionMethod </span><span style="color: #007700">{<br />    use </span><span style="color: #0000BB">ezcReflectionReturnInfo</span><span style="color: #007700">;<br />    </span><span style="color: #FF8000">/* ... */<br /></span><span style="color: #007700">}<br /><br />class </span><span style="color: #0000BB">ezcReflectionFunction </span><span style="color: #007700">extends </span><span style="color: #0000BB">ReflectionFunction </span><span style="color: #007700">{<br />    use </span><span style="color: #0000BB">ezcReflectionReturnInfo</span><span style="color: #007700">;<br />    </span><span style="color: #FF8000">/* ... */<br /></span><span style="color: #007700">}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  
  <div class="sect2" id="language.oop5.traits.precedence">
   <h3 class="title">优先级</h3>
   <p class="para">
    从基类继承的成员会被 trait 插入的成员所覆盖。优先顺序是来自当前类的成员覆盖了
    trait 的方法，而 trait 则覆盖了被继承的方法。
   </p>
   <div class="example" id="example-514">
    <p><strong>Example #2 优先顺序示例</strong></p>
    <div class="example-contents"><p>
     从基类继承的成员被插入的 SayWorld Trait 中的 MyHelloWorld
     方法所覆盖。其行为 MyHelloWorld 类中定义的方法一致。优先顺序是当前类中的方法会覆盖
     trait 方法，而 trait 方法又覆盖了基类中的方法。
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">class </span><span style="color: #0000BB">Base </span><span style="color: #007700">{<br />    public function </span><span style="color: #0000BB">sayHello</span><span style="color: #007700">() {<br />        echo </span><span style="color: #DD0000">'Hello '</span><span style="color: #007700">;<br />    }<br />}<br /><br />trait </span><span style="color: #0000BB">SayWorld </span><span style="color: #007700">{<br />    public function </span><span style="color: #0000BB">sayHello</span><span style="color: #007700">() {<br />        </span><span style="color: #0000BB">parent</span><span style="color: #007700">::</span><span style="color: #0000BB">sayHello</span><span style="color: #007700">();<br />        echo </span><span style="color: #DD0000">'World!'</span><span style="color: #007700">;<br />    }<br />}<br /><br />class </span><span style="color: #0000BB">MyHelloWorld </span><span style="color: #007700">extends </span><span style="color: #0000BB">Base </span><span style="color: #007700">{<br />    use </span><span style="color: #0000BB">SayWorld</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">$o </span><span style="color: #007700">= new </span><span style="color: #0000BB">MyHelloWorld</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$o</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">sayHello</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上示例会输出：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Hello World!
</pre></div>
    </div>
   </div>
   <div class="example" id="example-516">
    <p><strong>Example #3 另一个优先级顺序的例子</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">trait </span><span style="color: #0000BB">HelloWorld </span><span style="color: #007700">{<br />    public function </span><span style="color: #0000BB">sayHello</span><span style="color: #007700">() {<br />        echo </span><span style="color: #DD0000">'Hello World!'</span><span style="color: #007700">;<br />    }<br />}<br /><br />class </span><span style="color: #0000BB">TheWorldIsNotEnough </span><span style="color: #007700">{<br />    use </span><span style="color: #0000BB">HelloWorld</span><span style="color: #007700">;<br />    public function </span><span style="color: #0000BB">sayHello</span><span style="color: #007700">() {<br />        echo </span><span style="color: #DD0000">'Hello Universe!'</span><span style="color: #007700">;<br />    }<br />}<br /><br /></span><span style="color: #0000BB">$o </span><span style="color: #007700">= new </span><span style="color: #0000BB">TheWorldIsNotEnough</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$o</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">sayHello</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上示例会输出：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Hello Universe!
</pre></div>
    </div>
   </div>
  </div>
  
  <div class="sect2" id="language.oop5.traits.multiple">
   <h3 class="title">多个 trait</h3>
   <p class="para">
    通过逗号分隔，在 <code class="literal">use</code> 声明列出多个 trait，可以都插入到一个类中。
   </p>
   <div class="example" id="example-518">
    <p><strong>Example #4 多个 trait 的用法</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">trait </span><span style="color: #0000BB">Hello </span><span style="color: #007700">{<br />    public function </span><span style="color: #0000BB">sayHello</span><span style="color: #007700">() {<br />        echo </span><span style="color: #DD0000">'Hello '</span><span style="color: #007700">;<br />    }<br />}<br /><br />trait </span><span style="color: #0000BB">World </span><span style="color: #007700">{<br />    public function </span><span style="color: #0000BB">sayWorld</span><span style="color: #007700">() {<br />        echo </span><span style="color: #DD0000">'World'</span><span style="color: #007700">;<br />    }<br />}<br /><br />class </span><span style="color: #0000BB">MyHelloWorld </span><span style="color: #007700">{<br />    use </span><span style="color: #0000BB">Hello</span><span style="color: #007700">, </span><span style="color: #0000BB">World</span><span style="color: #007700">;<br />    public function </span><span style="color: #0000BB">sayExclamationMark</span><span style="color: #007700">() {<br />        echo </span><span style="color: #DD0000">'!'</span><span style="color: #007700">;<br />    }<br />}<br /><br /></span><span style="color: #0000BB">$o </span><span style="color: #007700">= new </span><span style="color: #0000BB">MyHelloWorld</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$o</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">sayHello</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$o</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">sayWorld</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$o</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">sayExclamationMark</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上示例会输出：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Hello World!
</pre></div>
    </div>
   </div>
  </div>
  
  <div class="sect2" id="language.oop5.traits.conflict">
   <h3 class="title">冲突的解决</h3>
   <p class="para">
    如果两个 trait 都插入了一个同名的方法，如果没有明确解决冲突将会产生一个致命错误。
   </p>
   <p class="para">
    为了解决多个 trait 在同一个类中的命名冲突，需要使用 <code class="literal">insteadof</code>
    操作符来明确指定使用冲突方法中的哪一个。
   </p>
   <p class="para">
    以上方式仅允许排除掉其它方法，<code class="literal">as</code> 操作符可以
    为某个方法引入别名。
    注意，<code class="literal">as</code> 操作符不会对方法进行重命名，也不会影响其方法。
   </p>
   <div class="example" id="example-520">
    <p><strong>Example #5 冲突的解决</strong></p>
    <div class="example-contents"><p>
      在本例中 Talker 使用了 trait A 和 B。由于 A 和 B
      有冲突的方法，其定义了使用 trait B 中的 smallTalk 以及 trait A 中的 bigTalk。
    </p></div>
    <div class="example-contents"><p>
     Aliased_Talker 使用了 <code class="literal">as</code> 操作符来定义了 <code class="literal">talk</code>
     来作为 B 的 bigTalk 的别名。
    </p></div> 
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">trait </span><span style="color: #0000BB">A </span><span style="color: #007700">{<br />    public function </span><span style="color: #0000BB">smallTalk</span><span style="color: #007700">() {<br />        echo </span><span style="color: #DD0000">'a'</span><span style="color: #007700">;<br />    }<br />    public function </span><span style="color: #0000BB">bigTalk</span><span style="color: #007700">() {<br />        echo </span><span style="color: #DD0000">'A'</span><span style="color: #007700">;<br />    }<br />}<br /><br />trait </span><span style="color: #0000BB">B </span><span style="color: #007700">{<br />    public function </span><span style="color: #0000BB">smallTalk</span><span style="color: #007700">() {<br />        echo </span><span style="color: #DD0000">'b'</span><span style="color: #007700">;<br />    }<br />    public function </span><span style="color: #0000BB">bigTalk</span><span style="color: #007700">() {<br />        echo </span><span style="color: #DD0000">'B'</span><span style="color: #007700">;<br />    }<br />}<br /><br />class </span><span style="color: #0000BB">Talker </span><span style="color: #007700">{<br />    use </span><span style="color: #0000BB">A</span><span style="color: #007700">, </span><span style="color: #0000BB">B </span><span style="color: #007700">{<br />        </span><span style="color: #0000BB">B</span><span style="color: #007700">::</span><span style="color: #0000BB">smallTalk </span><span style="color: #007700">insteadof </span><span style="color: #0000BB">A</span><span style="color: #007700">;<br />        </span><span style="color: #0000BB">A</span><span style="color: #007700">::</span><span style="color: #0000BB">bigTalk </span><span style="color: #007700">insteadof </span><span style="color: #0000BB">B</span><span style="color: #007700">;<br />    }<br />}<br /><br />class </span><span style="color: #0000BB">Aliased_Talker </span><span style="color: #007700">{<br />    use </span><span style="color: #0000BB">A</span><span style="color: #007700">, </span><span style="color: #0000BB">B </span><span style="color: #007700">{<br />        </span><span style="color: #0000BB">B</span><span style="color: #007700">::</span><span style="color: #0000BB">smallTalk </span><span style="color: #007700">insteadof </span><span style="color: #0000BB">A</span><span style="color: #007700">;<br />        </span><span style="color: #0000BB">A</span><span style="color: #007700">::</span><span style="color: #0000BB">bigTalk </span><span style="color: #007700">insteadof </span><span style="color: #0000BB">B</span><span style="color: #007700">;<br />        </span><span style="color: #0000BB">B</span><span style="color: #007700">::</span><span style="color: #0000BB">bigTalk </span><span style="color: #007700">as </span><span style="color: #0000BB">talk</span><span style="color: #007700">;<br />    }<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </div>
  
  <div class="sect2" id="language.oop5.traits.visibility">
   <h3 class="title">修改方法的访问控制</h3>
   <p class="para">
    使用 <code class="literal">as</code> 语法还可以用来调整方法的访问控制。
   </p>
   <div class="example" id="example-522">
    <p><strong>Example #6 修改方法的访问控制</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">trait </span><span style="color: #0000BB">HelloWorld </span><span style="color: #007700">{<br />    public function </span><span style="color: #0000BB">sayHello</span><span style="color: #007700">() {<br />        echo </span><span style="color: #DD0000">'Hello World!'</span><span style="color: #007700">;<br />    }<br />}<br /><br /></span><span style="color: #FF8000">// 修改 sayHello 的访问控制<br /></span><span style="color: #007700">class </span><span style="color: #0000BB">MyClass1 </span><span style="color: #007700">{<br />    use </span><span style="color: #0000BB">HelloWorld </span><span style="color: #007700">{ </span><span style="color: #0000BB">sayHello </span><span style="color: #007700">as protected; }<br />}<br /><br /></span><span style="color: #FF8000">// 给方法一个改变了访问控制的别名<br />// 原版 sayHello 的访问控制则没有发生变化<br /></span><span style="color: #007700">class </span><span style="color: #0000BB">MyClass2 </span><span style="color: #007700">{<br />    use </span><span style="color: #0000BB">HelloWorld </span><span style="color: #007700">{ </span><span style="color: #0000BB">sayHello </span><span style="color: #007700">as private </span><span style="color: #0000BB">myPrivateHello</span><span style="color: #007700">; }<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </div>
  
  <div class="sect2" id="language.oop5.traits.composition">
   <h3 class="title">从 trait 来组成 trait</h3>
   <p class="para">
    正如 class 能够使用 trait 一样，其它 trait 也能够使用 trait。在 trait
    定义时通过使用一个或多个 trait，能够组合其它 trait 中的部分或全部成员。
   </p>
   <div class="example" id="example-524">
    <p><strong>Example #7 从 trait 来组成 trait</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">trait </span><span style="color: #0000BB">Hello </span><span style="color: #007700">{<br />    public function </span><span style="color: #0000BB">sayHello</span><span style="color: #007700">() {<br />        echo </span><span style="color: #DD0000">'Hello '</span><span style="color: #007700">;<br />    }<br />}<br /><br />trait </span><span style="color: #0000BB">World </span><span style="color: #007700">{<br />    public function </span><span style="color: #0000BB">sayWorld</span><span style="color: #007700">() {<br />        echo </span><span style="color: #DD0000">'World!'</span><span style="color: #007700">;<br />    }<br />}<br /><br />trait </span><span style="color: #0000BB">HelloWorld </span><span style="color: #007700">{<br />    use </span><span style="color: #0000BB">Hello</span><span style="color: #007700">, </span><span style="color: #0000BB">World</span><span style="color: #007700">;<br />}<br /><br />class </span><span style="color: #0000BB">MyHelloWorld </span><span style="color: #007700">{<br />    use </span><span style="color: #0000BB">HelloWorld</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">$o </span><span style="color: #007700">= new </span><span style="color: #0000BB">MyHelloWorld</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$o</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">sayHello</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$o</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">sayWorld</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上示例会输出：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Hello World!
</pre></div>
    </div>
   </div>
  </div>
  
  <div class="sect2" id="language.oop5.traits.abstract">
   <h3 class="title">Trait 的抽象成员</h3>
   <p class="para">
    为了对使用的类施加强制要求，trait 支持抽象方法的使用。
    支持 public 、protected 和 private 方法。PHP 8.0.0 之前，
    仅支持 public 和 protected 抽象方法。
   </p>
   <div class="caution"><strong class="caution">Caution</strong>
    <p class="simpara">
     一个可继承实体类，可以通过定义同名非抽象方法来满足要求；方法的签名可以不同。
    </p>
   </div>
   <div class="example" id="ffi.examples.structure">
    <p><strong>Example #8 表示通过抽象方法来进行强制要求</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">trait </span><span style="color: #0000BB">Hello </span><span style="color: #007700">{<br />    public function </span><span style="color: #0000BB">sayHelloWorld</span><span style="color: #007700">() {<br />        echo </span><span style="color: #DD0000">'Hello'</span><span style="color: #007700">.</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getWorld</span><span style="color: #007700">();<br />    }<br />    abstract public function </span><span style="color: #0000BB">getWorld</span><span style="color: #007700">();<br />}<br /><br />class </span><span style="color: #0000BB">MyHelloWorld </span><span style="color: #007700">{<br />    private </span><span style="color: #0000BB">$world</span><span style="color: #007700">;<br />    use </span><span style="color: #0000BB">Hello</span><span style="color: #007700">;<br />    public function </span><span style="color: #0000BB">getWorld</span><span style="color: #007700">() {<br />        return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">world</span><span style="color: #007700">;<br />    }<br />    public function </span><span style="color: #0000BB">setWorld</span><span style="color: #007700">(</span><span style="color: #0000BB">$val</span><span style="color: #007700">) {<br />        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">world </span><span style="color: #007700">= </span><span style="color: #0000BB">$val</span><span style="color: #007700">;<br />    }<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </div>
  
  <div class="sect2" id="language.oop5.traits.static">
   <h3 class="title">Trait 的静态成员</h3>
   <p class="para">
    Traits 可以定义静态变量、静态方法和静态属性。
   </p>
   <blockquote class="note"><p><strong class="note">Note</strong>: 
    <p class="para">
     自 PHP 8.1.0 起，弃用直接在 trait 上调用静态方法或者访问静态属性。
     静态方法和属性应该仅在使用了 trait 的 class 中访问。
    </p>
   </p></blockquote>
   <div class="example" id="ffi.examples.variable-creating">
    <p><strong>Example #9 静态变量</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">trait </span><span style="color: #0000BB">Counter </span><span style="color: #007700">{<br />    public function </span><span style="color: #0000BB">inc</span><span style="color: #007700">() {<br />        static </span><span style="color: #0000BB">$c </span><span style="color: #007700">= </span><span style="color: #0000BB">0</span><span style="color: #007700">;<br />        </span><span style="color: #0000BB">$c </span><span style="color: #007700">= </span><span style="color: #0000BB">$c </span><span style="color: #007700">+ </span><span style="color: #0000BB">1</span><span style="color: #007700">;<br />        echo </span><span style="color: #DD0000">"</span><span style="color: #0000BB">$c</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br />    }<br />}<br /><br />class </span><span style="color: #0000BB">C1 </span><span style="color: #007700">{<br />    use </span><span style="color: #0000BB">Counter</span><span style="color: #007700">;<br />}<br /><br />class </span><span style="color: #0000BB">C2 </span><span style="color: #007700">{<br />    use </span><span style="color: #0000BB">Counter</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">$o </span><span style="color: #007700">= new </span><span style="color: #0000BB">C1</span><span style="color: #007700">(); </span><span style="color: #0000BB">$o</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">inc</span><span style="color: #007700">(); </span><span style="color: #FF8000">// echo 1<br /></span><span style="color: #0000BB">$p </span><span style="color: #007700">= new </span><span style="color: #0000BB">C2</span><span style="color: #007700">(); </span><span style="color: #0000BB">$p</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">inc</span><span style="color: #007700">(); </span><span style="color: #FF8000">// echo 1<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
   <div class="example" id="ffi.examples.enum">
    <p><strong>Example #10 静态方法</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">trait </span><span style="color: #0000BB">StaticExample </span><span style="color: #007700">{<br />    public static function </span><span style="color: #0000BB">doSomething</span><span style="color: #007700">() {<br />        return </span><span style="color: #DD0000">'Doing something'</span><span style="color: #007700">;<br />    }<br />}<br /><br />class </span><span style="color: #0000BB">Example </span><span style="color: #007700">{<br />    use </span><span style="color: #0000BB">StaticExample</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">Example</span><span style="color: #007700">::</span><span style="color: #0000BB">doSomething</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
   <div class="example" id="example-532">
    <p><strong>Example #11 静态属性</strong></p>
    <div class="example-contents">
     <div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">trait </span><span style="color: #0000BB">StaticExample </span><span style="color: #007700">{<br />    public static </span><span style="color: #0000BB">$static </span><span style="color: #007700">= </span><span style="color: #DD0000">'foo'</span><span style="color: #007700">;<br />}<br /><br />class </span><span style="color: #0000BB">Example </span><span style="color: #007700">{<br />    use </span><span style="color: #0000BB">StaticExample</span><span style="color: #007700">;<br />}<br /><br />echo </span><span style="color: #0000BB">Example</span><span style="color: #007700">::</span><span style="color: #0000BB">$static</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </div>
  
  <div class="sect2" id="language.oop5.traits.properties">
   <h3 class="title">属性</h3>
   <p class="para">
    Trait 同样可以定义属性。
   </p>
   <div class="example" id="example-534">
    <p><strong>Example #12 定义属性</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">trait </span><span style="color: #0000BB">PropertiesTrait </span><span style="color: #007700">{<br />    public </span><span style="color: #0000BB">$x </span><span style="color: #007700">= </span><span style="color: #0000BB">1</span><span style="color: #007700">;<br />}<br /><br />class </span><span style="color: #0000BB">PropertiesExample </span><span style="color: #007700">{<br />    use </span><span style="color: #0000BB">PropertiesTrait</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">$example </span><span style="color: #007700">= new </span><span style="color: #0000BB">PropertiesExample</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$example</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">x</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
   <p class="para">
    Trait 定义了一个属性后，类就不能定义同样名称的属性，否则会产生 fatal error。
    有种情况例外：属性是兼容的（同样的访问可见度、类型、readonly 修饰符和初始默认值）。
   </p>
   <div class="example" id="example-536">
    <p><strong>Example #13 解决冲突</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">trait </span><span style="color: #0000BB">PropertiesTrait </span><span style="color: #007700">{<br />    public </span><span style="color: #0000BB">$same </span><span style="color: #007700">= </span><span style="color: #0000BB">true</span><span style="color: #007700">;<br />    public </span><span style="color: #0000BB">$different1 </span><span style="color: #007700">= </span><span style="color: #0000BB">false</span><span style="color: #007700">;<br />    public </span><span style="color: #0000BB">bool $different2</span><span style="color: #007700">;<br />    public </span><span style="color: #0000BB">bool $different3</span><span style="color: #007700">;<br />}<br /><br />class </span><span style="color: #0000BB">PropertiesExample </span><span style="color: #007700">{<br />    use </span><span style="color: #0000BB">PropertiesTrait</span><span style="color: #007700">;<br />    public </span><span style="color: #0000BB">$same </span><span style="color: #007700">= </span><span style="color: #0000BB">true</span><span style="color: #007700">;<br />    public </span><span style="color: #0000BB">$different1 </span><span style="color: #007700">= </span><span style="color: #0000BB">true</span><span style="color: #007700">; </span><span style="color: #FF8000">// Fatal error<br />    </span><span style="color: #007700">public </span><span style="color: #0000BB">string $different2</span><span style="color: #007700">; </span><span style="color: #FF8000">// Fatal error<br />    </span><span style="color: #007700">readonly protected </span><span style="color: #0000BB">bool $different3</span><span style="color: #007700">; </span><span style="color: #FF8000">// Fatal error<br /></span><span style="color: #007700">}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </div>

 <div class="sect2" id="language.oop5.traits.constants">
  <h3 class="title">常量</h3>
  <p class="para">
   自 PHP 8.2.0 起，trait 也可以定义常量。
  </p>
  <div class="example" id="example-538">
   <p><strong>Example #14 定义常量</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">trait </span><span style="color: #0000BB">ConstantsTrait </span><span style="color: #007700">{<br />    public const </span><span style="color: #0000BB">FLAG_MUTABLE </span><span style="color: #007700">= </span><span style="color: #0000BB">1</span><span style="color: #007700">;<br />    final public const </span><span style="color: #0000BB">FLAG_IMMUTABLE </span><span style="color: #007700">= </span><span style="color: #0000BB">5</span><span style="color: #007700">;<br />}<br /><br />class </span><span style="color: #0000BB">ConstantsExample </span><span style="color: #007700">{<br />    use </span><span style="color: #0000BB">ConstantsTrait</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">$example </span><span style="color: #007700">= new </span><span style="color: #0000BB">ConstantsExample</span><span style="color: #007700">;<br />echo </span><span style="color: #0000BB">$example</span><span style="color: #007700">::</span><span style="color: #0000BB">FLAG_MUTABLE</span><span style="color: #007700">; </span><span style="color: #FF8000">// 1<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
  <p class="para">
   如果 trait 定义了常量，然后类不能定义相同名称的常量，除非两者兼容（相同的可见性、初始化值和
   final），否则会发出 fatal error。
  </p>
  <div class="example" id="example-540">
   <p><strong>Example #15 解决冲突</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">trait </span><span style="color: #0000BB">ConstantsTrait </span><span style="color: #007700">{<br />    public const </span><span style="color: #0000BB">FLAG_MUTABLE </span><span style="color: #007700">= </span><span style="color: #0000BB">1</span><span style="color: #007700">;<br />    final public const </span><span style="color: #0000BB">FLAG_IMMUTABLE </span><span style="color: #007700">= </span><span style="color: #0000BB">5</span><span style="color: #007700">;<br />}<br /><br />class </span><span style="color: #0000BB">ConstantsExample </span><span style="color: #007700">{<br />    use </span><span style="color: #0000BB">ConstantsTrait</span><span style="color: #007700">;<br />    public const </span><span style="color: #0000BB">FLAG_IMMUTABLE </span><span style="color: #007700">= </span><span style="color: #0000BB">5</span><span style="color: #007700">; </span><span style="color: #FF8000">// Fatal error<br /></span><span style="color: #007700">}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
 </div>

 </div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="128242""></a>
  <div class="note">
   <strong class="user">JustAddingSomeAdditionalUseCase</strong>
   <a href="#128242" class="date">22-Feb-2023 11:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I have not seen this specific use case:<br />
<br />
"Wanting to preserve action of parent class method, the trait one calling ::parent &amp; also the child class mehod action".<br />
<br />
// Child class.<br />
use SuperTrait {<br />
&nbsp; initialize as initializeOr;<br />
}<br />
public function initialize(array &amp;$element) {<br />
&nbsp; ...<br />
&nbsp; $this-&gt;initializeOr($element);<br />
}<br />
// Trait.<br />
public function initialize(array &amp;$element) {<br />
&nbsp; ...<br />
&nbsp; parent::initialize($element);<br />
}<br />
// Parent class.<br />
public function initialize(array &amp;$element) {<br />
&nbsp; ...<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="125386""></a>
  <div class="note">
   <strong class="user">guidobelluomo at gmail dot com</strong>
   <a href="#125386" class="date">22-Sep-2020 06:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you override a method which was defined by a trait, calling the parent method will also call the trait's override. Therefore if you need to derive from a class which has a trait, you can extend the class without losing the trait's functionality:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">trait </span><span class="default">ExampleTrait<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">output</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">parent</span><span class="keyword">::</span><span class="default">output</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"bar&lt;br&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
class </span><span class="default">Foo<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">output</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"foo&lt;br&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
class </span><span class="default">FooBar </span><span class="keyword">extends </span><span class="default">Foo<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; use </span><span class="default">ExampleTrait</span><span class="keyword">;<br />
}<br />
<br />
class </span><span class="default">FooBarBaz </span><span class="keyword">extends </span><span class="default">FooBar<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; use </span><span class="default">ExampleTrait</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">output</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">parent</span><span class="keyword">::</span><span class="default">output</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"baz"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
(new </span><span class="default">FooBarBaz</span><span class="keyword">())-&gt;</span><span class="default">output</span><span class="keyword">();<br />
</span><span class="default">?&gt;<br />
</span><br />
Output:<br />
foo<br />
bar<br />
baz</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="123648""></a>
  <div class="note">
   <strong class="user">yeu_ym at yahoo dot com</strong>
   <a href="#123648" class="date">02-Mar-2019 04:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is an example how to work with visiblity and conflicts.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">trait </span><span class="default">A<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; private function </span><span class="default">smallTalk</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">'a'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; private function </span><span class="default">bigTalk</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">'A'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
trait </span><span class="default">B<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; private function </span><span class="default">smallTalk</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">'b'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; private function </span><span class="default">bigTalk</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">'B'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
trait </span><span class="default">C<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">smallTalk</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">'c'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">bigTalk</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">'C'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
class </span><span class="default">Talker<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; use </span><span class="default">A</span><span class="keyword">, </span><span class="default">B</span><span class="keyword">, </span><span class="default">C </span><span class="keyword">{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//visibility for methods that will be involved in conflict resolution<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">B</span><span class="keyword">::</span><span class="default">smallTalk </span><span class="keyword">as public;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">A</span><span class="keyword">::</span><span class="default">bigTalk </span><span class="keyword">as public;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//conflict resolution<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">B</span><span class="keyword">::</span><span class="default">smallTalk </span><span class="keyword">insteadof </span><span class="default">A</span><span class="keyword">, </span><span class="default">C</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">A</span><span class="keyword">::</span><span class="default">bigTalk </span><span class="keyword">insteadof </span><span class="default">B</span><span class="keyword">, </span><span class="default">C</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//aliases with visibility change<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">B</span><span class="keyword">::</span><span class="default">bigTalk </span><span class="keyword">as public </span><span class="default">Btalk</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">A</span><span class="keyword">::</span><span class="default">smallTalk </span><span class="keyword">as public </span><span class="default">asmalltalk</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//aliases only, methods already defined as public<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">C</span><span class="keyword">::</span><span class="default">bigTalk </span><span class="keyword">as </span><span class="default">Ctalk</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">C</span><span class="keyword">::</span><span class="default">smallTalk </span><span class="keyword">as </span><span class="default">cmallstalk</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
}<br />
<br />
(new </span><span class="default">Talker</span><span class="keyword">)-&gt;</span><span class="default">bigTalk</span><span class="keyword">();</span><span class="comment">//A<br />
</span><span class="keyword">(new </span><span class="default">Talker</span><span class="keyword">)-&gt;</span><span class="default">Btalk</span><span class="keyword">();</span><span class="comment">//B<br />
</span><span class="keyword">(new </span><span class="default">Talker</span><span class="keyword">)-&gt;</span><span class="default">Ctalk</span><span class="keyword">();</span><span class="comment">//C<br />
<br />
</span><span class="keyword">(new </span><span class="default">Talker</span><span class="keyword">)-&gt;</span><span class="default">asmalltalk</span><span class="keyword">();</span><span class="comment">//a<br />
</span><span class="keyword">(new </span><span class="default">Talker</span><span class="keyword">)-&gt;</span><span class="default">smallTalk</span><span class="keyword">();</span><span class="comment">//b<br />
</span><span class="keyword">(new </span><span class="default">Talker</span><span class="keyword">)-&gt;</span><span class="default">cmallstalk</span><span class="keyword">();</span><span class="comment">//c</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="122773""></a>
  <div class="note">
   <strong class="user">rawsrc</strong>
   <a href="#122773" class="date">29-May-2018 06:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
About the (Safak Ozpinar / safakozpinar at gmail)'s great note, you can still have the same behavior than inheritance using trait with this approach : <br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">trait </span><span class="default">TestTrait </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public static </span><span class="default">$_bar</span><span class="keyword">;<br />
}<br />
<br />
class </span><span class="default">FooBar </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; use </span><span class="default">TestTrait</span><span class="keyword">;<br />
}<br />
<br />
class </span><span class="default">Foo1 </span><span class="keyword">extends </span><span class="default">FooBar </span><span class="keyword">{<br />
<br />
}<br />
class </span><span class="default">Foo2 </span><span class="keyword">extends </span><span class="default">FooBar </span><span class="keyword">{<br />
<br />
}<br />
</span><span class="default">Foo1</span><span class="keyword">::</span><span class="default">$_bar </span><span class="keyword">= </span><span class="string">'Hello'</span><span class="keyword">;<br />
</span><span class="default">Foo2</span><span class="keyword">::</span><span class="default">$_bar </span><span class="keyword">= </span><span class="string">'World'</span><span class="keyword">;<br />
echo </span><span class="default">Foo1</span><span class="keyword">::</span><span class="default">$_bar </span><span class="keyword">. </span><span class="string">' ' </span><span class="keyword">. </span><span class="default">Foo2</span><span class="keyword">::</span><span class="default">$_bar</span><span class="keyword">; </span><span class="comment">// Prints: World World</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="121823""></a>
  <div class="note">
   <strong class="user">bscheshirwork at gmail dot com</strong>
   <a href="#121823" class="date">03-Nov-2017 02:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
https://3v4l.org/mFuQE<br />
<br />
1. no deprecate if same-class-named method get from trait<br />
2. replace same-named method ba to aa in C<br />
<br />
trait ATrait {<br />
&nbsp;&nbsp;&nbsp; public function a(){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return 'Aa';<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
trait BTrait {<br />
&nbsp;&nbsp;&nbsp; public function a(){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return 'Ba';<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
class C {<br />
&nbsp;&nbsp;&nbsp; use ATrait{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; a as aa;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; use BTrait{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; a as ba;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; public function a() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return static::aa() . static::ba();<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
$o = new C;<br />
echo $o-&gt;a(), "\n";<br />
<br />
class D {<br />
&nbsp;&nbsp;&nbsp; use ATrait{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; ATrait::a as aa;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; use BTrait{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; BTrait::a as ba;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; public function a() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return static::aa() . static::ba();<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
$o = new D;<br />
echo $o-&gt;a(), "\n";<br />
<br />
class E {<br />
&nbsp;&nbsp;&nbsp; use ATrait{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; ATrait::a as aa;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; ATrait::a insteadof BTrait;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; use BTrait{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; BTrait::a as ba;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; public function e() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return static::aa() . static::ba();<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
$o = new E;<br />
echo $o-&gt;e(), "\n";<br />
<br />
class F {<br />
&nbsp;&nbsp;&nbsp; use ATrait{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; a as aa;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; use BTrait{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; a as ba;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; public function f() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return static::aa() . static::ba();<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
$o = new F;<br />
echo $o-&gt;f(), "\n";<br />
<br />
AaAa <br />
AaBa <br />
<br />
Deprecated: Methods with the same name as their class will not be constructors in a future version of PHP; E has a deprecated constructor in /in/mFuQE on line 48 <br />
AaBa <br />
<br />
Fatal error: Trait method a has not been applied, because there are collisions with other trait methods on F in /in/mFuQE on line 65</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="121780""></a>
  <div class="note">
   <strong class="user">katrinaelaine6 at gmail dot com</strong>
   <a href="#121780" class="date">19-Oct-2017 08:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Adding to "atorich at gmail dot com":<br />
<br />
The behavior of the magic constant __CLASS__ when used in traits is as expected if you understand traits and late static binding (<a href="http://php.net/manual/en/language.oop5.late-static-bindings.php" rel="nofollow" target="_blank">http://php.net/manual/en/language.oop5.late-static-bindings.php</a>).<br />
<br />
<span class="default">&lt;?php<br />
<br />
$format </span><span class="keyword">= </span><span class="string">'Class: %-13s | get_class(): %-13s | get_called_class(): %-13s%s'</span><span class="keyword">;<br />
<br />
trait </span><span class="default">TestTrait </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">testMethod</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; global </span><span class="default">$format</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">printf</span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">, </span><span class="default">__CLASS__</span><span class="keyword">, </span><span class="default">get_class</span><span class="keyword">(), </span><span class="default">get_called_class</span><span class="keyword">(), </span><span class="default">PHP_EOL</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; public static function </span><span class="default">testStatic</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; global </span><span class="default">$format</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">printf</span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">, </span><span class="default">__CLASS__</span><span class="keyword">, </span><span class="default">get_class</span><span class="keyword">(), </span><span class="default">get_called_class</span><span class="keyword">(), </span><span class="default">PHP_EOL</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
trait </span><span class="default">DuplicateTrait </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">duplMethod</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; global </span><span class="default">$format</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">printf</span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">, </span><span class="default">__CLASS__</span><span class="keyword">, </span><span class="default">get_class</span><span class="keyword">(), </span><span class="default">get_called_class</span><span class="keyword">(), </span><span class="default">PHP_EOL</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; public static function </span><span class="default">duplStatic</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; global </span><span class="default">$format</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">printf</span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">, </span><span class="default">__CLASS__</span><span class="keyword">, </span><span class="default">get_class</span><span class="keyword">(), </span><span class="default">get_called_class</span><span class="keyword">(), </span><span class="default">PHP_EOL</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
abstract class </span><span class="default">AbstractClass </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; use </span><span class="default">DuplicateTrait</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">absMethod</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; global </span><span class="default">$format</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">printf</span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">, </span><span class="default">__CLASS__</span><span class="keyword">, </span><span class="default">get_class</span><span class="keyword">(), </span><span class="default">get_called_class</span><span class="keyword">(), </span><span class="default">PHP_EOL</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; public static function </span><span class="default">absStatic</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; global </span><span class="default">$format</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">printf</span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">, </span><span class="default">__CLASS__</span><span class="keyword">, </span><span class="default">get_class</span><span class="keyword">(), </span><span class="default">get_called_class</span><span class="keyword">(), </span><span class="default">PHP_EOL</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
class </span><span class="default">BaseClass </span><span class="keyword">extends </span><span class="default">AbstractClass </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; use </span><span class="default">TestTrait</span><span class="keyword">;<br />
}<br />
<br />
class </span><span class="default">TestClass </span><span class="keyword">extends </span><span class="default">BaseClass </span><span class="keyword">{ }<br />
<br />
</span><span class="default">$t </span><span class="keyword">= new </span><span class="default">TestClass</span><span class="keyword">();<br />
<br />
</span><span class="default">$t</span><span class="keyword">-&gt;</span><span class="default">testMethod</span><span class="keyword">();<br />
</span><span class="default">TestClass</span><span class="keyword">::</span><span class="default">testStatic</span><span class="keyword">();<br />
<br />
</span><span class="default">$t</span><span class="keyword">-&gt;</span><span class="default">absMethod</span><span class="keyword">();<br />
</span><span class="default">TestClass</span><span class="keyword">::</span><span class="default">absStatic</span><span class="keyword">();<br />
<br />
</span><span class="default">$t</span><span class="keyword">-&gt;</span><span class="default">duplMethod</span><span class="keyword">();<br />
</span><span class="default">TestClass</span><span class="keyword">::</span><span class="default">duplStatic</span><span class="keyword">();<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Will output:<br />
<br />
Class: BaseClass&nbsp; &nbsp;&nbsp; | get_class(): BaseClass&nbsp; &nbsp;&nbsp; | get_called_class(): TestClass&nbsp; &nbsp; <br />
Class: BaseClass&nbsp; &nbsp;&nbsp; | get_class(): BaseClass&nbsp; &nbsp;&nbsp; | get_called_class(): TestClass&nbsp; &nbsp; <br />
Class: AbstractClass | get_class(): AbstractClass | get_called_class(): TestClass&nbsp; &nbsp; <br />
Class: AbstractClass | get_class(): AbstractClass | get_called_class(): TestClass&nbsp; &nbsp; <br />
Class: AbstractClass | get_class(): AbstractClass | get_called_class(): TestClass&nbsp; &nbsp; <br />
Class: AbstractClass | get_class(): AbstractClass | get_called_class(): TestClass<br />
<br />
Since Traits are considered literal "copying/pasting" of code, it's clear how the methods defined in DuplicateTrait give the same results as the methods defined in AbstractClass.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="120901""></a>
  <div class="note">
   <strong class="user">cody at codysnider dot com</strong>
   <a href="#120901" class="date">30-Mar-2017 03:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
/*<br />
DocBlocks pertaining to the class or trait will NOT be carried over when applying the trait.<br />
<br />
Results trying a couple variations on classes with and without DocBlocks that use a trait with a DocBlock<br />
*/<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">/**<br />
&nbsp;* @Entity<br />
&nbsp;*/<br />
</span><span class="keyword">trait </span><span class="default">Foo<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; protected </span><span class="default">$foo</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">/**<br />
&nbsp;* @HasLifecycleCallbacks<br />
&nbsp;*/<br />
</span><span class="keyword">class </span><span class="default">Bar<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; use </span><span class="default">\Foo</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; protected </span><span class="default">$bar</span><span class="keyword">;<br />
}<br />
<br />
class </span><span class="default">MoreBar<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; use </span><span class="default">\Foo</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; protected </span><span class="default">$moreBar</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$w </span><span class="keyword">= new </span><span class="default">\ReflectionClass</span><span class="keyword">(</span><span class="string">'\Bar'</span><span class="keyword">);<br />
echo </span><span class="default">$w</span><span class="keyword">-&gt;</span><span class="default">getName</span><span class="keyword">() . </span><span class="string">":\r\n"</span><span class="keyword">;<br />
echo </span><span class="default">$w</span><span class="keyword">-&gt;</span><span class="default">getDocComment</span><span class="keyword">() . </span><span class="string">"\r\n\r\n"</span><span class="keyword">;<br />
<br />
</span><span class="default">$x </span><span class="keyword">= new </span><span class="default">\ReflectionClass</span><span class="keyword">(</span><span class="string">'\MoreBar'</span><span class="keyword">);<br />
echo </span><span class="default">$x</span><span class="keyword">-&gt;</span><span class="default">getName</span><span class="keyword">() . </span><span class="string">":\r\n"</span><span class="keyword">;<br />
echo </span><span class="default">$x</span><span class="keyword">-&gt;</span><span class="default">getDocComment</span><span class="keyword">() . </span><span class="string">"\r\n\r\n"</span><span class="keyword">;<br />
<br />
</span><span class="default">$barObj </span><span class="keyword">= new </span><span class="default">\Bar</span><span class="keyword">();<br />
</span><span class="default">$y </span><span class="keyword">= new </span><span class="default">\ReflectionClass</span><span class="keyword">(</span><span class="default">$barObj</span><span class="keyword">);<br />
echo </span><span class="default">$y</span><span class="keyword">-&gt;</span><span class="default">getName</span><span class="keyword">() . </span><span class="string">":\r\n"</span><span class="keyword">;<br />
echo </span><span class="default">$y</span><span class="keyword">-&gt;</span><span class="default">getDocComment</span><span class="keyword">() . </span><span class="string">"\r\n\r\n"</span><span class="keyword">;<br />
<br />
foreach(</span><span class="default">$y</span><span class="keyword">-&gt;</span><span class="default">getTraits</span><span class="keyword">() as </span><span class="default">$traitObj</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$y</span><span class="keyword">-&gt;</span><span class="default">getName</span><span class="keyword">() . </span><span class="string">" "</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$traitObj</span><span class="keyword">-&gt;</span><span class="default">getName</span><span class="keyword">() . </span><span class="string">":\r\n"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$traitObj</span><span class="keyword">-&gt;</span><span class="default">getDocComment</span><span class="keyword">() . </span><span class="string">"\r\n"</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$moreBarObj </span><span class="keyword">= new </span><span class="default">\MoreBar</span><span class="keyword">();<br />
</span><span class="default">$z </span><span class="keyword">= new </span><span class="default">\ReflectionClass</span><span class="keyword">(</span><span class="default">$moreBarObj</span><span class="keyword">);<br />
echo </span><span class="default">$z</span><span class="keyword">-&gt;</span><span class="default">getName</span><span class="keyword">() . </span><span class="string">" "</span><span class="keyword">;<br />
echo </span><span class="default">$z</span><span class="keyword">-&gt;</span><span class="default">getDocComment</span><span class="keyword">() . </span><span class="string">"\r\n\r\n"</span><span class="keyword">;<br />
<br />
foreach(</span><span class="default">$z</span><span class="keyword">-&gt;</span><span class="default">getTraits</span><span class="keyword">() as </span><span class="default">$traitObj</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$z</span><span class="keyword">-&gt;</span><span class="default">getName</span><span class="keyword">() . </span><span class="string">" "</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$traitObj</span><span class="keyword">-&gt;</span><span class="default">getName</span><span class="keyword">() . </span><span class="string">":\r\n"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$traitObj</span><span class="keyword">-&gt;</span><span class="default">getDocComment</span><span class="keyword">() . </span><span class="string">"\r\n"</span><span class="keyword">;<br />
}</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="120038""></a>
  <div class="note">
   <strong class="user">marko at newvibrations dot net</strong>
   <a href="#120038" class="date">13-Oct-2016 12:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As already noted, static properties and methods in trait could be accessed directly using trait. Since trait is language assisted c/p, you should be aware that static property from trait will be initialized to the value trait property had in the time of class declaration. <br />
<br />
Example:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">trait </span><span class="default">Beer </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; protected static </span><span class="default">$type </span><span class="keyword">= </span><span class="string">'Light'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; public static function </span><span class="default">printed</span><span class="keyword">(){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo static::</span><span class="default">$type</span><span class="keyword">.</span><span class="default">PHP_EOL</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; public static function </span><span class="default">setType</span><span class="keyword">(</span><span class="default">$type</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; static::</span><span class="default">$type </span><span class="keyword">= </span><span class="default">$type</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
class </span><span class="default">Ale </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; use </span><span class="default">Beer</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">Beer</span><span class="keyword">::</span><span class="default">setType</span><span class="keyword">(</span><span class="string">"Dark"</span><span class="keyword">);<br />
<br />
class </span><span class="default">Lager </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; use </span><span class="default">Beer</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">Beer</span><span class="keyword">::</span><span class="default">setType</span><span class="keyword">(</span><span class="string">"Amber"</span><span class="keyword">);<br />
<br />
</span><span class="default">header</span><span class="keyword">(</span><span class="string">"Content-type: text/plain"</span><span class="keyword">);<br />
<br />
</span><span class="default">Beer</span><span class="keyword">::</span><span class="default">printed</span><span class="keyword">();&nbsp; </span><span class="comment">// Prints: Amber<br />
</span><span class="default">Ale</span><span class="keyword">::</span><span class="default">printed</span><span class="keyword">();&nbsp;&nbsp; </span><span class="comment">// Prints: Light<br />
</span><span class="default">Lager</span><span class="keyword">::</span><span class="default">printed</span><span class="keyword">(); </span><span class="comment">// Prints: Dark<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="119872""></a>
  <div class="note">
   <strong class="user">canufrank</strong>
   <a href="#119872" class="date">10-Sep-2016 06:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A number of the notes make incorrect assertions about trait behaviour because they do not extend the class.<br />
<br />
So, while "Unlike inheritance; if a trait has static properties, each class using that trait has independent instances of those properties.<br />
<br />
Example using parent class:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">TestClass </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public static </span><span class="default">$_bar</span><span class="keyword">;<br />
}<br />
class </span><span class="default">Foo1 </span><span class="keyword">extends </span><span class="default">TestClass </span><span class="keyword">{ }<br />
class </span><span class="default">Foo2 </span><span class="keyword">extends </span><span class="default">TestClass </span><span class="keyword">{ }<br />
</span><span class="default">Foo1</span><span class="keyword">::</span><span class="default">$_bar </span><span class="keyword">= </span><span class="string">'Hello'</span><span class="keyword">;<br />
</span><span class="default">Foo2</span><span class="keyword">::</span><span class="default">$_bar </span><span class="keyword">= </span><span class="string">'World'</span><span class="keyword">;<br />
echo </span><span class="default">Foo1</span><span class="keyword">::</span><span class="default">$_bar </span><span class="keyword">. </span><span class="string">' ' </span><span class="keyword">. </span><span class="default">Foo2</span><span class="keyword">::</span><span class="default">$_bar</span><span class="keyword">; </span><span class="comment">// Prints: World World<br />
</span><span class="default">?&gt;<br />
</span><br />
Example using trait:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">trait </span><span class="default">TestTrait </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public static </span><span class="default">$_bar</span><span class="keyword">;<br />
}<br />
class </span><span class="default">Foo1 </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; use </span><span class="default">TestTrait</span><span class="keyword">;<br />
}<br />
class </span><span class="default">Foo2 </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; use </span><span class="default">TestTrait</span><span class="keyword">;<br />
}<br />
</span><span class="default">Foo1</span><span class="keyword">::</span><span class="default">$_bar </span><span class="keyword">= </span><span class="string">'Hello'</span><span class="keyword">;<br />
</span><span class="default">Foo2</span><span class="keyword">::</span><span class="default">$_bar </span><span class="keyword">= </span><span class="string">'World'</span><span class="keyword">;<br />
echo </span><span class="default">Foo1</span><span class="keyword">::</span><span class="default">$_bar </span><span class="keyword">. </span><span class="string">' ' </span><span class="keyword">. </span><span class="default">Foo2</span><span class="keyword">::</span><span class="default">$_bar</span><span class="keyword">; </span><span class="comment">// Prints: Hello World<br />
</span><span class="default">?&gt;</span>"<br />
<br />
shows a correct example, simply adding<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">require_once(</span><span class="string">'above'</span><span class="keyword">);<br />
class </span><span class="default">Foo3 </span><span class="keyword">extends </span><span class="default">Foo2 </span><span class="keyword">{<br />
}<br />
</span><span class="default">Foo3</span><span class="keyword">::</span><span class="default">$_bar </span><span class="keyword">= </span><span class="string">'news'</span><span class="keyword">;<br />
echo </span><span class="default">Foo1</span><span class="keyword">::</span><span class="default">$_bar </span><span class="keyword">. </span><span class="string">' ' </span><span class="keyword">. </span><span class="default">Foo2</span><span class="keyword">::</span><span class="default">$_bar </span><span class="keyword">. </span><span class="string">' ' </span><span class="keyword">. </span><span class="default">Foo3</span><span class="keyword">::</span><span class="default">$_bar</span><span class="keyword">; <br />
<br />
</span><span class="comment">// Prints: Hello news news<br />
<br />
</span><span class="default">I think the best conceptual model of an incorporated </span><span class="keyword">trait </span><span class="default">is an advanced insertion of text</span><span class="keyword">, or as </span><span class="default">someone put it </span><span class="string">"language assisted copy and paste." </span><span class="keyword">If </span><span class="default">Foo1 </span><span class="keyword">and </span><span class="default">Foo2 were defined with $_bar</span><span class="keyword">, </span><span class="default">you would not expect them to share the instance</span><span class="keyword">. </span><span class="default">Similarly</span><span class="keyword">, </span><span class="default">you would expect Foo3 to share with Foo2</span><span class="keyword">, and </span><span class="default">it does</span><span class="keyword">.<br />
<br />
</span><span class="default">Viewing this way explains away a lot of&nbsp; the </span><span class="string">'quirks' </span><span class="default">that are observed above with </span><span class="keyword">final, or </span><span class="default">subsequently declared </span><span class="keyword">private </span><span class="default">vars</span><span class="keyword">,</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="119077""></a>
  <div class="note">
   <strong class="user">Carlos Alberto Bertholdo Carucce</strong>
   <a href="#119077" class="date">29-Mar-2016 06:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to resolve name conflicts and also change the visibility of a trait method, you'll need to declare both in the same line:<br />
<br />
trait testTrait{<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; public function test(){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo 'trait test';<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
}<br />
<br />
class myClass{<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; use testTrait {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; testTrait::test as private testTraitF;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; public function test(){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo 'class test';<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo '&lt;br/&gt;';<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $this-&gt;testTraitF();<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
}<br />
<br />
$obj = new myClass(); <br />
$obj-&gt;test(); //prints both 'trait test' and 'class test'<br />
$obj-&gt;testTraitF(); //The method is not accessible (Fatal error: Call to private method myClass::testTraitF() )</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="118718""></a>
  <div class="note">
   <strong class="user">balbuf</strong>
   <a href="#118718" class="date">25-Jan-2016 03:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
(It's already been said, but for the sake of searching on the word "relative"...)<br />
<br />
The "use" keyword to import a trait into a class will resolve relative to the current namespace and therefore should include a leading slash to represent a full path, whereas "use" at the namespace level is always absolute.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="116907""></a>
  <div class="note">
   <strong class="user">qeremy (!) gmail</strong>
   <a href="#116907" class="date">19-Mar-2015 10:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Keep in mind; "final" keyword is useless in traits when directly using them, unlike extending classes / abstract classes.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">trait </span><span class="default">Foo </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; final public function </span><span class="default">hello</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">) { print </span><span class="string">"</span><span class="default">$s</span><span class="string">, hello!"</span><span class="keyword">; }<br />
}<br />
class </span><span class="default">Bar </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; use </span><span class="default">Foo</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Overwrite, no error<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">final public function </span><span class="default">hello</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">) { print </span><span class="string">"hello, </span><span class="default">$s</span><span class="string">!"</span><span class="keyword">; }<br />
}<br />
<br />
abstract class </span><span class="default">Foo </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; final public function </span><span class="default">hello</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">) { print </span><span class="string">"</span><span class="default">$s</span><span class="string">, hello!"</span><span class="keyword">; }<br />
}<br />
class </span><span class="default">Bar </span><span class="keyword">extends </span><span class="default">Foo </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Fatal error: Cannot override final method Foo::hello() in ..<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">final public function </span><span class="default">hello</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">) { print </span><span class="string">"hello, </span><span class="default">$s</span><span class="string">!"</span><span class="keyword">; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
But this way will finalize trait methods as expected;<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">trait </span><span class="default">FooTrait </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; final public function </span><span class="default">hello</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">) { print </span><span class="string">"</span><span class="default">$s</span><span class="string">, hello!"</span><span class="keyword">; }<br />
}<br />
abstract class </span><span class="default">Foo </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; use </span><span class="default">FooTrait</span><span class="keyword">;<br />
}<br />
class </span><span class="default">Bar </span><span class="keyword">extends </span><span class="default">Foo </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Fatal error: Cannot override final method Foo::hello() in ..<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">final public function </span><span class="default">hello</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">) { print </span><span class="string">"hello, </span><span class="default">$s</span><span class="string">!"</span><span class="keyword">; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="116895""></a>
  <div class="note">
   <strong class="user">84td84 at gmail dot com</strong>
   <a href="#116895" class="date">17-Mar-2015 01:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A note to 'Beispiel #9 Statische Variablen'. A trait can also have a static property:<br />
<br />
trait Counter {<br />
&nbsp;&nbsp;&nbsp; static $trvar=1;<br />
<br />
&nbsp;&nbsp;&nbsp; public static function stfunc() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo "Hello world!"<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
class C1 {<br />
&nbsp;&nbsp;&nbsp; use Counter;<br />
}<br />
<br />
print "\nTRVAR: " . C1::$trvar . "\n";&nbsp;&nbsp; //prints 1<br />
<br />
$obj = new C1();<br />
C1::stfunc();&nbsp;&nbsp; //prints&nbsp; Hello world!<br />
$obj-&gt;stfunc();&nbsp;&nbsp; //prints Hello world!<br />
<br />
A static property (trvar) can only be accessed using the classname (C1).<br />
But a static function (stfunc) can be accessed using the classname or the instance ($obj).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="115125""></a>
  <div class="note">
   <strong class="user">Kristof</strong>
   <a href="#115125" class="date">30-May-2014 11:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
don't forget you can create complex (embedded) traits as well<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">trait </span><span class="default">Name </span><span class="keyword">{<br />
&nbsp; </span><span class="comment">// ...<br />
</span><span class="keyword">}<br />
trait </span><span class="default">Address </span><span class="keyword">{<br />
&nbsp; </span><span class="comment">// ...<br />
</span><span class="keyword">}<br />
trait </span><span class="default">Telephone </span><span class="keyword">{<br />
&nbsp; </span><span class="comment">// ...<br />
</span><span class="keyword">}<br />
trait </span><span class="default">Contact </span><span class="keyword">{<br />
&nbsp; use </span><span class="default">Name</span><span class="keyword">, </span><span class="default">Address</span><span class="keyword">, </span><span class="default">Telephone</span><span class="keyword">;<br />
}<br />
class </span><span class="default">Customer </span><span class="keyword">{<br />
&nbsp; use </span><span class="default">Contact</span><span class="keyword">;<br />
}<br />
class </span><span class="default">Invoce </span><span class="keyword">{<br />
&nbsp; use </span><span class="default">Contact</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114383""></a>
  <div class="note">
   <strong class="user">qschuler at neosyne dot com</strong>
   <a href="#114383" class="date">14-Feb-2014 08:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that you can omit a method's inclusion by excluding it from one trait in favor of the other and doing the exact same thing in the reverse way.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">trait </span><span class="default">A </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">sayHello</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">'Hello from A'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">sayWorld</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">'World from A'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
trait </span><span class="default">B </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">sayHello</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">'Hello from B'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">sayWorld</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">'World from B'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
class </span><span class="default">Talker </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; use </span><span class="default">A</span><span class="keyword">, </span><span class="default">B </span><span class="keyword">{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">A</span><span class="keyword">::</span><span class="default">sayHello </span><span class="keyword">insteadof </span><span class="default">B</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">A</span><span class="keyword">::</span><span class="default">sayWorld </span><span class="keyword">insteadof </span><span class="default">B</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">B</span><span class="keyword">::</span><span class="default">sayWorld </span><span class="keyword">insteadof </span><span class="default">A</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">$talker </span><span class="keyword">= new </span><span class="default">Talker</span><span class="keyword">();<br />
</span><span class="default">$talker</span><span class="keyword">-&gt;</span><span class="default">sayHello</span><span class="keyword">();<br />
</span><span class="default">$talker</span><span class="keyword">-&gt;</span><span class="default">sayWorld</span><span class="keyword">();<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
The method sayHello is imported, but the method sayWorld is simply excluded.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113047""></a>
  <div class="note">
   <strong class="user">Stefan W</strong>
   <a href="#113047" class="date">22-Aug-2013 10:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that the "use" operator for traits (inside a class) and the "use" operator for namespaces (outside the class) resolve names differently. "use" for namespaces always sees its arguments as absolute (starting at the global namespace):<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">namespace </span><span class="default">Foo\Bar</span><span class="keyword">;<br />
use </span><span class="default">Foo\Test</span><span class="keyword">;&nbsp; </span><span class="comment">// means \Foo\Test - the initial \ is optional<br />
</span><span class="default">?&gt;<br />
</span><br />
On the other hand, "use" for traits respects the current namespace:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">namespace </span><span class="default">Foo\Bar</span><span class="keyword">;<br />
class </span><span class="default">SomeClass </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; use </span><span class="default">Foo\Test</span><span class="keyword">;&nbsp;&nbsp; </span><span class="comment">// means \Foo\Bar\Foo\Test<br />
</span><span class="keyword">}<br />
</span><span class="default">?&gt;<br />
</span><br />
Together with "use" for closures, there are now three different "use" operators. They all mean different things and behave differently.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112295""></a>
  <div class="note">
   <strong class="user">Oddant</strong>
   <a href="#112295" class="date">29-May-2013 03:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I think it's obvious to notice that using 'use' followed by the traits name must be seen as just copying/pasting lines of code into the place where they are used.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="110521""></a>
  <div class="note">
   <strong class="user">D. Marti</strong>
   <a href="#110521" class="date">01-Nov-2012 03:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Traits are useful for strategies, when you want the same data to be handled (filtered, sorted, etc) differently.<br />
<br />
For example, you have a list of products that you want to filter out based on some criteria (brands, specs, whatever), or sorted by different means (price, label, whatever). You can create a sorting trait that contains different functions for different sorting types (numeric, string, date, etc). You can then use this trait not only in your product class (as given in the example), but also in other classes that need similar strategies (to apply a numeric sort to some data, etc).<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">trait </span><span class="default">SortStrategy </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; private </span><span class="default">$sort_field </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; private function </span><span class="default">string_asc</span><span class="keyword">(</span><span class="default">$item1</span><span class="keyword">, </span><span class="default">$item2</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">strnatcmp</span><span class="keyword">(</span><span class="default">$item1</span><span class="keyword">[</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">sort_field</span><span class="keyword">], </span><span class="default">$item2</span><span class="keyword">[</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">sort_field</span><span class="keyword">]);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; private function </span><span class="default">string_desc</span><span class="keyword">(</span><span class="default">$item1</span><span class="keyword">, </span><span class="default">$item2</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">strnatcmp</span><span class="keyword">(</span><span class="default">$item2</span><span class="keyword">[</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">sort_field</span><span class="keyword">], </span><span class="default">$item1</span><span class="keyword">[</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">sort_field</span><span class="keyword">]);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; private function </span><span class="default">num_asc</span><span class="keyword">(</span><span class="default">$item1</span><span class="keyword">, </span><span class="default">$item2</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$item1</span><span class="keyword">[</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">sort_field</span><span class="keyword">] == </span><span class="default">$item2</span><span class="keyword">[</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">sort_field</span><span class="keyword">]) return </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return (</span><span class="default">$item1</span><span class="keyword">[</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">sort_field</span><span class="keyword">] &lt; </span><span class="default">$item2</span><span class="keyword">[</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">sort_field</span><span class="keyword">] ? -</span><span class="default">1 </span><span class="keyword">: </span><span class="default">1 </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; private function </span><span class="default">num_desc</span><span class="keyword">(</span><span class="default">$item1</span><span class="keyword">, </span><span class="default">$item2</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$item1</span><span class="keyword">[</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">sort_field</span><span class="keyword">] == </span><span class="default">$item2</span><span class="keyword">[</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">sort_field</span><span class="keyword">]) return </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return (</span><span class="default">$item1</span><span class="keyword">[</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">sort_field</span><span class="keyword">] &gt; </span><span class="default">$item2</span><span class="keyword">[</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">sort_field</span><span class="keyword">] ? -</span><span class="default">1 </span><span class="keyword">: </span><span class="default">1 </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; private function </span><span class="default">date_asc</span><span class="keyword">(</span><span class="default">$item1</span><span class="keyword">, </span><span class="default">$item2</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$date1 </span><span class="keyword">= </span><span class="default">intval</span><span class="keyword">(</span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'-'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$item1</span><span class="keyword">[</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">sort_field</span><span class="keyword">]));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$date2 </span><span class="keyword">= </span><span class="default">intval</span><span class="keyword">(</span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'-'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$item2</span><span class="keyword">[</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">sort_field</span><span class="keyword">]));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$date1 </span><span class="keyword">== </span><span class="default">$date2</span><span class="keyword">) return </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return (</span><span class="default">$date1 </span><span class="keyword">&lt; </span><span class="default">$date2 </span><span class="keyword">? -</span><span class="default">1 </span><span class="keyword">: </span><span class="default">1 </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; private function </span><span class="default">date_desc</span><span class="keyword">(</span><span class="default">$item1</span><span class="keyword">, </span><span class="default">$item2</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$date1 </span><span class="keyword">= </span><span class="default">intval</span><span class="keyword">(</span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'-'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$item1</span><span class="keyword">[</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">sort_field</span><span class="keyword">]));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$date2 </span><span class="keyword">= </span><span class="default">intval</span><span class="keyword">(</span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'-'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$item2</span><span class="keyword">[</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">sort_field</span><span class="keyword">]));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$date1 </span><span class="keyword">== </span><span class="default">$date2</span><span class="keyword">) return </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return (</span><span class="default">$date1 </span><span class="keyword">&gt; </span><span class="default">$date2 </span><span class="keyword">? -</span><span class="default">1 </span><span class="keyword">: </span><span class="default">1 </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
class </span><span class="default">Product </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$data </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; use </span><span class="default">SortStrategy</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">get</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// do something to get the data, for this ex. I just included an array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">data </span><span class="keyword">= array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">101222 </span><span class="keyword">=&gt; array(</span><span class="string">'label' </span><span class="keyword">=&gt; </span><span class="string">'Awesome product'</span><span class="keyword">, </span><span class="string">'price' </span><span class="keyword">=&gt; </span><span class="default">10.50</span><span class="keyword">, </span><span class="string">'date_added' </span><span class="keyword">=&gt; </span><span class="string">'2012-02-01'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">101232 </span><span class="keyword">=&gt; array(</span><span class="string">'label' </span><span class="keyword">=&gt; </span><span class="string">'Not so awesome product'</span><span class="keyword">, </span><span class="string">'price' </span><span class="keyword">=&gt; </span><span class="default">5.20</span><span class="keyword">, </span><span class="string">'date_added' </span><span class="keyword">=&gt; </span><span class="string">'2012-03-20'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">101241 </span><span class="keyword">=&gt; array(</span><span class="string">'label' </span><span class="keyword">=&gt; </span><span class="string">'Pretty neat product'</span><span class="keyword">, </span><span class="string">'price' </span><span class="keyword">=&gt; </span><span class="default">9.65</span><span class="keyword">, </span><span class="string">'date_added' </span><span class="keyword">=&gt; </span><span class="string">'2012-04-15'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">101256 </span><span class="keyword">=&gt; array(</span><span class="string">'label' </span><span class="keyword">=&gt; </span><span class="string">'Freakishly cool product'</span><span class="keyword">, </span><span class="string">'price' </span><span class="keyword">=&gt; </span><span class="default">12.55</span><span class="keyword">, </span><span class="string">'date_added' </span><span class="keyword">=&gt; </span><span class="string">'2012-01-11'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">101219 </span><span class="keyword">=&gt; array(</span><span class="string">'label' </span><span class="keyword">=&gt; </span><span class="string">'Meh product'</span><span class="keyword">, </span><span class="string">'price' </span><span class="keyword">=&gt; </span><span class="default">3.69</span><span class="keyword">, </span><span class="string">'date_added' </span><span class="keyword">=&gt; </span><span class="string">'2012-06-11'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; );<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">sort_by</span><span class="keyword">(</span><span class="default">$by </span><span class="keyword">= </span><span class="string">'price'</span><span class="keyword">, </span><span class="default">$type </span><span class="keyword">= </span><span class="string">'asc'</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/^(asc|desc)$/'</span><span class="keyword">, </span><span class="default">$type</span><span class="keyword">)) </span><span class="default">$type </span><span class="keyword">= </span><span class="string">'asc'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; switch (</span><span class="default">$by</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="string">'name'</span><span class="keyword">:<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">sort_field </span><span class="keyword">= </span><span class="string">'label'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">uasort</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">data</span><span class="keyword">, array(</span><span class="string">'Product'</span><span class="keyword">, </span><span class="string">'string_'</span><span class="keyword">.</span><span class="default">$type</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="string">'date'</span><span class="keyword">:<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">sort_field </span><span class="keyword">= </span><span class="string">'date_added'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">uasort</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">data</span><span class="keyword">, array(</span><span class="string">'Product'</span><span class="keyword">, </span><span class="string">'date_'</span><span class="keyword">.</span><span class="default">$type</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; default:<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">sort_field </span><span class="keyword">= </span><span class="string">'price'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">uasort</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">data</span><span class="keyword">, array(</span><span class="string">'Product'</span><span class="keyword">, </span><span class="string">'num_'</span><span class="keyword">.</span><span class="default">$type</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">$product </span><span class="keyword">= new </span><span class="default">Product</span><span class="keyword">();<br />
</span><span class="default">$product</span><span class="keyword">-&gt;</span><span class="default">get</span><span class="keyword">();<br />
</span><span class="default">$product</span><span class="keyword">-&gt;</span><span class="default">sort_by</span><span class="keyword">(</span><span class="string">'name'</span><span class="keyword">);<br />
echo </span><span class="string">'&lt;pre&gt;'</span><span class="keyword">.</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$product</span><span class="keyword">-&gt;</span><span class="default">data</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">).</span><span class="string">'&lt;/pre&gt;'</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="110195""></a>
  <div class="note">
   <strong class="user">artur at webprojektant dot pl</strong>
   <a href="#110195" class="date">28-Sep-2012 06:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Trait can not have the same name as class because it will&nbsp; show: Fatal error: Cannot redeclare class</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="109508""></a>
  <div class="note">
   <strong class="user">t8 at  AT pobox dot com</strong>
   <a href="#109508" class="date">23-Jul-2012 08:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Another difference with traits vs inheritance is that methods defined in traits can access methods and properties of the class they're used in, including private ones.<br />
<br />
For example:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">trait </span><span class="default">MyTrait<br />
</span><span class="keyword">{<br />
&nbsp; protected function </span><span class="default">accessVar</span><span class="keyword">()<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">var</span><span class="keyword">;<br />
&nbsp; }<br />
<br />
}<br />
<br />
class </span><span class="default">TraitUser<br />
</span><span class="keyword">{<br />
&nbsp; use </span><span class="default">MyTrait</span><span class="keyword">;<br />
<br />
&nbsp; private </span><span class="default">$var </span><span class="keyword">= </span><span class="string">'var'</span><span class="keyword">;<br />
<br />
&nbsp; public function </span><span class="default">getVar</span><span class="keyword">()<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">accessVar</span><span class="keyword">();<br />
&nbsp; }<br />
}<br />
<br />
</span><span class="default">$t </span><span class="keyword">= new </span><span class="default">TraitUser</span><span class="keyword">();<br />
echo </span><span class="default">$t</span><span class="keyword">-&gt;</span><span class="default">getVar</span><span class="keyword">(); </span><span class="comment">// -&gt; 'var'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="108293""></a>
  <div class="note">
   <strong class="user">ryan at derokorian dot com</strong>
   <a href="#108293" class="date">15-Apr-2012 02:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Simple singleton trait.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">trait </span><span class="default">singleton </span><span class="keyword">{&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * private construct, generally defined by using class<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; //private function __construct() {}<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public static function </span><span class="default">getInstance</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; static </span><span class="default">$_instance </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$class </span><span class="keyword">= </span><span class="default">__CLASS__</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$_instance </span><span class="keyword">?: </span><span class="default">$_instance </span><span class="keyword">= new </span><span class="default">$class</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">__clone</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="string">'Cloning '</span><span class="keyword">.</span><span class="default">__CLASS__</span><span class="keyword">.</span><span class="string">' is not allowed.'</span><span class="keyword">,</span><span class="default">E_USER_ERROR</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">__wakeup</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="string">'Unserializing '</span><span class="keyword">.</span><span class="default">__CLASS__</span><span class="keyword">.</span><span class="string">' is not allowed.'</span><span class="keyword">,</span><span class="default">E_USER_ERROR</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="comment">/**<br />
&nbsp;* Example Usage<br />
&nbsp;*/<br />
<br />
</span><span class="keyword">class </span><span class="default">foo </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; use </span><span class="default">singleton</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; private function </span><span class="default">__construct</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">name </span><span class="keyword">= </span><span class="string">'foo'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
class </span><span class="default">bar </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; use </span><span class="default">singleton</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; private function </span><span class="default">__construct</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">name </span><span class="keyword">= </span><span class="string">'bar'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">$foo </span><span class="keyword">= </span><span class="default">foo</span><span class="keyword">::</span><span class="default">getInstance</span><span class="keyword">();<br />
echo </span><span class="default">$foo</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">;<br />
<br />
</span><span class="default">$bar </span><span class="keyword">= </span><span class="default">bar</span><span class="keyword">::</span><span class="default">getInstance</span><span class="keyword">();<br />
echo </span><span class="default">$bar</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107965""></a>
  <div class="note">
   <strong class="user">Safak Ozpinar / safakozpinar at gmail</strong>
   <a href="#107965" class="date">18-Mar-2012 03:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Unlike inheritance; if a trait has static properties, each class using that trait has independent instances of those properties.<br />
<br />
Example using parent class:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">TestClass </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public static </span><span class="default">$_bar</span><span class="keyword">;<br />
}<br />
class </span><span class="default">Foo1 </span><span class="keyword">extends </span><span class="default">TestClass </span><span class="keyword">{ }<br />
class </span><span class="default">Foo2 </span><span class="keyword">extends </span><span class="default">TestClass </span><span class="keyword">{ }<br />
</span><span class="default">Foo1</span><span class="keyword">::</span><span class="default">$_bar </span><span class="keyword">= </span><span class="string">'Hello'</span><span class="keyword">;<br />
</span><span class="default">Foo2</span><span class="keyword">::</span><span class="default">$_bar </span><span class="keyword">= </span><span class="string">'World'</span><span class="keyword">;<br />
echo </span><span class="default">Foo1</span><span class="keyword">::</span><span class="default">$_bar </span><span class="keyword">. </span><span class="string">' ' </span><span class="keyword">. </span><span class="default">Foo2</span><span class="keyword">::</span><span class="default">$_bar</span><span class="keyword">; </span><span class="comment">// Prints: World World<br />
</span><span class="default">?&gt;<br />
</span><br />
Example using trait:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">trait </span><span class="default">TestTrait </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public static </span><span class="default">$_bar</span><span class="keyword">;<br />
}<br />
class </span><span class="default">Foo1 </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; use </span><span class="default">TestTrait</span><span class="keyword">;<br />
}<br />
class </span><span class="default">Foo2 </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; use </span><span class="default">TestTrait</span><span class="keyword">;<br />
}<br />
</span><span class="default">Foo1</span><span class="keyword">::</span><span class="default">$_bar </span><span class="keyword">= </span><span class="string">'Hello'</span><span class="keyword">;<br />
</span><span class="default">Foo2</span><span class="keyword">::</span><span class="default">$_bar </span><span class="keyword">= </span><span class="string">'World'</span><span class="keyword">;<br />
echo </span><span class="default">Foo1</span><span class="keyword">::</span><span class="default">$_bar </span><span class="keyword">. </span><span class="string">' ' </span><span class="keyword">. </span><span class="default">Foo2</span><span class="keyword">::</span><span class="default">$_bar</span><span class="keyword">; </span><span class="comment">// Prints: Hello World<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107735""></a>
  <div class="note">
   <strong class="user">Edward</strong>
   <a href="#107735" class="date">01-Mar-2012 03:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The difference between Traits and multiple inheritance is in the inheritance part.&nbsp;&nbsp; A trait is not inherited from, but rather included or mixed-in, thus becoming part of "this class".&nbsp;&nbsp; Traits also provide a more controlled means of resolving conflicts that inevitably arise when using multiple inheritance in the few languages that support them (C++).&nbsp; Most modern languages are going the approach of a "traits" or "mixin" style system as opposed to multiple-inheritance, largely due to the ability to control ambiguities if a method is declared in multiple "mixed-in" classes.<br />
<br />
Also, one can not "inherit" static member functions in multiple-inheritance.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107548""></a>
  <div class="note">
   <strong class="user">greywire at gmail dot com</strong>
   <a href="#107548" class="date">16-Feb-2012 07:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The best way to understand what traits are and how to use them is to look at them for what they essentially are:&nbsp; language assisted copy and paste.<br />
<br />
If you can copy and paste the code from one class to another (and we've all done this, even though we try not to because its code duplication) then you have a candidate for a trait.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106958""></a>
  <div class="note">
   <strong class="user">chris dot rutledge at gmail dot com</strong>
   <a href="#106958" class="date">21-Dec-2011 12:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It may be worth noting here that the magic constant __CLASS__ becomes even more magical - __CLASS__ will return the name of the class in which the trait is being used.<br />
<br />
for example<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">trait </span><span class="default">sayWhere </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">whereAmI</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="default">__CLASS__</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
class </span><span class="default">Hello </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; use </span><span class="default">sayWHere</span><span class="keyword">;<br />
}<br />
<br />
class </span><span class="default">World </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; use </span><span class="default">sayWHere</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$a </span><span class="keyword">= new </span><span class="default">Hello</span><span class="keyword">;<br />
</span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">whereAmI</span><span class="keyword">(); </span><span class="comment">//Hello<br />
<br />
</span><span class="default">$b </span><span class="keyword">= new </span><span class="default">World</span><span class="keyword">;<br />
</span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">whereAmI</span><span class="keyword">(); </span><span class="comment">//World<br />
</span><span class="default">?&gt;<br />
</span><br />
The magic constant __TRAIT__ will giev you the name of the trait</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
