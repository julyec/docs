<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=UTF-8">
  <title>Send an email message</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.imap-mail-move.html">? imap_mail_move</a></li>
      <li style="float: right;"><a href="function.imap-mailboxmsginfo.html">imap_mailboxmsginfo ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.imap.html">IMAP 函数</a></li>
    <li>Send an email message</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.imap-mail" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">imap_mail</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">imap_mail</span> &mdash; <span class="dc-title">Send an email message</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.imap-mail-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>imap_mail</strong></span>(<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">string</span> <code class="parameter">$to</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">string</span> <code class="parameter">$subject</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">string</span> <code class="parameter">$message</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">?</span><span class="type"><span class="type">string</span><span class="type"></span></span> <code class="parameter">$additional_headers</code><span class="initializer"> = <strong><code>null</code></strong></span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">?</span><span class="type"><span class="type">string</span><span class="type"></span></span> <code class="parameter">$cc</code><span class="initializer"> = <strong><code>null</code></strong></span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">?</span><span class="type"><span class="type">string</span><span class="type"></span></span> <code class="parameter">$bcc</code><span class="initializer"> = <strong><code>null</code></strong></span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">?</span><span class="type"><span class="type">string</span><span class="type"></span></span> <code class="parameter">$return_path</code><span class="initializer"> = <strong><code>null</code></strong></span></span><br>): <span class="type">bool</span></div>

  <p class="para rdfs-comment">
   This function allows sending of emails with correct handling of
   Cc and Bcc receivers. 
  </p>
  <p class="para">
   The parameters <code class="parameter">to</code>, <code class="parameter">cc</code>
   and <code class="parameter">bcc</code> are all strings and are all parsed
   as <a href="http://www.faqs.org/rfcs/rfc822" class="link external" title="Link : http://www.faqs.org/rfcs/rfc822">&raquo;&nbsp;RFC822</a> address lists.
  </p>
 </div>

 <div class="refsect1 parameters" id="refsect1-function.imap-mail-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">to</code></dt>

     <dd>

      <p class="para">
       The receiver
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">subject</code></dt>

     <dd>

      <p class="para">
       The mail subject
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">message</code></dt>

     <dd>

      <p class="para">
       The mail body, see <span class="function"><a href="function.imap-mail-compose.html" class="function">imap_mail_compose()</a></span>
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">additional_headers</code></dt>

     <dd>

      <p class="para">
       As string with additional headers to be set on the mail
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">cc</code></dt>

     <dd>

      <p class="para">
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">bcc</code></dt>

     <dd>

      <p class="para">
       The receivers specified in <code class="parameter">bcc</code> will get the
       mail, but are excluded from the headers.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">return_path</code></dt>

     <dd>

      <p class="para">
       Use this parameter to specify return path upon mail delivery failure.
       This is useful when using PHP as a mail client for multiple users.
      </p>
     </dd>

    
   </dl>

  </p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.imap-mail-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   成功时返回 <strong><code>true</code></strong>， 或者在失败时返回 <strong><code>false</code></strong>。
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.imap-mail-changelog">
  <h3 class="title">更新日志</h3>
  <table class="doctable informaltable">
   
    <thead>
     <tr>
      <th>版本</th>
      <th>说明</th>
     </tr>

    </thead>

    <tbody class="tbody">
     <tr>
      <td>8.0.0</td>
      <td>
       <code class="parameter">additional_headers</code>, <code class="parameter">cc</code>,
       <code class="parameter">bcc</code>, and <code class="parameter">return_path</code> are now nullable.
      </td>
     </tr>

    </tbody>
   
  </table>

 </div>


 <div class="refsect1 seealso" id="refsect1-function.imap-mail-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.mail.html" class="function" rel="rdfs-seeAlso">mail()</a> - 发送邮件</span></li>
    <li class="member"><span class="function"><a href="function.imap-mail-compose.html" class="function" rel="rdfs-seeAlso">imap_mail_compose()</a> - Create a MIME message based on given envelope and body sections</span></li>
   </ul>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="122267""></a>
  <div class="note">
   <strong class="user">Patanjali</strong>
   <a href="#122267" class="date">13-Jan-2018 08:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In response to Mathias Rav's comment.<br />
<br />
While imap_mail might have this $rpath bug, it is hardly comparable to mail, because mail only uses the default send mail server account, and not a real mailbox, which you can programmatically interrogate and clean up.<br />
<br />
Using the imap extension allows proper mail management and operation, like users not getting the cryptic server account name followed by 'on behalf of' the 'From' address that mail sourced emails show on some recipient clients.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="91693""></a>
  <div class="note">
   <strong class="user">Mathias Rav</strong>
   <a href="#91693" class="date">23-Jun-2009 09:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As per <a href="http://bugs.php.net/bug.php?id=30688 the $rpath argument is ignored, and since the (as of now" rel="nofollow" target="_blank">http://bugs.php.net/bug.php?id=30688 the $rpath argument is ignored, and since the (as of now</a>) 4 year old bug is tagged WONTFIX in the bug tracker, this function is effectively deprecated in favour of mail().</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="60023""></a>
  <div class="note">
   <strong class="user">uphonesimon at gmail dot com</strong>
   <a href="#60023" class="date">22-Dec-2005 11:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
make sure you've correctly setup the SMTP parameters in php.ini<br />
and aslo make sure that the SMTP server accepts relay<br />
<br />
for some mail servers, you have to open up an imap stream, log in, and then you can send mail through imap_mail</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="10463""></a>
  <div class="note">
   <strong class="user">bandpay at hotmail dot com</strong>
   <a href="#10463" class="date">05-Jan-2001 06:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Extending the above note.
<br />
When the socket connection is stablished, it works exactly as if you had openned a telnet connection to the news server. If you don't know what kind of headers you have to send to the news server, then I'll suggest that you better give it a try and play with a telnet connection like this:
<br />

<br />
telenet news.servername.com 119
<br />

<br />
eaxmple:
<br />

<br />
telnet news.euroconnect.dk 119
<br />
Trying 195.184.44.30...
<br />
Connected to news.euroconnect.net (195.184.44.30).
<br />
Escape character is '^]'.
<br />
200 news.euroconnect.net (Typhoon v1.2.1)
<br />

<br />
then you'll receive confirmation from the server that you are connected. Now type "help" and enter, and you'll see what commands are supported.
<br />

<br />
eaxmle:
<br />

<br />
help
<br />
100 Legal Commands
<br />
&nbsp; article [&lt;messageid&gt;|number]
<br />
&nbsp; authinfo type value
<br />
&nbsp; body [&lt;messageid&gt;|number]
<br />
&nbsp; date
<br />
&nbsp; group newsgroup
<br />
&nbsp; head [&lt;messageid&gt;|number]
<br />
&nbsp; help
<br />
&nbsp; last
<br />
&nbsp; list [active wildmat|active.times|counts wildmat]
<br />
&nbsp; list [overview.fmt|newsgroups wildmat]
<br />
&nbsp; listgroup newsgroup
<br />
&nbsp; mode reader
<br />
&nbsp; newgroups yyyymmdd hhmmss [GMT]
<br />
&nbsp; newnews newsgroups yyyymmdd hhmmss [GMT]
<br />
&nbsp; next
<br />
&nbsp; post
<br />
&nbsp; stat [&lt;messageid&gt;|number]
<br />
&nbsp; xhdr field [range]
<br />
&nbsp; xover [range]
<br />
&nbsp; xpat field range pattern
<br />
&nbsp; quit
<br />

<br />
If you want to post a message, you can start by entring the "post" command.
<br />

<br />
example:
<br />

<br />
post
<br />
340 Send Article to be Posted
<br />

<br />
From here you can start to enter the header information.
<br />
The most important headers are:
<br />
From:
<br />
Subject:
<br />
Newsgroup:
<br />

<br />
after the ":" a "white space" must follow.
<br />

<br />
If you are posting the multipart message then remember 

<br />
MIME-Version: 1.0
<br />

<br />
This one is also one of the important headers when you are posting a multipart message. The boundary must follow the content type in the same line.
<br />

<br />
Content-Type: multipart/mixed; boundary="------------4A11A9ABCFCA70DD4E0C3605"
<br />

<br />
Take a look at the article below to find out more about headers and packing of the message.
<br />

<br />
<a href="http://www.phpbuilder.com/columns/kartic20000807.php3" rel="nofollow" target="_blank">http://www.phpbuilder.com/columns/kartic20000807.php3</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
