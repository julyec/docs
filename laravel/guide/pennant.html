<!doctype html>
<html lang="en-US" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.67" />
    <meta name="theme" content="VuePress Theme Hope" />
    <script type="text/javascript" async="" src="/laravel/iconify-icon@1.js" data-loaded="true"></script><meta name="keywords" content="php,go,python,c++,nsis"><script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?800fce94596cf587cd6a0e80314e5360";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><title>Laravel Pennant | Laravel 10 documents</title><meta name="description" content="A elegant web framework">
    <style>
      html {
        background: #fff;
      }

      html[data-theme="dark"] {
        background: #1d1e1f;
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/laravel/assets/style-46281858.css" as="style"><link rel="stylesheet" href="/laravel/assets/style-46281858.css">
    <link rel="modulepreload" href="/laravel/assets/app-06635a3b.js"><link rel="modulepreload" href="/laravel/assets/pennant.html-c2b910a7.js"><link rel="modulepreload" href="/laravel/assets/pennant.html-a33b221c.js"><link rel="modulepreload" href="/laravel/assets/plugin-vue_export-helper-c27b6911.js"><link rel="prefetch" href="/laravel/assets/index.html-9e78edeb.js" as="script"><link rel="prefetch" href="/laravel/assets/artisan.html-3eb129c9.js" as="script"><link rel="prefetch" href="/laravel/assets/authentication.html-16026b94.js" as="script"><link rel="prefetch" href="/laravel/assets/authorization.html-e6444e41.js" as="script"><link rel="prefetch" href="/laravel/assets/billing.html-8f01857a.js" as="script"><link rel="prefetch" href="/laravel/assets/blade.html-4ab5af1f.js" as="script"><link rel="prefetch" href="/laravel/assets/broadcasting.html-37f53dbb.js" as="script"><link rel="prefetch" href="/laravel/assets/cache.html-736fe8d3.js" as="script"><link rel="prefetch" href="/laravel/assets/cashier-paddle.html-5526a6eb.js" as="script"><link rel="prefetch" href="/laravel/assets/collections.html-1fe337d2.js" as="script"><link rel="prefetch" href="/laravel/assets/configuration.html-436613f9.js" as="script"><link rel="prefetch" href="/laravel/assets/console-tests.html-9ba2a803.js" as="script"><link rel="prefetch" href="/laravel/assets/container.html-2127a627.js" as="script"><link rel="prefetch" href="/laravel/assets/contracts.html-92cebf87.js" as="script"><link rel="prefetch" href="/laravel/assets/contributions.html-1fbfa0d8.js" as="script"><link rel="prefetch" href="/laravel/assets/controllers.html-c02e4d43.js" as="script"><link rel="prefetch" href="/laravel/assets/csrf.html-186bcac9.js" as="script"><link rel="prefetch" href="/laravel/assets/database-testing.html-4d67c044.js" as="script"><link rel="prefetch" href="/laravel/assets/database.html-d8305910.js" as="script"><link rel="prefetch" href="/laravel/assets/deployment.html-a3584e85.js" as="script"><link rel="prefetch" href="/laravel/assets/documentation.html-a3ff95a6.js" as="script"><link rel="prefetch" href="/laravel/assets/dusk.html-ce8ef6c6.js" as="script"><link rel="prefetch" href="/laravel/assets/eloquent-collections.html-f404cc53.js" as="script"><link rel="prefetch" href="/laravel/assets/eloquent-factories.html-246cbe50.js" as="script"><link rel="prefetch" href="/laravel/assets/eloquent-mutators.html-e0a33bb7.js" as="script"><link rel="prefetch" href="/laravel/assets/eloquent-relationships.html-46536e12.js" as="script"><link rel="prefetch" href="/laravel/assets/eloquent-resources.html-596497b2.js" as="script"><link rel="prefetch" href="/laravel/assets/eloquent-serialization.html-f69e36ed.js" as="script"><link rel="prefetch" href="/laravel/assets/eloquent.html-a7c4bb26.js" as="script"><link rel="prefetch" href="/laravel/assets/encryption.html-fb190607.js" as="script"><link rel="prefetch" href="/laravel/assets/envoy.html-aedd0963.js" as="script"><link rel="prefetch" href="/laravel/assets/errors.html-16d62aae.js" as="script"><link rel="prefetch" href="/laravel/assets/events.html-9ae74927.js" as="script"><link rel="prefetch" href="/laravel/assets/facades.html-631034d0.js" as="script"><link rel="prefetch" href="/laravel/assets/filesystem.html-f95830ad.js" as="script"><link rel="prefetch" href="/laravel/assets/folio.html-60a9feb6.js" as="script"><link rel="prefetch" href="/laravel/assets/fortify.html-908b3830.js" as="script"><link rel="prefetch" href="/laravel/assets/frontend.html-e0e88961.js" as="script"><link rel="prefetch" href="/laravel/assets/hashing.html-f9a2c759.js" as="script"><link rel="prefetch" href="/laravel/assets/helpers.html-aa5c9036.js" as="script"><link rel="prefetch" href="/laravel/assets/homestead.html-ecf151ef.js" as="script"><link rel="prefetch" href="/laravel/assets/horizon.html-120ce39c.js" as="script"><link rel="prefetch" href="/laravel/assets/http-client.html-4e5e9aa5.js" as="script"><link rel="prefetch" href="/laravel/assets/http-tests.html-eac89759.js" as="script"><link rel="prefetch" href="/laravel/assets/installation.html-b38093b9.js" as="script"><link rel="prefetch" href="/laravel/assets/license.html-2d87adb7.js" as="script"><link rel="prefetch" href="/laravel/assets/lifecycle.html-476bc2c3.js" as="script"><link rel="prefetch" href="/laravel/assets/localization.html-c0cf85fa.js" as="script"><link rel="prefetch" href="/laravel/assets/logging.html-bc0bc0ed.js" as="script"><link rel="prefetch" href="/laravel/assets/mail.html-5dc778ea.js" as="script"><link rel="prefetch" href="/laravel/assets/middleware.html-53b0c70e.js" as="script"><link rel="prefetch" href="/laravel/assets/migrations.html-5eefc455.js" as="script"><link rel="prefetch" href="/laravel/assets/mix.html-963160d0.js" as="script"><link rel="prefetch" href="/laravel/assets/mocking.html-01794c03.js" as="script"><link rel="prefetch" href="/laravel/assets/notifications.html-e5f05ed1.js" as="script"><link rel="prefetch" href="/laravel/assets/octane.html-d78d4aec.js" as="script"><link rel="prefetch" href="/laravel/assets/packages.html-83545712.js" as="script"><link rel="prefetch" href="/laravel/assets/pagination.html-cd29c392.js" as="script"><link rel="prefetch" href="/laravel/assets/passport.html-bc49eb95.js" as="script"><link rel="prefetch" href="/laravel/assets/passwords.html-5919604b.js" as="script"><link rel="prefetch" href="/laravel/assets/pint.html-442480b8.js" as="script"><link rel="prefetch" href="/laravel/assets/precognition.html-8726703d.js" as="script"><link rel="prefetch" href="/laravel/assets/processes.html-abbf2210.js" as="script"><link rel="prefetch" href="/laravel/assets/prompts.html-8e43e615.js" as="script"><link rel="prefetch" href="/laravel/assets/providers.html-e7c3ca2c.js" as="script"><link rel="prefetch" href="/laravel/assets/queries.html-0559c6fe.js" as="script"><link rel="prefetch" href="/laravel/assets/queues.html-0a1d99de.js" as="script"><link rel="prefetch" href="/laravel/assets/rate-limiting.html-d9b237f4.js" as="script"><link rel="prefetch" href="/laravel/assets/redirects.html-b33bc819.js" as="script"><link rel="prefetch" href="/laravel/assets/redis.html-39c70396.js" as="script"><link rel="prefetch" href="/laravel/assets/releases.html-efea7cd9.js" as="script"><link rel="prefetch" href="/laravel/assets/requests.html-99374fbd.js" as="script"><link rel="prefetch" href="/laravel/assets/responses.html-1a9aaa67.js" as="script"><link rel="prefetch" href="/laravel/assets/routing.html-4215324d.js" as="script"><link rel="prefetch" href="/laravel/assets/sail.html-207b017e.js" as="script"><link rel="prefetch" href="/laravel/assets/sanctum.html-28ad3c79.js" as="script"><link rel="prefetch" href="/laravel/assets/scheduling.html-d5f86318.js" as="script"><link rel="prefetch" href="/laravel/assets/scout.html-1da99475.js" as="script"><link rel="prefetch" href="/laravel/assets/seeding.html-cde9fd75.js" as="script"><link rel="prefetch" href="/laravel/assets/session.html-02b509f7.js" as="script"><link rel="prefetch" href="/laravel/assets/socialite.html-8f872f73.js" as="script"><link rel="prefetch" href="/laravel/assets/starter-kits.html-b6922c8c.js" as="script"><link rel="prefetch" href="/laravel/assets/strings.html-c6404ec1.js" as="script"><link rel="prefetch" href="/laravel/assets/structure.html-828c8c79.js" as="script"><link rel="prefetch" href="/laravel/assets/telescope.html-1158e1c7.js" as="script"><link rel="prefetch" href="/laravel/assets/testing.html-b395445f.js" as="script"><link rel="prefetch" href="/laravel/assets/upgrade.html-59db2291.js" as="script"><link rel="prefetch" href="/laravel/assets/urls.html-da9c5905.js" as="script"><link rel="prefetch" href="/laravel/assets/valet.html-063d0ca2.js" as="script"><link rel="prefetch" href="/laravel/assets/validation.html-4707d3ec.js" as="script"><link rel="prefetch" href="/laravel/assets/verification.html-c7879038.js" as="script"><link rel="prefetch" href="/laravel/assets/views.html-c603ed7a.js" as="script"><link rel="prefetch" href="/laravel/assets/vite.html-49320c1f.js" as="script"><link rel="prefetch" href="/laravel/assets/index.html-b54a3b02.js" as="script"><link rel="prefetch" href="/laravel/assets/artisan.html-abb0b0fc.js" as="script"><link rel="prefetch" href="/laravel/assets/authentication.html-7a39b868.js" as="script"><link rel="prefetch" href="/laravel/assets/authorization.html-3bc1d663.js" as="script"><link rel="prefetch" href="/laravel/assets/billing.html-21bf79bb.js" as="script"><link rel="prefetch" href="/laravel/assets/blade.html-53643402.js" as="script"><link rel="prefetch" href="/laravel/assets/broadcasting.html-5f8b063f.js" as="script"><link rel="prefetch" href="/laravel/assets/cache.html-0246bfec.js" as="script"><link rel="prefetch" href="/laravel/assets/cashier-paddle.html-124d486c.js" as="script"><link rel="prefetch" href="/laravel/assets/collections.html-b3882973.js" as="script"><link rel="prefetch" href="/laravel/assets/configuration.html-65220484.js" as="script"><link rel="prefetch" href="/laravel/assets/console-tests.html-0c28c3a4.js" as="script"><link rel="prefetch" href="/laravel/assets/container.html-f21bb685.js" as="script"><link rel="prefetch" href="/laravel/assets/contracts.html-8ffc9fc9.js" as="script"><link rel="prefetch" href="/laravel/assets/contributions.html-bb971caa.js" as="script"><link rel="prefetch" href="/laravel/assets/controllers.html-e0e19db0.js" as="script"><link rel="prefetch" href="/laravel/assets/csrf.html-d4b49313.js" as="script"><link rel="prefetch" href="/laravel/assets/database-testing.html-fcf0f033.js" as="script"><link rel="prefetch" href="/laravel/assets/database.html-e493b80c.js" as="script"><link rel="prefetch" href="/laravel/assets/deployment.html-833db6fb.js" as="script"><link rel="prefetch" href="/laravel/assets/documentation.html-fc5c1c43.js" as="script"><link rel="prefetch" href="/laravel/assets/dusk.html-c7c8af09.js" as="script"><link rel="prefetch" href="/laravel/assets/eloquent-collections.html-2f37a967.js" as="script"><link rel="prefetch" href="/laravel/assets/eloquent-factories.html-0bb9c90b.js" as="script"><link rel="prefetch" href="/laravel/assets/eloquent-mutators.html-b82ba91c.js" as="script"><link rel="prefetch" href="/laravel/assets/eloquent-relationships.html-48551c32.js" as="script"><link rel="prefetch" href="/laravel/assets/eloquent-resources.html-572ae102.js" as="script"><link rel="prefetch" href="/laravel/assets/eloquent-serialization.html-926c6e7e.js" as="script"><link rel="prefetch" href="/laravel/assets/eloquent.html-b9919a26.js" as="script"><link rel="prefetch" href="/laravel/assets/encryption.html-8f0181cf.js" as="script"><link rel="prefetch" href="/laravel/assets/envoy.html-6db2ec64.js" as="script"><link rel="prefetch" href="/laravel/assets/errors.html-505e6842.js" as="script"><link rel="prefetch" href="/laravel/assets/events.html-375980a6.js" as="script"><link rel="prefetch" href="/laravel/assets/facades.html-3713daf8.js" as="script"><link rel="prefetch" href="/laravel/assets/filesystem.html-de9b09a4.js" as="script"><link rel="prefetch" href="/laravel/assets/folio.html-6ebb6ef2.js" as="script"><link rel="prefetch" href="/laravel/assets/fortify.html-ec1df67e.js" as="script"><link rel="prefetch" href="/laravel/assets/frontend.html-0d7f9dc8.js" as="script"><link rel="prefetch" href="/laravel/assets/hashing.html-a3e26276.js" as="script"><link rel="prefetch" href="/laravel/assets/helpers.html-18cdcea2.js" as="script"><link rel="prefetch" href="/laravel/assets/homestead.html-98b5c07c.js" as="script"><link rel="prefetch" href="/laravel/assets/horizon.html-7ecf3fa7.js" as="script"><link rel="prefetch" href="/laravel/assets/http-client.html-0ef6e3a8.js" as="script"><link rel="prefetch" href="/laravel/assets/http-tests.html-38dec5ee.js" as="script"><link rel="prefetch" href="/laravel/assets/installation.html-3cc7d1c5.js" as="script"><link rel="prefetch" href="/laravel/assets/lifecycle.html-2b6fc47f.js" as="script"><link rel="prefetch" href="/laravel/assets/localization.html-05c57a06.js" as="script"><link rel="prefetch" href="/laravel/assets/logging.html-e97ba9a9.js" as="script"><link rel="prefetch" href="/laravel/assets/mail.html-beb57d20.js" as="script"><link rel="prefetch" href="/laravel/assets/middleware.html-9ed5c7b6.js" as="script"><link rel="prefetch" href="/laravel/assets/migrations.html-c0950f9f.js" as="script"><link rel="prefetch" href="/laravel/assets/mix.html-3b2ac5f2.js" as="script"><link rel="prefetch" href="/laravel/assets/mocking.html-5b035a48.js" as="script"><link rel="prefetch" href="/laravel/assets/notifications.html-5eecd5c6.js" as="script"><link rel="prefetch" href="/laravel/assets/octane.html-c7fb9580.js" as="script"><link rel="prefetch" href="/laravel/assets/packages.html-f9fde12f.js" as="script"><link rel="prefetch" href="/laravel/assets/pagination.html-bd7d42b1.js" as="script"><link rel="prefetch" href="/laravel/assets/passport.html-02a00e2a.js" as="script"><link rel="prefetch" href="/laravel/assets/passwords.html-9a74b568.js" as="script"><link rel="prefetch" href="/laravel/assets/pennant.html-65c6dc80.js" as="script"><link rel="prefetch" href="/laravel/assets/pint.html-1bc5cfc2.js" as="script"><link rel="prefetch" href="/laravel/assets/precognition.html-366f1dd1.js" as="script"><link rel="prefetch" href="/laravel/assets/processes.html-eb57aecd.js" as="script"><link rel="prefetch" href="/laravel/assets/prompts.html-0266a4c7.js" as="script"><link rel="prefetch" href="/laravel/assets/providers.html-da544f44.js" as="script"><link rel="prefetch" href="/laravel/assets/queries.html-75b01a9a.js" as="script"><link rel="prefetch" href="/laravel/assets/queues.html-ae1ecf62.js" as="script"><link rel="prefetch" href="/laravel/assets/rate-limiting.html-fc7df5d5.js" as="script"><link rel="prefetch" href="/laravel/assets/redirects.html-1ed64841.js" as="script"><link rel="prefetch" href="/laravel/assets/redis.html-3dfd0438.js" as="script"><link rel="prefetch" href="/laravel/assets/releases.html-f3977a35.js" as="script"><link rel="prefetch" href="/laravel/assets/requests.html-72f1388a.js" as="script"><link rel="prefetch" href="/laravel/assets/responses.html-8847d30c.js" as="script"><link rel="prefetch" href="/laravel/assets/routing.html-4dd2a769.js" as="script"><link rel="prefetch" href="/laravel/assets/sail.html-6836a2ed.js" as="script"><link rel="prefetch" href="/laravel/assets/sanctum.html-583f57f1.js" as="script"><link rel="prefetch" href="/laravel/assets/scheduling.html-83d124cc.js" as="script"><link rel="prefetch" href="/laravel/assets/scout.html-c831c46d.js" as="script"><link rel="prefetch" href="/laravel/assets/seeding.html-ce5fccd0.js" as="script"><link rel="prefetch" href="/laravel/assets/session.html-1e6b0778.js" as="script"><link rel="prefetch" href="/laravel/assets/socialite.html-42b8cbe3.js" as="script"><link rel="prefetch" href="/laravel/assets/starter-kits.html-e1a9edec.js" as="script"><link rel="prefetch" href="/laravel/assets/strings.html-12f6cdca.js" as="script"><link rel="prefetch" href="/laravel/assets/structure.html-549a7d86.js" as="script"><link rel="prefetch" href="/laravel/assets/telescope.html-fb8fcda2.js" as="script"><link rel="prefetch" href="/laravel/assets/testing.html-b8a7cfa0.js" as="script"><link rel="prefetch" href="/laravel/assets/upgrade.html-e081762a.js" as="script"><link rel="prefetch" href="/laravel/assets/urls.html-508efafc.js" as="script"><link rel="prefetch" href="/laravel/assets/valet.html-0412a8e2.js" as="script"><link rel="prefetch" href="/laravel/assets/validation.html-9d2380d0.js" as="script"><link rel="prefetch" href="/laravel/assets/verification.html-4b65c313.js" as="script"><link rel="prefetch" href="/laravel/assets/views.html-f442e9b2.js" as="script"><link rel="prefetch" href="/laravel/assets/vite.html-fc4a9c50.js" as="script"><link rel="prefetch" href="/laravel/assets/404.html-fce79bde.js" as="script"><link rel="prefetch" href="/laravel/assets/index.html-ebda9a17.js" as="script"><link rel="prefetch" href="/laravel/assets/index.html-0dab9b40.js" as="script"><link rel="prefetch" href="/laravel/assets/index.html-8048da3d.js" as="script"><link rel="prefetch" href="/laravel/assets/index.html-6af0b259.js" as="script"><link rel="prefetch" href="/laravel/assets/index.html-0341c66f.js" as="script"><link rel="prefetch" href="/laravel/assets/index.html-c4c647eb.js" as="script"><link rel="prefetch" href="/laravel/assets/index.html-aa7de2dc.js" as="script"><link rel="prefetch" href="/laravel/assets/index.html-7993dca7.js" as="script"><link rel="prefetch" href="/laravel/assets/index.html-6c43b2d4.js" as="script"><link rel="prefetch" href="/laravel/assets/index.html-ee40829a.js" as="script"><link rel="prefetch" href="/laravel/assets/index.html-aed7618a.js" as="script"><link rel="prefetch" href="/laravel/assets/index.html-2341e875.js" as="script"><link rel="prefetch" href="/laravel/assets/index.html-fe4c1556.js" as="script"><link rel="prefetch" href="/laravel/assets/artisan.html-39a551b0.js" as="script"><link rel="prefetch" href="/laravel/assets/authentication.html-f103780c.js" as="script"><link rel="prefetch" href="/laravel/assets/authorization.html-b0b73ef3.js" as="script"><link rel="prefetch" href="/laravel/assets/billing.html-62706687.js" as="script"><link rel="prefetch" href="/laravel/assets/blade.html-326e47cd.js" as="script"><link rel="prefetch" href="/laravel/assets/broadcasting.html-d1a7fa7e.js" as="script"><link rel="prefetch" href="/laravel/assets/cache.html-e0475b97.js" as="script"><link rel="prefetch" href="/laravel/assets/cashier-paddle.html-c0b9d9b5.js" as="script"><link rel="prefetch" href="/laravel/assets/collections.html-46ffd6c2.js" as="script"><link rel="prefetch" href="/laravel/assets/configuration.html-c2fb46bd.js" as="script"><link rel="prefetch" href="/laravel/assets/console-tests.html-a9442786.js" as="script"><link rel="prefetch" href="/laravel/assets/container.html-56ff1213.js" as="script"><link rel="prefetch" href="/laravel/assets/contracts.html-681b29be.js" as="script"><link rel="prefetch" href="/laravel/assets/contributions.html-f10a4fc1.js" as="script"><link rel="prefetch" href="/laravel/assets/controllers.html-4a11e789.js" as="script"><link rel="prefetch" href="/laravel/assets/csrf.html-19f9d3ce.js" as="script"><link rel="prefetch" href="/laravel/assets/database-testing.html-15f9020b.js" as="script"><link rel="prefetch" href="/laravel/assets/database.html-fa77321b.js" as="script"><link rel="prefetch" href="/laravel/assets/deployment.html-0b90206c.js" as="script"><link rel="prefetch" href="/laravel/assets/documentation.html-6760beac.js" as="script"><link rel="prefetch" href="/laravel/assets/dusk.html-da3fd154.js" as="script"><link rel="prefetch" href="/laravel/assets/eloquent-collections.html-8c14d43b.js" as="script"><link rel="prefetch" href="/laravel/assets/eloquent-factories.html-bb3cbf07.js" as="script"><link rel="prefetch" href="/laravel/assets/eloquent-mutators.html-8ef6214e.js" as="script"><link rel="prefetch" href="/laravel/assets/eloquent-relationships.html-165cd71e.js" as="script"><link rel="prefetch" href="/laravel/assets/eloquent-resources.html-c85e3f20.js" as="script"><link rel="prefetch" href="/laravel/assets/eloquent-serialization.html-8e1aa600.js" as="script"><link rel="prefetch" href="/laravel/assets/eloquent.html-0eac2a01.js" as="script"><link rel="prefetch" href="/laravel/assets/encryption.html-c74972d9.js" as="script"><link rel="prefetch" href="/laravel/assets/envoy.html-994b491f.js" as="script"><link rel="prefetch" href="/laravel/assets/errors.html-a380aa2a.js" as="script"><link rel="prefetch" href="/laravel/assets/events.html-df29e168.js" as="script"><link rel="prefetch" href="/laravel/assets/facades.html-9784782c.js" as="script"><link rel="prefetch" href="/laravel/assets/filesystem.html-35cc8603.js" as="script"><link rel="prefetch" href="/laravel/assets/folio.html-97ae163a.js" as="script"><link rel="prefetch" href="/laravel/assets/fortify.html-afa5f3d9.js" as="script"><link rel="prefetch" href="/laravel/assets/frontend.html-cb2e6752.js" as="script"><link rel="prefetch" href="/laravel/assets/hashing.html-851224a8.js" as="script"><link rel="prefetch" href="/laravel/assets/helpers.html-d8b31fb8.js" as="script"><link rel="prefetch" href="/laravel/assets/homestead.html-f6f9ec70.js" as="script"><link rel="prefetch" href="/laravel/assets/horizon.html-3879d7b5.js" as="script"><link rel="prefetch" href="/laravel/assets/http-client.html-c067a2fe.js" as="script"><link rel="prefetch" href="/laravel/assets/http-tests.html-5209d575.js" as="script"><link rel="prefetch" href="/laravel/assets/installation.html-1c77daf6.js" as="script"><link rel="prefetch" href="/laravel/assets/license.html-e2cacf83.js" as="script"><link rel="prefetch" href="/laravel/assets/lifecycle.html-c682939f.js" as="script"><link rel="prefetch" href="/laravel/assets/localization.html-595824c1.js" as="script"><link rel="prefetch" href="/laravel/assets/logging.html-6bb45cb3.js" as="script"><link rel="prefetch" href="/laravel/assets/mail.html-e143b998.js" as="script"><link rel="prefetch" href="/laravel/assets/middleware.html-0e9532a4.js" as="script"><link rel="prefetch" href="/laravel/assets/migrations.html-97759fbd.js" as="script"><link rel="prefetch" href="/laravel/assets/mix.html-0efa4e6c.js" as="script"><link rel="prefetch" href="/laravel/assets/mocking.html-38d32bc2.js" as="script"><link rel="prefetch" href="/laravel/assets/notifications.html-a46ea871.js" as="script"><link rel="prefetch" href="/laravel/assets/octane.html-ebbcb527.js" as="script"><link rel="prefetch" href="/laravel/assets/packages.html-245e010f.js" as="script"><link rel="prefetch" href="/laravel/assets/pagination.html-7de4db75.js" as="script"><link rel="prefetch" href="/laravel/assets/passport.html-cd6dcfd8.js" as="script"><link rel="prefetch" href="/laravel/assets/passwords.html-1860da86.js" as="script"><link rel="prefetch" href="/laravel/assets/pint.html-5581c8d4.js" as="script"><link rel="prefetch" href="/laravel/assets/precognition.html-36fb85d3.js" as="script"><link rel="prefetch" href="/laravel/assets/processes.html-3db08079.js" as="script"><link rel="prefetch" href="/laravel/assets/prompts.html-ce416df4.js" as="script"><link rel="prefetch" href="/laravel/assets/providers.html-dabeb18d.js" as="script"><link rel="prefetch" href="/laravel/assets/queries.html-e182beec.js" as="script"><link rel="prefetch" href="/laravel/assets/queues.html-a1cffed0.js" as="script"><link rel="prefetch" href="/laravel/assets/rate-limiting.html-60792899.js" as="script"><link rel="prefetch" href="/laravel/assets/redirects.html-9a76b573.js" as="script"><link rel="prefetch" href="/laravel/assets/redis.html-606dbbb9.js" as="script"><link rel="prefetch" href="/laravel/assets/releases.html-614f1b1d.js" as="script"><link rel="prefetch" href="/laravel/assets/requests.html-41df6e68.js" as="script"><link rel="prefetch" href="/laravel/assets/responses.html-a7dd9678.js" as="script"><link rel="prefetch" href="/laravel/assets/routing.html-9dfe8ba7.js" as="script"><link rel="prefetch" href="/laravel/assets/sail.html-8609c086.js" as="script"><link rel="prefetch" href="/laravel/assets/sanctum.html-f5432ad1.js" as="script"><link rel="prefetch" href="/laravel/assets/scheduling.html-10c1089d.js" as="script"><link rel="prefetch" href="/laravel/assets/scout.html-7025e113.js" as="script"><link rel="prefetch" href="/laravel/assets/seeding.html-87993d2a.js" as="script"><link rel="prefetch" href="/laravel/assets/session.html-fd170c72.js" as="script"><link rel="prefetch" href="/laravel/assets/socialite.html-d798ffba.js" as="script"><link rel="prefetch" href="/laravel/assets/starter-kits.html-747ffaa9.js" as="script"><link rel="prefetch" href="/laravel/assets/strings.html-0af7a4a0.js" as="script"><link rel="prefetch" href="/laravel/assets/structure.html-6eea02e9.js" as="script"><link rel="prefetch" href="/laravel/assets/telescope.html-32a1ab67.js" as="script"><link rel="prefetch" href="/laravel/assets/testing.html-b56bff84.js" as="script"><link rel="prefetch" href="/laravel/assets/upgrade.html-b1d6ac85.js" as="script"><link rel="prefetch" href="/laravel/assets/urls.html-f99612c7.js" as="script"><link rel="prefetch" href="/laravel/assets/valet.html-5522a8af.js" as="script"><link rel="prefetch" href="/laravel/assets/validation.html-fa14a1b1.js" as="script"><link rel="prefetch" href="/laravel/assets/verification.html-928033d4.js" as="script"><link rel="prefetch" href="/laravel/assets/views.html-5b921a1a.js" as="script"><link rel="prefetch" href="/laravel/assets/vite.html-114dcd3c.js" as="script"><link rel="prefetch" href="/laravel/assets/index.html-676a6a81.js" as="script"><link rel="prefetch" href="/laravel/assets/artisan.html-fa4ea573.js" as="script"><link rel="prefetch" href="/laravel/assets/authentication.html-51b5a2af.js" as="script"><link rel="prefetch" href="/laravel/assets/authorization.html-d68433c0.js" as="script"><link rel="prefetch" href="/laravel/assets/billing.html-25aede41.js" as="script"><link rel="prefetch" href="/laravel/assets/blade.html-eb34d678.js" as="script"><link rel="prefetch" href="/laravel/assets/broadcasting.html-77e45037.js" as="script"><link rel="prefetch" href="/laravel/assets/cache.html-94bddb6a.js" as="script"><link rel="prefetch" href="/laravel/assets/cashier-paddle.html-373a78df.js" as="script"><link rel="prefetch" href="/laravel/assets/collections.html-9d83b841.js" as="script"><link rel="prefetch" href="/laravel/assets/configuration.html-07c36bde.js" as="script"><link rel="prefetch" href="/laravel/assets/console-tests.html-d10e6c05.js" as="script"><link rel="prefetch" href="/laravel/assets/container.html-4d29d032.js" as="script"><link rel="prefetch" href="/laravel/assets/contracts.html-eee8ea45.js" as="script"><link rel="prefetch" href="/laravel/assets/contributions.html-3ad5a080.js" as="script"><link rel="prefetch" href="/laravel/assets/controllers.html-4c479c11.js" as="script"><link rel="prefetch" href="/laravel/assets/csrf.html-89332845.js" as="script"><link rel="prefetch" href="/laravel/assets/database-testing.html-7fca1e15.js" as="script"><link rel="prefetch" href="/laravel/assets/database.html-c9a16897.js" as="script"><link rel="prefetch" href="/laravel/assets/deployment.html-512d4867.js" as="script"><link rel="prefetch" href="/laravel/assets/documentation.html-3104e647.js" as="script"><link rel="prefetch" href="/laravel/assets/dusk.html-a357a47b.js" as="script"><link rel="prefetch" href="/laravel/assets/eloquent-collections.html-1f432edf.js" as="script"><link rel="prefetch" href="/laravel/assets/eloquent-factories.html-f5f2ff6a.js" as="script"><link rel="prefetch" href="/laravel/assets/eloquent-mutators.html-75f82498.js" as="script"><link rel="prefetch" href="/laravel/assets/eloquent-relationships.html-02d40ab0.js" as="script"><link rel="prefetch" href="/laravel/assets/eloquent-resources.html-30f0c261.js" as="script"><link rel="prefetch" href="/laravel/assets/eloquent-serialization.html-898f7769.js" as="script"><link rel="prefetch" href="/laravel/assets/eloquent.html-b78aa18b.js" as="script"><link rel="prefetch" href="/laravel/assets/encryption.html-7252ec51.js" as="script"><link rel="prefetch" href="/laravel/assets/envoy.html-0f064596.js" as="script"><link rel="prefetch" href="/laravel/assets/errors.html-312fd956.js" as="script"><link rel="prefetch" href="/laravel/assets/events.html-50c9abb1.js" as="script"><link rel="prefetch" href="/laravel/assets/facades.html-722a2988.js" as="script"><link rel="prefetch" href="/laravel/assets/filesystem.html-8e4f60b8.js" as="script"><link rel="prefetch" href="/laravel/assets/folio.html-e40e6a18.js" as="script"><link rel="prefetch" href="/laravel/assets/fortify.html-60a84d7c.js" as="script"><link rel="prefetch" href="/laravel/assets/frontend.html-fb711409.js" as="script"><link rel="prefetch" href="/laravel/assets/hashing.html-3e65f9c4.js" as="script"><link rel="prefetch" href="/laravel/assets/helpers.html-e537327b.js" as="script"><link rel="prefetch" href="/laravel/assets/homestead.html-9629d160.js" as="script"><link rel="prefetch" href="/laravel/assets/horizon.html-31c89601.js" as="script"><link rel="prefetch" href="/laravel/assets/http-client.html-4d5d11a0.js" as="script"><link rel="prefetch" href="/laravel/assets/http-tests.html-162d431c.js" as="script"><link rel="prefetch" href="/laravel/assets/installation.html-00d7f08c.js" as="script"><link rel="prefetch" href="/laravel/assets/lifecycle.html-985857a1.js" as="script"><link rel="prefetch" href="/laravel/assets/localization.html-2567af65.js" as="script"><link rel="prefetch" href="/laravel/assets/logging.html-ee56a192.js" as="script"><link rel="prefetch" href="/laravel/assets/mail.html-854ff3dc.js" as="script"><link rel="prefetch" href="/laravel/assets/middleware.html-4fd29293.js" as="script"><link rel="prefetch" href="/laravel/assets/migrations.html-ea5b9735.js" as="script"><link rel="prefetch" href="/laravel/assets/mix.html-5c1412bf.js" as="script"><link rel="prefetch" href="/laravel/assets/mocking.html-2a552c6e.js" as="script"><link rel="prefetch" href="/laravel/assets/notifications.html-34391b59.js" as="script"><link rel="prefetch" href="/laravel/assets/octane.html-4021e6c1.js" as="script"><link rel="prefetch" href="/laravel/assets/packages.html-6ab80d2b.js" as="script"><link rel="prefetch" href="/laravel/assets/pagination.html-c1c12792.js" as="script"><link rel="prefetch" href="/laravel/assets/passport.html-7371e766.js" as="script"><link rel="prefetch" href="/laravel/assets/passwords.html-501b821f.js" as="script"><link rel="prefetch" href="/laravel/assets/pennant.html-59bf85dc.js" as="script"><link rel="prefetch" href="/laravel/assets/pint.html-c5c3a18d.js" as="script"><link rel="prefetch" href="/laravel/assets/precognition.html-20426c14.js" as="script"><link rel="prefetch" href="/laravel/assets/processes.html-c9f2154c.js" as="script"><link rel="prefetch" href="/laravel/assets/prompts.html-4b855471.js" as="script"><link rel="prefetch" href="/laravel/assets/providers.html-de05ef5d.js" as="script"><link rel="prefetch" href="/laravel/assets/queries.html-6eab87f6.js" as="script"><link rel="prefetch" href="/laravel/assets/queues.html-f3d0f5ce.js" as="script"><link rel="prefetch" href="/laravel/assets/rate-limiting.html-ab06b367.js" as="script"><link rel="prefetch" href="/laravel/assets/redirects.html-3c89d072.js" as="script"><link rel="prefetch" href="/laravel/assets/redis.html-a1b539f8.js" as="script"><link rel="prefetch" href="/laravel/assets/releases.html-956fd8e3.js" as="script"><link rel="prefetch" href="/laravel/assets/requests.html-e55811b8.js" as="script"><link rel="prefetch" href="/laravel/assets/responses.html-326cd93f.js" as="script"><link rel="prefetch" href="/laravel/assets/routing.html-9f5969e1.js" as="script"><link rel="prefetch" href="/laravel/assets/sail.html-8ba57e34.js" as="script"><link rel="prefetch" href="/laravel/assets/sanctum.html-312d26da.js" as="script"><link rel="prefetch" href="/laravel/assets/scheduling.html-277896f3.js" as="script"><link rel="prefetch" href="/laravel/assets/scout.html-bf67e2e5.js" as="script"><link rel="prefetch" href="/laravel/assets/seeding.html-5ff2d671.js" as="script"><link rel="prefetch" href="/laravel/assets/session.html-1454f089.js" as="script"><link rel="prefetch" href="/laravel/assets/socialite.html-2790e6f2.js" as="script"><link rel="prefetch" href="/laravel/assets/starter-kits.html-30ddfd16.js" as="script"><link rel="prefetch" href="/laravel/assets/strings.html-a1de2f9c.js" as="script"><link rel="prefetch" href="/laravel/assets/structure.html-796bb0fb.js" as="script"><link rel="prefetch" href="/laravel/assets/telescope.html-2ae2ff0a.js" as="script"><link rel="prefetch" href="/laravel/assets/testing.html-b8f033fc.js" as="script"><link rel="prefetch" href="/laravel/assets/upgrade.html-f96ad06e.js" as="script"><link rel="prefetch" href="/laravel/assets/urls.html-9ad3e22b.js" as="script"><link rel="prefetch" href="/laravel/assets/valet.html-feba0cb4.js" as="script"><link rel="prefetch" href="/laravel/assets/validation.html-a95b1da8.js" as="script"><link rel="prefetch" href="/laravel/assets/verification.html-6134c4c4.js" as="script"><link rel="prefetch" href="/laravel/assets/views.html-aabc3de9.js" as="script"><link rel="prefetch" href="/laravel/assets/vite.html-56e9e2e9.js" as="script"><link rel="prefetch" href="/laravel/assets/404.html-1c6a83eb.js" as="script"><link rel="prefetch" href="/laravel/assets/index.html-a9330e18.js" as="script"><link rel="prefetch" href="/laravel/assets/index.html-c5f51f78.js" as="script"><link rel="prefetch" href="/laravel/assets/index.html-4da86738.js" as="script"><link rel="prefetch" href="/laravel/assets/index.html-83a87221.js" as="script"><link rel="prefetch" href="/laravel/assets/index.html-1b8b6fec.js" as="script"><link rel="prefetch" href="/laravel/assets/index.html-618032ce.js" as="script"><link rel="prefetch" href="/laravel/assets/index.html-f7ccfbd4.js" as="script"><link rel="prefetch" href="/laravel/assets/index.html-cd055af2.js" as="script"><link rel="prefetch" href="/laravel/assets/index.html-7157aa3b.js" as="script"><link rel="prefetch" href="/laravel/assets/index.html-122d0afb.js" as="script"><link rel="prefetch" href="/laravel/assets/index.html-21f435f7.js" as="script"><link rel="prefetch" href="/laravel/assets/index.html-531b0dec.js" as="script"><link rel="prefetch" href="/laravel/assets/mermaid.core-6651ce10.js" as="script"><link rel="prefetch" href="/laravel/assets/VuePlayground-b9b32cef.js" as="script"><link rel="prefetch" href="/laravel/assets/photoswipe.esm-1464cdb9.js" as="script"><link rel="prefetch" href="/laravel/assets/pageview-c4318637.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">Skip to main content</a><!--]--><!--[--><div class="theme-container has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a class="vp-link vp-brand vp-brand" href="/laravel/"><!----><!----><span class="vp-site-name">Laravel 10 documents</span></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><nav class="vp-nav-links"><div class="nav-item hide-in-mobile"><a aria-label="Prologue" class="vp-link nav-link nav-link" href="/laravel/guide/releases.html"><!---->Prologue<!----></a></div><div class="nav-item hide-in-mobile"><a aria-label="Getting Started" class="vp-link nav-link nav-link" href="/laravel/guide/installation.html"><!---->Getting Started<!----></a></div><div class="nav-item hide-in-mobile"><a aria-label="Architecture Concepts" class="vp-link nav-link nav-link" href="/laravel/guide/lifecycle.html"><!---->Architecture Concepts<!----></a></div><div class="nav-item hide-in-mobile"><a aria-label="The Basics" class="vp-link nav-link nav-link" href="/laravel/guide/routing.html"><!---->The Basics<!----></a></div><div class="nav-item hide-in-mobile"><a aria-label="Digging Deeper" class="vp-link nav-link nav-link" href="/laravel/guide/artisan.html"><!---->Digging Deeper<!----></a></div><div class="nav-item hide-in-mobile"><a aria-label="Security" class="vp-link nav-link nav-link" href="/laravel/guide/authentication.html"><!---->Security<!----></a></div><div class="nav-item hide-in-mobile"><a aria-label="Database" class="vp-link nav-link nav-link" href="/laravel/guide/database.html"><!---->Database<!----></a></div><div class="nav-item hide-in-mobile"><a aria-label="Eloquent ORM" class="vp-link nav-link nav-link" href="/laravel/guide/eloquent.html"><!---->Eloquent ORM<!----></a></div><div class="nav-item hide-in-mobile"><a aria-label="Testing" class="vp-link nav-link nav-link" href="/laravel/guide/testing.html"><!---->Testing<!----></a></div><div class="nav-item hide-in-mobile"><a aria-label="Packages" class="vp-link nav-link nav-link" href="/laravel/guide/sanctum.html"><!---->Packages<!----></a></div></nav><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><div class="nav-item"><div class="dropdown-wrapper i18n-dropdown"><button type="button" class="dropdown-title" aria-label="Select language"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon i18n-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="i18n icon" style="width:1rem;height:1rem;vertical-align:middle;"><path d="M379.392 460.8 494.08 575.488l-42.496 102.4L307.2 532.48 138.24 701.44l-71.68-72.704L234.496 460.8l-45.056-45.056c-27.136-27.136-51.2-66.56-66.56-108.544h112.64c7.68 14.336 16.896 27.136 26.112 35.84l45.568 46.08 45.056-45.056C382.976 312.32 409.6 247.808 409.6 204.8H0V102.4h256V0h102.4v102.4h256v102.4H512c0 70.144-37.888 161.28-87.04 210.944L378.88 460.8zM576 870.4 512 1024H409.6l256-614.4H768l256 614.4H921.6l-64-153.6H576zM618.496 768h196.608L716.8 532.48 618.496 768z"></path></svg><!--]--><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a aria-label="English" class="vp-link nav-link active nav-link active" href="/laravel/guide/pennant.html"><!---->English<!----></a></li><li class="dropdown-item"><a aria-label="简体中文" class="vp-link nav-link nav-link" href="/laravel/zh/guide/pennant.html"><!---->简体中文<!----></a></li></ul></button></div></div><!----><div class="nav-item hide-in-mobile"><button type="button" id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><form class="search-box" role="search"><input type="search" placeholder="Search" autocomplete="off" spellcheck="false" value><!----></form><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">Prologue</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">Getting Started</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">Architecture Concepts</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">The Basics</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">Digging Deeper</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">Security</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">Database</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">Eloquent ORM</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">Testing</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable active" type="button"><!----><span class="vp-sidebar-title">Packages</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><!--[--><a aria-label="Starter Kits" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/laravel/guide/starter-kits.html#laravel-breeze"><!---->Starter Kits<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="Laravel Cashier (Stripe)" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/laravel/guide/billing.html"><!---->Laravel Cashier (Stripe)<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="Laravel Cashier (Paddle)" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/laravel/guide/cashier-paddle.html"><!---->Laravel Cashier (Paddle)<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="Laravel Dusk" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/laravel/guide/dusk.html"><!---->Laravel Dusk<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="Laravel Envoy" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/laravel/guide/envoy.html"><!---->Laravel Envoy<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="Laravel Fortify" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/laravel/guide/fortify.html"><!---->Laravel Fortify<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="Laravel Homestead" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/laravel/guide/homestead.html"><!---->Laravel Homestead<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="Laravel Horizon" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/laravel/guide/horizon.html"><!---->Laravel Horizon<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="Laravel Mix" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/laravel/guide/mix.html"><!---->Laravel Mix<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="Laravel Octane" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/laravel/guide/octane.html"><!---->Laravel Octane<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="Laravel Passport" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/laravel/guide/passport.html"><!---->Laravel Passport<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="Laravel Pennant" class="vp-link nav-link active vp-sidebar-link vp-sidebar-page active nav-link active vp-sidebar-link vp-sidebar-page active" href="/laravel/guide/pennant.html"><!---->Laravel Pennant<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="Introduction" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/laravel/guide/pennant.html#introduction"><!---->Introduction<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="Installation" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/laravel/guide/pennant.html#installation"><!---->Installation<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="Configuration" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/laravel/guide/pennant.html#configuration"><!---->Configuration<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="Defining Features" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/laravel/guide/pennant.html#defining-features"><!---->Defining Features<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="Class Based Features" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/laravel/guide/pennant.html#class-based-features"><!---->Class Based Features<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="Checking Features" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/laravel/guide/pennant.html#checking-features"><!---->Checking Features<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="Checking Class Based Features" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/laravel/guide/pennant.html#checking-class-based-features"><!---->Checking Class Based Features<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="Conditional Execution" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/laravel/guide/pennant.html#conditional-execution"><!---->Conditional Execution<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="The HasFeatures Trait" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/laravel/guide/pennant.html#the-hasfeatures-trait"><!---->The HasFeatures Trait<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="Blade Directive" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/laravel/guide/pennant.html#blade-directive"><!---->Blade Directive<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="Middleware" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/laravel/guide/pennant.html#middleware"><!---->Middleware<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="In-Memory Cache" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/laravel/guide/pennant.html#in-memory-cache"><!---->In-Memory Cache<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="Scope" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/laravel/guide/pennant.html#scope"><!---->Scope<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="Specifying The Scope" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/laravel/guide/pennant.html#specifying-the-scope"><!---->Specifying The Scope<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="Default Scope" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/laravel/guide/pennant.html#default-scope"><!---->Default Scope<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="Nullable Scope" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/laravel/guide/pennant.html#nullable-scope"><!---->Nullable Scope<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="Identifying Scope" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/laravel/guide/pennant.html#identifying-scope"><!---->Identifying Scope<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="Serializing Scope" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/laravel/guide/pennant.html#serializing-scope"><!---->Serializing Scope<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="Rich Feature Values" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/laravel/guide/pennant.html#rich-feature-values"><!---->Rich Feature Values<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="Retrieving Multiple Features" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/laravel/guide/pennant.html#retrieving-multiple-features"><!---->Retrieving Multiple Features<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="Eager Loading" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/laravel/guide/pennant.html#eager-loading"><!---->Eager Loading<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="Updating Values" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/laravel/guide/pennant.html#updating-values"><!---->Updating Values<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="Bulk Updates" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/laravel/guide/pennant.html#bulk-updates"><!---->Bulk Updates<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="Purging Features" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/laravel/guide/pennant.html#purging-features"><!---->Purging Features<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="Testing" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/laravel/guide/pennant.html#testing"><!---->Testing<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="Store Configuration" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/laravel/guide/pennant.html#store-configuration"><!---->Store Configuration<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="Adding Custom Pennant Drivers" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/laravel/guide/pennant.html#adding-custom-pennant-drivers"><!---->Adding Custom Pennant Drivers<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="Implementing The Driver" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/laravel/guide/pennant.html#implementing-the-driver"><!---->Implementing The Driver<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="Registering The Driver" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/laravel/guide/pennant.html#registering-the-driver"><!---->Registering The Driver<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="Events" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/laravel/guide/pennant.html#events"><!---->Events<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="Laravel\Pennant\Events\RetrievingKnownFeature" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/laravel/guide/pennant.html#laravel-pennant-events-retrievingknownfeature"><!---->Laravel\Pennant\Events\RetrievingKnownFeature<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="Laravel\Pennant\Events\RetrievingUnknownFeature" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/laravel/guide/pennant.html#laravel-pennant-events-retrievingunknownfeature"><!---->Laravel\Pennant\Events\RetrievingUnknownFeature<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="Laravel\Pennant\Events\DynamicallyDefiningFeature" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/laravel/guide/pennant.html#laravel-pennant-events-dynamicallydefiningfeature"><!---->Laravel\Pennant\Events\DynamicallyDefiningFeature<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li></ul><!--]--></li><li><!--[--><a aria-label="Laravel Pint" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/laravel/guide/pint.html"><!---->Laravel Pint<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="Laravel Sail" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/laravel/guide/sail.html"><!---->Laravel Sail<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="Laravel Sanctum" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/laravel/guide/sanctum.html"><!---->Laravel Sanctum<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="Laravel Scout" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/laravel/guide/scout.html"><!---->Laravel Scout<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="Laravel Socialite" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/laravel/guide/socialite.html"><!---->Laravel Socialite<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="Laravel Telescope" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/laravel/guide/telescope.html"><!---->Laravel Telescope<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="Laravel Valet" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/laravel/guide/valet.html"><!---->Laravel Valet<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li></ul></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->Laravel Pennant</h1><div class="page-info"><span class="page-author-info" aria-label="Author🖊" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="page-author-item">Moments</span></span><span property="author" content="Moments"></span></span><!----><span class="page-date-info" aria-label="Writing Date📅" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-12-05T12:55:13.000Z"></span><!----><span class="page-reading-time-info" aria-label="Reading Time⌛" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>About 16 min</span><meta property="timeRequired" content="PT16M"></span><!----><!----></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">On This Page<!----></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/laravel/#introduction">Introduction</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/laravel/#installation">Installation</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/laravel/#configuration">Configuration</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/laravel/#defining-features">Defining Features</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/laravel/#class-based-features">Class Based Features</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/laravel/#checking-features">Checking Features</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level4 toc-link level4" href="/laravel/#checking-class-based-features">Checking Class Based Features</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/laravel/#conditional-execution">Conditional Execution</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/laravel/#the-hasfeatures-trait">The HasFeatures Trait</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/laravel/#blade-directive">Blade Directive</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/laravel/#middleware">Middleware</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/laravel/#in-memory-cache">In-Memory Cache</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/laravel/#scope">Scope</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/laravel/#specifying-the-scope">Specifying The Scope</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/laravel/#default-scope">Default Scope</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/laravel/#nullable-scope">Nullable Scope</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/laravel/#identifying-scope">Identifying Scope</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/laravel/#serializing-scope">Serializing Scope</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/laravel/#rich-feature-values">Rich Feature Values</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/laravel/#retrieving-multiple-features">Retrieving Multiple Features</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/laravel/#eager-loading">Eager Loading</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/laravel/#updating-values">Updating Values</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/laravel/#bulk-updates">Bulk Updates</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/laravel/#purging-features">Purging Features</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/laravel/#testing">Testing</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level4 toc-link level4" href="/laravel/#store-configuration">Store Configuration</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/laravel/#adding-custom-pennant-drivers">Adding Custom Pennant Drivers</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level4 toc-link level4" href="/laravel/#implementing-the-driver">Implementing The Driver</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level4 toc-link level4" href="/laravel/#registering-the-driver">Registering The Driver</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/laravel/#events">Events</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/laravel/#laravel-pennant-events-retrievingknownfeature">Laravel\Pennant\Events\RetrievingKnownFeature</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/laravel/#laravel-pennant-events-retrievingunknownfeature">Laravel\Pennant\Events\RetrievingUnknownFeature</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/laravel/#laravel-pennant-events-dynamicallydefiningfeature">Laravel\Pennant\Events\DynamicallyDefiningFeature</a></li><!----><!--]--></ul></li><!--]--></ul><div class="toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!----><div class="theme-hope-content"><h1 id="laravel-pennant" tabindex="-1"><a class="header-anchor" href="#laravel-pennant" aria-hidden="true">#</a> Laravel Pennant</h1><ul><li><a href="#introduction">Introduction</a></li><li><a href="#installation">Installation</a></li><li><a href="#configuration">Configuration</a></li><li><a href="#defining-features">Defining Features</a><ul><li><a href="#class-based-features">Class Based Features</a></li></ul></li><li><a href="#checking-features">Checking Features</a><ul><li><a href="#conditional-execution">Conditional Execution</a></li><li><a href="#the-has-features-trait">The <code>HasFeatures</code> Trait</a></li><li><a href="#blade-directive">Blade Directive</a></li><li><a href="#middleware">Middleware</a></li><li><a href="#in-memory-cache">In-Memory Cache</a></li></ul></li><li><a href="#scope">Scope</a><ul><li><a href="#specifying-the-scope">Specifying The Scope</a></li><li><a href="#default-scope">Default Scope</a></li><li><a href="#nullable-scope">Nullable Scope</a></li><li><a href="#identifying-scope">Identifying Scope</a></li><li><a href="#serializing-scope">Serializing Scope</a></li></ul></li><li><a href="#rich-feature-values">Rich Feature Values</a></li><li><a href="#retrieving-multiple-features">Retrieving Multiple Features</a></li><li><a href="#eager-loading">Eager Loading</a></li><li><a href="#updating-values">Updating Values</a><ul><li><a href="#bulk-updates">Bulk Updates</a></li><li><a href="#purging-features">Purging Features</a></li></ul></li><li><a href="#testing">Testing</a></li><li><a href="#adding-custom-pennant-drivers">Adding Custom Pennant Drivers</a><ul><li><a href="#implementing-the-driver">Implementing The Driver</a></li><li><a href="#registering-the-driver">Registering The Driver</a></li></ul></li><li><a href="#events">Events</a></li></ul><p><a name="introduction"></a></p><h2 id="introduction" tabindex="-1"><a class="header-anchor" href="#introduction" aria-hidden="true">#</a> Introduction</h2><p><a href="https://github.com/laravel/pennant" target="_blank" rel="noopener noreferrer">Laravel Pennant<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> is a simple and light-weight feature flag package - without the cruft. Feature flags enable you to incrementally roll out new application features with confidence, A/B test new interface designs, complement a trunk-based development strategy, and much more.</p><p><a name="installation"></a></p><h2 id="installation" tabindex="-1"><a class="header-anchor" href="#installation" aria-hidden="true">#</a> Installation</h2><p>First, install Pennant into your project using the Composer package manager:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">composer</span> require laravel/pennant
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Next, you should publish the Pennant configuration and migration files using the <code>vendor:publish</code> Artisan command:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>php artisan vendor:publish <span class="token parameter variable">--provider</span><span class="token operator">=</span><span class="token string">&quot;Laravel\Pennant\PennantServiceProvider&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Finally, you should run your application&#39;s database migrations. This will create a <code>features</code> table that Pennant uses to power its <code>database</code> driver:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>php artisan migrate
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><a name="configuration"></a></p><h2 id="configuration" tabindex="-1"><a class="header-anchor" href="#configuration" aria-hidden="true">#</a> Configuration</h2><p>After publishing Pennant&#39;s assets, its configuration file will be located at <code>config/pennant.php</code>. This configuration file allows you to specify the default storage mechanism that will be used by Pennant to store resolved feature flag values.</p><p>Pennant includes support for storing resolved feature flag values in an in-memory array via the <code>array</code> driver. Or, Pennant can store resolved feature flag values persistently in a relational database via the <code>database</code> driver, which is the default storage mechanism used by Pennant.</p><p><a name="defining-features"></a></p><h2 id="defining-features" tabindex="-1"><a class="header-anchor" href="#defining-features" aria-hidden="true">#</a> Defining Features</h2><p>To define a feature, you may use the <code>define</code> method offered by the <code>Feature</code> facade. You will need to provide a name for the feature, as well as a closure that will be invoked to resolve the feature&#39;s initial value.</p><p>Typically, features are defined in a service provider using the <code>Feature</code> facade. The closure will receive the &quot;scope&quot; for the feature check. Most commonly, the scope is the currently authenticated user. In this example, we will define a feature for incrementally rolling out a new API to our application&#39;s users:</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Providers</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Models<span class="token punctuation">\</span>User</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>Lottery</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>ServiceProvider</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Laravel<span class="token punctuation">\</span>Pennant<span class="token punctuation">\</span>Feature</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name-definition class-name">AppServiceProvider</span> <span class="token keyword">extends</span> <span class="token class-name">ServiceProvider</span>
<span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * Bootstrap any application services.
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">boot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">void</span>
    <span class="token punctuation">{</span>
        <span class="token class-name static-context">Feature</span><span class="token operator">::</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;new-api&#39;</span><span class="token punctuation">,</span> <span class="token keyword">fn</span> <span class="token punctuation">(</span><span class="token class-name type-declaration">User</span> <span class="token variable">$user</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">match</span> <span class="token punctuation">(</span><span class="token constant boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token function">isInternalTeamMember</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant boolean">true</span><span class="token punctuation">,</span>
            <span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token function">isHighTrafficCustomer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant boolean">false</span><span class="token punctuation">,</span>
            <span class="token keyword">default</span> <span class="token operator">=&gt;</span> <span class="token class-name static-context">Lottery</span><span class="token operator">::</span><span class="token function">odds</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">/</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>As you can see, we have the following rules for our feature:</p><ul><li>All internal team members should be using the new API.</li><li>Any high traffic customers should not be using the new API.</li><li>Otherwise, the feature should be randomly assigned to users with a 1 in 100 chance of being active.</li></ul><p>The first time the <code>new-api</code> feature is checked for a given user, the result of the closure will be stored by the storage driver. The next time the feature is checked against the same user, the value will be retrieved from storage and the closure will not be invoked.</p><p>For convenience, if a feature definition only returns a lottery, you may omit the closure completely:</p><pre><code>Feature::define(&#39;site-redesign&#39;, Lottery::odds(1, 1000));
</code></pre><p><a name="class-based-features"></a></p><h3 id="class-based-features" tabindex="-1"><a class="header-anchor" href="#class-based-features" aria-hidden="true">#</a> Class Based Features</h3><p>Pennant also allows you to define class based features. Unlike closure based feature definitions, there is no need to register a class based feature in a service provider. To create a class based feature, you may invoke the <code>pennant:feature</code> Artisan command. By default the feature class will be placed in your application&#39;s <code>app/Features</code> directory:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>php artisan pennant:feature NewApi
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>When writing a feature class, you only need to define a <code>resolve</code> method, which will be invoked to resolve the feature&#39;s initial value for a given scope. Again, the scope will typically be the currently authenticated user:</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Features</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>Lottery</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name-definition class-name">NewApi</span>
<span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * Resolve the feature&#39;s initial value.
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">resolve</span><span class="token punctuation">(</span><span class="token class-name type-declaration">User</span> <span class="token variable">$user</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">mixed</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">match</span> <span class="token punctuation">(</span><span class="token constant boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token function">isInternalTeamMember</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant boolean">true</span><span class="token punctuation">,</span>
            <span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token function">isHighTrafficCustomer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant boolean">false</span><span class="token punctuation">,</span>
            <span class="token keyword">default</span> <span class="token operator">=&gt;</span> <span class="token class-name static-context">Lottery</span><span class="token operator">::</span><span class="token function">odds</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">/</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><strong>Note</strong> Feature classes are resolved via the <a href="./container">container</a>, so you may inject dependencies into the feature class&#39;s constructor when needed.</p></blockquote><p><a name="checking-features"></a></p><h2 id="checking-features" tabindex="-1"><a class="header-anchor" href="#checking-features" aria-hidden="true">#</a> Checking Features</h2><p>To determine if a feature is active, you may use the <code>active</code> method on the <code>Feature</code> facade. By default, features are checked against the currently authenticated user:</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Request</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Response</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Laravel<span class="token punctuation">\</span>Pennant<span class="token punctuation">\</span>Feature</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name-definition class-name">PodcastController</span>
<span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * Display a listing of the resource.
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">index</span><span class="token punctuation">(</span><span class="token class-name type-declaration">Request</span> <span class="token variable">$request</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name return-type">Response</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name static-context">Feature</span><span class="token operator">::</span><span class="token function">active</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;new-api&#39;</span><span class="token punctuation">)</span>
                <span class="token operator">?</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">resolveNewApiResponse</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token punctuation">)</span>
                <span class="token punctuation">:</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">resolveLegacyApiResponse</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Although features are checked against the currently authenticated user by default, you may easily check the feature against another user or <a href="#scope">scope</a>. To accomplish this, use the <code>for</code> method offered by the <code>Feature</code> facade:</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token keyword">return</span> <span class="token class-name static-context">Feature</span><span class="token operator">::</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">active</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;new-api&#39;</span><span class="token punctuation">)</span>
        <span class="token operator">?</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">resolveNewApiResponse</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token punctuation">)</span>
        <span class="token punctuation">:</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">resolveLegacyApiResponse</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Pennant also offers some additional convenience methods that may prove useful when determining if a feature is active or not:</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token comment">// Determine if all of the given features are active...</span>
<span class="token class-name static-context">Feature</span><span class="token operator">::</span><span class="token function">allAreActive</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;new-api&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;site-redesign&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Determine if any of the given features are active...</span>
<span class="token class-name static-context">Feature</span><span class="token operator">::</span><span class="token function">someAreActive</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;new-api&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;site-redesign&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Determine if a feature is inactive...</span>
<span class="token class-name static-context">Feature</span><span class="token operator">::</span><span class="token function">inactive</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;new-api&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Determine if all of the given features are inactive...</span>
<span class="token class-name static-context">Feature</span><span class="token operator">::</span><span class="token function">allAreInactive</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;new-api&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;site-redesign&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Determine if any of the given features are inactive...</span>
<span class="token class-name static-context">Feature</span><span class="token operator">::</span><span class="token function">someAreInactive</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;new-api&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;site-redesign&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><strong>Note</strong> When using Pennant outside of an HTTP context, such as in an Artisan command or a queued job, you should typically <a href="#specifying-the-scope">explicitly specify the feature&#39;s scope</a>. Alternatively, you may define a <a href="#default-scope">default scope</a> that accounts for both authenticated HTTP contexts and unauthenticated contexts.</p></blockquote><p><a name="checking-class-based-features"></a></p><h4 id="checking-class-based-features" tabindex="-1"><a class="header-anchor" href="#checking-class-based-features" aria-hidden="true">#</a> Checking Class Based Features</h4><p>For class based features, you should provide the class name when checking the feature:</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Features<span class="token punctuation">\</span>NewApi</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Request</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Response</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Laravel<span class="token punctuation">\</span>Pennant<span class="token punctuation">\</span>Feature</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name-definition class-name">PodcastController</span>
<span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * Display a listing of the resource.
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">index</span><span class="token punctuation">(</span><span class="token class-name type-declaration">Request</span> <span class="token variable">$request</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name return-type">Response</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name static-context">Feature</span><span class="token operator">::</span><span class="token function">active</span><span class="token punctuation">(</span><span class="token class-name static-context">NewApi</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span>
                <span class="token operator">?</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">resolveNewApiResponse</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token punctuation">)</span>
                <span class="token punctuation">:</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">resolveLegacyApiResponse</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><a name="conditional-execution"></a></p><h3 id="conditional-execution" tabindex="-1"><a class="header-anchor" href="#conditional-execution" aria-hidden="true">#</a> Conditional Execution</h3><p>The <code>when</code> method may be used to fluently execute a given closure if a feature is active. Additionally, a second closure may be provided and will be executed if the feature is inactive:</p><pre><code>&lt;?php

namespace App\Http\Controllers;

use App\Features\NewApi;
use Illuminate\Http\Request;
use Illuminate\Http\Response;
use Laravel\Pennant\Feature;

class PodcastController
{
    /**
     * Display a listing of the resource.
     */
    public function index(Request $request): Response
    {
        return Feature::when(NewApi::class,
            fn () =&gt; $this-&gt;resolveNewApiResponse($request),
            fn () =&gt; $this-&gt;resolveLegacyApiResponse($request),
        );
    }

    // ...
}
</code></pre><p>The <code>unless</code> method serves as the inverse of the <code>when</code> method, executing the first closure if the feature is inactive:</p><pre><code>return Feature::unless(NewApi::class,
    fn () =&gt; $this-&gt;resolveLegacyApiResponse($request),
    fn () =&gt; $this-&gt;resolveNewApiResponse($request),
);
</code></pre><p><a name="the-has-features-trait"></a></p><h3 id="the-hasfeatures-trait" tabindex="-1"><a class="header-anchor" href="#the-hasfeatures-trait" aria-hidden="true">#</a> The <code>HasFeatures</code> Trait</h3><p>Pennant&#39;s <code>HasFeatures</code> trait may be added to your application&#39;s <code>User</code> model (or any other model that has features) to provide a fluent, convenient way to check features directly from the model:</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Models</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Foundation<span class="token punctuation">\</span>Auth<span class="token punctuation">\</span>User</span> <span class="token keyword">as</span> Authenticatable<span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Laravel<span class="token punctuation">\</span>Pennant<span class="token punctuation">\</span>Concerns<span class="token punctuation">\</span>HasFeatures</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name-definition class-name">User</span> <span class="token keyword">extends</span> <span class="token class-name">Authenticatable</span>
<span class="token punctuation">{</span>
    <span class="token keyword">use</span> <span class="token package">HasFeatures</span><span class="token punctuation">;</span>

    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Once the trait has been added to your model, you may easily check features by invoking the <code>features</code> method:</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token function">features</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">active</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;new-api&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Of course, the <code>features</code> method provides access to many other convenient methods for interacting with features:</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token comment">// Values...</span>
<span class="token variable">$value</span> <span class="token operator">=</span> <span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token function">features</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;purchase-button&#39;</span><span class="token punctuation">)</span>
<span class="token variable">$values</span> <span class="token operator">=</span> <span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token function">features</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;new-api&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;purchase-button&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// State...</span>
<span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token function">features</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">active</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;new-api&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token function">features</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">allAreActive</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;new-api&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;server-api&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token function">features</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">someAreActive</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;new-api&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;server-api&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token function">features</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">inactive</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;new-api&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token function">features</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">allAreInactive</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;new-api&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;server-api&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token function">features</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">someAreInactive</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;new-api&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;server-api&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Conditional execution...</span>
<span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token function">features</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">when</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;new-api&#39;</span><span class="token punctuation">,</span>
    <span class="token keyword">fn</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token comment">/* ... */</span><span class="token punctuation">,</span>
    <span class="token keyword">fn</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token comment">/* ... */</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token function">features</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">unless</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;new-api&#39;</span><span class="token punctuation">,</span>
    <span class="token keyword">fn</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token comment">/* ... */</span><span class="token punctuation">,</span>
    <span class="token keyword">fn</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token comment">/* ... */</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><a name="blade-directive"></a></p><h3 id="blade-directive" tabindex="-1"><a class="header-anchor" href="#blade-directive" aria-hidden="true">#</a> Blade Directive</h3><p>To make checking features in Blade a seamless experience, Pennant offers a <code>@feature</code> directive:</p><div class="language-blade line-numbers-mode" data-ext="blade"><pre class="language-blade"><code>@feature(&#39;site-redesign&#39;)
    &lt;!-- &#39;site-redesign&#39; is active --&gt;
@else
    &lt;!-- &#39;site-redesign&#39; is inactive --&gt;
@endfeature
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><a name="middleware"></a></p><h3 id="middleware" tabindex="-1"><a class="header-anchor" href="#middleware" aria-hidden="true">#</a> Middleware</h3><p>Pennant also includes a <a href="./middleware">middleware</a> that may be used to verify the currently authenticated user has access to a feature before a route is even invoked. You may assign the middleware to a route and specify the features that are required to access the route. If any of the specified features are inactive for the currently authenticated user, a <code>400 Bad Request</code> HTTP response will be returned by the route. Multiple features may be passed to the static <code>using</code> method.</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>Facades<span class="token punctuation">\</span>Route</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Laravel<span class="token punctuation">\</span>Pennant<span class="token punctuation">\</span>Middleware<span class="token punctuation">\</span>EnsureFeaturesAreActive</span><span class="token punctuation">;</span>

<span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;/api/servers&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">middleware</span><span class="token punctuation">(</span><span class="token class-name static-context">EnsureFeaturesAreActive</span><span class="token operator">::</span><span class="token function">using</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;new-api&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;servers-api&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><a name="customizing-the-response"></a></p><h4 id="customizing-the-response" tabindex="-1"><a class="header-anchor" href="#customizing-the-response" aria-hidden="true">#</a> Customizing The Response</h4><p>If you would like to customize the response that is returned by the middleware when one of the listed features is inactive, you may use the <code>whenInactive</code> method provided by the <code>EnsureFeaturesAreActive</code> middleware. Typically, this method should be invoked within the <code>boot</code> method of one of your application&#39;s service providers:</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Request</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Response</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Laravel<span class="token punctuation">\</span>Pennant<span class="token punctuation">\</span>Middleware<span class="token punctuation">\</span>EnsureFeaturesAreActive</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * Bootstrap any application services.
 */</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">boot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">void</span>
<span class="token punctuation">{</span>
    <span class="token class-name static-context">EnsureFeaturesAreActive</span><span class="token operator">::</span><span class="token function">whenInactive</span><span class="token punctuation">(</span>
        <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token class-name type-declaration">Request</span> <span class="token variable">$request</span><span class="token punctuation">,</span> <span class="token keyword type-hint">array</span> <span class="token variable">$features</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span><span class="token argument-name">status</span><span class="token punctuation">:</span> <span class="token number">403</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><a name="in-memory-cache"></a></p><h3 id="in-memory-cache" tabindex="-1"><a class="header-anchor" href="#in-memory-cache" aria-hidden="true">#</a> In-Memory Cache</h3><p>When checking a feature, Pennant will create an in-memory cache of the result. If you are using the <code>database</code> driver, this means that re-checking the same feature flag within a single request will not trigger additional database queries. This also ensures that the feature has a consistent result for the duration of the request.</p><p>If you need to manually flush the in-memory cache, you may use the <code>flushCache</code> method offered by the <code>Feature</code> facade:</p><pre><code>Feature::flushCache();
</code></pre><p><a name="scope"></a></p><h2 id="scope" tabindex="-1"><a class="header-anchor" href="#scope" aria-hidden="true">#</a> Scope</h2><p><a name="specifying-the-scope"></a></p><h3 id="specifying-the-scope" tabindex="-1"><a class="header-anchor" href="#specifying-the-scope" aria-hidden="true">#</a> Specifying The Scope</h3><p>As discussed, features are typically checked against the currently authenticated user. However, this may not always suit your needs. Therefore, it is possible to specify the scope you would like to check a given feature against via the <code>Feature</code> facade&#39;s <code>for</code> method:</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token keyword">return</span> <span class="token class-name static-context">Feature</span><span class="token operator">::</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">active</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;new-api&#39;</span><span class="token punctuation">)</span>
        <span class="token operator">?</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">resolveNewApiResponse</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token punctuation">)</span>
        <span class="token punctuation">:</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">resolveLegacyApiResponse</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Of course, feature scopes are not limited to &quot;users&quot;. Imagine you have built a new billing experience that you are rolling out to entire teams rather than individual users. Perhaps you would like the oldest teams to have a slower rollout than the newer teams. Your feature resolution closure might look something like the following:</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Models<span class="token punctuation">\</span>Team</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Carbon<span class="token punctuation">\</span>Carbon</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>Lottery</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Laravel<span class="token punctuation">\</span>Pennant<span class="token punctuation">\</span>Feature</span><span class="token punctuation">;</span>

<span class="token class-name static-context">Feature</span><span class="token operator">::</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;billing-v2&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token class-name type-declaration">Team</span> <span class="token variable">$team</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$team</span><span class="token operator">-&gt;</span><span class="token property">created_at</span><span class="token operator">-&gt;</span><span class="token function">isAfter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Carbon</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;1st Jan, 2023&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token constant boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$team</span><span class="token operator">-&gt;</span><span class="token property">created_at</span><span class="token operator">-&gt;</span><span class="token function">isAfter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Carbon</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;1st Jan, 2019&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name static-context">Lottery</span><span class="token operator">::</span><span class="token function">odds</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">/</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token class-name static-context">Lottery</span><span class="token operator">::</span><span class="token function">odds</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">/</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>You will notice that the closure we have defined is not expecting a <code>User</code>, but is instead expecting a <code>Team</code> model. To determine if this feature is active for a user&#39;s team, you should pass the team to the <code>for</code> method offered by the <code>Feature</code> facade:</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name static-context">Feature</span><span class="token operator">::</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token property">team</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">active</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;billing-v2&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">redirect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;/billing/v2&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// ...</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><a name="default-scope"></a></p><h3 id="default-scope" tabindex="-1"><a class="header-anchor" href="#default-scope" aria-hidden="true">#</a> Default Scope</h3><p>It is also possible to customize the default scope Pennant uses to check features. For example, maybe all of your features are checked against the currently authenticated user&#39;s team instead of the user. Instead of having to call <code>Feature::for($user-&gt;team)</code> every time you check a feature, you may instead specify the team as the default scope. Typically, this should be done in one of your application&#39;s service providers:</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Providers</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>Facades<span class="token punctuation">\</span>Auth</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>ServiceProvider</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Laravel<span class="token punctuation">\</span>Pennant<span class="token punctuation">\</span>Feature</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name-definition class-name">AppServiceProvider</span> <span class="token keyword">extends</span> <span class="token class-name">ServiceProvider</span>
<span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * Bootstrap any application services.
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">boot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">void</span>
    <span class="token punctuation">{</span>
        <span class="token class-name static-context">Feature</span><span class="token operator">::</span><span class="token function">resolveScopeUsing</span><span class="token punctuation">(</span><span class="token keyword">fn</span> <span class="token punctuation">(</span><span class="token variable">$driver</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token class-name static-context">Auth</span><span class="token operator">::</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">?-&gt;</span><span class="token property">team</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>If no scope is explicitly provided via the <code>for</code> method, the feature check will now use the currently authenticated user&#39;s team as the default scope:</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token class-name static-context">Feature</span><span class="token operator">::</span><span class="token function">active</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;billing-v2&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Is now equivalent to...</span>

<span class="token class-name static-context">Feature</span><span class="token operator">::</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token property">team</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">active</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;billing-v2&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><a name="nullable-scope"></a></p><h3 id="nullable-scope" tabindex="-1"><a class="header-anchor" href="#nullable-scope" aria-hidden="true">#</a> Nullable Scope</h3><p>If the scope you provide when checking a feature is <code>null</code> and the feature&#39;s definition does not support <code>null</code> via a nullable type or by including <code>null</code> in a union type, Pennant will automatically return <code>false</code> as the feature&#39;s result value.</p><p>So, if the scope you are passing to a feature is potentially <code>null</code> and you want the feature&#39;s value resolver to be invoked, you should account for that in your feature&#39;s definition. A <code>null</code> scope may occur if you check a feature within an Artisan command, queued job, or unauthenticated route. Since there is usually not an authenticated user in these contexts, the default scope will be <code>null</code>.</p><p>If you do not always <a href="#specifying-the-scope">explicitly specify your feature scope</a> then you should ensure the scope&#39;s type is &quot;nullable&quot; and handle the <code>null</code> scope value within your feature definition logic:</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Models<span class="token punctuation">\</span>User</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>Lottery</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Laravel<span class="token punctuation">\</span>Pennant<span class="token punctuation">\</span>Feature</span><span class="token punctuation">;</span>

<span class="token class-name static-context">Feature</span><span class="token operator">::</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;new-api&#39;</span><span class="token punctuation">,</span> <span class="token keyword">fn</span> <span class="token punctuation">(</span><span class="token class-name type-declaration">User</span> <span class="token variable">$user</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">match</span> <span class="token punctuation">(</span><span class="token constant boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">// [tl! remove]</span>
<span class="token class-name static-context">Feature</span><span class="token operator">::</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;new-api&#39;</span><span class="token punctuation">,</span> <span class="token keyword">fn</span> <span class="token punctuation">(</span><span class="token class-name">User</span><span class="token operator">|</span><span class="token keyword type-declaration">null</span> <span class="token variable">$user</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">match</span> <span class="token punctuation">(</span><span class="token constant boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">// [tl! add]</span>
    <span class="token variable">$user</span> <span class="token operator">===</span> <span class="token constant">null</span> <span class="token operator">=&gt;</span> <span class="token constant boolean">true</span><span class="token punctuation">,</span><span class="token comment">// [tl! add]</span>
    <span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token function">isInternalTeamMember</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant boolean">true</span><span class="token punctuation">,</span>
    <span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token function">isHighTrafficCustomer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant boolean">false</span><span class="token punctuation">,</span>
    <span class="token keyword">default</span> <span class="token operator">=&gt;</span> <span class="token class-name static-context">Lottery</span><span class="token operator">::</span><span class="token function">odds</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">/</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><a name="identifying-scope"></a></p><h3 id="identifying-scope" tabindex="-1"><a class="header-anchor" href="#identifying-scope" aria-hidden="true">#</a> Identifying Scope</h3><p>Pennant&#39;s built-in <code>array</code> and <code>database</code> storage drivers know how to properly store scope identifiers for all PHP data types as well as Eloquent models. However, if your application utilizes a third-party Pennant driver, that driver may not know how to properly store an identifier for an Eloquent model or other custom types in your application.</p><p>In light of this, Pennant allows you to format scope values for storage by implementing the <code>FeatureScopeable</code> contract on the objects in your application that are used as Pennant scopes.</p><p>For example, imagine you are using two different feature drivers in a single application: the built-in <code>database</code> driver and a third-party &quot;Flag Rocket&quot; driver. The &quot;Flag Rocket&quot; driver does not know how to properly store an Eloquent model. Instead, it requires a <code>FlagRocketUser</code> instance. By implementing the <code>toFeatureIdentifier</code> defined by the <code>FeatureScopeable</code> contract, we can customize the storable scope value provided to each driver used by our application:</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Models</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">FlagRocket<span class="token punctuation">\</span>FlagRocketUser</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Database<span class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Model</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Laravel<span class="token punctuation">\</span>Pennant<span class="token punctuation">\</span>Contracts<span class="token punctuation">\</span>FeatureScopeable</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name-definition class-name">User</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token keyword">implements</span> <span class="token class-name">FeatureScopeable</span>
<span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * Cast the object to a feature scope identifier for the given driver.
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">toFeatureIdentifier</span><span class="token punctuation">(</span><span class="token keyword type-hint">string</span> <span class="token variable">$driver</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">mixed</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">match</span><span class="token punctuation">(</span><span class="token variable">$driver</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token string single-quoted-string">&#39;database&#39;</span> <span class="token operator">=&gt;</span> <span class="token variable">$this</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">&#39;flag-rocket&#39;</span> <span class="token operator">=&gt;</span> <span class="token class-name static-context">FlagRocketUser</span><span class="token operator">::</span><span class="token function">fromId</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">flag_rocket_id</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><a name="serializing-scope"></a></p><h3 id="serializing-scope" tabindex="-1"><a class="header-anchor" href="#serializing-scope" aria-hidden="true">#</a> Serializing Scope</h3><p>By default, Pennant will use a fully qualified class name when storing a feature associated with an Eloquent model. If you are already using an <a href="./eloquent-relationships#custom-polymorphic-types">Eloquent morph map</a>, you may choose to have Pennant also use the morph map to decouple the stored feature from your application structure.</p><p>To achieve this, after defining your Eloquent morph map in a service provider, you may invoke the <code>Feature</code> facade&#39;s <code>useMorphMap</code> method:</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Database<span class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Relations<span class="token punctuation">\</span>Relation</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Laravel<span class="token punctuation">\</span>Pennant<span class="token punctuation">\</span>Feature</span><span class="token punctuation">;</span>

<span class="token class-name static-context">Relation</span><span class="token operator">::</span><span class="token function">enforceMorphMap</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token string single-quoted-string">&#39;post&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;App\Models\Post&#39;</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">&#39;video&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;App\Models\Video&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name static-context">Feature</span><span class="token operator">::</span><span class="token function">useMorphMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><a name="rich-feature-values"></a></p><h2 id="rich-feature-values" tabindex="-1"><a class="header-anchor" href="#rich-feature-values" aria-hidden="true">#</a> Rich Feature Values</h2><p>Until now, we have primarily shown features as being in a binary state, meaning they are either &quot;active&quot; or &quot;inactive&quot;, but Pennant also allows you to store rich values as well.</p><p>For example, imagine you are testing three new colors for the &quot;Buy now&quot; button of your application. Instead of returning <code>true</code> or <code>false</code> from the feature definition, you may instead return a string:</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>Arr</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Laravel<span class="token punctuation">\</span>Pennant<span class="token punctuation">\</span>Feature</span><span class="token punctuation">;</span>

<span class="token class-name static-context">Feature</span><span class="token operator">::</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;purchase-button&#39;</span><span class="token punctuation">,</span> <span class="token keyword">fn</span> <span class="token punctuation">(</span><span class="token class-name type-declaration">User</span> <span class="token variable">$user</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token class-name static-context">Arr</span><span class="token operator">::</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token string single-quoted-string">&#39;blue-sapphire&#39;</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">&#39;seafoam-green&#39;</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">&#39;tart-orange&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>You may retrieve the value of the <code>purchase-button</code> feature using the <code>value</code> method:</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token variable">$color</span> <span class="token operator">=</span> <span class="token class-name static-context">Feature</span><span class="token operator">::</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;purchase-button&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Pennant&#39;s included Blade directive also makes it easy to conditionally render content based on the current value of the feature:</p><div class="language-blade line-numbers-mode" data-ext="blade"><pre class="language-blade"><code>@feature(&#39;purchase-button&#39;, &#39;blue-sapphire&#39;)
    &lt;!-- &#39;blue-sapphire&#39; is active --&gt;
@elsefeature(&#39;purchase-button&#39;, &#39;seafoam-green&#39;)
    &lt;!-- &#39;seafoam-green&#39; is active --&gt;
@elsefeature(&#39;purchase-button&#39;, &#39;tart-orange&#39;)
    &lt;!-- &#39;tart-orange&#39; is active --&gt;
@endfeature
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><strong>Note</strong> When using rich values, it is important to know that a feature is considered &quot;active&quot; when it has any value other than <code>false</code>.</p></blockquote><p>When calling the <a href="#conditional-execution">conditional <code>when</code></a> method, the feature&#39;s rich value will be provided to the first closure:</p><pre><code>Feature::when(&#39;purchase-button&#39;,
    fn ($color) =&gt; /* ... */,
    fn () =&gt; /* ... */,
);
</code></pre><p>Likewise, when calling the conditional <code>unless</code> method, the feature&#39;s rich value will be provided to the optional second closure:</p><pre><code>Feature::unless(&#39;purchase-button&#39;,
    fn () =&gt; /* ... */,
    fn ($color) =&gt; /* ... */,
);
</code></pre><p><a name="retrieving-multiple-features"></a></p><h2 id="retrieving-multiple-features" tabindex="-1"><a class="header-anchor" href="#retrieving-multiple-features" aria-hidden="true">#</a> Retrieving Multiple Features</h2><p>The <code>values</code> method allows the retrieval of multiple features for a given scope:</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token class-name static-context">Feature</span><span class="token operator">::</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;billing-v2&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;purchase-button&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// [</span>
<span class="token comment">//     &#39;billing-v2&#39; =&gt; false,</span>
<span class="token comment">//     &#39;purchase-button&#39; =&gt; &#39;blue-sapphire&#39;,</span>
<span class="token comment">// ]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Or, you may use the <code>all</code> method to retrieve the values of all defined features for a given scope:</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token class-name static-context">Feature</span><span class="token operator">::</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// [</span>
<span class="token comment">//     &#39;billing-v2&#39; =&gt; false,</span>
<span class="token comment">//     &#39;purchase-button&#39; =&gt; &#39;blue-sapphire&#39;,</span>
<span class="token comment">//     &#39;site-redesign&#39; =&gt; true,</span>
<span class="token comment">// ]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>However, class based features are dynamically registered and are not known by Pennant until they are explicitly checked. This means your application&#39;s class based features may not appear in the results returned by the <code>all</code> method if they have not already been checked during the current request.</p><p>If you would like to ensure that feature classes are always included when using the <code>all</code> method, you may use Pennant&#39;s feature discovery capabilities. To get started, invoke the <code>discover</code> method in one of your application&#39;s service providers:</p><pre><code>&lt;?php

namespace App\Providers;

use Illuminate\Support\ServiceProvider;
use Laravel\Pennant\Feature;

class AppServiceProvider extends ServiceProvider
{
    /**
     * Bootstrap any application services.
     */
    public function boot(): void
    {
        Feature::discover();

        // ...
    }
}
</code></pre><p>The <code>discover</code> method will register all of the feature classes in your application&#39;s <code>app/Features</code> directory. The <code>all</code> method will now include these classes in its results, regardless of whether they have been checked during the current request:</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token class-name static-context">Feature</span><span class="token operator">::</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// [</span>
<span class="token comment">//     &#39;App\Features\NewApi&#39; =&gt; true,</span>
<span class="token comment">//     &#39;billing-v2&#39; =&gt; false,</span>
<span class="token comment">//     &#39;purchase-button&#39; =&gt; &#39;blue-sapphire&#39;,</span>
<span class="token comment">//     &#39;site-redesign&#39; =&gt; true,</span>
<span class="token comment">// ]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><a name="eager-loading"></a></p><h2 id="eager-loading" tabindex="-1"><a class="header-anchor" href="#eager-loading" aria-hidden="true">#</a> Eager Loading</h2><p>Although Pennant keeps an in-memory cache of all resolved features for a single request, it is still possible to encounter performance issues. To alleviate this, Pennant offers the ability to eager load feature values.</p><p>To illustrate this, imagine that we are checking if a feature is active within a loop:</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Laravel<span class="token punctuation">\</span>Pennant<span class="token punctuation">\</span>Feature</span><span class="token punctuation">;</span>

<span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$users</span> <span class="token keyword">as</span> <span class="token variable">$user</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name static-context">Feature</span><span class="token operator">::</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">active</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;notifications-beta&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RegistrationSuccess</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Assuming we are using the database driver, this code will execute a database query for every user in the loop - executing potentially hundreds of queries. However, using Pennant&#39;s <code>load</code> method, we can remove this potential performance bottleneck by eager loading the feature values for a collection of users or scopes:</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token class-name static-context">Feature</span><span class="token operator">::</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token variable">$users</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;notifications-beta&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$users</span> <span class="token keyword">as</span> <span class="token variable">$user</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name static-context">Feature</span><span class="token operator">::</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">active</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;notifications-beta&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RegistrationSuccess</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>To load feature values only when they have not already been loaded, you may use the <code>loadMissing</code> method:</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token class-name static-context">Feature</span><span class="token operator">::</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token variable">$users</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">loadMissing</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token string single-quoted-string">&#39;new-api&#39;</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">&#39;purchase-button&#39;</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">&#39;notifications-beta&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><a name="updating-values"></a></p><h2 id="updating-values" tabindex="-1"><a class="header-anchor" href="#updating-values" aria-hidden="true">#</a> Updating Values</h2><p>When a feature&#39;s value is resolved for the first time, the underlying driver will store the result in storage. This is often necessary to ensure a consistent experience for your users across requests. However, at times, you may want to manually update the feature&#39;s stored value.</p><p>To accomplish this, you may use the <code>activate</code> and <code>deactivate</code> methods to toggle a feature &quot;on&quot; or &quot;off&quot;:</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Laravel<span class="token punctuation">\</span>Pennant<span class="token punctuation">\</span>Feature</span><span class="token punctuation">;</span>

<span class="token comment">// Activate the feature for the default scope...</span>
<span class="token class-name static-context">Feature</span><span class="token operator">::</span><span class="token function">activate</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;new-api&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Deactivate the feature for the given scope...</span>
<span class="token class-name static-context">Feature</span><span class="token operator">::</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token property">team</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">deactivate</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;billing-v2&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>It is also possible to manually set a rich value for a feature by providing a second argument to the <code>activate</code> method:</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token class-name static-context">Feature</span><span class="token operator">::</span><span class="token function">activate</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;purchase-button&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;seafoam-green&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>To instruct Pennant to forget the stored value for a feature, you may use the <code>forget</code> method. When the feature is checked again, Pennant will resolve the feature&#39;s value from its feature definition:</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token class-name static-context">Feature</span><span class="token operator">::</span><span class="token function">forget</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;purchase-button&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><a name="bulk-updates"></a></p><h3 id="bulk-updates" tabindex="-1"><a class="header-anchor" href="#bulk-updates" aria-hidden="true">#</a> Bulk Updates</h3><p>To update stored feature values in bulk, you may use the <code>activateForEveryone</code> and <code>deactivateForEveryone</code> methods.</p><p>For example, imagine you are now confident in the <code>new-api</code> feature&#39;s stability and have landed on the best <code>&#39;purchase-button&#39;</code> color for your checkout flow - you can update the stored value for all users accordingly:</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Laravel<span class="token punctuation">\</span>Pennant<span class="token punctuation">\</span>Feature</span><span class="token punctuation">;</span>

<span class="token class-name static-context">Feature</span><span class="token operator">::</span><span class="token function">activateForEveryone</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;new-api&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name static-context">Feature</span><span class="token operator">::</span><span class="token function">activateForEveryone</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;purchase-button&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;seafoam-green&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Alternatively, you may deactivate the feature for all users:</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token class-name static-context">Feature</span><span class="token operator">::</span><span class="token function">deactivateForEveryone</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;new-api&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p><strong>Note</strong> This will only update the resolved feature values that have been stored by Pennant&#39;s storage driver. You will also need to update the feature definition in your application.</p></blockquote><p><a name="purging-features"></a></p><h3 id="purging-features" tabindex="-1"><a class="header-anchor" href="#purging-features" aria-hidden="true">#</a> Purging Features</h3><p>Sometimes, it can be useful to purge an entire feature from storage. This is typically necessary if you have removed the feature from your application or you have made adjustments to the feature&#39;s definition that you would like to rollout to all users.</p><p>You may remove all stored values for a feature using the <code>purge</code> method:</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token comment">// Purging a single feature...</span>
<span class="token class-name static-context">Feature</span><span class="token operator">::</span><span class="token function">purge</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;new-api&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Purging multiple features...</span>
<span class="token class-name static-context">Feature</span><span class="token operator">::</span><span class="token function">purge</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;new-api&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;purchase-button&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>If you would like to purge <em>all</em> features from storage, you may invoke the <code>purge</code> method without any arguments:</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token class-name static-context">Feature</span><span class="token operator">::</span><span class="token function">purge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>As it can be useful to purge features as part of your application&#39;s deployment pipeline, Pennant includes a <code>pennant:purge</code> Artisan command:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>php artisan pennant:purge new-api

php artisan pennant:purge new-api purchase-button
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><a name="testing"></a></p><h2 id="testing" tabindex="-1"><a class="header-anchor" href="#testing" aria-hidden="true">#</a> Testing</h2><p>When testing code that interacts with feature flags, the easiest way to control the feature flag&#39;s returned value in your tests is to simply re-define the feature. For example, imagine you have the following feature defined in one of your application&#39;s service provider:</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>Arr</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Laravel<span class="token punctuation">\</span>Pennant<span class="token punctuation">\</span>Feature</span><span class="token punctuation">;</span>

<span class="token class-name static-context">Feature</span><span class="token operator">::</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;purchase-button&#39;</span><span class="token punctuation">,</span> <span class="token keyword">fn</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token class-name static-context">Arr</span><span class="token operator">::</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token string single-quoted-string">&#39;blue-sapphire&#39;</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">&#39;seafoam-green&#39;</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">&#39;tart-orange&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>To modify the feature&#39;s returned value in your tests, you may re-define the feature at the beginning of the test. The following test will always pass, even though the <code>Arr::random()</code> implementation is still present in the service provider:</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Laravel<span class="token punctuation">\</span>Pennant<span class="token punctuation">\</span>Feature</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">test_it_can_control_feature_values</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name static-context">Feature</span><span class="token operator">::</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;purchase-button&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;seafoam-green&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">assertSame</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;seafoam-green&#39;</span><span class="token punctuation">,</span> <span class="token class-name static-context">Feature</span><span class="token operator">::</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;purchase-button&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The same approach may be used for class based features:</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Features<span class="token punctuation">\</span>NewApi</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Laravel<span class="token punctuation">\</span>Pennant<span class="token punctuation">\</span>Feature</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">test_it_can_control_feature_values</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name static-context">Feature</span><span class="token operator">::</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token class-name static-context">NewApi</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token constant boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">assertTrue</span><span class="token punctuation">(</span><span class="token class-name static-context">Feature</span><span class="token operator">::</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token class-name static-context">NewApi</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>If your feature is returning a <code>Lottery</code> instance, there are a handful of useful <a href="./helpers#testing-lotteries">testing helpers available</a>.</p><p><a name="store-configuration"></a></p><h4 id="store-configuration" tabindex="-1"><a class="header-anchor" href="#store-configuration" aria-hidden="true">#</a> Store Configuration</h4><p>You may configure the store that Pennant will use during testing by defining the <code>PENNANT_STORE</code> environment variable in your application&#39;s <code>phpunit.xml</code> file:</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>phpunit</span> <span class="token attr-name">colors</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- ... --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>php</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>env</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>PENNANT_STORE<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>array<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token comment">&lt;!-- ... --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>php</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>phpunit</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><a name="adding-custom-pennant-drivers"></a></p><h2 id="adding-custom-pennant-drivers" tabindex="-1"><a class="header-anchor" href="#adding-custom-pennant-drivers" aria-hidden="true">#</a> Adding Custom Pennant Drivers</h2><p><a name="implementing-the-driver"></a></p><h4 id="implementing-the-driver" tabindex="-1"><a class="header-anchor" href="#implementing-the-driver" aria-hidden="true">#</a> Implementing The Driver</h4><p>If none of Pennant&#39;s existing storage drivers fit your application&#39;s needs, you may write your own storage driver. Your custom driver should implement the <code>Laravel\Pennant\Contracts\Driver</code> interface:</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Extensions</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Laravel<span class="token punctuation">\</span>Pennant<span class="token punctuation">\</span>Contracts<span class="token punctuation">\</span>Driver</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name-definition class-name">RedisFeatureDriver</span> <span class="token keyword">implements</span> <span class="token class-name">Driver</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">define</span><span class="token punctuation">(</span><span class="token keyword type-hint">string</span> <span class="token variable">$feature</span><span class="token punctuation">,</span> <span class="token keyword type-hint">callable</span> <span class="token variable">$resolver</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">void</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">defined</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">array</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">getAll</span><span class="token punctuation">(</span><span class="token keyword type-hint">array</span> <span class="token variable">$features</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">array</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">get</span><span class="token punctuation">(</span><span class="token keyword type-hint">string</span> <span class="token variable">$feature</span><span class="token punctuation">,</span> <span class="token keyword type-hint">mixed</span> <span class="token variable">$scope</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">mixed</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">set</span><span class="token punctuation">(</span><span class="token keyword type-hint">string</span> <span class="token variable">$feature</span><span class="token punctuation">,</span> <span class="token keyword type-hint">mixed</span> <span class="token variable">$scope</span><span class="token punctuation">,</span> <span class="token keyword type-hint">mixed</span> <span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">void</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">setForAllScopes</span><span class="token punctuation">(</span><span class="token keyword type-hint">string</span> <span class="token variable">$feature</span><span class="token punctuation">,</span> <span class="token keyword type-hint">mixed</span> <span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">void</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">delete</span><span class="token punctuation">(</span><span class="token keyword type-hint">string</span> <span class="token variable">$feature</span><span class="token punctuation">,</span> <span class="token keyword type-hint">mixed</span> <span class="token variable">$scope</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">void</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">purge</span><span class="token punctuation">(</span><span class="token keyword type-declaration">array</span><span class="token operator">|</span><span class="token keyword type-declaration">null</span> <span class="token variable">$features</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">void</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Now, we just need to implement each of these methods using a Redis connection. For an example of how to implement each of these methods, take a look at the <code>Laravel\Pennant\Drivers\DatabaseDriver</code> in the <a href="https://github.com/laravel/pennant/blob/1.x/src/Drivers/DatabaseDriver.php" target="_blank" rel="noopener noreferrer">Pennant source code<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><blockquote><p><strong>Note</strong> Laravel does not ship with a directory to contain your extensions. You are free to place them anywhere you like. In this example, we have created an <code>Extensions</code> directory to house the <code>RedisFeatureDriver</code>.</p></blockquote><p><a name="registering-the-driver"></a></p><h4 id="registering-the-driver" tabindex="-1"><a class="header-anchor" href="#registering-the-driver" aria-hidden="true">#</a> Registering The Driver</h4><p>Once your driver has been implemented, you are ready to register it with Laravel. To add additional drivers to Pennant, you may use the <code>extend</code> method provided by the <code>Feature</code> facade. You should call the <code>extend</code> method from the <code>boot</code> method of one of your application&#39;s <a href="./providers">service provider</a>:</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Providers</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Extensions<span class="token punctuation">\</span>RedisFeatureDriver</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Contracts<span class="token punctuation">\</span>Foundation<span class="token punctuation">\</span>Application</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>ServiceProvider</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Laravel<span class="token punctuation">\</span>Pennant<span class="token punctuation">\</span>Feature</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name-definition class-name">AppServiceProvider</span> <span class="token keyword">extends</span> <span class="token class-name">ServiceProvider</span>
<span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * Register any application services.
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">register</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">void</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * Bootstrap any application services.
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">boot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">void</span>
    <span class="token punctuation">{</span>
        <span class="token class-name static-context">Feature</span><span class="token operator">::</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;redis&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token class-name type-declaration">Application</span> <span class="token variable">$app</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RedisFeatureDriver</span><span class="token punctuation">(</span><span class="token variable">$app</span><span class="token operator">-&gt;</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;redis&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token variable">$app</span><span class="token operator">-&gt;</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;events&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Once the driver has been registered, you may use the <code>redis</code> driver in your application&#39;s <code>config/pennant.php</code> configuration file:</p><pre><code>&#39;stores&#39; =&gt; [

    &#39;redis&#39; =&gt; [
        &#39;driver&#39; =&gt; &#39;redis&#39;,
        &#39;connection&#39; =&gt; null,
    ],

    // ...

],
</code></pre><p><a name="events"></a></p><h2 id="events" tabindex="-1"><a class="header-anchor" href="#events" aria-hidden="true">#</a> Events</h2><p>Pennant dispatches a variety of events that can be useful when tracking feature flags throughout your application.</p><h3 id="laravel-pennant-events-retrievingknownfeature" tabindex="-1"><a class="header-anchor" href="#laravel-pennant-events-retrievingknownfeature" aria-hidden="true">#</a> <code>Laravel\Pennant\Events\RetrievingKnownFeature</code></h3><p>This event is dispatched the first time a known feature is retrieved during a request for a specific scope. This event can be useful to create and track metrics against the feature flags that are being used throughout your application.</p><h3 id="laravel-pennant-events-retrievingunknownfeature" tabindex="-1"><a class="header-anchor" href="#laravel-pennant-events-retrievingunknownfeature" aria-hidden="true">#</a> <code>Laravel\Pennant\Events\RetrievingUnknownFeature</code></h3><p>This event is dispatched the first time an unknown feature is retrieved during a request for a specific scope. This event can be useful if you have intended to remove a feature flag, but may have accidentally left some stray references to it throughout your application.</p><p>For example, you may find it useful to listen for this event and <code>report</code> or throw an exception when it occurs:</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Providers</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Foundation<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>Providers<span class="token punctuation">\</span>EventServiceProvider</span> <span class="token keyword">as</span> ServiceProvider<span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>Facades<span class="token punctuation">\</span>Event</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Laravel<span class="token punctuation">\</span>Pennant<span class="token punctuation">\</span>Events<span class="token punctuation">\</span>RetrievingUnknownFeature</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name-definition class-name">EventServiceProvider</span> <span class="token keyword">extends</span> <span class="token class-name">ServiceProvider</span>
<span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * Register any other events for your application.
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">boot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">void</span>
    <span class="token punctuation">{</span>
        <span class="token class-name static-context">Event</span><span class="token operator">::</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token class-name type-declaration">RetrievingUnknownFeature</span> <span class="token variable">$event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">report</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;Resolving unknown feature [<span class="token interpolation"><span class="token punctuation">{</span><span class="token variable">$event</span><span class="token operator">-&gt;</span><span class="token property">feature</span><span class="token punctuation">}</span></span>].&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="laravel-pennant-events-dynamicallydefiningfeature" tabindex="-1"><a class="header-anchor" href="#laravel-pennant-events-dynamicallydefiningfeature" aria-hidden="true">#</a> <code>Laravel\Pennant\Events\DynamicallyDefiningFeature</code></h3><p>This event is dispatched when a class based feature is being dynamically checked for the first time during a request.</p></div><!----><footer class="page-meta"><!----><div class="meta-item git-info"><div class="update-time"><span class="label">Last update: </span><!----></div><div class="contributors"><span class="label">Contributors: </span><!--[--><!--[--><span class="contributor" title="email: 554676262@qq.com">Moments</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a aria-label="Laravel Passport" class="vp-link nav-link prev nav-link prev" href="/laravel/guide/passport.html"><div class="hint"><span class="arrow start"></span>Prev</div><div class="link"><!---->Laravel Passport</div></a><a aria-label="Laravel Pint" class="vp-link nav-link next nav-link next" href="/laravel/guide/pint.html"><div class="hint">Next<span class="arrow end"></span></div><div class="link">Laravel Pint<!----></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper"><!----><div class="vp-copyright">Copyright © 2023 Moments</div></footer></div><!--]--><!--]--><!----><!--]--></div>
    <script type="module" src="/laravel/assets/app-06635a3b.js" defer></script>
  </body>
</html>
