const l=JSON.parse('{"key":"v-fb5e1448","path":"/zh/guide/queues.html","title":"队列","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"简介","slug":"简介","link":"#简介","children":[{"level":3,"title":"连接 Vs. 驱动","slug":"连接-vs-驱动","link":"#连接-vs-驱动","children":[]},{"level":3,"title":"驱动程序说明和先决条件","slug":"驱动程序说明和先决条件","link":"#驱动程序说明和先决条件","children":[{"level":4,"title":"数据库","slug":"数据库","link":"#数据库","children":[]},{"level":4,"title":"Redis","slug":"redis","link":"#redis","children":[]},{"level":4,"title":"其他驱动的先决条件","slug":"其他驱动的先决条件","link":"#其他驱动的先决条件","children":[]}]}]},{"level":2,"title":"创建任务","slug":"创建任务","link":"#创建任务","children":[{"level":3,"title":"生成任务类","slug":"生成任务类","link":"#生成任务类","children":[]},{"level":3,"title":"任务类结构","slug":"任务类结构","link":"#任务类结构","children":[{"level":4,"title":"handle 方法依赖注入","slug":"handle-方法依赖注入","link":"#handle-方法依赖注入","children":[]},{"level":4,"title":"队列关系","slug":"队列关系","link":"#队列关系","children":[]}]},{"level":3,"title":"唯一任务","slug":"唯一任务","link":"#唯一任务","children":[{"level":4,"title":"在任务处理开始前保证唯一","slug":"在任务处理开始前保证唯一","link":"#在任务处理开始前保证唯一","children":[]},{"level":4,"title":"唯一任务锁","slug":"唯一任务锁","link":"#唯一任务锁","children":[]}]}]},{"level":2,"title":"任务中间件","slug":"任务中间件","link":"#任务中间件","children":[{"level":3,"title":"访问限制","slug":"访问限制","link":"#访问限制","children":[]},{"level":3,"title":"防止任务重叠","slug":"防止任务重叠","link":"#防止任务重叠","children":[{"level":4,"title":"跨任务类别共享锁","slug":"跨任务类别共享锁","link":"#跨任务类别共享锁","children":[]}]},{"level":3,"title":"节流限制异常","slug":"节流限制异常","link":"#节流限制异常","children":[]}]},{"level":2,"title":"调度任务","slug":"调度任务","link":"#调度任务","children":[{"level":3,"title":"延迟调度","slug":"延迟调度","link":"#延迟调度","children":[{"level":4,"title":"响应发送到浏览器后调度","slug":"响应发送到浏览器后调度","link":"#响应发送到浏览器后调度","children":[]}]},{"level":3,"title":"同步调度","slug":"同步调度","link":"#同步调度","children":[]},{"level":3,"title":"任务 & 数据库事务","slug":"任务-数据库事务","link":"#任务-数据库事务","children":[{"level":4,"title":"内联指定提交调度","slug":"内联指定提交调度","link":"#内联指定提交调度","children":[]}]},{"level":3,"title":"任务链","slug":"任务链","link":"#任务链","children":[{"level":4,"title":"链式连接 & 队列","slug":"链式连接-队列","link":"#链式连接-队列","children":[]},{"level":4,"title":"链故障","slug":"链故障","link":"#链故障","children":[]}]},{"level":3,"title":"自定义队列 & 连接","slug":"自定义队列-连接","link":"#自定义队列-连接","children":[{"level":4,"title":"分派到特定队列","slug":"分派到特定队列","link":"#分派到特定队列","children":[]},{"level":4,"title":"调度到特定连接","slug":"调度到特定连接","link":"#调度到特定连接","children":[]}]},{"level":3,"title":"指定最大任务尝试 / 超时值","slug":"指定最大任务尝试-超时值","link":"#指定最大任务尝试-超时值","children":[{"level":4,"title":"最大尝试次数","slug":"最大尝试次数","link":"#最大尝试次数","children":[]},{"level":4,"title":"基于时间的尝试","slug":"基于时间的尝试","link":"#基于时间的尝试","children":[]},{"level":4,"title":"最大尝试","slug":"最大尝试","link":"#最大尝试","children":[]},{"level":4,"title":"超时","slug":"超时","link":"#超时","children":[]},{"level":4,"title":"超时失败","slug":"超时失败","link":"#超时失败","children":[]}]},{"level":3,"title":"错误处理","slug":"错误处理","link":"#错误处理","children":[{"level":4,"title":"手动发布","slug":"手动发布","link":"#手动发布","children":[]},{"level":4,"title":"手动使任务失败","slug":"手动使任务失败","link":"#手动使任务失败","children":[]}]}]},{"level":2,"title":"任务批处理","slug":"任务批处理","link":"#任务批处理","children":[{"level":3,"title":"定义可批处理任务","slug":"定义可批处理任务","link":"#定义可批处理任务","children":[]},{"level":3,"title":"调度批次","slug":"调度批次","link":"#调度批次","children":[{"level":4,"title":"命名批次","slug":"命名批次","link":"#命名批次","children":[]},{"level":4,"title":"批处理连接 & 队列","slug":"批处理连接-队列","link":"#批处理连接-队列","children":[]},{"level":4,"title":"批量内链","slug":"批量内链","link":"#批量内链","children":[]}]},{"level":3,"title":"批量添加任务","slug":"批量添加任务","link":"#批量添加任务","children":[]},{"level":3,"title":"校验批处理","slug":"校验批处理","link":"#校验批处理","children":[{"level":4,"title":"从路由返回批次","slug":"从路由返回批次","link":"#从路由返回批次","children":[]}]},{"level":3,"title":"取消批次","slug":"取消批次","link":"#取消批次","children":[]},{"level":3,"title":"批处理失败","slug":"批处理失败","link":"#批处理失败","children":[{"level":4,"title":"允许失败","slug":"允许失败","link":"#允许失败","children":[]},{"level":4,"title":"重试失败的批处理任务","slug":"重试失败的批处理任务","link":"#重试失败的批处理任务","children":[]}]},{"level":3,"title":"修剪批次","slug":"修剪批次","link":"#修剪批次","children":[]}]},{"level":2,"title":"队列闭包","slug":"队列闭包","link":"#队列闭包","children":[]},{"level":2,"title":"运行队列工作者","slug":"运行队列工作者","link":"#运行队列工作者","children":[{"level":3,"title":"queue:work 命令","slug":"queue-work-命令","link":"#queue-work-命令","children":[{"level":4,"title":"运行多个队列进程","slug":"运行多个队列进程","link":"#运行多个队列进程","children":[]},{"level":4,"title":"指定连接 & 队列","slug":"指定连接-队列","link":"#指定连接-队列","children":[]},{"level":4,"title":"Processing A Specified Number Of Jobs","slug":"processing-a-specified-number-of-jobs","link":"#processing-a-specified-number-of-jobs","children":[]},{"level":4,"title":"处理所有排队的任务然后退出","slug":"处理所有排队的任务然后退出","link":"#处理所有排队的任务然后退出","children":[]},{"level":4,"title":"在给定的秒数内处理任务","slug":"在给定的秒数内处理任务","link":"#在给定的秒数内处理任务","children":[]},{"level":4,"title":"进程睡眠时间","slug":"进程睡眠时间","link":"#进程睡眠时间","children":[]},{"level":4,"title":"资源注意事项","slug":"资源注意事项","link":"#资源注意事项","children":[]}]},{"level":3,"title":"队列优先级","slug":"队列优先级","link":"#队列优先级","children":[]},{"level":3,"title":"队列进程 & 部署","slug":"队列进程-部署","link":"#队列进程-部署","children":[]},{"level":3,"title":"任务到期 & 超时","slug":"任务到期-超时","link":"#任务到期-超时","children":[{"level":4,"title":"任务到期","slug":"任务到期","link":"#任务到期","children":[]},{"level":4,"title":"进程超时","slug":"进程超时","link":"#进程超时","children":[]}]}]},{"level":2,"title":"Supervisor 配置","slug":"supervisor-配置","link":"#supervisor-配置","children":[{"level":4,"title":"安装 Supervisor","slug":"安装-supervisor","link":"#安装-supervisor","children":[]},{"level":4,"title":"配置 Supervisor","slug":"配置-supervisor","link":"#配置-supervisor","children":[]},{"level":4,"title":"开始 Supervisor","slug":"开始-supervisor","link":"#开始-supervisor","children":[]}]},{"level":2,"title":"处理失败的任务","slug":"处理失败的任务","link":"#处理失败的任务","children":[{"level":3,"title":"任务失败后清理","slug":"任务失败后清理","link":"#任务失败后清理","children":[]},{"level":3,"title":"重试失败的任务","slug":"重试失败的任务","link":"#重试失败的任务","children":[]},{"level":3,"title":"忽略缺失的模型","slug":"忽略缺失的模型","link":"#忽略缺失的模型","children":[]},{"level":3,"title":"删除失败的任务","slug":"删除失败的任务","link":"#删除失败的任务","children":[]},{"level":3,"title":"在 DynamoDB 中存储失败的任务","slug":"在-dynamodb-中存储失败的任务","link":"#在-dynamodb-中存储失败的任务","children":[]},{"level":3,"title":"禁用失败的任务存储","slug":"禁用失败的任务存储","link":"#禁用失败的任务存储","children":[]},{"level":3,"title":"失败的任务事件","slug":"失败的任务事件","link":"#失败的任务事件","children":[]}]},{"level":2,"title":"从队列中清除任务","slug":"从队列中清除任务","link":"#从队列中清除任务","children":[]},{"level":2,"title":"监控你的队列","slug":"监控你的队列","link":"#监控你的队列","children":[]},{"level":2,"title":"测试","slug":"测试","link":"#测试","children":[{"level":3,"title":"伪造任务的一个子集","slug":"伪造任务的一个子集","link":"#伪造任务的一个子集","children":[]},{"level":3,"title":"测试任务链","slug":"测试任务链","link":"#测试任务链","children":[]},{"level":3,"title":"测试任务批处理","slug":"测试任务批处理","link":"#测试任务批处理","children":[{"level":4,"title":"测试任务 / 批处理交互","slug":"测试任务-批处理交互","link":"#测试任务-批处理交互","children":[]}]}]},{"level":2,"title":"任务事件","slug":"任务事件","link":"#任务事件","children":[]}],"git":{"createdTime":null,"updatedTime":null,"contributors":[]},"readingTime":{"minutes":59.72,"words":17915},"filePathRelative":"zh/guide/queues.md","excerpt":"<h1> 队列</h1>\\n<ul>\\n<li><a href=\\"#introduction\\">简介</a>\\n<ul>\\n<li><a href=\\"#connections-vs-queues\\">连接 Vs. 驱动</a></li>\\n<li><a href=\\"#driver-prerequisites\\">驱动程序说明 &amp; 先决条件</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"#creating-jobs\\">创建任务</a>\\n<ul>\\n<li><a href=\\"#generating-job-classes\\">生成任务类</a></li>\\n<li><a href=\\"#class-structure\\">任务类结构</a></li>\\n<li><a href=\\"#unique-jobs\\">唯一任务</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"#job-middleware\\">任务中间件</a>\\n<ul>\\n<li><a href=\\"#rate-limiting\\">访问限制</a></li>\\n<li><a href=\\"#preventing-job-overlaps\\">防止任务重复</a></li>\\n<li><a href=\\"#throttling-exceptions\\">限制异常</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"#dispatching-jobs\\">任务调度</a>\\n<ul>\\n<li><a href=\\"#delayed-dispatching\\">延迟调度</a></li>\\n<li><a href=\\"#synchronous-dispatching\\">同步调度</a></li>\\n<li><a href=\\"#jobs-and-database-transactions\\">任务 &amp; 数据库事务</a></li>\\n<li><a href=\\"#job-chaining\\">任务链</a></li>\\n<li><a href=\\"#customizing-the-queue-and-connection\\">自定义队列 &amp; 连接</a></li>\\n<li><a href=\\"#max-job-attempts-and-timeout\\">指定任务最大尝试次数 / 超时值</a></li>\\n<li><a href=\\"#error-handling\\">错误处理</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"#job-batching\\">任务批处理</a>\\n<ul>\\n<li><a href=\\"#defining-batchable-jobs\\">定义可批处理任务</a></li>\\n<li><a href=\\"#dispatching-batches\\">分派批处理</a></li>\\n<li><a href=\\"#adding-jobs-to-batches\\">将任务添加到批处理</a></li>\\n<li><a href=\\"#inspecting-batches\\">校验批处理</a></li>\\n<li><a href=\\"#cancelling-batches\\">取消批处理</a></li>\\n<li><a href=\\"#batch-failures\\">批处理失败</a></li>\\n<li><a href=\\"#pruning-batches\\">批量清理</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"#queueing-closures\\">队列闭包</a></li>\\n<li><a href=\\"#running-the-queue-worker\\">运行队列处理器</a>\\n<ul>\\n<li><a href=\\"#the-queue-work-command\\"><code>queue:work</code> 命令</a></li>\\n<li><a href=\\"#queue-priorities\\">队列优先级</a></li>\\n<li><a href=\\"#queue-workers-and-deployment\\">队列处理器 &amp; 部署</a></li>\\n<li><a href=\\"#job-expirations-and-timeouts\\">任务过期 &amp; 超时</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"#supervisor-configuration\\">Supervisor 配置</a></li>\\n<li><a href=\\"#dealing-with-failed-jobs\\">处理失败任务</a>\\n<ul>\\n<li><a href=\\"#cleaning-up-after-failed-jobs\\">清理失败任务</a></li>\\n<li><a href=\\"#retrying-failed-jobs\\">重试失败任务</a></li>\\n<li><a href=\\"#ignoring-missing-models\\">忽略缺失的模型</a></li>\\n<li><a href=\\"#pruning-failed-jobs\\">清理失败的任务</a></li>\\n<li><a href=\\"#storing-failed-jobs-in-dynamodb\\">在 DynamoDB 中存储失败的任务</a></li>\\n<li><a href=\\"#disabling-failed-job-storage\\">禁用失败的任务存储</a></li>\\n<li><a href=\\"#failed-job-events\\">任务失败事件</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"#clearing-jobs-from-queues\\">清理队列任务</a></li>\\n<li><a href=\\"#monitoring-your-queues\\">监控你的队列</a></li>\\n<li><a href=\\"#testing\\">测试</a>\\n<ul>\\n<li><a href=\\"#faking-a-subset-of-jobs\\">伪造任务的一个子集</a></li>\\n<li><a href=\\"#testing-job-chains\\">测试任务链</a></li>\\n<li><a href=\\"#testing-job-batches\\">测试任务批处理</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"#job-events\\">任务事件</a></li>\\n</ul>"}');export{l as data};
